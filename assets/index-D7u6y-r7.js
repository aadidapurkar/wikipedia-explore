(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var RS=function(r,e){return RS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},RS(r,e)};function p_(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");RS(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Yl=function(){return Yl=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Yl.apply(this,arguments)};function OU(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function RU(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(d){o(d)}}function u(c){try{l(n.throw(c))}catch(d){o(d)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function sV(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Us(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ks(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return a}function Xl(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function bo(r){return this instanceof bo?(this.v=r,this):new bo(r)}function $U(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(v){return Promise.resolve(v).then(f,d)}}function s(f,v){n[f]&&(i[f]=function(p){return new Promise(function(y,g){a.push([f,p,y,g])>1||u(f,p)})},v&&(i[f]=v(i[f])))}function u(f,v){try{l(n[f](v))}catch(p){h(a[0][3],p)}}function l(f){f.value instanceof bo?Promise.resolve(f.value.v).then(c,d):h(a[0][2],f)}function c(f){u("next",f)}function d(f){u("throw",f)}function h(f,v){f(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}function DU(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Us=="function"?Us(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=r[a]&&function(o){return new Promise(function(s,u){o=r[a](o),i(s,u,o.done,o.value)})}}function i(a,o,s,u){Promise.resolve(u).then(function(l){a({value:l,done:s})},o)}}function ht(r){return typeof r=="function"}function AU(r){var e=function(n){Error.call(n),n.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Cd=AU(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function rx(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}var g_=(function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,n,i,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=Us(o),u=s.next();!u.done;u=s.next()){var l=u.value;l.remove(this)}}catch(p){e={error:p}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(ht(c))try{c()}catch(p){a=p instanceof Cd?p.errors:[p]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=Us(d),f=h.next();!f.done;f=h.next()){var v=f.value;try{nx(v)}catch(p){a=a??[],p instanceof Cd?a=Xl(Xl([],Ks(a)),Ks(p.errors)):a.push(p)}}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(a)throw new Cd(a)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)nx(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&rx(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&rx(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=(function(){var e=new r;return e.closed=!0,e})(),r})();g_.EMPTY;function uV(r){return r instanceof g_||r&&"closed"in r&&ht(r.remove)&&ht(r.add)&&ht(r.unsubscribe)}function nx(r){ht(r)?r():r.unsubscribe()}var qU={Promise:void 0},kU={setTimeout:function(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,Xl([r,e],Ks(t)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function lV(r){kU.setTimeout(function(){throw r})}function ix(){}function MU(r){r()}var y_=(function(r){p_(e,r);function e(t){var n=r.call(this)||this;return n.isStopped=!1,t?(n.destination=t,uV(t)&&t.add(n)):n.destination=NU,n}return e.create=function(t,n,i){return new $S(t,n,i)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(g_),BU=(function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){hl(n)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){hl(n)}else hl(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){hl(t)}},r})(),$S=(function(r){p_(e,r);function e(t,n,i){var a=r.call(this)||this,o;return ht(t)||!t?o={next:t??void 0,error:n??void 0,complete:i??void 0}:o=t,a.destination=new BU(o),a}return e})(y_);function hl(r){lV(r)}function FU(r){throw r}var NU={closed:!0,next:ix,error:FU,complete:ix};function Cn(r,e,t,n,i){return new LU(r,e,t,n,i)}var LU=(function(r){p_(e,r);function e(t,n,i,a,o,s){var u=r.call(this,t)||this;return u.onFinalize=o,u.shouldUnsubscribe=s,u._next=n?function(l){try{n(l)}catch(c){t.error(c)}}:r.prototype._next,u._error=a?function(l){try{a(l)}catch(c){t.error(c)}finally{this.unsubscribe()}}:r.prototype._error,u._complete=i?function(){try{i()}catch(l){t.error(l)}finally{this.unsubscribe()}}:r.prototype._complete,u}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e})(y_),m_=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function cV(r){return r}function zU(r){return r.length===0?cV:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var Zr=(function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this,a=VU(e)?e:new $S(e,t,n);return MU(function(){var o=i,s=o.operator,u=o.source;a.add(s?s.call(a,u):u?i._subscribe(a):i._trySubscribe(a))}),a},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var n=this;return t=ax(t),new t(function(i,a){var o=new $S({next:function(s){try{e(s)}catch(u){a(u),o.unsubscribe()}},error:a,complete:i});n.subscribe(o)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[m_]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zU(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=ax(e),new e(function(n,i){var a;t.subscribe(function(o){return a=o},function(o){return i(o)},function(){return n(a)})})},r.create=function(e){return new r(e)},r})();function ax(r){var e;return(e=r??qU.Promise)!==null&&e!==void 0?e:Promise}function jU(r){return r&&ht(r.next)&&ht(r.error)&&ht(r.complete)}function VU(r){return r&&r instanceof y_||jU(r)&&uV(r)}var b_=(function(r){return r&&typeof r.length=="number"&&typeof r!="function"});function dV(r){return ht(r?.then)}function hV(r){return ht(r[m_])}function fV(r){return Symbol.asyncIterator&&ht(r?.[Symbol.asyncIterator])}function vV(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function WU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pV=WU();function gV(r){return ht(r?.[pV])}function yV(r){return $U(this,arguments,function(){var t,n,i,a;return sV(this,function(o){switch(o.label){case 0:t=r.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,bo(t.read())];case 3:return n=o.sent(),i=n.value,a=n.done,a?[4,bo(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,bo(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function mV(r){return ht(r?.getReader)}function On(r){if(r instanceof Zr)return r;if(r!=null){if(hV(r))return HU(r);if(b_(r))return GU(r);if(dV(r))return UU(r);if(fV(r))return bV(r);if(gV(r))return KU(r);if(mV(r))return YU(r)}throw vV(r)}function HU(r){return new Zr(function(e){var t=r[m_]();if(ht(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GU(r){return new Zr(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function UU(r){return new Zr(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,lV)})}function KU(r){return new Zr(function(e){var t,n;try{for(var i=Us(r),a=i.next();!a.done;a=i.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}e.complete()})}function bV(r){return new Zr(function(e){XU(r,e).catch(function(t){return e.error(t)})})}function YU(r){return bV(yV(r))}function XU(r,e){var t,n,i,a;return RU(this,void 0,void 0,function(){var o,s;return sV(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),t=DU(r),u.label=1;case 1:return[4,t.next()];case 2:if(n=u.sent(),!!n.done)return[3,4];if(o=n.value,e.next(o),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),i={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(a=t.return)?[4,a.call(t)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function ZU(r,e){e===void 0&&(e={});var t=e.selector,n=OU(e,["selector"]);return new Zr(function(i){var a=new AbortController,o=a.signal,s=!0,u=n.signal;if(u)if(u.aborted)a.abort();else{var l=function(){o.aborted||a.abort()};u.addEventListener("abort",l),i.add(function(){return u.removeEventListener("abort",l)})}var c=Yl(Yl({},n),{signal:o}),d=function(h){s=!1,i.error(h)};return fetch(r,c).then(function(h){t?On(t(h)).subscribe(Cn(i,void 0,function(){s=!1,i.complete()},d)):(s=!1,i.next(h),i.complete())}).catch(d),function(){s&&a.abort()}})}function QU(r){return ht(r?.lift)}function ki(r){return function(e){if(QU(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}var JU=new Zr(function(r){return r.complete()});function eK(r){return r&&ht(r.schedule)}function wV(r){return r[r.length-1]}function EV(r){return eK(wV(r))?r.pop():void 0}function tK(r,e){return typeof wV(r)=="number"?r.pop():e}function la(r,e,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var a=e.schedule(function(){t(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(a),!i)return a}function SV(r,e){return e===void 0&&(e=0),ki(function(t,n){t.subscribe(Cn(n,function(i){return la(n,r,function(){return n.next(i)},e)},function(){return la(n,r,function(){return n.complete()},e)},function(i){return la(n,r,function(){return n.error(i)},e)}))})}function _V(r,e){return e===void 0&&(e=0),ki(function(t,n){n.add(r.schedule(function(){return t.subscribe(n)},e))})}function rK(r,e){return On(r).pipe(_V(e),SV(e))}function nK(r,e){return On(r).pipe(_V(e),SV(e))}function iK(r,e){return new Zr(function(t){var n=0;return e.schedule(function(){n===r.length?t.complete():(t.next(r[n++]),t.closed||this.schedule())})})}function aK(r,e){return new Zr(function(t){var n;return la(t,e,function(){n=r[pV](),la(t,e,function(){var i,a,o;try{i=n.next(),a=i.value,o=i.done}catch(s){t.error(s);return}o?t.complete():t.next(a)},0,!0)}),function(){return ht(n?.return)&&n.return()}})}function TV(r,e){if(!r)throw new Error("Iterable cannot be null");return new Zr(function(t){la(t,e,function(){var n=r[Symbol.asyncIterator]();la(t,e,function(){n.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}function oK(r,e){return TV(yV(r),e)}function sK(r,e){if(r!=null){if(hV(r))return rK(r,e);if(b_(r))return iK(r,e);if(dV(r))return nK(r,e);if(fV(r))return TV(r,e);if(gV(r))return aK(r,e);if(mV(r))return oK(r,e)}throw vV(r)}function xV(r,e){return e?sK(r,e):On(r)}function ox(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=EV(r);return xV(r,t)}function Er(r,e){return ki(function(t,n){var i=0;t.subscribe(Cn(n,function(a){n.next(r.call(e,a,i++))}))})}var uK=Array.isArray;function lK(r,e){return uK(e)?r.apply(void 0,Xl([],Ks(e))):r(e)}function cK(r){return Er(function(e){return lK(r,e)})}function dK(r,e,t,n,i,a,o,s){var u=[],l=0,c=0,d=!1,h=function(){d&&!u.length&&!l&&e.complete()},f=function(p){return l<n?v(p):u.push(p)},v=function(p){l++;var y=!1;On(t(p,c++)).subscribe(Cn(e,function(g){e.next(g)},function(){y=!0},void 0,function(){if(y)try{l--;for(var g=function(){var m=u.shift();o||v(m)};u.length&&l<n;)g();h()}catch(m){e.error(m)}}))};return r.subscribe(Cn(e,f,function(){d=!0,h()})),function(){}}function w_(r,e,t){return t===void 0&&(t=1/0),ht(e)?w_(function(n,i){return Er(function(a,o){return e(n,a,i,o)})(On(r(n,i)))},t):(typeof e=="number"&&(t=e),ki(function(n,i){return dK(n,i,r,t)}))}function hK(r){return r===void 0&&(r=1/0),w_(cV,r)}var fK=["addListener","removeListener"],vK=["addEventListener","removeEventListener"],pK=["on","off"];function Xn(r,e,t,n){if(ht(t)&&(n=t,t=void 0),n)return Xn(r,e,t).pipe(cK(n));var i=Ks(mK(r)?vK.map(function(s){return function(u){return r[s](e,u,t)}}):gK(r)?fK.map(sx(r,e)):yK(r)?pK.map(sx(r,e)):[],2),a=i[0],o=i[1];if(!a&&b_(r))return w_(function(s){return Xn(s,e,t)})(On(r));if(!a)throw new TypeError("Invalid event target");return new Zr(function(s){var u=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return s.next(1<l.length?l:l[0])};return a(u),function(){return o(u)}})}function sx(r,e){return function(t){return function(n){return r[t](e,n)}}}function gK(r){return ht(r.addListener)&&ht(r.removeListener)}function yK(r){return ht(r.on)&&ht(r.off)}function mK(r){return ht(r.addEventListener)&&ht(r.removeEventListener)}function bK(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=EV(r),n=tK(r,1/0),i=r;return i.length?i.length===1?On(i[0]):hK(n)(xV(i,t)):JU}function wK(r,e){return ki(function(t,n){var i=0;t.subscribe(Cn(n,function(a){return r.call(e,a,i++)&&n.next(a)}))})}function PV(r){return ki(function(e,t){var n=null,i=!1,a;n=e.subscribe(Cn(t,void 0,void 0,function(o){a=On(r(o,PV(r)(e))),n?(n.unsubscribe(),n=null,a.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,a.subscribe(t))})}function EK(r,e,t,n,i){return function(a,o){var s=t,u=e,l=0;a.subscribe(Cn(o,function(c){var d=l++;u=s?r(u,c,d):(s=!0,c),o.next(u)},i))}}function SK(r,e){return ki(EK(r,e,arguments.length>=2,!0))}function Zl(r,e){return ki(function(t,n){var i=null,a=0,o=!1,s=function(){return o&&!i&&n.complete()};t.subscribe(Cn(n,function(u){i?.unsubscribe();var l=0,c=a++;On(r(u,c)).subscribe(i=Cn(n,function(d){return n.next(e?e(u,d,c,l++):d)},function(){i=null,s()}))},function(){o=!0,s()}))})}const CV=r=>r.json(),_K=r=>`https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srsearch=${r}&srlimit=1&srprop=snippet&origin=*`,TK=r=>{const e=[...r];for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},ux=["random","default"],xK={topics:[],pref:"default",limit:500,graph:{nodes:[],edges:[]}};class lx{constructor(e){this.limit=e}apply(e){return{...e,limit:this.limit}}}class cx{constructor(e){this.pref=e}apply(e){return{...e,pref:this.pref}}}class PK{constructor(e){this.rootTopic=e}apply(e){return{...e,currTopic:0,topics:[this.rootTopic],graph:{nodes:[{id:this.rootTopic.title,label:this.rootTopic.title,color:"red"}],edges:[]}}}}class CK{constructor(e,t){this.newTopic=e,this.currTopicIndex=t}apply(e){const t=e.topics[this.currTopicIndex],n={id:this.newTopic.title,label:this.newTopic.title},i={id:`${t.title}-${this.newTopic.title}`,from:t.title,to:this.newTopic.title};return{...e,currTopic:this.currTopicIndex+1,topics:e.topics.slice(0,this.currTopicIndex+1).concat(this.newTopic),graph:{nodes:e.graph.nodes.concat([n]),edges:e.graph.edges.concat([i])}}}}class IV{constructor(e){this.changeAmount=e}apply(e){if(e.currTopic===void 0)return e;const n=e.currTopic+this.changeAmount>=0&&e.currTopic+this.changeAmount<=e.topics.length-1?e.currTopic+this.changeAmount:e.currTopic;return{...e,currTopic:n}}}const IK=document.getElementById("inputTopic"),OK=document.getElementsByClassName("topicText")[0],RK=document.getElementById("btnExploreTopic"),$K=document.getElementById("btnBack"),DK=document.getElementById("btnForward"),AK=document.getElementById("subtopicContainer"),dx=document.getElementById("order"),hx=document.getElementById("inputSubtopicLimit"),qK=Xn(hx,"input").pipe(Er(r=>{const e=parseInt(hx.value);return e>0?new lx(e):new lx(100)})),kK=Xn(dx,"change").pipe(Er(r=>{const e=dx.value;return ux.includes(e)?new cx(e):new cx(ux[0])})),MK=Xn($K,"click").pipe(Er(r=>new IV(-1))),BK=Xn(DK,"click").pipe(Er(r=>new IV(1))),FK=Xn(AK,"click").pipe(wK(r=>r.target.tagName.toLowerCase()==="p"),Er(r=>r.target.textContent),Er(r=>[OK.id,r]),Zl(([r,e])=>OV(e).pipe(Er(t=>[parseInt(r),{title:e,subtopics:t}]))),Er(([r,e])=>new CK(e,r))),NK=Xn(RK,"click").pipe(Er(r=>IK.value),Zl(r=>RV(_K(r),CV)),Er(r=>r.query.search[0].title),Zl(r=>OV(r).pipe(Er(e=>({title:r,subtopics:e})))),Er(r=>new PK(r))),OV=r=>RV(`https://en.wikipedia.org/w/api.php?action=query&format=json&titles=${r}&prop=links&pllimit=max&origin=*`,CV).pipe(Er(e=>{const t=e.query.pages;return t[Object.keys(t)[0]].links?.map(i=>i.title)??[]})),RV=(r,e)=>ZU(r).pipe(Zl(t=>t.ok?e(t):ox({error:!0,message:`Error ${t.status}`})),PV(t=>(console.error(t),ox({error:!0,message:t.message}))));/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 8.0.3
 * @date    2025-09-10T16:22:00.613Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ue(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Id={exports:{}},vx={},Es,px;function kt(){if(px)return Es;px=1;var r=function(e){return e&&e.Math===Math&&e};return Es=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof fx=="object"&&fx)||r(typeof Es=="object"&&Es)||(function(){return this})()||Function("return this")(),Es}var Od,gx;function rt(){return gx||(gx=1,Od=function(r){try{return!!r()}catch{return!0}}),Od}var Rd,yx;function gu(){if(yx)return Rd;yx=1;var r=rt();return Rd=!r(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Rd}var $d,mx;function Pc(){if(mx)return $d;mx=1;var r=gu(),e=Function.prototype,t=e.apply,n=e.call;return $d=typeof Reflect=="object"&&Reflect.apply||(r?n.bind(t):function(){return n.apply(t,arguments)}),$d}var Dd,bx;function st(){if(bx)return Dd;bx=1;var r=gu(),e=Function.prototype,t=e.call,n=r&&e.bind.bind(t,t);return Dd=r?n:function(i){return function(){return t.apply(i,arguments)}},Dd}var Ad,wx;function Jn(){if(wx)return Ad;wx=1;var r=st(),e=r({}.toString),t=r("".slice);return Ad=function(n){return t(e(n),8,-1)},Ad}var qd,Ex;function $V(){if(Ex)return qd;Ex=1;var r=Jn(),e=st();return qd=function(t){if(r(t)==="Function")return e(t)},qd}var kd,Sx;function Xt(){if(Sx)return kd;Sx=1;var r=typeof document=="object"&&document.all;return kd=typeof r>"u"&&r!==void 0?function(e){return typeof e=="function"||e===r}:function(e){return typeof e=="function"},kd}var Md={},Bd,_x;function Mt(){if(_x)return Bd;_x=1;var r=rt();return Bd=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Bd}var Fd,Tx;function Mr(){if(Tx)return Fd;Tx=1;var r=gu(),e=Function.prototype.call;return Fd=r?e.bind(e):function(){return e.apply(e,arguments)},Fd}var Nd={},xx;function E_(){if(xx)return Nd;xx=1;var r={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!r.call({1:2},1);return Nd.f=t?function(i){var a=e(this,i);return!!a&&a.enumerable}:r,Nd}var Ld,Px;function yu(){return Px||(Px=1,Ld=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}),Ld}var zd,Cx;function Cc(){if(Cx)return zd;Cx=1;var r=st(),e=rt(),t=Jn(),n=Object,i=r("".split);return zd=e(function(){return!n("z").propertyIsEnumerable(0)})?function(a){return t(a)==="String"?i(a,""):n(a)}:n,zd}var jd,Ix;function mu(){return Ix||(Ix=1,jd=function(r){return r==null}),jd}var Vd,Ox;function Oa(){if(Ox)return Vd;Ox=1;var r=mu(),e=TypeError;return Vd=function(t){if(r(t))throw new e("Can't call method on "+t);return t},Vd}var Wd,Rx;function Rn(){if(Rx)return Wd;Rx=1;var r=Cc(),e=Oa();return Wd=function(t){return r(e(t))},Wd}var Hd,$x;function xr(){if($x)return Hd;$x=1;var r=Xt();return Hd=function(e){return typeof e=="object"?e!==null:r(e)},Hd}var Gd,Dx;function Wt(){return Dx||(Dx=1,Gd={}),Gd}var Ud,Ax;function Lr(){if(Ax)return Ud;Ax=1;var r=Wt(),e=kt(),t=Xt(),n=function(i){return t(i)?i:void 0};return Ud=function(i,a){return arguments.length<2?n(r[i])||n(e[i]):r[i]&&r[i][a]||e[i]&&e[i][a]},Ud}var Kd,qx;function Zt(){if(qx)return Kd;qx=1;var r=st();return Kd=r({}.isPrototypeOf),Kd}var Yd,kx;function No(){if(kx)return Yd;kx=1;var r=kt(),e=r.navigator,t=e&&e.userAgent;return Yd=t?String(t):"",Yd}var Xd,Mx;function bu(){if(Mx)return Xd;Mx=1;var r=kt(),e=No(),t=r.process,n=r.Deno,i=t&&t.versions||n&&n.version,a=i&&i.v8,o,s;return a&&(o=a.split("."),s=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!s&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(s=+o[1]))),Xd=s,Xd}var Zd,Bx;function Lo(){if(Bx)return Zd;Bx=1;var r=bu(),e=rt(),t=kt(),n=t.String;return Zd=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&r&&r<41}),Zd}var Qd,Fx;function DV(){if(Fx)return Qd;Fx=1;var r=Lo();return Qd=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Qd}var Jd,Nx;function wu(){if(Nx)return Jd;Nx=1;var r=Lr(),e=Xt(),t=Zt(),n=DV(),i=Object;return Jd=n?function(a){return typeof a=="symbol"}:function(a){var o=r("Symbol");return e(o)&&t(o.prototype,i(a))},Jd}var eh,Lx;function zo(){if(Lx)return eh;Lx=1;var r=String;return eh=function(e){try{return r(e)}catch{return"Object"}},eh}var th,zx;function ei(){if(zx)return th;zx=1;var r=Xt(),e=zo(),t=TypeError;return th=function(n){if(r(n))return n;throw new t(e(n)+" is not a function")},th}var rh,jx;function S_(){if(jx)return rh;jx=1;var r=ei(),e=mu();return rh=function(t,n){var i=t[n];return e(i)?void 0:r(i)},rh}var nh,Vx;function LK(){if(Vx)return nh;Vx=1;var r=Mr(),e=Xt(),t=xr(),n=TypeError;return nh=function(i,a){var o,s;if(a==="string"&&e(o=i.toString)&&!t(s=r(o,i))||e(o=i.valueOf)&&!t(s=r(o,i))||a!=="string"&&e(o=i.toString)&&!t(s=r(o,i)))return s;throw new n("Can't convert object to primitive value")},nh}var ih={exports:{}},ah,Wx;function jo(){return Wx||(Wx=1,ah=!0),ah}var oh,Hx;function zK(){if(Hx)return oh;Hx=1;var r=kt(),e=Object.defineProperty;return oh=function(t,n){try{e(r,t,{value:n,configurable:!0,writable:!0})}catch{r[t]=n}return n},oh}var Gx;function __(){if(Gx)return ih.exports;Gx=1;var r=jo(),e=kt(),t=zK(),n="__core-js_shared__",i=ih.exports=e[n]||t(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:r?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),ih.exports}var sh,Ux;function Vo(){if(Ux)return sh;Ux=1;var r=__();return sh=function(e,t){return r[e]||(r[e]=t||{})},sh}var uh,Kx;function vn(){if(Kx)return uh;Kx=1;var r=Oa(),e=Object;return uh=function(t){return e(r(t))},uh}var lh,Yx;function Qt(){if(Yx)return lh;Yx=1;var r=st(),e=vn(),t=r({}.hasOwnProperty);return lh=Object.hasOwn||function(i,a){return t(e(i),a)},lh}var ch,Xx;function Ic(){if(Xx)return ch;Xx=1;var r=st(),e=0,t=Math.random(),n=r(1.1.toString);return ch=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+t,36)},ch}var dh,Zx;function Jt(){if(Zx)return dh;Zx=1;var r=kt(),e=Vo(),t=Qt(),n=Ic(),i=Lo(),a=DV(),o=r.Symbol,s=e("wks"),u=a?o.for||o:o&&o.withoutSetter||n;return dh=function(l){return t(s,l)||(s[l]=i&&t(o,l)?o[l]:u("Symbol."+l)),s[l]},dh}var hh,Qx;function AV(){if(Qx)return hh;Qx=1;var r=Mr(),e=xr(),t=wu(),n=S_(),i=LK(),a=Jt(),o=TypeError,s=a("toPrimitive");return hh=function(u,l){if(!e(u)||t(u))return u;var c=n(u,s),d;if(c){if(l===void 0&&(l="default"),d=r(c,u,l),!e(d)||t(d))return d;throw new o("Can't convert object to primitive value")}return l===void 0&&(l="number"),i(u,l)},hh}var fh,Jx;function T_(){if(Jx)return fh;Jx=1;var r=AV(),e=wu();return fh=function(t){var n=r(t,"string");return e(n)?n:n+""},fh}var vh,eP;function qV(){if(eP)return vh;eP=1;var r=kt(),e=xr(),t=r.document,n=e(t)&&e(t.createElement);return vh=function(i){return n?t.createElement(i):{}},vh}var ph,tP;function kV(){if(tP)return ph;tP=1;var r=Mt(),e=rt(),t=qV();return ph=!r&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),ph}var rP;function Oc(){if(rP)return Md;rP=1;var r=Mt(),e=Mr(),t=E_(),n=yu(),i=Rn(),a=T_(),o=Qt(),s=kV(),u=Object.getOwnPropertyDescriptor;return Md.f=r?u:function(c,d){if(c=i(c),d=a(d),s)try{return u(c,d)}catch{}if(o(c,d))return n(!e(t.f,c,d),c[d])},Md}var gh,nP;function jK(){if(nP)return gh;nP=1;var r=rt(),e=Xt(),t=/#|\.prototype\./,n=function(u,l){var c=a[i(u)];return c===s?!0:c===o?!1:e(l)?r(l):!!l},i=n.normalize=function(u){return String(u).replace(t,".").toLowerCase()},a=n.data={},o=n.NATIVE="N",s=n.POLYFILL="P";return gh=n,gh}var yh,iP;function Rc(){if(iP)return yh;iP=1;var r=$V(),e=ei(),t=gu(),n=r(r.bind);return yh=function(i,a){return e(i),a===void 0?i:t?n(i,a):function(){return i.apply(a,arguments)}},yh}var mh={},bh,aP;function MV(){if(aP)return bh;aP=1;var r=Mt(),e=rt();return bh=r&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),bh}var wh,oP;function ti(){if(oP)return wh;oP=1;var r=xr(),e=String,t=TypeError;return wh=function(n){if(r(n))return n;throw new t(e(n)+" is not an object")},wh}var sP;function Qr(){if(sP)return mh;sP=1;var r=Mt(),e=kV(),t=MV(),n=ti(),i=T_(),a=TypeError,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u="enumerable",l="configurable",c="writable";return mh.f=r?t?function(h,f,v){if(n(h),f=i(f),n(v),typeof h=="function"&&f==="prototype"&&"value"in v&&c in v&&!v[c]){var p=s(h,f);p&&p[c]&&(h[f]=v.value,v={configurable:l in v?v[l]:p[l],enumerable:u in v?v[u]:p[u],writable:!1})}return o(h,f,v)}:o:function(h,f,v){if(n(h),f=i(f),n(v),e)try{return o(h,f,v)}catch{}if("get"in v||"set"in v)throw new a("Accessors not supported");return"value"in v&&(h[f]=v.value),h},mh}var Eh,uP;function Wo(){if(uP)return Eh;uP=1;var r=Mt(),e=Qr(),t=yu();return Eh=r?function(n,i,a){return e.f(n,i,t(1,a))}:function(n,i,a){return n[i]=a,n},Eh}var Sh,lP;function qe(){if(lP)return Sh;lP=1;var r=kt(),e=Pc(),t=$V(),n=Xt(),i=Oc().f,a=jK(),o=Wt(),s=Rc(),u=Wo(),l=Qt(),c=function(d){var h=function(f,v,p){if(this instanceof h){switch(arguments.length){case 0:return new d;case 1:return new d(f);case 2:return new d(f,v)}return new d(f,v,p)}return e(d,this,arguments)};return h.prototype=d.prototype,h};return Sh=function(d,h){var f=d.target,v=d.global,p=d.stat,y=d.proto,g=v?r:p?r[f]:r[f]&&r[f].prototype,m=v?o:o[f]||u(o,f,{})[f],b=m.prototype,w,S,T,_,E,x,P,C,I;for(_ in h)w=a(v?_:f+(p?".":"#")+_,d.forced),S=!w&&g&&l(g,_),x=m[_],S&&(d.dontCallGetSet?(I=i(g,_),P=I&&I.value):P=g[_]),E=S&&P?P:h[_],!(!w&&!y&&typeof x==typeof E)&&(d.bind&&S?C=s(E,r):d.wrap&&S?C=c(E):y&&n(E)?C=t(E):C=E,(d.sham||E&&E.sham||x&&x.sham)&&u(C,"sham",!0),u(m,_,C),y&&(T=f+"Prototype",l(o,T)||u(o,T,{}),u(o[T],_,E),d.real&&b&&(w||!b[_])&&u(b,_,E)))},Sh}var cP;function VK(){if(cP)return vx;cP=1;var r=qe(),e=Mt(),t=Qr().f;return r({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!e},{defineProperty:t}),vx}var dP;function WK(){if(dP)return Id.exports;dP=1,VK();var r=Wt(),e=r.Object,t=Id.exports=function(i,a,o){return e.defineProperty(i,a,o)};return e.defineProperty.sham&&(t.sham=!0),Id.exports}var _h,hP;function BV(){if(hP)return _h;hP=1;var r=WK();return _h=r,_h}var Th,fP;function HK(){if(fP)return Th;fP=1;var r=BV();return Th=r,Th}var xh,vP;function GK(){if(vP)return xh;vP=1;var r=HK();return xh=r,xh}var Ph,pP;function UK(){return pP||(pP=1,Ph=GK()),Ph}var KK=UK(),YK=Ue(KK),gP={},Ch,yP;function Ra(){if(yP)return Ch;yP=1;var r=Jn();return Ch=Array.isArray||function(t){return r(t)==="Array"},Ch}var Ih,mP;function XK(){if(mP)return Ih;mP=1;var r=Math.ceil,e=Math.floor;return Ih=Math.trunc||function(n){var i=+n;return(i>0?e:r)(i)},Ih}var Oh,bP;function Ho(){if(bP)return Oh;bP=1;var r=XK();return Oh=function(e){var t=+e;return t!==t||t===0?0:r(t)},Oh}var Rh,wP;function FV(){if(wP)return Rh;wP=1;var r=Ho(),e=Math.min;return Rh=function(t){var n=r(t);return n>0?e(n,9007199254740991):0},Rh}var $h,EP;function Mi(){if(EP)return $h;EP=1;var r=FV();return $h=function(e){return r(e.length)},$h}var Dh,SP;function NV(){if(SP)return Dh;SP=1;var r=TypeError,e=9007199254740991;return Dh=function(t){if(t>e)throw r("Maximum allowed index exceeded");return t},Dh}var Ah,_P;function $c(){if(_P)return Ah;_P=1;var r=Mt(),e=Qr(),t=yu();return Ah=function(n,i,a){r?e.f(n,i,t(0,a)):n[i]=a},Ah}var qh,TP;function x_(){if(TP)return qh;TP=1;var r=Jt(),e=r("toStringTag"),t={};return t[e]="z",qh=String(t)==="[object z]",qh}var kh,xP;function Bi(){if(xP)return kh;xP=1;var r=x_(),e=Xt(),t=Jn(),n=Jt(),i=n("toStringTag"),a=Object,o=t((function(){return arguments})())==="Arguments",s=function(u,l){try{return u[l]}catch{}};return kh=r?t:function(u){var l,c,d;return u===void 0?"Undefined":u===null?"Null":typeof(c=s(l=a(u),i))=="string"?c:o?t(l):(d=t(l))==="Object"&&e(l.callee)?"Arguments":d},kh}var Mh,PP;function ZK(){if(PP)return Mh;PP=1;var r=st(),e=Xt(),t=__(),n=r(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(i){return n(i)}),Mh=t.inspectSource,Mh}var Bh,CP;function LV(){if(CP)return Bh;CP=1;var r=st(),e=rt(),t=Xt(),n=Bi(),i=Lr(),a=ZK(),o=function(){},s=i("Reflect","construct"),u=/^\s*(?:class|function)\b/,l=r(u.exec),c=!u.test(o),d=function(v){if(!t(v))return!1;try{return s(o,[],v),!0}catch{return!1}},h=function(v){if(!t(v))return!1;switch(n(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return c||!!l(u,a(v))}catch{return!0}};return h.sham=!0,Bh=!s||e(function(){var f;return d(d.call)||!d(Object)||!d(function(){f=!0})||f})?h:d,Bh}var Fh,IP;function QK(){if(IP)return Fh;IP=1;var r=Ra(),e=LV(),t=xr(),n=Jt(),i=n("species"),a=Array;return Fh=function(o){var s;return r(o)&&(s=o.constructor,e(s)&&(s===a||r(s.prototype))?s=void 0:t(s)&&(s=s[i],s===null&&(s=void 0))),s===void 0?a:s},Fh}var Nh,OP;function P_(){if(OP)return Nh;OP=1;var r=QK();return Nh=function(e,t){return new(r(e))(t===0?0:t)},Nh}var Lh,RP;function Eu(){if(RP)return Lh;RP=1;var r=rt(),e=Jt(),t=bu(),n=e("species");return Lh=function(i){return t>=51||!r(function(){var a=[],o=a.constructor={};return o[n]=function(){return{foo:1}},a[i](Boolean).foo!==1})},Lh}var $P;function zV(){if($P)return gP;$P=1;var r=qe(),e=rt(),t=Ra(),n=xr(),i=vn(),a=Mi(),o=NV(),s=$c(),u=P_(),l=Eu(),c=Jt(),d=bu(),h=c("isConcatSpreadable"),f=d>=51||!e(function(){var y=[];return y[h]=!1,y.concat()[0]!==y}),v=function(y){if(!n(y))return!1;var g=y[h];return g!==void 0?!!g:t(y)},p=!f||!l("concat");return r({target:"Array",proto:!0,arity:1,forced:p},{concat:function(g){var m=i(this),b=u(m,0),w=0,S,T,_,E,x;for(S=-1,_=arguments.length;S<_;S++)if(x=S===-1?m:arguments[S],v(x))for(E=a(x),o(w+E),T=0;T<E;T++,w++)T in x&&s(b,w,x[T]);else o(w+1),s(b,w++,x);return b.length=w,b}}),gP}var DP={},AP={},zh,qP;function Fi(){if(qP)return zh;qP=1;var r=Bi(),e=String;return zh=function(t){if(r(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},zh}var jh={},Vh,kP;function C_(){if(kP)return Vh;kP=1;var r=Ho(),e=Math.max,t=Math.min;return Vh=function(n,i){var a=r(n);return a<0?e(a+i,0):t(a,i)},Vh}var Wh,MP;function JK(){if(MP)return Wh;MP=1;var r=Rn(),e=C_(),t=Mi(),n=function(i){return function(a,o,s){var u=r(a),l=t(u);if(l===0)return!i&&-1;var c=e(s,l),d;if(i&&o!==o){for(;l>c;)if(d=u[c++],d!==d)return!0}else for(;l>c;c++)if((i||c in u)&&u[c]===o)return i||c||0;return!i&&-1}};return Wh={includes:n(!0),indexOf:n(!1)},Wh}var Hh,BP;function Su(){return BP||(BP=1,Hh={}),Hh}var Gh,FP;function jV(){if(FP)return Gh;FP=1;var r=st(),e=Qt(),t=Rn(),n=JK().indexOf,i=Su(),a=r([].push);return Gh=function(o,s){var u=t(o),l=0,c=[],d;for(d in u)!e(i,d)&&e(u,d)&&a(c,d);for(;s.length>l;)e(u,d=s[l++])&&(~n(c,d)||a(c,d));return c},Gh}var Uh,NP;function I_(){return NP||(NP=1,Uh=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Uh}var Kh,LP;function Dc(){if(LP)return Kh;LP=1;var r=jV(),e=I_();return Kh=Object.keys||function(n){return r(n,e)},Kh}var zP;function O_(){if(zP)return jh;zP=1;var r=Mt(),e=MV(),t=Qr(),n=ti(),i=Rn(),a=Dc();return jh.f=r&&!e?Object.defineProperties:function(s,u){n(s);for(var l=i(u),c=a(u),d=c.length,h=0,f;d>h;)t.f(s,f=c[h++],l[f]);return s},jh}var Yh,jP;function eY(){if(jP)return Yh;jP=1;var r=Lr();return Yh=r("document","documentElement"),Yh}var Xh,VP;function Ac(){if(VP)return Xh;VP=1;var r=Vo(),e=Ic(),t=r("keys");return Xh=function(n){return t[n]||(t[n]=e(n))},Xh}var Zh,WP;function _u(){if(WP)return Zh;WP=1;var r=ti(),e=O_(),t=I_(),n=Su(),i=eY(),a=qV(),o=Ac(),s=">",u="<",l="prototype",c="script",d=o("IE_PROTO"),h=function(){},f=function(m){return u+c+s+m+u+"/"+c+s},v=function(m){m.write(f("")),m.close();var b=m.parentWindow.Object;return m=null,b},p=function(){var m=a("iframe"),b="java"+c+":",w;return m.style.display="none",i.appendChild(m),m.src=String(b),w=m.contentWindow.document,w.open(),w.write(f("document.F=Object")),w.close(),w.F},y,g=function(){try{y=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&y?v(y):p():v(y);for(var m=t.length;m--;)delete g[l][t[m]];return g()};return n[d]=!0,Zh=Object.create||function(b,w){var S;return b!==null?(h[l]=r(b),S=new h,h[l]=null,S[d]=b):S=g(),w===void 0?S:e.f(S,w)},Zh}var Qh={},HP;function qc(){if(HP)return Qh;HP=1;var r=jV(),e=I_(),t=e.concat("length","prototype");return Qh.f=Object.getOwnPropertyNames||function(i){return r(i,t)},Qh}var Jh={},ef,GP;function Go(){if(GP)return ef;GP=1;var r=st();return ef=r([].slice),ef}var UP;function VV(){if(UP)return Jh;UP=1;var r=Jn(),e=Rn(),t=qc().f,n=Go(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(o){try{return t(o)}catch{return n(i)}};return Jh.f=function(s){return i&&r(s)==="Window"?a(s):t(e(s))},Jh}var tf={},KP;function kc(){return KP||(KP=1,tf.f=Object.getOwnPropertySymbols),tf}var rf,YP;function Tu(){if(YP)return rf;YP=1;var r=Wo();return rf=function(e,t,n,i){return i&&i.enumerable?e[t]=n:r(e,t,n),e},rf}var nf,XP;function R_(){if(XP)return nf;XP=1;var r=Qr();return nf=function(e,t,n){return r.f(e,t,n)},nf}var af={},ZP;function Mc(){if(ZP)return af;ZP=1;var r=Jt();return af.f=r,af}var of,QP;function bt(){if(QP)return of;QP=1;var r=Wt(),e=Qt(),t=Mc(),n=Qr().f;return of=function(i){var a=r.Symbol||(r.Symbol={});e(a,i)||n(a,i,{value:t.f(i)})},of}var sf,JP;function WV(){if(JP)return sf;JP=1;var r=Mr(),e=Lr(),t=Jt(),n=Tu();return sf=function(){var i=e("Symbol"),a=i&&i.prototype,o=a&&a.valueOf,s=t("toPrimitive");a&&!a[s]&&n(a,s,function(u){return r(o,this)},{arity:1})},sf}var uf,eC;function tY(){if(eC)return uf;eC=1;var r=x_(),e=Bi();return uf=r?{}.toString:function(){return"[object "+e(this)+"]"},uf}var lf,tC;function $a(){if(tC)return lf;tC=1;var r=x_(),e=Qr().f,t=Wo(),n=Qt(),i=tY(),a=Jt(),o=a("toStringTag");return lf=function(s,u,l,c){var d=l?s:s&&s.prototype;d&&(n(d,o)||e(d,o,{configurable:!0,value:u}),c&&!r&&t(d,"toString",i))},lf}var cf,rC;function rY(){if(rC)return cf;rC=1;var r=kt(),e=Xt(),t=r.WeakMap;return cf=e(t)&&/native code/.test(String(t)),cf}var df,nC;function xu(){if(nC)return df;nC=1;var r=rY(),e=kt(),t=xr(),n=Wo(),i=Qt(),a=__(),o=Ac(),s=Su(),u="Object already initialized",l=e.TypeError,c=e.WeakMap,d,h,f,v=function(m){return f(m)?h(m):d(m,{})},p=function(m){return function(b){var w;if(!t(b)||(w=h(b)).type!==m)throw new l("Incompatible receiver, "+m+" required");return w}};if(r||a.state){var y=a.state||(a.state=new c);y.get=y.get,y.has=y.has,y.set=y.set,d=function(m,b){if(y.has(m))throw new l(u);return b.facade=m,y.set(m,b),b},h=function(m){return y.get(m)||{}},f=function(m){return y.has(m)}}else{var g=o("state");s[g]=!0,d=function(m,b){if(i(m,g))throw new l(u);return b.facade=m,n(m,g,b),b},h=function(m){return i(m,g)?m[g]:{}},f=function(m){return i(m,g)}}return df={set:d,get:h,has:f,enforce:v,getterFor:p},df}var hf,iC;function Uo(){if(iC)return hf;iC=1;var r=Rc(),e=st(),t=Cc(),n=vn(),i=Mi(),a=P_(),o=e([].push),s=function(u){var l=u===1,c=u===2,d=u===3,h=u===4,f=u===6,v=u===7,p=u===5||f;return function(y,g,m,b){for(var w=n(y),S=t(w),T=i(S),_=r(g,m),E=0,x=b||a,P=l?x(y,T):c||v?x(y,0):void 0,C,I;T>E;E++)if((p||E in S)&&(C=S[E],I=_(C,E,w),u))if(l)P[E]=I;else if(I)switch(u){case 3:return!0;case 5:return C;case 6:return E;case 2:o(P,C)}else switch(u){case 4:return!1;case 7:o(P,C)}return f?-1:d||h?h:P}};return hf={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)},hf}var aC;function nY(){if(aC)return AP;aC=1;var r=qe(),e=kt(),t=Mr(),n=st(),i=jo(),a=Mt(),o=Lo(),s=rt(),u=Qt(),l=Zt(),c=ti(),d=Rn(),h=T_(),f=Fi(),v=yu(),p=_u(),y=Dc(),g=qc(),m=VV(),b=kc(),w=Oc(),S=Qr(),T=O_(),_=E_(),E=Tu(),x=R_(),P=Vo(),C=Ac(),I=Su(),O=Ic(),$=Jt(),D=Mc(),q=bt(),A=WV(),k=$a(),F=xu(),j=Uo().forEach,M=C("hidden"),L="Symbol",U="prototype",K=F.set,Z=F.getterFor(L),Q=Object[U],te=e.Symbol,oe=te&&te[U],re=e.RangeError,V=e.TypeError,W=e.QObject,G=w.f,X=S.f,se=m.f,be=_.f,ke=n([].push),fe=P("symbols"),ge=P("op-symbols"),Te=P("wks"),le=!W||!W[U]||!W[U].findChild,ye=function(ee,N,R){var B=G(Q,N);B&&delete Q[N],X(ee,N,R),B&&ee!==Q&&X(Q,N,B)},pe=a&&s(function(){return p(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a!==7})?ye:X,Ce=function(ee,N){var R=fe[ee]=p(oe);return K(R,{type:L,tag:ee,description:N}),a||(R.description=N),R},ve=function(N,R,B){N===Q&&ve(ge,R,B),c(N);var z=h(R);return c(B),u(fe,z)?(B.enumerable?(u(N,M)&&N[M][z]&&(N[M][z]=!1),B=p(B,{enumerable:v(0,!1)})):(u(N,M)||X(N,M,v(1,p(null))),N[M][z]=!0),pe(N,z,B)):X(N,z,B)},De=function(N,R){c(N);var B=d(R),z=y(B).concat(Ie(B));return j(z,function(H){(!a||t(Le,B,H))&&ve(N,H,B[H])}),N},Ne=function(N,R){return R===void 0?p(N):De(p(N),R)},Le=function(N){var R=h(N),B=t(be,this,R);return this===Q&&u(fe,R)&&!u(ge,R)?!1:B||!u(this,R)||!u(fe,R)||u(this,M)&&this[M][R]?B:!0},He=function(N,R){var B=d(N),z=h(R);if(!(B===Q&&u(fe,z)&&!u(ge,z))){var H=G(B,z);return H&&u(fe,z)&&!(u(B,M)&&B[M][z])&&(H.enumerable=!0),H}},Ge=function(N){var R=se(d(N)),B=[];return j(R,function(z){!u(fe,z)&&!u(I,z)&&ke(B,z)}),B},Ie=function(ee){var N=ee===Q,R=se(N?ge:d(ee)),B=[];return j(R,function(z){u(fe,z)&&(!N||u(Q,z))&&ke(B,fe[z])}),B};return o||(te=function(){if(l(oe,this))throw new V("Symbol is not a constructor");var N=!arguments.length||arguments[0]===void 0?void 0:f(arguments[0]),R=O(N),B=function(z){var H=this===void 0?e:this;H===Q&&t(B,ge,z),u(H,M)&&u(H[M],R)&&(H[M][R]=!1);var J=v(1,z);try{pe(H,R,J)}catch(de){if(!(de instanceof re))throw de;ye(H,R,J)}};return a&&le&&pe(Q,R,{configurable:!0,set:B}),Ce(R,N)},oe=te[U],E(oe,"toString",function(){return Z(this).tag}),E(te,"withoutSetter",function(ee){return Ce(O(ee),ee)}),_.f=Le,S.f=ve,T.f=De,w.f=He,g.f=m.f=Ge,b.f=Ie,D.f=function(ee){return Ce($(ee),ee)},a&&(x(oe,"description",{configurable:!0,get:function(){return Z(this).description}}),i||E(Q,"propertyIsEnumerable",Le,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:te}),j(y(Te),function(ee){q(ee)}),r({target:L,stat:!0,forced:!o},{useSetter:function(){le=!0},useSimple:function(){le=!1}}),r({target:"Object",stat:!0,forced:!o,sham:!a},{create:Ne,defineProperty:ve,defineProperties:De,getOwnPropertyDescriptor:He}),r({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ge}),A(),k(te,L),I[M]=!0,AP}var oC={},ff,sC;function HV(){if(sC)return ff;sC=1;var r=Lo();return ff=r&&!!Symbol.for&&!!Symbol.keyFor,ff}var uC;function iY(){if(uC)return oC;uC=1;var r=qe(),e=Lr(),t=Qt(),n=Fi(),i=Vo(),a=HV(),o=i("string-to-symbol-registry"),s=i("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!a},{for:function(u){var l=n(u);if(t(o,l))return o[l];var c=e("Symbol")(l);return o[l]=c,s[c]=l,c}}),oC}var lC={},cC;function aY(){if(cC)return lC;cC=1;var r=qe(),e=Qt(),t=wu(),n=zo(),i=Vo(),a=HV(),o=i("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!a},{keyFor:function(u){if(!t(u))throw new TypeError(n(u)+" is not a symbol");if(e(o,u))return o[u]}}),lC}var dC={},vf,hC;function oY(){if(hC)return vf;hC=1;var r=st(),e=Ra(),t=Xt(),n=Jn(),i=Fi(),a=r([].push);return vf=function(o){if(t(o))return o;if(e(o)){for(var s=o.length,u=[],l=0;l<s;l++){var c=o[l];typeof c=="string"?a(u,c):(typeof c=="number"||n(c)==="Number"||n(c)==="String")&&a(u,i(c))}var d=u.length,h=!0;return function(f,v){if(h)return h=!1,v;if(e(this))return v;for(var p=0;p<d;p++)if(u[p]===f)return v}}},vf}var fC;function GV(){if(fC)return dC;fC=1;var r=qe(),e=Lr(),t=Pc(),n=Mr(),i=st(),a=rt(),o=Xt(),s=wu(),u=Go(),l=oY(),c=Lo(),d=String,h=e("JSON","stringify"),f=i(/./.exec),v=i("".charAt),p=i("".charCodeAt),y=i("".replace),g=i(1.1.toString),m=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,S=!c||a(function(){var x=e("Symbol")("stringify detection");return h([x])!=="[null]"||h({a:x})!=="{}"||h(Object(x))!=="{}"}),T=a(function(){return h("\uDF06\uD834")!=='"\\udf06\\ud834"'||h("\uDEAD")!=='"\\udead"'}),_=function(x,P){var C=u(arguments),I=l(P);if(!(!o(I)&&(x===void 0||s(x))))return C[1]=function(O,$){if(o(I)&&($=n(I,this,d(O),$)),!s($))return $},t(h,null,C)},E=function(x,P,C){var I=v(C,P-1),O=v(C,P+1);return f(b,x)&&!f(w,O)||f(w,x)&&!f(b,I)?"\\u"+g(p(x,0),16):x};return h&&r({target:"JSON",stat:!0,arity:3,forced:S||T},{stringify:function(P,C,I){var O=u(arguments),$=t(S?_:h,null,O);return T&&typeof $=="string"?y($,m,E):$}}),dC}var vC={},pC;function sY(){if(pC)return vC;pC=1;var r=qe(),e=Lo(),t=rt(),n=kc(),i=vn(),a=!e||t(function(){n.f(1)});return r({target:"Object",stat:!0,forced:a},{getOwnPropertySymbols:function(s){var u=n.f;return u?u(i(s)):[]}}),vC}var gC;function UV(){return gC||(gC=1,nY(),iY(),aY(),GV(),sY()),DP}var yC={},mC;function KV(){if(mC)return yC;mC=1;var r=bt();return r("asyncDispose"),yC}var bC={},wC;function uY(){if(wC)return bC;wC=1;var r=bt();return r("asyncIterator"),bC}var EC={},SC;function YV(){if(SC)return EC;SC=1;var r=bt();return r("dispose"),EC}var _C={},TC;function lY(){if(TC)return _C;TC=1;var r=bt();return r("hasInstance"),_C}var xC={},PC;function cY(){if(PC)return xC;PC=1;var r=bt();return r("isConcatSpreadable"),xC}var CC={},IC;function XV(){if(IC)return CC;IC=1;var r=bt();return r("iterator"),CC}var OC={},RC;function dY(){if(RC)return OC;RC=1;var r=bt();return r("match"),OC}var $C={},DC;function hY(){if(DC)return $C;DC=1;var r=bt();return r("matchAll"),$C}var AC={},qC;function fY(){if(qC)return AC;qC=1;var r=bt();return r("replace"),AC}var kC={},MC;function vY(){if(MC)return kC;MC=1;var r=bt();return r("search"),kC}var BC={},FC;function pY(){if(FC)return BC;FC=1;var r=bt();return r("species"),BC}var NC={},LC;function gY(){if(LC)return NC;LC=1;var r=bt();return r("split"),NC}var zC={},jC;function ZV(){if(jC)return zC;jC=1;var r=bt(),e=WV();return r("toPrimitive"),e(),zC}var VC={},WC;function yY(){if(WC)return VC;WC=1;var r=Lr(),e=bt(),t=$a();return e("toStringTag"),t(r("Symbol"),"Symbol"),VC}var HC={},GC;function mY(){if(GC)return HC;GC=1;var r=bt();return r("unscopables"),HC}var UC={},KC;function bY(){if(KC)return UC;KC=1;var r=kt(),e=$a();return e(r.JSON,"JSON",!0),UC}var pf,YC;function wY(){if(YC)return pf;YC=1,zV(),UV(),KV(),uY(),YV(),lY(),cY(),XV(),dY(),hY(),fY(),vY(),pY(),gY(),ZV(),yY(),mY(),bY();var r=Wt();return pf=r.Symbol,pf}var XC={},gf,ZC;function EY(){return ZC||(ZC=1,gf=function(){}),gf}var yf,QC;function Ko(){return QC||(QC=1,yf={}),yf}var mf,JC;function SY(){if(JC)return mf;JC=1;var r=Mt(),e=Qt(),t=Function.prototype,n=r&&Object.getOwnPropertyDescriptor,i=e(t,"name"),a=i&&(function(){}).name==="something",o=i&&(!r||r&&n(t,"name").configurable);return mf={EXISTS:i,PROPER:a,CONFIGURABLE:o},mf}var bf,eI;function _Y(){if(eI)return bf;eI=1;var r=rt();return bf=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),bf}var wf,tI;function QV(){if(tI)return wf;tI=1;var r=Qt(),e=Xt(),t=vn(),n=Ac(),i=_Y(),a=n("IE_PROTO"),o=Object,s=o.prototype;return wf=i?o.getPrototypeOf:function(u){var l=t(u);if(r(l,a))return l[a];var c=l.constructor;return e(c)&&l instanceof c?c.prototype:l instanceof o?s:null},wf}var Ef,rI;function JV(){if(rI)return Ef;rI=1;var r=rt(),e=Xt(),t=xr(),n=_u(),i=QV(),a=Tu(),o=Jt(),s=jo(),u=o("iterator"),l=!1,c,d,h;[].keys&&(h=[].keys(),"next"in h?(d=i(i(h)),d!==Object.prototype&&(c=d)):l=!0);var f=!t(c)||r(function(){var v={};return c[u].call(v)!==v});return f?c={}:s&&(c=n(c)),e(c[u])||a(c,u,function(){return this}),Ef={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:l},Ef}var Sf,nI;function TY(){if(nI)return Sf;nI=1;var r=JV().IteratorPrototype,e=_u(),t=yu(),n=$a(),i=Ko(),a=function(){return this};return Sf=function(o,s,u,l){var c=s+" Iterator";return o.prototype=e(r,{next:t(+!l,u)}),n(o,c,!1,!0),i[c]=a,o},Sf}var _f,iI;function xY(){if(iI)return _f;iI=1;var r=st(),e=ei();return _f=function(t,n,i){try{return r(e(Object.getOwnPropertyDescriptor(t,n)[i]))}catch{}},_f}var Tf,aI;function PY(){if(aI)return Tf;aI=1;var r=xr();return Tf=function(e){return r(e)||e===null},Tf}var xf,oI;function CY(){if(oI)return xf;oI=1;var r=PY(),e=String,t=TypeError;return xf=function(n){if(r(n))return n;throw new t("Can't set "+e(n)+" as a prototype")},xf}var Pf,sI;function IY(){if(sI)return Pf;sI=1;var r=xY(),e=xr(),t=Oa(),n=CY();return Pf=Object.setPrototypeOf||("__proto__"in{}?(function(){var i=!1,a={},o;try{o=r(Object.prototype,"__proto__","set"),o(a,[]),i=a instanceof Array}catch{}return function(u,l){return t(u),n(l),e(u)&&(i?o(u,l):u.__proto__=l),u}})():void 0),Pf}var Cf,uI;function $_(){if(uI)return Cf;uI=1;var r=qe(),e=Mr(),t=jo(),n=SY(),i=Xt(),a=TY(),o=QV(),s=IY(),u=$a(),l=Wo(),c=Tu(),d=Jt(),h=Ko(),f=JV(),v=n.PROPER,p=n.CONFIGURABLE,y=f.IteratorPrototype,g=f.BUGGY_SAFARI_ITERATORS,m=d("iterator"),b="keys",w="values",S="entries",T=function(){return this};return Cf=function(_,E,x,P,C,I,O){a(x,E,P);var $=function(K){if(K===C&&F)return F;if(!g&&K&&K in A)return A[K];switch(K){case b:return function(){return new x(this,K)};case w:return function(){return new x(this,K)};case S:return function(){return new x(this,K)}}return function(){return new x(this)}},D=E+" Iterator",q=!1,A=_.prototype,k=A[m]||A["@@iterator"]||C&&A[C],F=!g&&k||$(C),j=E==="Array"&&A.entries||k,M,L,U;if(j&&(M=o(j.call(new _)),M!==Object.prototype&&M.next&&(!t&&o(M)!==y&&(s?s(M,y):i(M[m])||c(M,m,T)),u(M,D,!0,!0),t&&(h[D]=T))),v&&C===w&&k&&k.name!==w&&(!t&&p?l(A,"name",w):(q=!0,F=function(){return e(k,this)})),C)if(L={values:$(w),keys:I?F:$(b),entries:$(S)},O)for(U in L)(g||q||!(U in A))&&c(A,U,L[U]);else r({target:E,proto:!0,forced:g||q},L);return(!t||O)&&A[m]!==F&&c(A,m,F,{name:C}),h[E]=F,L},Cf}var If,lI;function D_(){return lI||(lI=1,If=function(r,e){return{value:r,done:e}}),If}var Of,cI;function Ni(){if(cI)return Of;cI=1;var r=Rn(),e=EY(),t=Ko(),n=xu(),i=Qr().f,a=$_(),o=D_(),s=jo(),u=Mt(),l="Array Iterator",c=n.set,d=n.getterFor(l);Of=a(Array,"Array",function(f,v){c(this,{type:l,target:r(f),index:0,kind:v})},function(){var f=d(this),v=f.target,p=f.index++;if(!v||p>=v.length)return f.target=null,o(void 0,!0);switch(f.kind){case"keys":return o(p,!1);case"values":return o(v[p],!1)}return o([p,v[p]],!1)},"values");var h=t.Arguments=t.Array;if(e("keys"),e("values"),e("entries"),!s&&u&&h.name!=="values")try{i(h,"name",{value:"values"})}catch{}return Of}var Rf,dI;function OY(){return dI||(dI=1,Rf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Rf}var hI;function Li(){if(hI)return XC;hI=1,Ni();var r=OY(),e=kt(),t=$a(),n=Ko();for(var i in r)t(e[i],i),n[i]=n.Array;return XC}var $f,fI;function eW(){if(fI)return $f;fI=1;var r=wY();return Li(),$f=r,$f}var vI={},pI;function RY(){if(pI)return vI;pI=1;var r=Jt(),e=Qr().f,t=r("metadata"),n=Function.prototype;return n[t]===void 0&&e(n,t,{value:null}),vI}var gI={},yI;function $Y(){return yI||(yI=1,KV()),gI}var mI={},bI;function DY(){return bI||(bI=1,YV()),mI}var wI={},EI;function AY(){if(EI)return wI;EI=1;var r=bt();return r("metadata"),wI}var Df,SI;function qY(){if(SI)return Df;SI=1;var r=eW();return RY(),$Y(),DY(),AY(),Df=r,Df}var _I={},Af,TI;function tW(){if(TI)return Af;TI=1;var r=Lr(),e=st(),t=r("Symbol"),n=t.keyFor,i=e(t.prototype.valueOf);return Af=t.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},Af}var xI;function kY(){if(xI)return _I;xI=1;var r=qe(),e=tW();return r({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),_I}var PI={},qf,CI;function rW(){if(CI)return qf;CI=1;for(var r=Vo(),e=Lr(),t=st(),n=wu(),i=Jt(),a=e("Symbol"),o=a.isWellKnownSymbol,s=e("Object","getOwnPropertyNames"),u=t(a.prototype.valueOf),l=r("wks"),c=0,d=s(a),h=d.length;c<h;c++)try{var f=d[c];n(a[f])&&i(f)}catch{}return qf=function(p){if(o&&o(p))return!0;try{for(var y=u(p),g=0,m=s(l),b=m.length;g<b;g++)if(l[m[g]]==y)return!0}catch{}return!1},qf}var II;function MY(){if(II)return PI;II=1;var r=qe(),e=rW();return r({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),PI}var OI={},RI;function BY(){if(RI)return OI;RI=1;var r=bt();return r("customMatcher"),OI}var $I={},DI;function FY(){if(DI)return $I;DI=1;var r=bt();return r("observable"),$I}var AI={},qI;function NY(){if(qI)return AI;qI=1;var r=qe(),e=tW();return r({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),AI}var kI={},MI;function LY(){if(MI)return kI;MI=1;var r=qe(),e=rW();return r({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),kI}var BI={},FI;function zY(){if(FI)return BI;FI=1;var r=bt();return r("matcher"),BI}var NI={},LI;function jY(){if(LI)return NI;LI=1;var r=bt();return r("metadataKey"),NI}var zI={},jI;function VY(){if(jI)return zI;jI=1;var r=bt();return r("patternMatch"),zI}var VI={},WI;function WY(){if(WI)return VI;WI=1;var r=bt();return r("replaceAll"),VI}var kf,HI;function HY(){if(HI)return kf;HI=1;var r=qY();return kY(),MY(),BY(),FY(),NY(),LY(),zY(),jY(),VY(),WY(),kf=r,kf}var Mf,GI;function GY(){return GI||(GI=1,Mf=HY()),Mf}var UY=GY(),fl=Ue(UY),UI={},Bf,KI;function KY(){if(KI)return Bf;KI=1;var r=st(),e=Ho(),t=Fi(),n=Oa(),i=r("".charAt),a=r("".charCodeAt),o=r("".slice),s=function(u){return function(l,c){var d=t(n(l)),h=e(c),f=d.length,v,p;return h<0||h>=f?u?"":void 0:(v=a(d,h),v<55296||v>56319||h+1===f||(p=a(d,h+1))<56320||p>57343?u?i(d,h):v:u?o(d,h,h+2):(v-55296<<10)+(p-56320)+65536)}};return Bf={codeAt:s(!1),charAt:s(!0)},Bf}var YI;function Bc(){if(YI)return UI;YI=1;var r=KY().charAt,e=Fi(),t=xu(),n=$_(),i=D_(),a="String Iterator",o=t.set,s=t.getterFor(a);return n(String,"String",function(u){o(this,{type:a,string:e(u),index:0})},function(){var l=s(this),c=l.string,d=l.index,h;return d>=c.length?i(void 0,!0):(h=r(c,d),l.index+=h.length,i(h,!1))}),UI}var Ff,XI;function YY(){if(XI)return Ff;XI=1,Ni(),Bc(),XV();var r=Mc();return Ff=r.f("iterator"),Ff}var Nf,ZI;function nW(){if(ZI)return Nf;ZI=1;var r=YY();return Li(),Nf=r,Nf}var Lf,QI;function XY(){if(QI)return Lf;QI=1;var r=nW();return Lf=r,Lf}var zf,JI;function ZY(){if(JI)return zf;JI=1;var r=XY();return zf=r,zf}var jf,eO;function QY(){return eO||(eO=1,jf=ZY()),jf}var JY=QY(),e6=Ue(JY);function Ys(r){"@babel/helpers - typeof";return Ys=typeof fl=="function"&&typeof e6=="symbol"?function(e){return typeof e}:function(e){return e&&typeof fl=="function"&&e.constructor===fl&&e!==fl.prototype?"symbol":typeof e},Ys(r)}var Vf,tO;function t6(){if(tO)return Vf;tO=1,ZV();var r=Mc();return Vf=r.f("toPrimitive"),Vf}var Wf,rO;function r6(){if(rO)return Wf;rO=1;var r=t6();return Wf=r,Wf}var Hf,nO;function n6(){if(nO)return Hf;nO=1;var r=r6();return Hf=r,Hf}var Gf,iO;function i6(){if(iO)return Gf;iO=1;var r=n6();return Gf=r,Gf}var Uf,aO;function a6(){return aO||(aO=1,Uf=i6()),Uf}var o6=a6(),s6=Ue(o6);function u6(r,e){if(Ys(r)!="object"||!r)return r;var t=r[s6];if(t!==void 0){var n=t.call(r,e);if(Ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function l6(r){var e=u6(r,"string");return Ys(e)=="symbol"?e:e+""}function mi(r,e,t){return(e=l6(e))in r?YK(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var oO={},Kf,sO;function c6(){if(sO)return Kf;sO=1;var r=st(),e=ei(),t=xr(),n=Qt(),i=Go(),a=gu(),o=Function,s=r([].concat),u=r([].join),l={},c=function(d,h,f){if(!n(l,h)){for(var v=[],p=0;p<h;p++)v[p]="a["+p+"]";l[h]=o("C,a","return new C("+u(v,",")+")")}return l[h](d,f)};return Kf=a?o.bind:function(h){var f=e(this),v=f.prototype,p=i(arguments,1),y=function(){var m=s(p,i(arguments));return this instanceof y?c(f,m.length,m):f.apply(h,m)};return t(v)&&(y.prototype=v),y},Kf}var uO;function d6(){if(uO)return oO;uO=1;var r=qe(),e=c6();return r({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),oO}var Yf,lO;function Br(){if(lO)return Yf;lO=1;var r=kt(),e=Wt();return Yf=function(t,n){var i=e[t+"Prototype"],a=i&&i[n];if(a)return a;var o=r[t],s=o&&o.prototype;return s&&s[n]},Yf}var Xf,cO;function h6(){if(cO)return Xf;cO=1,d6();var r=Br();return Xf=r("Function","bind"),Xf}var Zf,dO;function f6(){if(dO)return Zf;dO=1;var r=Zt(),e=h6(),t=Function.prototype;return Zf=function(n){var i=n.bind;return n===t||r(t,n)&&i===t.bind?e:i},Zf}var Qf,hO;function v6(){if(hO)return Qf;hO=1;var r=f6();return Qf=r,Qf}var Jf,fO;function p6(){return fO||(fO=1,Jf=v6()),Jf}var g6=p6(),iW=Ue(g6),vO={},ev,pO;function y6(){if(pO)return ev;pO=1;var r=ei(),e=vn(),t=Cc(),n=Mi(),i=TypeError,a="Reduce of empty array with no initial value",o=function(s){return function(u,l,c,d){var h=e(u),f=t(h),v=n(h);if(r(l),v===0&&c<2)throw new i(a);var p=s?v-1:0,y=s?-1:1;if(c<2)for(;;){if(p in f){d=f[p],p+=y;break}if(p+=y,s?p<0:v<=p)throw new i(a)}for(;s?p>=0:v>p;p+=y)p in f&&(d=l(d,f[p],p,h));return d}};return ev={left:o(!1),right:o(!0)},ev}var tv,gO;function Fc(){if(gO)return tv;gO=1;var r=rt();return tv=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){return 1},1)})},tv}var rv,yO;function aW(){if(yO)return rv;yO=1;var r=kt(),e=No(),t=Jn(),n=function(i){return e.slice(0,i.length)===i};return rv=(function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":r.Bun&&typeof Bun.version=="string"?"BUN":r.Deno&&typeof Deno.version=="object"?"DENO":t(r.process)==="process"?"NODE":r.window&&r.document?"BROWSER":"REST"})(),rv}var nv,mO;function m6(){if(mO)return nv;mO=1;var r=aW();return nv=r==="NODE",nv}var bO;function b6(){if(bO)return vO;bO=1;var r=qe(),e=y6().left,t=Fc(),n=bu(),i=m6(),a=!i&&n>79&&n<83,o=a||!t("reduce");return r({target:"Array",proto:!0,forced:o},{reduce:function(u){var l=arguments.length;return e(this,u,l,l>1?arguments[1]:void 0)}}),vO}var iv,wO;function w6(){if(wO)return iv;wO=1,b6();var r=Br();return iv=r("Array","reduce"),iv}var av,EO;function E6(){if(EO)return av;EO=1;var r=Zt(),e=w6(),t=Array.prototype;return av=function(n){var i=n.reduce;return n===t||r(t,n)&&i===t.reduce?e:i},av}var ov,SO;function S6(){if(SO)return ov;SO=1;var r=E6();return ov=r,ov}var sv,_O;function _6(){return _O||(_O=1,sv=S6()),sv}var T6=_6(),x6=Ue(T6),TO={},xO;function P6(){if(xO)return TO;xO=1;var r=qe(),e=Uo().filter,t=Eu(),n=t("filter");return r({target:"Array",proto:!0,forced:!n},{filter:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),TO}var uv,PO;function C6(){if(PO)return uv;PO=1,P6();var r=Br();return uv=r("Array","filter"),uv}var lv,CO;function I6(){if(CO)return lv;CO=1;var r=Zt(),e=C6(),t=Array.prototype;return lv=function(n){var i=n.filter;return n===t||r(t,n)&&i===t.filter?e:i},lv}var cv,IO;function O6(){if(IO)return cv;IO=1;var r=I6();return cv=r,cv}var dv,OO;function R6(){return OO||(OO=1,dv=O6()),dv}var $6=R6(),lo=Ue($6),RO={},$O;function D6(){if($O)return RO;$O=1;var r=qe(),e=Uo().map,t=Eu(),n=t("map");return r({target:"Array",proto:!0,forced:!n},{map:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),RO}var hv,DO;function A6(){if(DO)return hv;DO=1,D6();var r=Br();return hv=r("Array","map"),hv}var fv,AO;function q6(){if(AO)return fv;AO=1;var r=Zt(),e=A6(),t=Array.prototype;return fv=function(n){var i=n.map;return n===t||r(t,n)&&i===t.map?e:i},fv}var vv,qO;function k6(){if(qO)return vv;qO=1;var r=q6();return vv=r,vv}var pv,kO;function M6(){return kO||(kO=1,pv=k6()),pv}var B6=M6(),un=Ue(B6),gv,MO;function F6(){return MO||(MO=1,gv=eW()),gv}var N6=F6(),L6=Ue(N6),BO={},FO;function z6(){if(FO)return BO;FO=1;var r=qe(),e=Ra(),t=LV(),n=xr(),i=C_(),a=Mi(),o=Rn(),s=$c(),u=Jt(),l=Eu(),c=Go(),d=l("slice"),h=u("species"),f=Array,v=Math.max;return r({target:"Array",proto:!0,forced:!d},{slice:function(y,g){var m=o(this),b=a(m),w=i(y,b),S=i(g===void 0?b:g,b),T,_,E;if(e(m)&&(T=m.constructor,t(T)&&(T===f||e(T.prototype))?T=void 0:n(T)&&(T=T[h],T===null&&(T=void 0)),T===f||T===void 0))return c(m,w,S);for(_=new(T===void 0?f:T)(v(S-w,0)),E=0;w<S;w++,E++)w in m&&s(_,E,m[w]);return _.length=E,_}}),BO}var yv,NO;function j6(){if(NO)return yv;NO=1,z6();var r=Br();return yv=r("Array","slice"),yv}var mv,LO;function V6(){if(LO)return mv;LO=1;var r=Zt(),e=j6(),t=Array.prototype;return mv=function(n){var i=n.slice;return n===t||r(t,n)&&i===t.slice?e:i},mv}var bv,zO;function W6(){if(zO)return bv;zO=1;var r=V6();return bv=r,bv}var wv,jO;function H6(){return jO||(jO=1,wv=W6()),wv}var G6=H6(),U6=Ue(G6),VO={},Ev,WO;function oW(){if(WO)return Ev;WO=1;var r=Lr(),e=st(),t=qc(),n=kc(),i=ti(),a=e([].concat);return Ev=r("Reflect","ownKeys")||function(s){var u=t.f(i(s)),l=n.f;return l?a(u,l(s)):u},Ev}var HO;function K6(){if(HO)return VO;HO=1;var r=qe(),e=oW();return r({target:"Reflect",stat:!0},{ownKeys:e}),VO}var Sv,GO;function Y6(){if(GO)return Sv;GO=1,K6();var r=Wt();return Sv=r.Reflect.ownKeys,Sv}var _v,UO;function X6(){if(UO)return _v;UO=1;var r=Y6();return _v=r,_v}var Tv,KO;function Z6(){return KO||(KO=1,Tv=X6()),Tv}var Q6=Z6(),J6=Ue(Q6),YO={},XO;function e9(){if(XO)return YO;XO=1;var r=qe(),e=Ra();return r({target:"Array",stat:!0},{isArray:e}),YO}var xv,ZO;function t9(){if(ZO)return xv;ZO=1,e9();var r=Wt();return xv=r.Array.isArray,xv}var Pv,QO;function r9(){if(QO)return Pv;QO=1;var r=t9();return Pv=r,Pv}var Cv,JO;function n9(){return JO||(JO=1,Cv=r9()),Cv}var i9=n9(),bn=Ue(i9),eR={},tR;function a9(){if(tR)return eR;tR=1;var r=qe(),e=vn(),t=Dc(),n=rt(),i=n(function(){t(1)});return r({target:"Object",stat:!0,forced:i},{keys:function(o){return t(e(o))}}),eR}var Iv,rR;function o9(){if(rR)return Iv;rR=1,a9();var r=Wt();return Iv=r.Object.keys,Iv}var Ov,nR;function s9(){if(nR)return Ov;nR=1;var r=o9();return Ov=r,Ov}var Rv,iR;function u9(){return iR||(iR=1,Rv=s9()),Rv}var l9=u9(),A_=Ue(l9),aR={},$v,oR;function c9(){if(oR)return $v;oR=1;var r=Uo().forEach,e=Fc(),t=e("forEach");return $v=t?[].forEach:function(i){return r(this,i,arguments.length>1?arguments[1]:void 0)},$v}var sR;function d9(){if(sR)return aR;sR=1;var r=qe(),e=c9();return r({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),aR}var Dv,uR;function h9(){if(uR)return Dv;uR=1,d9();var r=Br();return Dv=r("Array","forEach"),Dv}var Av,lR;function f9(){if(lR)return Av;lR=1;var r=h9();return Av=r,Av}var qv,cR;function v9(){if(cR)return qv;cR=1;var r=Bi(),e=Qt(),t=Zt(),n=f9(),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};return qv=function(o){var s=o.forEach;return o===i||t(i,o)&&s===i.forEach||e(a,r(o))?n:s},qv}var kv,dR;function p9(){return dR||(dR=1,kv=v9()),kv}var g9=p9(),ga=Ue(g9),hR={},fR;function y9(){if(fR)return hR;fR=1;var r=qe(),e=st(),t=Ra(),n=e([].reverse),i=[1,2];return r({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),n(this)}}),hR}var Mv,vR;function m9(){if(vR)return Mv;vR=1,y9();var r=Br();return Mv=r("Array","reverse"),Mv}var Bv,pR;function b9(){if(pR)return Bv;pR=1;var r=Zt(),e=m9(),t=Array.prototype;return Bv=function(n){var i=n.reverse;return n===t||r(t,n)&&i===t.reverse?e:i},Bv}var Fv,gR;function w9(){if(gR)return Fv;gR=1;var r=b9();return Fv=r,Fv}var Nv,yR;function E9(){return yR||(yR=1,Nv=w9()),Nv}var S9=E9(),_9=Ue(S9),mR={},Lv,bR;function T9(){if(bR)return Lv;bR=1;var r=Mt(),e=Ra(),t=TypeError,n=Object.getOwnPropertyDescriptor,i=r&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(a){return a instanceof TypeError}})();return Lv=i?function(a,o){if(e(a)&&!n(a,"length").writable)throw new t("Cannot set read only .length");return a.length=o}:function(a,o){return a.length=o},Lv}var zv,wR;function sW(){if(wR)return zv;wR=1;var r=zo(),e=TypeError;return zv=function(t,n){if(!delete t[n])throw new e("Cannot delete property "+r(n)+" of "+r(t))},zv}var ER;function x9(){if(ER)return mR;ER=1;var r=qe(),e=vn(),t=C_(),n=Ho(),i=Mi(),a=T9(),o=NV(),s=P_(),u=$c(),l=sW(),c=Eu(),d=c("splice"),h=Math.max,f=Math.min;return r({target:"Array",proto:!0,forced:!d},{splice:function(p,y){var g=e(this),m=i(g),b=t(p,m),w=arguments.length,S,T,_,E,x,P;for(w===0?S=T=0:w===1?(S=0,T=m-b):(S=w-2,T=f(h(n(y),0),m-b)),o(m+S-T),_=s(g,T),E=0;E<T;E++)x=b+E,x in g&&u(_,E,g[x]);if(_.length=T,S<T){for(E=b;E<m-T;E++)x=E+T,P=E+S,x in g?g[P]=g[x]:l(g,P);for(E=m;E>m-T+S;E--)l(g,E-1)}else if(S>T)for(E=m-T;E>b;E--)x=E+T-1,P=E+S-1,x in g?g[P]=g[x]:l(g,P);for(E=0;E<S;E++)g[E+b]=arguments[E+2];return a(g,m-T+S),_}}),mR}var jv,SR;function P9(){if(SR)return jv;SR=1,x9();var r=Br();return jv=r("Array","splice"),jv}var Vv,_R;function C9(){if(_R)return Vv;_R=1;var r=Zt(),e=P9(),t=Array.prototype;return Vv=function(n){var i=n.splice;return n===t||r(t,n)&&i===t.splice?e:i},Vv}var Wv,TR;function I9(){if(TR)return Wv;TR=1;var r=C9();return Wv=r,Wv}var Hv,xR;function O9(){return xR||(xR=1,Hv=I9()),Hv}var R9=O9(),uW=Ue(R9),PR={},Gv,CR;function $9(){if(CR)return Gv;CR=1;var r=Mt(),e=st(),t=Mr(),n=rt(),i=Dc(),a=kc(),o=E_(),s=vn(),u=Cc(),l=Object.assign,c=Object.defineProperty,d=e([].concat);return Gv=!l||n(function(){if(r&&l({b:1},l(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var h={},f={},v=Symbol("assign detection"),p="abcdefghijklmnopqrst";return h[v]=7,p.split("").forEach(function(y){f[y]=y}),l({},h)[v]!==7||i(l({},f)).join("")!==p})?function(f,v){for(var p=s(f),y=arguments.length,g=1,m=a.f,b=o.f;y>g;)for(var w=u(arguments[g++]),S=m?d(i(w),m(w)):i(w),T=S.length,_=0,E;T>_;)E=S[_++],(!r||t(b,w,E))&&(p[E]=w[E]);return p}:l,Gv}var IR;function D9(){if(IR)return PR;IR=1;var r=qe(),e=$9();return r({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),PR}var Uv,OR;function A9(){if(OR)return Uv;OR=1,D9();var r=Wt();return Uv=r.Object.assign,Uv}var Kv,RR;function q9(){if(RR)return Kv;RR=1;var r=A9();return Kv=r,Kv}var Yv,$R;function k9(){return $R||($R=1,Yv=q9()),Yv}var M9=k9(),B9=Ue(M9),Xv,DR;function F9(){if(DR)return Xv;DR=1,zV();var r=Br();return Xv=r("Array","concat"),Xv}var Zv,AR;function N9(){if(AR)return Zv;AR=1;var r=Zt(),e=F9(),t=Array.prototype;return Zv=function(n){var i=n.concat;return n===t||r(t,n)&&i===t.concat?e:i},Zv}var Qv,qR;function L9(){if(qR)return Qv;qR=1;var r=N9();return Qv=r,Qv}var Jv,kR;function z9(){return kR||(kR=1,Jv=L9()),Jv}var j9=z9(),V9=Ue(j9),MR={},BR;function W9(){if(BR)return MR;BR=1;var r=qe(),e=Mt(),t=_u();return r({target:"Object",stat:!0,sham:!e},{create:t}),MR}var ep,FR;function H9(){if(FR)return ep;FR=1,W9();var r=Wt(),e=r.Object;return ep=function(n,i){return e.create(n,i)},ep}var tp,NR;function G9(){if(NR)return tp;NR=1;var r=H9();return tp=r,tp}var rp,LR;function U9(){return LR||(LR=1,rp=G9()),rp}var K9=U9(),Y9=Ue(K9),zR={},np,jR;function X9(){if(jR)return np;jR=1;var r=Ho(),e=Fi(),t=Oa(),n=RangeError;return np=function(a){var o=e(t(this)),s="",u=r(a);if(u<0||u===1/0)throw new n("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(o+=o))u&1&&(s+=o);return s},np}var ip,VR;function Z9(){if(VR)return ip;VR=1;var r=st(),e=FV(),t=Fi(),n=X9(),i=Oa(),a=r(n),o=r("".slice),s=Math.ceil,u=function(l){return function(c,d,h){var f=t(i(c)),v=e(d),p=f.length,y=h===void 0?" ":t(h),g,m;return v<=p||y===""?f:(g=v-p,m=a(y,s(g/y.length)),m.length>g&&(m=o(m,0,g)),l?f+m:m+f)}};return ip={start:u(!1),end:u(!0)},ip}var ap,WR;function Q9(){if(WR)return ap;WR=1;var r=st(),e=rt(),t=Z9().start,n=RangeError,i=isFinite,a=Math.abs,o=Date.prototype,s=o.toISOString,u=r(o.getTime),l=r(o.getUTCDate),c=r(o.getUTCFullYear),d=r(o.getUTCHours),h=r(o.getUTCMilliseconds),f=r(o.getUTCMinutes),v=r(o.getUTCMonth),p=r(o.getUTCSeconds);return ap=e(function(){return s.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){s.call(new Date(NaN))})?function(){if(!i(u(this)))throw new n("Invalid time value");var g=this,m=c(g),b=h(g),w=m<0?"-":m>9999?"+":"";return w+t(a(m),w?6:4,0)+"-"+t(v(g)+1,2,0)+"-"+t(l(g),2,0)+"T"+t(d(g),2,0)+":"+t(f(g),2,0)+":"+t(p(g),2,0)+"."+t(b,3,0)+"Z"}:s,ap}var HR;function J9(){if(HR)return zR;HR=1;var r=qe(),e=Mr(),t=vn(),n=AV(),i=Q9(),a=Jn(),o=rt(),s=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return r({target:"Date",proto:!0,forced:s},{toJSON:function(l){var c=t(this),d=n(c,"number");return typeof d=="number"&&!isFinite(d)?null:!("toISOString"in c)&&a(c)==="Date"?e(i,c):c.toISOString()}}),zR}var op,GR;function e8(){if(GR)return op;GR=1,J9(),GV();var r=Wt(),e=Pc();return r.JSON||(r.JSON={stringify:JSON.stringify}),op=function(n,i,a){return e(r.JSON.stringify,null,arguments)},op}var sp,UR;function t8(){if(UR)return sp;UR=1;var r=e8();return sp=r,sp}var up,KR;function r8(){return KR||(KR=1,up=t8()),up}var n8=r8(),i8=Ue(n8),YR={},XR={},lp,ZR;function a8(){if(ZR)return lp;ZR=1;var r=TypeError;return lp=function(e,t){if(e<t)throw new r("Not enough arguments");return e},lp}var cp,QR;function lW(){if(QR)return cp;QR=1;var r=kt(),e=Pc(),t=Xt(),n=aW(),i=No(),a=Go(),o=a8(),s=r.Function,u=/MSIE .\./.test(i)||n==="BUN"&&(function(){var l=r.Bun.version.split(".");return l.length<3||l[0]==="0"&&(l[1]<3||l[1]==="3"&&l[2]==="0")})();return cp=function(l,c){var d=c?2:1;return u?function(h,f){var v=o(arguments.length,1)>d,p=t(h)?h:s(h),y=v?a(arguments,d):[],g=v?function(){e(p,this,y)}:p;return c?l(g,f):l(g)}:l},cp}var JR;function o8(){if(JR)return XR;JR=1;var r=qe(),e=kt(),t=lW(),n=t(e.setInterval,!0);return r({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),XR}var e$={},t$;function s8(){if(t$)return e$;t$=1;var r=qe(),e=kt(),t=lW(),n=t(e.setTimeout,!0);return r({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),e$}var r$;function u8(){return r$||(r$=1,o8(),s8()),YR}var dp,n$;function l8(){if(n$)return dp;n$=1,u8();var r=Wt();return dp=r.setTimeout,dp}var hp,i$;function c8(){return i$||(i$=1,hp=l8()),hp}var d8=c8(),h8=Ue(d8),fp={exports:{}},a$;function f8(){return a$||(a$=1,(function(r){function e(n){if(n)return t(n);this._callbacks=new Map}function t(n){return Object.assign(n,e.prototype),n._callbacks=new Map,n}e.prototype.on=function(n,i){const a=this._callbacks.get(n)??[];return a.push(i),this._callbacks.set(n,a),this},e.prototype.once=function(n,i){const a=(...o)=>{this.off(n,a),i.apply(this,o)};return a.fn=i,this.on(n,a),this},e.prototype.off=function(n,i){if(n===void 0&&i===void 0)return this._callbacks.clear(),this;if(i===void 0)return this._callbacks.delete(n),this;const a=this._callbacks.get(n);if(a){for(const[o,s]of a.entries())if(s===i||s.fn===i){a.splice(o,1);break}a.length===0?this._callbacks.delete(n):this._callbacks.set(n,a)}return this},e.prototype.emit=function(n,...i){const a=this._callbacks.get(n);if(a){const o=[...a];for(const s of o)s.apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks.get(n)??[]},e.prototype.listenerCount=function(n){if(n)return this.listeners(n).length;let i=0;for(const a of this._callbacks.values())i+=a.length;return i},e.prototype.hasListeners=function(n){return this.listenerCount(n)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,r.exports=e})(fp)),fp.exports}var v8=f8(),p8=Ue(v8);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function dn(){return dn=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},dn.apply(this,arguments)}function Jr(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function vl(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var DS;typeof Object.assign!="function"?DS=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}return t}:DS=Object.assign;var ya=DS,o$=["","webkit","Moz","MS","ms","o"],g8=typeof document>"u"?{style:{}}:document.createElement("div"),y8="function",co=Math.round,ma=Math.abs,q_=Date.now;function Nc(r,e){for(var t,n,i=e[0].toUpperCase()+e.slice(1),a=0;a<o$.length;){if(t=o$[a],n=t?t+i:e,n in r)return n;a++}}var jn;typeof window>"u"?jn={}:jn=window;var cW=Nc(g8.style,"touchAction"),dW=cW!==void 0;function m8(){if(!dW)return!1;var r={},e=jn.CSS&&jn.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return r[t]=e?jn.CSS.supports("touch-action",t):!0}),r}var hW="compute",fW="auto",AS="manipulation",ca="none",Xs="pan-x",Zs="pan-y",pl=m8(),b8=/mobile|tablet|ip(ad|hone|od)|android/i,vW="ontouchstart"in jn,w8=Nc(jn,"PointerEvent")!==void 0,E8=vW&&b8.test(navigator.userAgent),Pu="touch",S8="pen",k_="mouse",_8="kinect",T8=25,Sr=1,Da=2,Dt=4,qr=8,Ql=1,Cu=2,Iu=4,Ou=8,Io=16,xn=Cu|Iu,da=Ou|Io,pW=xn|da,gW=["x","y"],Jl=["clientX","clientY"];function Vn(r,e,t){var n;if(r)if(r.forEach)r.forEach(e,t);else if(r.length!==void 0)for(n=0;n<r.length;)e.call(t,r[n],n,r),n++;else for(n in r)r.hasOwnProperty(n)&&e.call(t,r[n],n,r)}function Lc(r,e){return typeof r===y8?r.apply(e&&e[0]||void 0,e):r}function ia(r,e){return r.indexOf(e)>-1}function x8(r){if(ia(r,ca))return ca;var e=ia(r,Xs),t=ia(r,Zs);return e&&t?ca:e||t?e?Xs:Zs:ia(r,AS)?AS:fW}var yW=(function(){function r(t,n){this.manager=t,this.set(n)}var e=r.prototype;return e.set=function(n){n===hW&&(n=this.compute()),dW&&this.manager.element.style&&pl[n]&&(this.manager.element.style[cW]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Vn(this.manager.recognizers,function(i){Lc(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),x8(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,a=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,s=ia(o,ca)&&!pl[ca],u=ia(o,Zs)&&!pl[Zs],l=ia(o,Xs)&&!pl[Xs];if(s){var c=n.pointers.length===1,d=n.distance<2,h=n.deltaTime<250;if(c&&d&&h)return}if(!(l&&u)&&(s||u&&a&xn||l&&a&da))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},r})();function M_(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function mW(r){var e=r.length;if(e===1)return{x:co(r[0].clientX),y:co(r[0].clientY)};for(var t=0,n=0,i=0;i<e;)t+=r[i].clientX,n+=r[i].clientY,i++;return{x:co(t/e),y:co(n/e)}}function s$(r){for(var e=[],t=0;t<r.pointers.length;)e[t]={clientX:co(r.pointers[t].clientX),clientY:co(r.pointers[t].clientY)},t++;return{timeStamp:q_(),pointers:e,center:mW(e),deltaX:r.deltaX,deltaY:r.deltaY}}function ec(r,e,t){t||(t=gW);var n=e[t[0]]-r[t[0]],i=e[t[1]]-r[t[1]];return Math.sqrt(n*n+i*i)}function qS(r,e,t){t||(t=gW);var n=e[t[0]]-r[t[0]],i=e[t[1]]-r[t[1]];return Math.atan2(i,n)*180/Math.PI}function bW(r,e){return r===e?Ql:ma(r)>=ma(e)?r<0?Cu:Iu:e<0?Ou:Io}function P8(r,e){var t=e.center,n=r.offsetDelta||{},i=r.prevDelta||{},a=r.prevInput||{};(e.eventType===Sr||a.eventType===Dt)&&(i=r.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=r.offsetDelta={x:t.x,y:t.y}),e.deltaX=i.x+(t.x-n.x),e.deltaY=i.y+(t.y-n.y)}function wW(r,e,t){return{x:e/r||0,y:t/r||0}}function C8(r,e){return ec(e[0],e[1],Jl)/ec(r[0],r[1],Jl)}function I8(r,e){return qS(e[1],e[0],Jl)+qS(r[1],r[0],Jl)}function O8(r,e){var t=r.lastInterval||e,n=e.timeStamp-t.timeStamp,i,a,o,s;if(e.eventType!==qr&&(n>T8||t.velocity===void 0)){var u=e.deltaX-t.deltaX,l=e.deltaY-t.deltaY,c=wW(n,u,l);a=c.x,o=c.y,i=ma(c.x)>ma(c.y)?c.x:c.y,s=bW(u,l),r.lastInterval=e}else i=t.velocity,a=t.velocityX,o=t.velocityY,s=t.direction;e.velocity=i,e.velocityX=a,e.velocityY=o,e.direction=s}function R8(r,e){var t=r.session,n=e.pointers,i=n.length;t.firstInput||(t.firstInput=s$(e)),i>1&&!t.firstMultiple?t.firstMultiple=s$(e):i===1&&(t.firstMultiple=!1);var a=t.firstInput,o=t.firstMultiple,s=o?o.center:a.center,u=e.center=mW(n);e.timeStamp=q_(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=qS(s,u),e.distance=ec(s,u),P8(t,e),e.offsetDirection=bW(e.deltaX,e.deltaY);var l=wW(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=ma(l.x)>ma(l.y)?l.x:l.y,e.scale=o?C8(o.pointers,n):1,e.rotation=o?I8(o.pointers,n):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,O8(t,e);var c=r.element,d=e.srcEvent,h;d.composedPath?h=d.composedPath()[0]:d.path?h=d.path[0]:h=d.target,M_(h,c)&&(c=h),e.target=c}function $8(r,e,t){var n=t.pointers.length,i=t.changedPointers.length,a=e&Sr&&n-i===0,o=e&(Dt|qr)&&n-i===0;t.isFirst=!!a,t.isFinal=!!o,a&&(r.session={}),t.eventType=e,R8(r,t),r.emit("hammer.input",t),r.recognize(t),r.session.prevInput=t}function Qs(r){return r.trim().split(/\s+/g)}function Bs(r,e,t){Vn(Qs(e),function(n){r.addEventListener(n,t,!1)})}function Fs(r,e,t){Vn(Qs(e),function(n){r.removeEventListener(n,t,!1)})}function u$(r){var e=r.ownerDocument||r;return e.defaultView||e.parentWindow||window}var Yo=(function(){function r(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(a){Lc(t.options.enable,[t])&&i.handler(a)},this.init()}var e=r.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Bs(this.element,this.evEl,this.domHandler),this.evTarget&&Bs(this.target,this.evTarget,this.domHandler),this.evWin&&Bs(u$(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Fs(this.element,this.evEl,this.domHandler),this.evTarget&&Fs(this.target,this.evTarget,this.domHandler),this.evWin&&Fs(u$(this.element),this.evWin,this.domHandler)},r})();function ba(r,e,t){if(r.indexOf&&!t)return r.indexOf(e);for(var n=0;n<r.length;){if(t&&r[n][t]==e||!t&&r[n]===e)return n;n++}return-1}var D8={pointerdown:Sr,pointermove:Da,pointerup:Dt,pointercancel:qr,pointerout:qr},A8={2:Pu,3:S8,4:k_,5:_8},EW="pointerdown",SW="pointermove pointerup pointercancel";jn.MSPointerEvent&&!jn.PointerEvent&&(EW="MSPointerDown",SW="MSPointerMove MSPointerUp MSPointerCancel");var _W=(function(r){Jr(e,r);function e(){var n,i=e.prototype;return i.evEl=EW,i.evWin=SW,n=r.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=e.prototype;return t.handler=function(i){var a=this.store,o=!1,s=i.type.toLowerCase().replace("ms",""),u=D8[s],l=A8[i.pointerType]||i.pointerType,c=l===Pu,d=ba(a,i.pointerId,"pointerId");u&Sr&&(i.button===0||c)?d<0&&(a.push(i),d=a.length-1):u&(Dt|qr)&&(o=!0),!(d<0)&&(a[d]=i,this.callback(this.manager,u,{pointers:a,changedPointers:[i],pointerType:l,srcEvent:i}),o&&a.splice(d,1))},e})(Yo);function Js(r){return Array.prototype.slice.call(r,0)}function B_(r,e,t){for(var n=[],i=[],a=0;a<r.length;){var o=e?r[a][e]:r[a];ba(i,o)<0&&n.push(r[a]),i[a]=o,a++}return t&&(e?n=n.sort(function(s,u){return s[e]>u[e]}):n=n.sort()),n}var q8={touchstart:Sr,touchmove:Da,touchend:Dt,touchcancel:qr},k8="touchstart touchmove touchend touchcancel",F_=(function(r){Jr(e,r);function e(){var n;return e.prototype.evTarget=k8,n=r.apply(this,arguments)||this,n.targetIds={},n}var t=e.prototype;return t.handler=function(i){var a=q8[i.type],o=M8.call(this,i,a);o&&this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Pu,srcEvent:i})},e})(Yo);function M8(r,e){var t=Js(r.touches),n=this.targetIds;if(e&(Sr|Da)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,a,o=Js(r.changedTouches),s=[],u=this.target;if(a=t.filter(function(l){return M_(l.target,u)}),e===Sr)for(i=0;i<a.length;)n[a[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&s.push(o[i]),e&(Dt|qr)&&delete n[o[i].identifier],i++;if(s.length)return[B_(a.concat(s),"identifier",!0),s]}var B8={mousedown:Sr,mousemove:Da,mouseup:Dt},F8="mousedown",N8="mousemove mouseup",N_=(function(r){Jr(e,r);function e(){var n,i=e.prototype;return i.evEl=F8,i.evWin=N8,n=r.apply(this,arguments)||this,n.pressed=!1,n}var t=e.prototype;return t.handler=function(i){var a=B8[i.type];a&Sr&&i.button===0&&(this.pressed=!0),a&Da&&i.which!==1&&(a=Dt),this.pressed&&(a&Dt&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[i],changedPointers:[i],pointerType:k_,srcEvent:i}))},e})(Yo),L8=2500,l$=25;function c$(r){var e=r.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var a=function(){var s=i.indexOf(n);s>-1&&i.splice(s,1)};setTimeout(a,L8)}}function z8(r,e){r&Sr?(this.primaryTouch=e.changedPointers[0].identifier,c$.call(this,e)):r&(Dt|qr)&&c$.call(this,e)}function j8(r){for(var e=r.srcEvent.clientX,t=r.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],a=Math.abs(e-i.x),o=Math.abs(t-i.y);if(a<=l$&&o<=l$)return!0}return!1}var TW=(function(){var r=(function(e){Jr(t,e);function t(i,a){var o;return o=e.call(this,i,a)||this,o.handler=function(s,u,l){var c=l.pointerType===Pu,d=l.pointerType===k_;if(!(d&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(c)z8.call(vl(vl(o)),u,l);else if(d&&j8.call(vl(vl(o)),l))return;o.callback(s,u,l)}},o.touch=new F_(o.manager,o.handler),o.mouse=new N_(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})(Yo);return r})();function V8(r){var e,t=r.options.inputClass;return t?e=t:w8?e=_W:E8?e=F_:vW?e=TW:e=N_,new e(r,$8)}function ho(r,e,t){return Array.isArray(r)?(Vn(r,t[e],t),!0):!1}var ql=1,Yr=2,Oo=4,bi=8,Wn=bi,eu=16,En=32,W8=1;function H8(){return W8++}function gl(r,e){var t=e.manager;return t?t.get(r):r}function d$(r){return r&eu?"cancel":r&bi?"end":r&Oo?"move":r&Yr?"start":""}var Ru=(function(){function r(t){t===void 0&&(t={}),this.options=dn({enable:!0},t),this.id=H8(),this.manager=null,this.state=ql,this.simultaneous={},this.requireFail=[]}var e=r.prototype;return e.set=function(n){return ya(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(ho(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=gl(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return ho(n,"dropRecognizeWith",this)?this:(n=gl(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(ho(n,"requireFailure",this))return this;var i=this.requireFail;return n=gl(n,this),ba(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(ho(n,"dropRequireFailure",this))return this;n=gl(n,this);var i=ba(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,a=this.state;function o(s){i.manager.emit(s,n)}a<bi&&o(i.options.event+d$(a)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),a>=bi&&o(i.options.event+d$(a))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=En},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(En|ql)))return!1;n++}return!0},e.recognize=function(n){var i=ya({},n);if(!Lc(this.options.enable,[this,i])){this.reset(),this.state=En;return}this.state&(Wn|eu|En)&&(this.state=ql),this.state=this.process(i),this.state&(Yr|Oo|bi|eu)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},r})(),kS=(function(r){Jr(e,r);function e(n){var i;return n===void 0&&(n={}),i=r.call(this,dn({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=e.prototype;return t.getTouchAction=function(){return[AS]},t.process=function(i){var a=this,o=this.options,s=i.pointers.length===o.pointers,u=i.distance<o.threshold,l=i.deltaTime<o.time;if(this.reset(),i.eventType&Sr&&this.count===0)return this.failTimeout();if(u&&l&&s){if(i.eventType!==Dt)return this.failTimeout();var c=this.pTime?i.timeStamp-this.pTime<o.interval:!0,d=!this.pCenter||ec(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!d||!c?this.count=1:this.count+=1,this._input=i;var h=this.count%o.taps;if(h===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=Wn,a.tryEmit()},o.interval),Yr):Wn}return En},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=En},this.options.interval),En},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Wn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(Ru),Ro=(function(r){Jr(e,r);function e(n){return n===void 0&&(n={}),r.call(this,dn({pointers:1},n))||this}var t=e.prototype;return t.attrTest=function(i){var a=this.options.pointers;return a===0||i.pointers.length===a},t.process=function(i){var a=this.state,o=i.eventType,s=a&(Yr|Oo),u=this.attrTest(i);return s&&(o&qr||!u)?a|eu:s||u?o&Dt?a|bi:a&Yr?a|Oo:Yr:En},e})(Ru);function xW(r){return r===Io?"down":r===Ou?"up":r===Cu?"left":r===Iu?"right":""}var L_=(function(r){Jr(e,r);function e(n){var i;return n===void 0&&(n={}),i=r.call(this,dn({event:"pan",threshold:10,pointers:1,direction:pW},n))||this,i.pX=null,i.pY=null,i}var t=e.prototype;return t.getTouchAction=function(){var i=this.options.direction,a=[];return i&xn&&a.push(Zs),i&da&&a.push(Xs),a},t.directionTest=function(i){var a=this.options,o=!0,s=i.distance,u=i.direction,l=i.deltaX,c=i.deltaY;return u&a.direction||(a.direction&xn?(u=l===0?Ql:l<0?Cu:Iu,o=l!==this.pX,s=Math.abs(i.deltaX)):(u=c===0?Ql:c<0?Ou:Io,o=c!==this.pY,s=Math.abs(i.deltaY))),i.direction=u,o&&s>a.threshold&&u&a.direction},t.attrTest=function(i){return Ro.prototype.attrTest.call(this,i)&&(this.state&Yr||!(this.state&Yr)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var a=xW(i.direction);a&&(i.additionalEvent=this.options.event+a),r.prototype.emit.call(this,i)},e})(Ro),PW=(function(r){Jr(e,r);function e(n){return n===void 0&&(n={}),r.call(this,dn({event:"swipe",threshold:10,velocity:.3,direction:xn|da,pointers:1},n))||this}var t=e.prototype;return t.getTouchAction=function(){return L_.prototype.getTouchAction.call(this)},t.attrTest=function(i){var a=this.options.direction,o;return a&(xn|da)?o=i.overallVelocity:a&xn?o=i.overallVelocityX:a&da&&(o=i.overallVelocityY),r.prototype.attrTest.call(this,i)&&a&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&ma(o)>this.options.velocity&&i.eventType&Dt},t.emit=function(i){var a=xW(i.offsetDirection);a&&this.manager.emit(this.options.event+a,i),this.manager.emit(this.options.event,i)},e})(Ro),CW=(function(r){Jr(e,r);function e(n){return n===void 0&&(n={}),r.call(this,dn({event:"pinch",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[ca]},t.attrTest=function(i){return r.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Yr)},t.emit=function(i){if(i.scale!==1){var a=i.scale<1?"in":"out";i.additionalEvent=this.options.event+a}r.prototype.emit.call(this,i)},e})(Ro),IW=(function(r){Jr(e,r);function e(n){return n===void 0&&(n={}),r.call(this,dn({event:"rotate",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[ca]},t.attrTest=function(i){return r.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Yr)},e})(Ro),OW=(function(r){Jr(e,r);function e(n){var i;return n===void 0&&(n={}),i=r.call(this,dn({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=e.prototype;return t.getTouchAction=function(){return[fW]},t.process=function(i){var a=this,o=this.options,s=i.pointers.length===o.pointers,u=i.distance<o.threshold,l=i.deltaTime>o.time;if(this._input=i,!u||!s||i.eventType&(Dt|qr)&&!l)this.reset();else if(i.eventType&Sr)this.reset(),this._timer=setTimeout(function(){a.state=Wn,a.tryEmit()},o.time);else if(i.eventType&Dt)return Wn;return En},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===Wn&&(i&&i.eventType&Dt?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=q_(),this.manager.emit(this.options.event,this._input)))},e})(Ru),RW={domEvents:!1,touchAction:hW,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},h$=[[IW,{enable:!1}],[CW,{enable:!1},["rotate"]],[PW,{direction:xn}],[L_,{direction:xn},["swipe"]],[kS],[kS,{event:"doubletap",taps:2},["tap"]],[OW]],G8=1,f$=2;function v$(r,e){var t=r.element;if(t.style){var n;Vn(r.options.cssProps,function(i,a){n=Nc(t.style,a),e?(r.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=r.oldCssProps[n]||""}),e||(r.oldCssProps={})}}function U8(r,e){var t=document.createEvent("Event");t.initEvent(r,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var p$=(function(){function r(t,n){var i=this;this.options=ya({},RW,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=V8(this),this.touchAction=new yW(this,this.options.touchAction),v$(this,!0),Vn(this.options.recognizers,function(a){var o=i.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var e=r.prototype;return e.set=function(n){return ya(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?f$:G8},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var a,o=this.recognizers,s=i.curRecognizer;(!s||s&&s.state&Wn)&&(i.curRecognizer=null,s=null);for(var u=0;u<o.length;)a=o[u],i.stopped!==f$&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(n):a.reset(),!s&&a.state&(Yr|Oo|bi)&&(i.curRecognizer=a,s=a),u++}},e.get=function(n){if(n instanceof Ru)return n;for(var i=this.recognizers,a=0;a<i.length;a++)if(i[a].options.event===n)return i[a];return null},e.add=function(n){if(ho(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(ho(n,"remove",this))return this;var i=this.get(n);if(n){var a=this.recognizers,o=ba(a,i);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var a=this.handlers;return Vn(Qs(n),function(o){a[o]=a[o]||[],a[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var a=this.handlers;return Vn(Qs(n),function(o){i?a[o]&&a[o].splice(ba(a[o],i),1):delete a[o]}),this},e.emit=function(n,i){this.options.domEvents&&U8(n,i);var a=this.handlers[n]&&this.handlers[n].slice();if(!(!a||!a.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](i),o++}},e.destroy=function(){this.element&&v$(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},r})(),K8={touchstart:Sr,touchmove:Da,touchend:Dt,touchcancel:qr},Y8="touchstart",X8="touchstart touchmove touchend touchcancel",Z8=(function(r){Jr(e,r);function e(){var n,i=e.prototype;return i.evTarget=Y8,i.evWin=X8,n=r.apply(this,arguments)||this,n.started=!1,n}var t=e.prototype;return t.handler=function(i){var a=K8[i.type];if(a===Sr&&(this.started=!0),!!this.started){var o=Q8.call(this,i,a);a&(Dt|qr)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Pu,srcEvent:i})}},e})(Yo);function Q8(r,e){var t=Js(r.touches),n=Js(r.changedTouches);return e&(Dt|qr)&&(t=B_(t.concat(n),"identifier",!0)),[t,n]}function $W(r,e,t){var n="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),a=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,a),r.apply(this,arguments)}}var DW=$W(function(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;)(!t||t&&r[n[i]]===void 0)&&(r[n[i]]=e[n[i]]),i++;return r},"extend","Use `assign`."),J8=$W(function(r,e){return DW(r,e,!0)},"merge","Use `assign`.");function eX(r,e,t){var n=e.prototype,i;i=r.prototype=Object.create(n),i.constructor=r,i._super=n,t&&ya(i,t)}function g$(r,e){return function(){return r.apply(e,arguments)}}var tX=(function(){var r=function(t,n){return n===void 0&&(n={}),new p$(t,dn({recognizers:h$.concat()},n))};return r.VERSION="2.0.17-rc",r.DIRECTION_ALL=pW,r.DIRECTION_DOWN=Io,r.DIRECTION_LEFT=Cu,r.DIRECTION_RIGHT=Iu,r.DIRECTION_UP=Ou,r.DIRECTION_HORIZONTAL=xn,r.DIRECTION_VERTICAL=da,r.DIRECTION_NONE=Ql,r.DIRECTION_DOWN=Io,r.INPUT_START=Sr,r.INPUT_MOVE=Da,r.INPUT_END=Dt,r.INPUT_CANCEL=qr,r.STATE_POSSIBLE=ql,r.STATE_BEGAN=Yr,r.STATE_CHANGED=Oo,r.STATE_ENDED=bi,r.STATE_RECOGNIZED=Wn,r.STATE_CANCELLED=eu,r.STATE_FAILED=En,r.Manager=p$,r.Input=Yo,r.TouchAction=yW,r.TouchInput=F_,r.MouseInput=N_,r.PointerEventInput=_W,r.TouchMouseInput=TW,r.SingleTouchInput=Z8,r.Recognizer=Ru,r.AttrRecognizer=Ro,r.Tap=kS,r.Pan=L_,r.Swipe=PW,r.Pinch=CW,r.Rotate=IW,r.Press=OW,r.on=Bs,r.off=Fs,r.each=Vn,r.merge=J8,r.extend=DW,r.bindFn=g$,r.assign=ya,r.inherit=eX,r.bindFn=g$,r.prefixed=Nc,r.toArray=Js,r.inArray=ba,r.uniqueArray=B_,r.splitStr=Qs,r.boolOrFn=Lc,r.hasParent=M_,r.addEventListeners=Bs,r.removeEventListeners=Fs,r.defaults=ya({},RW,{preset:h$}),r})();const AW=L6("DELETE");function rX(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return qW({},r,...t)}function qW(){const r=tc(...arguments);return MW(r),r}function tc(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];if(e.length<2)return e[0];if(e.length>2)return tc(qW(e[0],e[1]),...U6(e).call(e,2));const n=e[0],i=e[1];if(n instanceof Date&&i instanceof Date)return n.setTime(i.getTime()),n;for(const a of J6(i))Object.prototype.propertyIsEnumerable.call(i,a)&&(i[a]===AW?delete n[a]:n[a]!==null&&i[a]!==null&&typeof n[a]=="object"&&typeof i[a]=="object"&&!bn(n[a])&&!bn(i[a])?n[a]=tc(n[a],i[a]):n[a]=kW(i[a]));return n}function kW(r){return bn(r)?un(r).call(r,e=>kW(e)):typeof r=="object"&&r!==null?r instanceof Date?new Date(r.getTime()):tc({},r):r}function MW(r){for(const e of A_(r))r[e]===AW?delete r[e]:typeof r[e]=="object"&&r[e]!==null&&MW(r[e])}function nX(){const r=()=>{};return{on:r,off:r,destroy:r,emit:r,get(){return{set:r}}}}const iX=typeof window<"u"?window.Hammer||tX:function(){return nX()};function Nn(r){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:r,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=iX(this._dom.overlay);t.on("tap",iW(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{t.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];ga(n).call(n,i=>{t.on(i,a=>{a.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{aX(i.target,r)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}p8(Nn.prototype);Nn.current=null;Nn.prototype.destroy=function(){this.deactivate();for(const t of _9(r=uW(e=this._cleanupQueue).call(e,0)).call(r)){var r,e;t()}};Nn.prototype.activate=function(){Nn.current&&Nn.current.deactivate(),Nn.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Nn.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Nn.prototype._onTapOverlay=function(r){this.activate(),r.srcEvent.stopPropagation()};function aX(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}var vp,y$;function oX(){if(y$)return vp;y$=1,UV();var r=Wt();return vp=r.Object.getOwnPropertySymbols,vp}var pp,m$;function sX(){if(m$)return pp;m$=1;var r=oX();return pp=r,pp}var gp,b$;function uX(){return b$||(b$=1,gp=sX()),gp}var lX=uX(),w$=Ue(lX),yp={exports:{}},E$={},S$;function cX(){if(S$)return E$;S$=1;var r=qe(),e=rt(),t=Rn(),n=Oc().f,i=Mt(),a=!i||e(function(){n(1)});return r({target:"Object",stat:!0,forced:a,sham:!i},{getOwnPropertyDescriptor:function(s,u){return n(t(s),u)}}),E$}var _$;function dX(){if(_$)return yp.exports;_$=1,cX();var r=Wt(),e=r.Object,t=yp.exports=function(i,a){return e.getOwnPropertyDescriptor(i,a)};return e.getOwnPropertyDescriptor.sham&&(t.sham=!0),yp.exports}var mp,T$;function hX(){if(T$)return mp;T$=1;var r=dX();return mp=r,mp}var bp,x$;function fX(){return x$||(x$=1,bp=hX()),bp}var vX=fX(),BW=Ue(vX),P$={},C$;function pX(){if(C$)return P$;C$=1;var r=qe(),e=Mt(),t=oW(),n=Rn(),i=Oc(),a=$c();return r({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(s){for(var u=n(s),l=i.f,c=t(u),d={},h=0,f,v;c.length>h;)v=l(u,f=c[h++]),v!==void 0&&a(d,f,v);return d}}),P$}var wp,I$;function gX(){if(I$)return wp;I$=1,pX();var r=Wt();return wp=r.Object.getOwnPropertyDescriptors,wp}var Ep,O$;function yX(){if(O$)return Ep;O$=1;var r=gX();return Ep=r,Ep}var Sp,R$;function mX(){return R$||(R$=1,Sp=yX()),Sp}var bX=mX(),$$=Ue(bX),_p={exports:{}},D$={},A$;function wX(){if(A$)return D$;A$=1;var r=qe(),e=Mt(),t=O_().f;return r({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!e},{defineProperties:t}),D$}var q$;function EX(){if(q$)return _p.exports;q$=1,wX();var r=Wt(),e=r.Object,t=_p.exports=function(i,a){return e.defineProperties(i,a)};return e.defineProperties.sham&&(t.sham=!0),_p.exports}var Tp,k$;function SX(){if(k$)return Tp;k$=1;var r=EX();return Tp=r,Tp}var xp,M$;function _X(){return M$||(M$=1,xp=SX()),xp}var TX=_X(),xX=Ue(TX),Pp,B$;function PX(){return B$||(B$=1,Pp=BV()),Pp}var CX=PX(),IX=Ue(CX),F$={},N$={},Cp={exports:{}},Ip,L$;function OX(){if(L$)return Ip;L$=1;var r=rt();return Ip=r(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),Ip}var Op,z$;function RX(){if(z$)return Op;z$=1;var r=rt(),e=xr(),t=Jn(),n=OX(),i=Object.isExtensible,a=r(function(){});return Op=a||n?function(s){return!e(s)||n&&t(s)==="ArrayBuffer"?!1:i?i(s):!0}:i,Op}var Rp,j$;function $X(){if(j$)return Rp;j$=1;var r=rt();return Rp=!r(function(){return Object.isExtensible(Object.preventExtensions({}))}),Rp}var V$;function FW(){if(V$)return Cp.exports;V$=1;var r=qe(),e=st(),t=Su(),n=xr(),i=Qt(),a=Qr().f,o=qc(),s=VV(),u=RX(),l=Ic(),c=$X(),d=!1,h=l("meta"),f=0,v=function(w){a(w,h,{value:{objectID:"O"+f++,weakData:{}}})},p=function(w,S){if(!n(w))return typeof w=="symbol"?w:(typeof w=="string"?"S":"P")+w;if(!i(w,h)){if(!u(w))return"F";if(!S)return"E";v(w)}return w[h].objectID},y=function(w,S){if(!i(w,h)){if(!u(w))return!0;if(!S)return!1;v(w)}return w[h].weakData},g=function(w){return c&&d&&u(w)&&!i(w,h)&&v(w),w},m=function(){b.enable=function(){},d=!0;var w=o.f,S=e([].splice),T={};T[h]=1,w(T).length&&(o.f=function(_){for(var E=w(_),x=0,P=E.length;x<P;x++)if(E[x]===h){S(E,x,1);break}return E},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:s.f}))},b=Cp.exports={enable:m,fastKey:p,getWeakData:y,onFreeze:g};return t[h]=!0,Cp.exports}var $p,W$;function DX(){if(W$)return $p;W$=1;var r=Jt(),e=Ko(),t=r("iterator"),n=Array.prototype;return $p=function(i){return i!==void 0&&(e.Array===i||n[t]===i)},$p}var Dp,H$;function NW(){if(H$)return Dp;H$=1;var r=Bi(),e=S_(),t=mu(),n=Ko(),i=Jt(),a=i("iterator");return Dp=function(o){if(!t(o))return e(o,a)||e(o,"@@iterator")||n[r(o)]},Dp}var Ap,G$;function LW(){if(G$)return Ap;G$=1;var r=Mr(),e=ei(),t=ti(),n=zo(),i=NW(),a=TypeError;return Ap=function(o,s){var u=arguments.length<2?i(o):s;if(e(u))return t(r(u,o));throw new a(n(o)+" is not iterable")},Ap}var qp,U$;function z_(){if(U$)return qp;U$=1;var r=Mr(),e=ti(),t=S_();return qp=function(n,i,a){var o,s;e(n);try{if(o=t(n,"return"),!o){if(i==="throw")throw a;return a}o=r(o,n)}catch(u){s=!0,o=u}if(i==="throw")throw a;if(s)throw o;return e(o),a},qp}var kp,K$;function j_(){if(K$)return kp;K$=1;var r=Rc(),e=Mr(),t=ti(),n=zo(),i=DX(),a=Mi(),o=Zt(),s=LW(),u=NW(),l=z_(),c=TypeError,d=function(f,v){this.stopped=f,this.result=v},h=d.prototype;return kp=function(f,v,p){var y=p&&p.that,g=!!(p&&p.AS_ENTRIES),m=!!(p&&p.IS_RECORD),b=!!(p&&p.IS_ITERATOR),w=!!(p&&p.INTERRUPTED),S=r(v,y),T,_,E,x,P,C,I,O=function(D){return T&&l(T,"normal"),new d(!0,D)},$=function(D){return g?(t(D),w?S(D[0],D[1],O):S(D[0],D[1])):w?S(D,O):S(D)};if(m)T=f.iterator;else if(b)T=f;else{if(_=u(f),!_)throw new c(n(f)+" is not iterable");if(i(_)){for(E=0,x=a(f);x>E;E++)if(P=$(f[E]),P&&o(h,P))return P;return new d(!1)}T=s(f,_)}for(C=m?f.next:T.next;!(I=e(C,T)).done;){try{P=$(I.value)}catch(D){l(T,"throw",D)}if(typeof P=="object"&&P&&o(h,P))return P}return new d(!1)},kp}var Mp,Y$;function zW(){if(Y$)return Mp;Y$=1;var r=Zt(),e=TypeError;return Mp=function(t,n){if(r(n,t))return t;throw new e("Incorrect invocation")},Mp}var Bp,X$;function jW(){if(X$)return Bp;X$=1;var r=qe(),e=kt(),t=FW(),n=rt(),i=Wo(),a=j_(),o=zW(),s=Xt(),u=xr(),l=mu(),c=$a(),d=Qr().f,h=Uo().forEach,f=Mt(),v=xu(),p=v.set,y=v.getterFor;return Bp=function(g,m,b){var w=g.indexOf("Map")!==-1,S=g.indexOf("Weak")!==-1,T=w?"set":"add",_=e[g],E=_&&_.prototype,x={},P;if(!f||!s(_)||!(S||E.forEach&&!n(function(){new _().entries().next()})))P=b.getConstructor(m,g,w,T),t.enable();else{P=m(function(O,$){p(o(O,C),{type:g,collection:new _}),l($)||a($,O[T],{that:O,AS_ENTRIES:w})});var C=P.prototype,I=y(g);h(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var $=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(C,O,function(D,q){var A=I(this).collection;if(!$&&S&&!u(D))return O==="get"?void 0:!1;var k=A[O](D===0?0:D,q);return $?this:k})}),S||d(C,"size",{configurable:!0,get:function(){return I(this).collection.size}})}return c(P,g,!1,!0),x[g]=P,r({global:!0,forced:!0},x),S||b.setStrong(P,g,w),P},Bp}var Fp,Z$;function AX(){if(Z$)return Fp;Z$=1;var r=Tu();return Fp=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:r(e,i,t[i],n);return e},Fp}var Np,Q$;function qX(){if(Q$)return Np;Q$=1;var r=Lr(),e=R_(),t=Jt(),n=Mt(),i=t("species");return Np=function(a){var o=r(a);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},Np}var Lp,J$;function VW(){if(J$)return Lp;J$=1;var r=_u(),e=R_(),t=AX(),n=Rc(),i=zW(),a=mu(),o=j_(),s=$_(),u=D_(),l=qX(),c=Mt(),d=FW().fastKey,h=xu(),f=h.set,v=h.getterFor;return Lp={getConstructor:function(p,y,g,m){var b=p(function(E,x){i(E,w),f(E,{type:y,index:r(null),first:null,last:null,size:0}),c||(E.size=0),a(x)||o(x,E[m],{that:E,AS_ENTRIES:g})}),w=b.prototype,S=v(y),T=function(E,x,P){var C=S(E),I=_(E,x),O,$;return I?I.value=P:(C.last=I={index:$=d(x,!0),key:x,value:P,previous:O=C.last,next:null,removed:!1},C.first||(C.first=I),O&&(O.next=I),c?C.size++:E.size++,$!=="F"&&(C.index[$]=I)),E},_=function(E,x){var P=S(E),C=d(x),I;if(C!=="F")return P.index[C];for(I=P.first;I;I=I.next)if(I.key===x)return I};return t(w,{clear:function(){for(var x=this,P=S(x),C=P.first;C;)C.removed=!0,C.previous&&(C.previous=C.previous.next=null),C=C.next;P.first=P.last=null,P.index=r(null),c?P.size=0:x.size=0},delete:function(E){var x=this,P=S(x),C=_(x,E);if(C){var I=C.next,O=C.previous;delete P.index[C.index],C.removed=!0,O&&(O.next=I),I&&(I.previous=O),P.first===C&&(P.first=I),P.last===C&&(P.last=O),c?P.size--:x.size--}return!!C},forEach:function(x){for(var P=S(this),C=n(x,arguments.length>1?arguments[1]:void 0),I;I=I?I.next:P.first;)for(C(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(x){return!!_(this,x)}}),t(w,g?{get:function(x){var P=_(this,x);return P&&P.value},set:function(x,P){return T(this,x===0?0:x,P)}}:{add:function(x){return T(this,x=x===0?0:x,x)}}),c&&e(w,"size",{configurable:!0,get:function(){return S(this).size}}),b},setStrong:function(p,y,g){var m=y+" Iterator",b=v(y),w=v(m);s(p,y,function(S,T){f(this,{type:m,target:S,state:b(S),kind:T,last:null})},function(){for(var S=w(this),T=S.kind,_=S.last;_&&_.removed;)_=_.previous;return!S.target||!(S.last=_=_?_.next:S.state.first)?(S.target=null,u(void 0,!0)):u(T==="keys"?_.key:T==="values"?_.value:[_.key,_.value],!1)},g?"entries":"values",!g,!0),l(y)}},Lp}var eD;function kX(){if(eD)return N$;eD=1;var r=jW(),e=VW();return r("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),N$}var tD;function MX(){return tD||(tD=1,kX()),F$}var rD={},zp,nD;function WW(){return nD||(nD=1,zp=function(r,e){return e===1?function(t,n){return t[r](n)}:function(t,n,i){return t[r](n,i)}}),zp}var jp,iD;function BX(){if(iD)return jp;iD=1;var r=Lr(),e=WW(),t=r("Map");return jp={Map:t,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:t.prototype},jp}var aD;function FX(){if(aD)return rD;aD=1;var r=qe(),e=st(),t=ei(),n=Oa(),i=j_(),a=BX(),o=jo(),s=rt(),u=a.Map,l=a.has,c=a.get,d=a.set,h=e([].push),f=o||s(function(){return u.groupBy("ab",function(v){return v}).get("a").length!==1});return r({target:"Map",stat:!0,forced:o||f},{groupBy:function(p,y){n(p),t(y);var g=new u,m=0;return i(p,function(b){var w=y(b,m++);l(g,w)?h(c(g,w),b):d(g,w,[b])}),g}}),rD}var Vp,oD;function NX(){if(oD)return Vp;oD=1,Ni(),MX(),FX(),Bc();var r=Wt();return Vp=r.Map,Vp}var Wp,sD;function LX(){if(sD)return Wp;sD=1;var r=NX();return Li(),Wp=r,Wp}var Hp,uD;function zX(){return uD||(uD=1,Hp=LX()),Hp}var jX=zX(),HW=Ue(jX),lD={},cD;function VX(){if(cD)return lD;cD=1;var r=qe(),e=Uo().some,t=Fc(),n=t("some");return r({target:"Array",proto:!0,forced:!n},{some:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),lD}var Gp,dD;function WX(){if(dD)return Gp;dD=1,VX();var r=Br();return Gp=r("Array","some"),Gp}var Up,hD;function HX(){if(hD)return Up;hD=1;var r=Zt(),e=WX(),t=Array.prototype;return Up=function(n){var i=n.some;return n===t||r(t,n)&&i===t.some?e:i},Up}var Kp,fD;function GX(){if(fD)return Kp;fD=1;var r=HX();return Kp=r,Kp}var Yp,vD;function UX(){return vD||(vD=1,Yp=GX()),Yp}var KX=UX(),YX=Ue(KX),Xp,pD;function XX(){if(pD)return Xp;pD=1,Ni();var r=Br();return Xp=r("Array","keys"),Xp}var Zp,gD;function ZX(){if(gD)return Zp;gD=1;var r=XX();return Zp=r,Zp}var Qp,yD;function QX(){if(yD)return Qp;yD=1,Li();var r=Bi(),e=Qt(),t=Zt(),n=ZX(),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};return Qp=function(o){var s=o.keys;return o===i||t(i,o)&&s===i.keys||e(a,r(o))?n:s},Qp}var Jp,mD;function JX(){return mD||(mD=1,Jp=QX()),Jp}var e7=JX(),Za=Ue(e7),bD={},eg,wD;function t7(){if(wD)return eg;wD=1;var r=Go(),e=Math.floor,t=function(n,i){var a=n.length;if(a<8)for(var o=1,s,u;o<a;){for(u=o,s=n[o];u&&i(n[u-1],s)>0;)n[u]=n[--u];u!==o++&&(n[u]=s)}else for(var l=e(a/2),c=t(r(n,0,l),i),d=t(r(n,l),i),h=c.length,f=d.length,v=0,p=0;v<h||p<f;)n[v+p]=v<h&&p<f?i(c[v],d[p])<=0?c[v++]:d[p++]:v<h?c[v++]:d[p++];return n};return eg=t,eg}var tg,ED;function r7(){if(ED)return tg;ED=1;var r=No(),e=r.match(/firefox\/(\d+)/i);return tg=!!e&&+e[1],tg}var rg,SD;function n7(){if(SD)return rg;SD=1;var r=No();return rg=/MSIE|Trident/.test(r),rg}var ng,_D;function i7(){if(_D)return ng;_D=1;var r=No(),e=r.match(/AppleWebKit\/(\d+)\./);return ng=!!e&&+e[1],ng}var TD;function a7(){if(TD)return bD;TD=1;var r=qe(),e=st(),t=ei(),n=vn(),i=Mi(),a=sW(),o=Fi(),s=rt(),u=t7(),l=Fc(),c=r7(),d=n7(),h=bu(),f=i7(),v=[],p=e(v.sort),y=e(v.push),g=s(function(){v.sort(void 0)}),m=s(function(){v.sort(null)}),b=l("sort"),w=!s(function(){if(h)return h<70;if(!(c&&c>3)){if(d)return!0;if(f)return f<603;var _="",E,x,P,C;for(E=65;E<76;E++){switch(x=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:P=3;break;case 68:case 71:P=4;break;default:P=2}for(C=0;C<47;C++)v.push({k:x+C,v:P})}for(v.sort(function(I,O){return O.v-I.v}),C=0;C<v.length;C++)x=v[C].k.charAt(0),_.charAt(_.length-1)!==x&&(_+=x);return _!=="DGBEFHACIJK"}}),S=g||!m||!b||!w,T=function(_){return function(E,x){return x===void 0?-1:E===void 0?1:_!==void 0?+_(E,x)||0:o(E)>o(x)?1:-1}};return r({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&t(E);var x=n(this);if(w)return E===void 0?p(x):p(x,E);var P=[],C=i(x),I,O;for(O=0;O<C;O++)O in x&&y(P,x[O]);for(u(P,T(E)),I=i(P),O=0;O<I;)x[O]=P[O++];for(;O<C;)a(x,O++);return x}}),bD}var ig,xD;function o7(){if(xD)return ig;xD=1,a7();var r=Br();return ig=r("Array","sort"),ig}var ag,PD;function s7(){if(PD)return ag;PD=1;var r=Zt(),e=o7(),t=Array.prototype;return ag=function(n){var i=n.sort;return n===t||r(t,n)&&i===t.sort?e:i},ag}var og,CD;function u7(){if(CD)return og;CD=1;var r=s7();return og=r,og}var sg,ID;function l7(){return ID||(ID=1,sg=u7()),sg}var c7=l7(),MS=Ue(c7),ug,OD;function d7(){if(OD)return ug;OD=1,Ni();var r=Br();return ug=r("Array","values"),ug}var lg,RD;function h7(){if(RD)return lg;RD=1;var r=d7();return lg=r,lg}var cg,$D;function f7(){if($D)return cg;$D=1,Li();var r=Bi(),e=Qt(),t=Zt(),n=h7(),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};return cg=function(o){var s=o.values;return o===i||t(i,o)&&s===i.values||e(a,r(o))?n:s},cg}var dg,DD;function v7(){return DD||(DD=1,dg=f7()),dg}var p7=v7(),AD=Ue(p7),hg,qD;function g7(){return qD||(qD=1,hg=nW()),hg}var y7=g7(),fo=Ue(y7),fg,kD;function m7(){if(kD)return fg;kD=1,Ni();var r=Br();return fg=r("Array","entries"),fg}var vg,MD;function b7(){if(MD)return vg;MD=1;var r=m7();return vg=r,vg}var pg,BD;function w7(){if(BD)return pg;BD=1,Li();var r=Bi(),e=Qt(),t=Zt(),n=b7(),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};return pg=function(o){var s=o.entries;return o===i||t(i,o)&&s===i.entries||e(a,r(o))?n:s},pg}var gg,FD;function E7(){return FD||(FD=1,gg=w7()),gg}var S7=E7(),_7=Ue(S7);const ir=[];for(let r=0;r<256;++r)ir.push((r+256).toString(16).slice(1));function T7(r,e=0){return(ir[r[e+0]]+ir[r[e+1]]+ir[r[e+2]]+ir[r[e+3]]+"-"+ir[r[e+4]]+ir[r[e+5]]+"-"+ir[r[e+6]]+ir[r[e+7]]+"-"+ir[r[e+8]]+ir[r[e+9]]+"-"+ir[r[e+10]]+ir[r[e+11]]+ir[r[e+12]]+ir[r[e+13]]+ir[r[e+14]]+ir[r[e+15]]).toLowerCase()}let yg;const x7=new Uint8Array(16);function P7(){if(!yg){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yg=crypto.getRandomValues.bind(crypto)}return yg(x7)}const C7=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var ND={randomUUID:C7};function I7(r,e,t){r=r||{};const n=r.random??r.rng?.()??P7();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,T7(n)}function O7(r,e,t){return ND.randomUUID&&!r?ND.randomUUID():I7(r)}function LD(r){return typeof r=="string"||typeof r=="number"}class V_{constructor(e){mi(this,"_queue",[]),mi(this,"_timeout",null),mi(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const n=new V_(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const i=[{name:"flush",original:void 0}];if(t&&t.replace)for(let a=0;a<t.replace.length;a++){const o=t.replace[a];i.push({name:o,original:e[o]}),n.replace(e,o)}return n._extended={object:e,methods:i},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let n=0;n<t.length;n++){const i=t[n];i.original?e[i.name]=i.original:delete e[i.name]}this._extended=null}}replace(e,t){const n=this,i=e[t];if(!i)throw new Error("Method "+t+" undefined");e[t]=function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];n.queue({args:o,fn:i,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=h8(()=>{this.flush()},this.delay))}flush(){var e,t;ga(e=uW(t=this._queue).call(t,0)).call(e,n=>{n.fn.apply(n.context||n.fn,n.args||[])})}}class rc{constructor(){mi(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),mi(this,"subscribe",rc.prototype.on),mi(this,"unsubscribe",rc.prototype.off)}_trigger(e,t,n){var i;if(e==="*")throw new Error("Cannot trigger event *");ga(i=[...this._subscribers[e],...this._subscribers["*"]]).call(i,a=>{a(e,t,n??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){var n;this._subscribers[e]=lo(n=this._subscribers[e]).call(n,i=>i!==t)}}var zD={},jD={},VD;function R7(){if(VD)return jD;VD=1;var r=jW(),e=VW();return r("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),jD}var WD;function $7(){return WD||(WD=1,R7()),zD}var HD={},mg,GD;function Aa(){if(GD)return mg;GD=1;var r=zo(),e=TypeError;return mg=function(t){if(typeof t=="object"&&"size"in t&&"has"in t&&"add"in t&&"delete"in t&&"keys"in t)return t;throw new e(r(t)+" is not a set")},mg}var bg,UD;function qa(){if(UD)return bg;UD=1;var r=Lr(),e=WW(),t=r("Set"),n=t.prototype;return bg={Set:t,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},bg}var wg,KD;function ka(){if(KD)return wg;KD=1;var r=Mr();return wg=function(e,t,n){for(var i=n?e:e.iterator,a=e.next,o,s;!(o=r(a,i)).done;)if(s=t(o.value),s!==void 0)return s},wg}var Eg,YD;function $u(){if(YD)return Eg;YD=1;var r=ka();return Eg=function(e,t,n){return n?r(e.keys(),t,!0):e.forEach(t)},Eg}var Sg,XD;function W_(){if(XD)return Sg;XD=1;var r=qa(),e=$u(),t=r.Set,n=r.add;return Sg=function(i){var a=new t;return e(i,function(o){n(a,o)}),a},Sg}var _g,ZD;function Du(){return ZD||(ZD=1,_g=function(r){return r.size}),_g}var Tg,QD;function D7(){return QD||(QD=1,Tg=function(r){return{iterator:r,next:r.next,done:!1}}),Tg}var xg,JD;function Ma(){if(JD)return xg;JD=1;var r=ei(),e=ti(),t=Mr(),n=Ho(),i=D7(),a="Invalid size",o=RangeError,s=TypeError,u=Math.max,l=function(c,d){this.set=c,this.size=u(d,0),this.has=r(c.has),this.keys=r(c.keys)};return l.prototype={getIterator:function(){return i(e(t(this.keys,this.set)))},includes:function(c){return t(this.has,this.set,c)}},xg=function(c){e(c);var d=+c.size;if(d!==d)throw new s(a);var h=n(d);if(h<0)throw new o(a);return new l(c,h)},xg}var Pg,e2;function A7(){if(e2)return Pg;e2=1;var r=Aa(),e=qa(),t=W_(),n=Du(),i=Ma(),a=$u(),o=ka(),s=e.has,u=e.remove;return Pg=function(c){var d=r(this),h=i(c),f=t(d);return n(d)<=h.size?a(d,function(v){h.includes(v)&&u(f,v)}):o(h.getIterator(),function(v){s(f,v)&&u(f,v)}),f},Pg}var Cg,t2;function Ba(){return t2||(t2=1,Cg=function(){return!1}),Cg}var r2;function q7(){if(r2)return HD;r2=1;var r=qe(),e=A7(),t=rt(),n=Ba(),i=!n("difference",function(o){return o.size===0}),a=i||t(function(){var o={size:1,has:function(){return!0},keys:function(){var u=0;return{next:function(){var l=u++>1;return s.has(1)&&s.clear(),{done:l,value:2}}}}},s=new Set([1,2,3,4]);return s.difference(o).size!==3});return r({target:"Set",proto:!0,real:!0,forced:a},{difference:e}),HD}var n2={},Ig,i2;function k7(){if(i2)return Ig;i2=1;var r=Aa(),e=qa(),t=Du(),n=Ma(),i=$u(),a=ka(),o=e.Set,s=e.add,u=e.has;return Ig=function(c){var d=r(this),h=n(c),f=new o;return t(d)>h.size?a(h.getIterator(),function(v){u(d,v)&&s(f,v)}):i(d,function(v){h.includes(v)&&s(f,v)}),f},Ig}var a2;function M7(){if(a2)return n2;a2=1;var r=qe(),e=rt(),t=k7(),n=Ba(),i=!n("intersection",function(a){return a.size===2&&a.has(1)&&a.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return r({target:"Set",proto:!0,real:!0,forced:i},{intersection:t}),n2}var o2={},Og,s2;function B7(){if(s2)return Og;s2=1;var r=Aa(),e=qa().has,t=Du(),n=Ma(),i=$u(),a=ka(),o=z_();return Og=function(u){var l=r(this),c=n(u);if(t(l)<=c.size)return i(l,function(h){if(c.includes(h))return!1},!0)!==!1;var d=c.getIterator();return a(d,function(h){if(e(l,h))return o(d,"normal",!1)})!==!1},Og}var u2;function F7(){if(u2)return o2;u2=1;var r=qe(),e=B7(),t=Ba(),n=!t("isDisjointFrom",function(i){return!i});return r({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),o2}var l2={},Rg,c2;function N7(){if(c2)return Rg;c2=1;var r=Aa(),e=Du(),t=$u(),n=Ma();return Rg=function(a){var o=r(this),s=n(a);return e(o)>s.size?!1:t(o,function(u){if(!s.includes(u))return!1},!0)!==!1},Rg}var d2;function L7(){if(d2)return l2;d2=1;var r=qe(),e=N7(),t=Ba(),n=!t("isSubsetOf",function(i){return i});return r({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),l2}var h2={},$g,f2;function z7(){if(f2)return $g;f2=1;var r=Aa(),e=qa().has,t=Du(),n=Ma(),i=ka(),a=z_();return $g=function(s){var u=r(this),l=n(s);if(t(u)<l.size)return!1;var c=l.getIterator();return i(c,function(d){if(!e(u,d))return a(c,"normal",!1)})!==!1},$g}var v2;function j7(){if(v2)return h2;v2=1;var r=qe(),e=z7(),t=Ba(),n=!t("isSupersetOf",function(i){return!i});return r({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),h2}var p2={},Dg,g2;function V7(){if(g2)return Dg;g2=1;var r=Aa(),e=qa(),t=W_(),n=Ma(),i=ka(),a=e.add,o=e.has,s=e.remove;return Dg=function(l){var c=r(this),d=n(l).getIterator(),h=t(c);return i(d,function(f){o(c,f)?s(h,f):a(h,f)}),h},Dg}var Ag,y2;function GW(){return y2||(y2=1,Ag=function(r){try{var e=new Set,t={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[r](t);return n.size===1&&n.values().next().value===4}catch{return!1}}),Ag}var m2;function W7(){if(m2)return p2;m2=1;var r=qe(),e=V7(),t=GW(),n=Ba(),i=!n("symmetricDifference")||!t("symmetricDifference");return r({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),p2}var b2={},qg,w2;function H7(){if(w2)return qg;w2=1;var r=Aa(),e=qa().add,t=W_(),n=Ma(),i=ka();return qg=function(o){var s=r(this),u=n(o).getIterator(),l=t(s);return i(u,function(c){e(l,c)}),l},qg}var E2;function G7(){if(E2)return b2;E2=1;var r=qe(),e=H7(),t=GW(),n=Ba(),i=!n("union")||!t("union");return r({target:"Set",proto:!0,real:!0,forced:i},{union:e}),b2}var kg,S2;function U7(){if(S2)return kg;S2=1,Ni(),$7(),q7(),M7(),F7(),L7(),j7(),W7(),G7(),Bc();var r=Wt();return kg=r.Set,kg}var Mg,_2;function K7(){if(_2)return Mg;_2=1;var r=U7();return Li(),Mg=r,Mg}var Bg,T2;function Y7(){return T2||(T2=1,Bg=K7()),Bg}var X7=Y7(),Fg=Ue(X7),Ng,x2;function Z7(){if(x2)return Ng;x2=1,Ni(),Bc();var r=LW();return Ng=r,Ng}var Lg,P2;function Q7(){if(P2)return Lg;P2=1;var r=Z7();return Li(),Lg=r,Lg}var zg,C2;function J7(){if(C2)return zg;C2=1;var r=Q7();return zg=r,zg}var jg,I2;function eZ(){if(I2)return jg;I2=1;var r=J7();return jg=r,jg}var Vg,O2;function tZ(){return O2||(O2=1,Vg=eZ()),Vg}var Wg,R2;function rZ(){return R2||(R2=1,Wg=tZ()),Wg}var nZ=rZ(),Hg=Ue(nZ);class aa{constructor(e){this._pairs=e}*[fo](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return un(e=[...this._pairs]).call(e,t=>t[0])}toItemArray(){var e;return un(e=[...this._pairs]).call(e,t=>t[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Y9(null);for(const[t,n]of this._pairs)e[t]=n;return e}toMap(){return new HW(this._pairs)}toIdSet(){return new Fg(this.toIdArray())}toItemSet(){return new Fg(this.toItemArray())}cache(){return new aa([...this._pairs])}distinct(e){const t=new Fg;for(const[n,i]of this._pairs)t.add(e(i,n));return t}filter(e){const t=this._pairs;return new aa({*[fo](){for(const[n,i]of t)e(i,n)&&(yield[n,i])}})}forEach(e){for(const[t,n]of this._pairs)e(n,t)}map(e){const t=this._pairs;return new aa({*[fo](){for(const[n,i]of t)yield[n,e(i,n)]}})}max(e){const t=Hg(this._pairs);let n=t.next();if(n.done)return null;let i=n.value[1],a=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,s]=n.value,u=e(s,o);u>a&&(a=u,i=s)}return i}min(e){const t=Hg(this._pairs);let n=t.next();if(n.done)return null;let i=n.value[1],a=e(n.value[1],n.value[0]);for(;!(n=t.next()).done;){const[o,s]=n.value,u=e(s,o);u<a&&(a=u,i=s)}return i}reduce(e,t){for(const[n,i]of this._pairs)t=e(t,i,n);return t}sort(e){return new aa({[fo]:()=>{var t;return Hg(MS(t=[...this._pairs]).call(t,(n,i)=>{let[a,o]=n,[s,u]=i;return e(o,u,a,s)}))}})}}function $2(r,e){var t=A_(r);if(w$){var n=w$(r);e&&(n=lo(n).call(n,function(i){return BW(r,i).enumerable})),t.push.apply(t,n)}return t}function D2(r){for(var e=1;e<arguments.length;e++){var t,n,i=arguments[e]!=null?arguments[e]:{};e%2?ga(t=$2(Object(i),!0)).call(t,function(a){mi(r,a,i[a])}):$$?xX(r,$$(i)):ga(n=$2(Object(i))).call(n,function(a){IX(r,a,BW(i,a))})}return r}function iZ(r,e){return r[e]==null&&(r[e]=O7()),r}class nc extends rc{get idProp(){return this._idProp}constructor(e,t){super(),mi(this,"_queue",null),e&&!bn(e)&&(t=e,e=[]),this._options=t||{},this._data=new HW,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(t)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=V_.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,t){const n=[];let i;if(bn(e)){const a=un(e).call(e,o=>o[this._idProp]);if(YX(a).call(a,o=>this._data.has(o)))throw new Error("A duplicate id was found in the parameter array.");for(let o=0,s=e.length;o<s;o++)i=this._addItem(e[o]),n.push(i)}else if(e&&typeof e=="object")i=this._addItem(e),n.push(i);else throw new Error("Unknown dataType");return n.length&&this._trigger("add",{items:n},t),n}update(e,t){const n=[],i=[],a=[],o=[],s=this._idProp,u=l=>{const c=l[s];if(c!=null&&this._data.has(c)){const d=l,h=B9({},this._data.get(c)),f=this._updateItem(d);i.push(f),o.push(d),a.push(h)}else{const d=this._addItem(l);n.push(d)}};if(bn(e))for(let l=0,c=e.length;l<c;l++)e[l]&&typeof e[l]=="object"?u(e[l]):console.warn("Ignoring input item, which is not an object at index "+l);else if(e&&typeof e=="object")u(e);else throw new Error("Unknown dataType");if(n.length&&this._trigger("add",{items:n},t),i.length){const l={items:i,oldData:a,data:o};this._trigger("update",l,t)}return V9(n).call(n,i)}updateOnly(e,t){var n;bn(e)||(e=[e]);const i=un(n=un(e).call(e,a=>{const o=this._data.get(a[this._idProp]);if(o==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:o,update:a}})).call(n,a=>{let{oldData:o,update:s}=a;const u=o[this._idProp],l=rX(o,s);return this._data.set(u,l),{id:u,oldData:o,updatedData:l}});if(i.length){const a={items:un(i).call(i,o=>o.id),oldData:un(i).call(i,o=>o.oldData),data:un(i).call(i,o=>o.updatedData)};return this._trigger("update",a,t),a.items}else return[]}get(e,t){let n,i,a;LD(e)?(n=e,a=t):bn(e)?(i=e,a=t):a=e;const o=a&&a.returnType==="Object"?"Object":"Array",s=a&&lo(a),u=[];let l,c,d;if(n!=null)l=this._data.get(n),l&&s&&!s(l)&&(l=void 0);else if(i!=null)for(let f=0,v=i.length;f<v;f++)l=this._data.get(i[f]),l!=null&&(!s||s(l))&&u.push(l);else{var h;c=[...Za(h=this._data).call(h)];for(let f=0,v=c.length;f<v;f++)d=c[f],l=this._data.get(d),l!=null&&(!s||s(l))&&u.push(l)}if(a&&a.order&&n==null&&this._sort(u,a.order),a&&a.fields){const f=a.fields;if(n!=null&&l!=null)l=this._filterFields(l,f);else for(let v=0,p=u.length;v<p;v++)u[v]=this._filterFields(u[v],f)}if(o=="Object"){const f={};for(let v=0,p=u.length;v<p;v++){const y=u[v],g=y[this._idProp];f[g]=y}return f}else return n!=null?l??null:u}getIds(e){const t=this._data,n=e&&lo(e),i=e&&e.order,a=[...Za(t).call(t)],o=[];if(n)if(i){const s=[];for(let u=0,l=a.length;u<l;u++){const c=a[u],d=this._data.get(c);d!=null&&n(d)&&s.push(d)}this._sort(s,i);for(let u=0,l=s.length;u<l;u++)o.push(s[u][this._idProp])}else for(let s=0,u=a.length;s<u;s++){const l=a[s],c=this._data.get(l);c!=null&&n(c)&&o.push(c[this._idProp])}else if(i){const s=[];for(let u=0,l=a.length;u<l;u++){const c=a[u];s.push(t.get(c))}this._sort(s,i);for(let u=0,l=s.length;u<l;u++)o.push(s[u][this._idProp])}else for(let s=0,u=a.length;s<u;s++){const l=a[s],c=t.get(l);c!=null&&o.push(c[this._idProp])}return o}getDataSet(){return this}forEach(e,t){const n=t&&lo(t),i=this._data,a=[...Za(i).call(i)];if(t&&t.order){const o=this.get(t);for(let s=0,u=o.length;s<u;s++){const l=o[s],c=l[this._idProp];e(l,c)}}else for(let o=0,s=a.length;o<s;o++){const u=a[o],l=this._data.get(u);l!=null&&(!n||n(l))&&e(l,u)}}map(e,t){const n=t&&lo(t),i=[],a=this._data,o=[...Za(a).call(a)];for(let s=0,u=o.length;s<u;s++){const l=o[s],c=this._data.get(l);c!=null&&(!n||n(c))&&i.push(e(c,l))}return t&&t.order&&this._sort(i,t.order),i}_filterFields(e,t){var n;return e&&x6(n=bn(t)?t:A_(t)).call(n,(i,a)=>(i[a]=e[a],i),{})}_sort(e,t){if(typeof t=="string"){const n=t;MS(e).call(e,(i,a)=>{const o=i[n],s=a[n];return o>s?1:o<s?-1:0})}else if(typeof t=="function")MS(e).call(e,t);else throw new TypeError("Order must be a function or a string")}remove(e,t){const n=[],i=[],a=bn(e)?e:[e];for(let o=0,s=a.length;o<s;o++){const u=this._remove(a[o]);if(u){const l=u[this._idProp];l!=null&&(n.push(l),i.push(u))}}return n.length&&this._trigger("remove",{items:n,oldData:i},t),n}_remove(e){let t;if(LD(e)?t=e:e&&typeof e=="object"&&(t=e[this._idProp]),t!=null&&this._data.has(t)){const n=this._data.get(t)||null;return this._data.delete(t),--this.length,n}return null}clear(e){var t;const n=[...Za(t=this._data).call(t)],i=[];for(let a=0,o=n.length;a<o;a++)i.push(this._data.get(n[a]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},e),n}max(e){let t=null,n=null;for(const a of AD(i=this._data).call(i)){var i;const o=a[e];typeof o=="number"&&(n==null||o>n)&&(t=a,n=o)}return t||null}min(e){let t=null,n=null;for(const a of AD(i=this._data).call(i)){var i;const o=a[e];typeof o=="number"&&(n==null||o<n)&&(t=a,n=o)}return t||null}distinct(e){const t=this._data,n=[...Za(t).call(t)],i=[];let a=0;for(let o=0,s=n.length;o<s;o++){const u=n[o],c=t.get(u)[e];let d=!1;for(let h=0;h<a;h++)if(i[h]==c){d=!0;break}!d&&c!==void 0&&(i[a]=c,a++)}return i}_addItem(e){const t=iZ(e,this._idProp),n=t[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,t),++this.length,n}_updateItem(e){const t=e[this._idProp];if(t==null)throw new Error("Cannot update item: item has no id (item: "+i8(e)+")");const n=this._data.get(t);if(!n)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,D2(D2({},n),e)),t}stream(e){if(e){const n=this._data;return new aa({*[fo](){for(const i of e){const a=n.get(i);a!=null&&(yield[i,a])}}})}else{var t;return new aa({[fo]:iW(t=_7(this._data)).call(t,this._data)})}}}function aZ(r,e){return typeof e=="object"&&e!==null&&r===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof ga(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof un(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function UW(r,e){return typeof e=="object"&&e!==null&&r===e.idProp&&typeof ga(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof un(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&aZ(r,e.getDataSet())}/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 10.0.2
 * @date    2025-09-15T17:48:13.838Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var A2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ae(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var q2={},Ss,k2;function yt(){if(k2)return Ss;k2=1;var r=function(e){return e&&e.Math===Math&&e};return Ss=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof A2=="object"&&A2)||r(typeof Ss=="object"&&Ss)||(function(){return this})()||Function("return this")(),Ss}var Gg,M2;function Ke(){return M2||(M2=1,Gg=function(r){try{return!!r()}catch{return!0}}),Gg}var Ug,B2;function Au(){if(B2)return Ug;B2=1;var r=Ke();return Ug=!r(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Ug}var Kg,F2;function zc(){if(F2)return Kg;F2=1;var r=Au(),e=Function.prototype,t=e.apply,n=e.call;return Kg=typeof Reflect=="object"&&Reflect.apply||(r?n.bind(t):function(){return n.apply(t,arguments)}),Kg}var Yg,N2;function Ye(){if(N2)return Yg;N2=1;var r=Au(),e=Function.prototype,t=e.call,n=r&&e.bind.bind(t,t);return Yg=r?n:function(i){return function(){return t.apply(i,arguments)}},Yg}var Xg,L2;function $n(){if(L2)return Xg;L2=1;var r=Ye(),e=r({}.toString),t=r("".slice);return Xg=function(n){return t(e(n),8,-1)},Xg}var Zg,z2;function H_(){if(z2)return Zg;z2=1;var r=$n(),e=Ye();return Zg=function(t){if(r(t)==="Function")return e(t)},Zg}var Qg,j2;function er(){if(j2)return Qg;j2=1;var r=typeof document=="object"&&document.all;return Qg=typeof r>"u"&&r!==void 0?function(e){return typeof e=="function"||e===r}:function(e){return typeof e=="function"},Qg}var Jg={},ey,V2;function Ct(){if(V2)return ey;V2=1;var r=Ke();return ey=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),ey}var ty,W2;function Fr(){if(W2)return ty;W2=1;var r=Au(),e=Function.prototype.call;return ty=r?e.bind(e):function(){return e.apply(e,arguments)},ty}var ry={},H2;function jc(){if(H2)return ry;H2=1;var r={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!r.call({1:2},1);return ry.f=t?function(i){var a=e(this,i);return!!a&&a.enumerable}:r,ry}var ny,G2;function qu(){return G2||(G2=1,ny=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}),ny}var iy,U2;function Vc(){if(U2)return iy;U2=1;var r=Ye(),e=Ke(),t=$n(),n=Object,i=r("".split);return iy=e(function(){return!n("z").propertyIsEnumerable(0)})?function(a){return t(a)==="String"?i(a,""):n(a)}:n,iy}var ay,K2;function Xo(){return K2||(K2=1,ay=function(r){return r==null}),ay}var oy,Y2;function ri(){if(Y2)return oy;Y2=1;var r=Xo(),e=TypeError;return oy=function(t){if(r(t))throw new e("Can't call method on "+t);return t},oy}var sy,X2;function pn(){if(X2)return sy;X2=1;var r=Vc(),e=ri();return sy=function(t){return r(e(t))},sy}var uy,Z2;function tr(){if(Z2)return uy;Z2=1;var r=er();return uy=function(e){return typeof e=="object"?e!==null:r(e)},uy}var ly,Q2;function nt(){return Q2||(Q2=1,ly={}),ly}var cy,J2;function zr(){if(J2)return cy;J2=1;var r=nt(),e=yt(),t=er(),n=function(i){return t(i)?i:void 0};return cy=function(i,a){return arguments.length<2?n(r[i])||n(e[i]):r[i]&&r[i][a]||e[i]&&e[i][a]},cy}var dy,eA;function Bt(){if(eA)return dy;eA=1;var r=Ye();return dy=r({}.isPrototypeOf),dy}var hy,tA;function Zo(){if(tA)return hy;tA=1;var r=yt(),e=r.navigator,t=e&&e.userAgent;return hy=t?String(t):"",hy}var fy,rA;function ku(){if(rA)return fy;rA=1;var r=yt(),e=Zo(),t=r.process,n=r.Deno,i=t&&t.versions||n&&n.version,a=i&&i.v8,o,s;return a&&(o=a.split("."),s=o[0]>0&&o[0]<4?1:+(o[0]+o[1])),!s&&e&&(o=e.match(/Edge\/(\d+)/),(!o||o[1]>=74)&&(o=e.match(/Chrome\/(\d+)/),o&&(s=+o[1]))),fy=s,fy}var vy,nA;function Qo(){if(nA)return vy;nA=1;var r=ku(),e=Ke(),t=yt(),n=t.String;return vy=!!Object.getOwnPropertySymbols&&!e(function(){var i=Symbol("symbol detection");return!n(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&r&&r<41}),vy}var py,iA;function KW(){if(iA)return py;iA=1;var r=Qo();return py=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol",py}var gy,aA;function Mu(){if(aA)return gy;aA=1;var r=zr(),e=er(),t=Bt(),n=KW(),i=Object;return gy=n?function(a){return typeof a=="symbol"}:function(a){var o=r("Symbol");return e(o)&&t(o.prototype,i(a))},gy}var yy,oA;function Jo(){if(oA)return yy;oA=1;var r=String;return yy=function(e){try{return r(e)}catch{return"Object"}},yy}var my,sA;function ni(){if(sA)return my;sA=1;var r=er(),e=Jo(),t=TypeError;return my=function(n){if(r(n))return n;throw new t(e(n)+" is not a function")},my}var by,uA;function G_(){if(uA)return by;uA=1;var r=ni(),e=Xo();return by=function(t,n){var i=t[n];return e(i)?void 0:r(i)},by}var wy,lA;function oZ(){if(lA)return wy;lA=1;var r=Fr(),e=er(),t=tr(),n=TypeError;return wy=function(i,a){var o,s;if(a==="string"&&e(o=i.toString)&&!t(s=r(o,i))||e(o=i.valueOf)&&!t(s=r(o,i))||a!=="string"&&e(o=i.toString)&&!t(s=r(o,i)))return s;throw new n("Can't convert object to primitive value")},wy}var Ey={exports:{}},Sy,cA;function es(){return cA||(cA=1,Sy=!0),Sy}var _y,dA;function sZ(){if(dA)return _y;dA=1;var r=yt(),e=Object.defineProperty;return _y=function(t,n){try{e(r,t,{value:n,configurable:!0,writable:!0})}catch{r[t]=n}return n},_y}var hA;function U_(){if(hA)return Ey.exports;hA=1;var r=es(),e=yt(),t=sZ(),n="__core-js_shared__",i=Ey.exports=e[n]||t(n,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:r?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Ey.exports}var Ty,fA;function ts(){if(fA)return Ty;fA=1;var r=U_();return Ty=function(e,t){return r[e]||(r[e]=t||{})},Ty}var xy,vA;function jr(){if(vA)return xy;vA=1;var r=ri(),e=Object;return xy=function(t){return e(r(t))},xy}var Py,pA;function ur(){if(pA)return Py;pA=1;var r=Ye(),e=jr(),t=r({}.hasOwnProperty);return Py=Object.hasOwn||function(i,a){return t(e(i),a)},Py}var Cy,gA;function Wc(){if(gA)return Cy;gA=1;var r=Ye(),e=0,t=Math.random(),n=r(1.1.toString);return Cy=function(i){return"Symbol("+(i===void 0?"":i)+")_"+n(++e+t,36)},Cy}var Iy,yA;function Ft(){if(yA)return Iy;yA=1;var r=yt(),e=ts(),t=ur(),n=Wc(),i=Qo(),a=KW(),o=r.Symbol,s=e("wks"),u=a?o.for||o:o&&o.withoutSetter||n;return Iy=function(l){return t(s,l)||(s[l]=i&&t(o,l)?o[l]:u("Symbol."+l)),s[l]},Iy}var Oy,mA;function YW(){if(mA)return Oy;mA=1;var r=Fr(),e=tr(),t=Mu(),n=G_(),i=oZ(),a=Ft(),o=TypeError,s=a("toPrimitive");return Oy=function(u,l){if(!e(u)||t(u))return u;var c=n(u,s),d;if(c){if(l===void 0&&(l="default"),d=r(c,u,l),!e(d)||t(d))return d;throw new o("Can't convert object to primitive value")}return l===void 0&&(l="number"),i(u,l)},Oy}var Ry,bA;function K_(){if(bA)return Ry;bA=1;var r=YW(),e=Mu();return Ry=function(t){var n=r(t,"string");return e(n)?n:n+""},Ry}var $y,wA;function XW(){if(wA)return $y;wA=1;var r=yt(),e=tr(),t=r.document,n=e(t)&&e(t.createElement);return $y=function(i){return n?t.createElement(i):{}},$y}var Dy,EA;function ZW(){if(EA)return Dy;EA=1;var r=Ct(),e=Ke(),t=XW();return Dy=!r&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),Dy}var SA;function Hc(){if(SA)return Jg;SA=1;var r=Ct(),e=Fr(),t=jc(),n=qu(),i=pn(),a=K_(),o=ur(),s=ZW(),u=Object.getOwnPropertyDescriptor;return Jg.f=r?u:function(c,d){if(c=i(c),d=a(d),s)try{return u(c,d)}catch{}if(o(c,d))return n(!e(t.f,c,d),c[d])},Jg}var Ay,_A;function uZ(){if(_A)return Ay;_A=1;var r=Ke(),e=er(),t=/#|\.prototype\./,n=function(u,l){var c=a[i(u)];return c===s?!0:c===o?!1:e(l)?r(l):!!l},i=n.normalize=function(u){return String(u).replace(t,".").toLowerCase()},a=n.data={},o=n.NATIVE="N",s=n.POLYFILL="P";return Ay=n,Ay}var qy,TA;function Gc(){if(TA)return qy;TA=1;var r=H_(),e=ni(),t=Au(),n=r(r.bind);return qy=function(i,a){return e(i),a===void 0?i:t?n(i,a):function(){return i.apply(a,arguments)}},qy}var ky={},My,xA;function QW(){if(xA)return My;xA=1;var r=Ct(),e=Ke();return My=r&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),My}var By,PA;function Dn(){if(PA)return By;PA=1;var r=tr(),e=String,t=TypeError;return By=function(n){if(r(n))return n;throw new t(e(n)+" is not an object")},By}var CA;function en(){if(CA)return ky;CA=1;var r=Ct(),e=ZW(),t=QW(),n=Dn(),i=K_(),a=TypeError,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u="enumerable",l="configurable",c="writable";return ky.f=r?t?function(h,f,v){if(n(h),f=i(f),n(v),typeof h=="function"&&f==="prototype"&&"value"in v&&c in v&&!v[c]){var p=s(h,f);p&&p[c]&&(h[f]=v.value,v={configurable:l in v?v[l]:p[l],enumerable:u in v?v[u]:p[u],writable:!1})}return o(h,f,v)}:o:function(h,f,v){if(n(h),f=i(f),n(v),e)try{return o(h,f,v)}catch{}if("get"in v||"set"in v)throw new a("Accessors not supported");return"value"in v&&(h[f]=v.value),h},ky}var Fy,IA;function rs(){if(IA)return Fy;IA=1;var r=Ct(),e=en(),t=qu();return Fy=r?function(n,i,a){return e.f(n,i,t(1,a))}:function(n,i,a){return n[i]=a,n},Fy}var Ny,OA;function xe(){if(OA)return Ny;OA=1;var r=yt(),e=zc(),t=H_(),n=er(),i=Hc().f,a=uZ(),o=nt(),s=Gc(),u=rs(),l=ur(),c=function(d){var h=function(f,v,p){if(this instanceof h){switch(arguments.length){case 0:return new d;case 1:return new d(f);case 2:return new d(f,v)}return new d(f,v,p)}return e(d,this,arguments)};return h.prototype=d.prototype,h};return Ny=function(d,h){var f=d.target,v=d.global,p=d.stat,y=d.proto,g=v?r:p?r[f]:r[f]&&r[f].prototype,m=v?o:o[f]||u(o,f,{})[f],b=m.prototype,w,S,T,_,E,x,P,C,I;for(_ in h)w=a(v?_:f+(p?".":"#")+_,d.forced),S=!w&&g&&l(g,_),x=m[_],S&&(d.dontCallGetSet?(I=i(g,_),P=I&&I.value):P=g[_]),E=S&&P?P:h[_],!(!w&&!y&&typeof x==typeof E)&&(d.bind&&S?C=s(E,r):d.wrap&&S?C=c(E):y&&n(E)?C=t(E):C=E,(d.sham||E&&E.sham||x&&x.sham)&&u(C,"sham",!0),u(m,_,C),y&&(T=f+"Prototype",l(o,T)||u(o,T,{}),u(o[T],_,E),d.real&&b&&(w||!b[_])&&u(b,_,E)))},Ny}var Ly,RA;function lZ(){if(RA)return Ly;RA=1;var r=Math.ceil,e=Math.floor;return Ly=Math.trunc||function(n){var i=+n;return(i>0?e:r)(i)},Ly}var zy,$A;function ns(){if($A)return zy;$A=1;var r=lZ();return zy=function(e){var t=+e;return t!==t||t===0?0:r(t)},zy}var jy,DA;function Uc(){if(DA)return jy;DA=1;var r=ns(),e=Math.max,t=Math.min;return jy=function(n,i){var a=r(n);return a<0?e(a+i,0):t(a,i)},jy}var Vy,AA;function JW(){if(AA)return Vy;AA=1;var r=ns(),e=Math.min;return Vy=function(t){var n=r(t);return n>0?e(n,9007199254740991):0},Vy}var Wy,qA;function ii(){if(qA)return Wy;qA=1;var r=JW();return Wy=function(e){return r(e.length)},Wy}var Hy,kA;function Y_(){if(kA)return Hy;kA=1;var r=pn(),e=Uc(),t=ii(),n=function(i){return function(a,o,s){var u=r(a),l=t(u);if(l===0)return!i&&-1;var c=e(s,l),d;if(i&&o!==o){for(;l>c;)if(d=u[c++],d!==d)return!0}else for(;l>c;c++)if((i||c in u)&&u[c]===o)return i||c||0;return!i&&-1}};return Hy={includes:n(!0),indexOf:n(!1)},Hy}var Gy,MA;function Bu(){return MA||(MA=1,Gy={}),Gy}var Uy,BA;function eH(){if(BA)return Uy;BA=1;var r=Ye(),e=ur(),t=pn(),n=Y_().indexOf,i=Bu(),a=r([].push);return Uy=function(o,s){var u=t(o),l=0,c=[],d;for(d in u)!e(i,d)&&e(u,d)&&a(c,d);for(;s.length>l;)e(u,d=s[l++])&&(~n(c,d)||a(c,d));return c},Uy}var Ky,FA;function X_(){return FA||(FA=1,Ky=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Ky}var Yy,NA;function Fu(){if(NA)return Yy;NA=1;var r=eH(),e=X_();return Yy=Object.keys||function(n){return r(n,e)},Yy}var Xy={},LA;function Kc(){return LA||(LA=1,Xy.f=Object.getOwnPropertySymbols),Xy}var Zy,zA;function cZ(){if(zA)return Zy;zA=1;var r=Ct(),e=Ye(),t=Fr(),n=Ke(),i=Fu(),a=Kc(),o=jc(),s=jr(),u=Vc(),l=Object.assign,c=Object.defineProperty,d=e([].concat);return Zy=!l||n(function(){if(r&&l({b:1},l(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var h={},f={},v=Symbol("assign detection"),p="abcdefghijklmnopqrst";return h[v]=7,p.split("").forEach(function(y){f[y]=y}),l({},h)[v]!==7||i(l({},f)).join("")!==p})?function(f,v){for(var p=s(f),y=arguments.length,g=1,m=a.f,b=o.f;y>g;)for(var w=u(arguments[g++]),S=m?d(i(w),m(w)):i(w),T=S.length,_=0,E;T>_;)E=S[_++],(!r||t(b,w,E))&&(p[E]=w[E]);return p}:l,Zy}var jA;function dZ(){if(jA)return q2;jA=1;var r=xe(),e=cZ();return r({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),q2}var Qy,VA;function hZ(){if(VA)return Qy;VA=1,dZ();var r=nt();return Qy=r.Object.assign,Qy}var Jy,WA;function fZ(){if(WA)return Jy;WA=1;var r=hZ();return Jy=r,Jy}var em,HA;function vZ(){return HA||(HA=1,em=fZ()),em}var pZ=vZ(),At=Ae(pZ),GA={},tm,UA;function is(){if(UA)return tm;UA=1;var r=Ye();return tm=r([].slice),tm}var rm,KA;function gZ(){if(KA)return rm;KA=1;var r=Ye(),e=ni(),t=tr(),n=ur(),i=is(),a=Au(),o=Function,s=r([].concat),u=r([].join),l={},c=function(d,h,f){if(!n(l,h)){for(var v=[],p=0;p<h;p++)v[p]="a["+p+"]";l[h]=o("C,a","return new C("+u(v,",")+")")}return l[h](d,f)};return rm=a?o.bind:function(h){var f=e(this),v=f.prototype,p=i(arguments,1),y=function(){var m=s(p,i(arguments));return this instanceof y?c(f,m.length,m):f.apply(h,m)};return t(v)&&(y.prototype=v),y},rm}var YA;function yZ(){if(YA)return GA;YA=1;var r=xe(),e=gZ();return r({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),GA}var nm,XA;function lr(){if(XA)return nm;XA=1;var r=yt(),e=nt();return nm=function(t,n){var i=e[t+"Prototype"],a=i&&i[n];if(a)return a;var o=r[t],s=o&&o.prototype;return s&&s[n]},nm}var im,ZA;function mZ(){if(ZA)return im;ZA=1,yZ();var r=lr();return im=r("Function","bind"),im}var am,QA;function bZ(){if(QA)return am;QA=1;var r=Bt(),e=mZ(),t=Function.prototype;return am=function(n){var i=n.bind;return n===t||r(t,n)&&i===t.bind?e:i},am}var om,JA;function wZ(){if(JA)return om;JA=1;var r=bZ();return om=r,om}var sm,eq;function EZ(){return eq||(eq=1,sm=wZ()),sm}var SZ=EZ(),ae=Ae(SZ);function Z_(r,e,t,n){r.beginPath(),r.arc(e,t,n,0,2*Math.PI,!1),r.closePath()}function _Z(r,e,t,n){r.beginPath(),r.rect(e-n,t-n,n*2,n*2),r.closePath()}function TZ(r,e,t,n){r.beginPath(),n*=1.15,t+=.275*n;const i=n*2,a=i/2,o=Math.sqrt(3)/6*i,s=Math.sqrt(i*i-a*a);r.moveTo(e,t-(s-o)),r.lineTo(e+a,t+o),r.lineTo(e-a,t+o),r.lineTo(e,t-(s-o)),r.closePath()}function xZ(r,e,t,n){r.beginPath(),n*=1.15,t-=.275*n;const i=n*2,a=i/2,o=Math.sqrt(3)/6*i,s=Math.sqrt(i*i-a*a);r.moveTo(e,t+(s-o)),r.lineTo(e+a,t-o),r.lineTo(e-a,t-o),r.lineTo(e,t+(s-o)),r.closePath()}function PZ(r,e,t,n){r.beginPath(),n*=.82,t+=.1*n;for(let i=0;i<10;i++){const a=i%2===0?n*1.3:n*.5;r.lineTo(e+a*Math.sin(i*2*Math.PI/10),t-a*Math.cos(i*2*Math.PI/10))}r.closePath()}function CZ(r,e,t,n){r.beginPath(),r.lineTo(e,t+n),r.lineTo(e+n,t),r.lineTo(e,t-n),r.lineTo(e-n,t),r.closePath()}function tH(r,e,t,n,i,a){const o=Math.PI/180;n-2*a<0&&(a=n/2),i-2*a<0&&(a=i/2),r.beginPath(),r.moveTo(e+a,t),r.lineTo(e+n-a,t),r.arc(e+n-a,t+a,a,o*270,o*360,!1),r.lineTo(e+n,t+i-a),r.arc(e+n-a,t+i-a,a,0,o*90,!1),r.lineTo(e+a,t+i),r.arc(e+a,t+i-a,a,o*90,o*180,!1),r.lineTo(e,t+a),r.arc(e+a,t+a,a,o*180,o*270,!1),r.closePath()}function BS(r,e,t,n,i){const a=.5522848,o=n/2*a,s=i/2*a,u=e+n,l=t+i,c=e+n/2,d=t+i/2;r.beginPath(),r.moveTo(e,d),r.bezierCurveTo(e,d-s,c-o,t,c,t),r.bezierCurveTo(c+o,t,u,d-s,u,d),r.bezierCurveTo(u,d+s,c+o,l,c,l),r.bezierCurveTo(c-o,l,e,d+s,e,d),r.closePath()}function rH(r,e,t,n,i){const a=.3333333333333333,o=n,s=i*a,u=.5522848,l=o/2*u,c=s/2*u,d=e+o,h=t+s,f=e+o/2,v=t+s/2,p=t+(i-s/2),y=t+i;r.beginPath(),r.moveTo(d,v),r.bezierCurveTo(d,v+c,f+l,h,f,h),r.bezierCurveTo(f-l,h,e,v+c,e,v),r.bezierCurveTo(e,v-c,f-l,t,f,t),r.bezierCurveTo(f+l,t,d,v-c,d,v),r.lineTo(d,p),r.bezierCurveTo(d,p+c,f+l,y,f,y),r.bezierCurveTo(f-l,y,e,p+c,e,p),r.lineTo(e,v)}function nH(r,e,t,n,i,a){r.beginPath(),r.moveTo(e,t);const o=a.length,s=n-e,u=i-t,l=u/s;let c=Math.sqrt(s*s+u*u),d=0,h=!0,f=0,v=+a[0];for(;c>=.1;)v=+a[d++%o],v>c&&(v=c),f=Math.sqrt(v*v/(1+l*l)),f=s<0?-f:f,e+=f,t+=l*f,h===!0?r.lineTo(e,t):r.moveTo(e,t),c-=v,h=!h}function IZ(r,e,t,n){r.beginPath();const i=6,a=Math.PI*2/i;r.moveTo(e+n,t);for(let o=1;o<i;o++)r.lineTo(e+n*Math.cos(a*o),t+n*Math.sin(a*o));r.closePath()}const tq={circle:Z_,dashedLine:nH,database:rH,diamond:CZ,ellipse:BS,ellipse_vis:BS,hexagon:IZ,roundRect:tH,square:_Z,star:PZ,triangle:TZ,triangleDown:xZ};function OZ(r){return Object.prototype.hasOwnProperty.call(tq,r)?tq[r]:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[r].call(e,n)}}var um={exports:{}},rq;function RZ(){return rq||(rq=1,(function(r){r.exports=e;function e(n){if(n)return t(n)}function t(n){for(var i in e.prototype)n[i]=e.prototype[i];return n}e.prototype.on=e.prototype.addEventListener=function(n,i){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(i),this},e.prototype.once=function(n,i){function a(){this.off(n,a),i.apply(this,arguments)}return a.fn=i,this.on(n,a),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,i){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+n];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var o,s=0;s<a.length;s++)if(o=a[s],o===i||o.fn===i){a.splice(s,1);break}return a.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var i=new Array(arguments.length-1),a=this._callbacks["$"+n],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,s=a.length;o<s;++o)a[o].apply(this,i)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(um)),um.exports}var $Z=RZ(),iH=Ae($Z),nq={},lm,iq;function Fa(){if(iq)return lm;iq=1;var r=$n();return lm=Array.isArray||function(t){return r(t)==="Array"},lm}var cm,aq;function aH(){if(aq)return cm;aq=1;var r=TypeError,e=9007199254740991;return cm=function(t){if(t>e)throw r("Maximum allowed index exceeded");return t},cm}var dm,oq;function Yc(){if(oq)return dm;oq=1;var r=Ct(),e=en(),t=qu();return dm=function(n,i,a){r?e.f(n,i,t(0,a)):n[i]=a},dm}var hm,sq;function Q_(){if(sq)return hm;sq=1;var r=Ft(),e=r("toStringTag"),t={};return t[e]="z",hm=String(t)==="[object z]",hm}var fm,uq;function as(){if(uq)return fm;uq=1;var r=Q_(),e=er(),t=$n(),n=Ft(),i=n("toStringTag"),a=Object,o=t((function(){return arguments})())==="Arguments",s=function(u,l){try{return u[l]}catch{}};return fm=r?t:function(u){var l,c,d;return u===void 0?"Undefined":u===null?"Null":typeof(c=s(l=a(u),i))=="string"?c:o?t(l):(d=t(l))==="Object"&&e(l.callee)?"Arguments":d},fm}var vm,lq;function DZ(){if(lq)return vm;lq=1;var r=Ye(),e=er(),t=U_(),n=r(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(i){return n(i)}),vm=t.inspectSource,vm}var pm,cq;function oH(){if(cq)return pm;cq=1;var r=Ye(),e=Ke(),t=er(),n=as(),i=zr(),a=DZ(),o=function(){},s=i("Reflect","construct"),u=/^\s*(?:class|function)\b/,l=r(u.exec),c=!u.test(o),d=function(v){if(!t(v))return!1;try{return s(o,[],v),!0}catch{return!1}},h=function(v){if(!t(v))return!1;switch(n(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return c||!!l(u,a(v))}catch{return!0}};return h.sham=!0,pm=!s||e(function(){var f;return d(d.call)||!d(Object)||!d(function(){f=!0})||f})?h:d,pm}var gm,dq;function AZ(){if(dq)return gm;dq=1;var r=Fa(),e=oH(),t=tr(),n=Ft(),i=n("species"),a=Array;return gm=function(o){var s;return r(o)&&(s=o.constructor,e(s)&&(s===a||r(s.prototype))?s=void 0:t(s)&&(s=s[i],s===null&&(s=void 0))),s===void 0?a:s},gm}var ym,hq;function J_(){if(hq)return ym;hq=1;var r=AZ();return ym=function(e,t){return new(r(e))(t===0?0:t)},ym}var mm,fq;function Nu(){if(fq)return mm;fq=1;var r=Ke(),e=Ft(),t=ku(),n=e("species");return mm=function(i){return t>=51||!r(function(){var a=[],o=a.constructor={};return o[n]=function(){return{foo:1}},a[i](Boolean).foo!==1})},mm}var vq;function sH(){if(vq)return nq;vq=1;var r=xe(),e=Ke(),t=Fa(),n=tr(),i=jr(),a=ii(),o=aH(),s=Yc(),u=J_(),l=Nu(),c=Ft(),d=ku(),h=c("isConcatSpreadable"),f=d>=51||!e(function(){var y=[];return y[h]=!1,y.concat()[0]!==y}),v=function(y){if(!n(y))return!1;var g=y[h];return g!==void 0?!!g:t(y)},p=!f||!l("concat");return r({target:"Array",proto:!0,arity:1,forced:p},{concat:function(g){var m=i(this),b=u(m,0),w=0,S,T,_,E,x;for(S=-1,_=arguments.length;S<_;S++)if(x=S===-1?m:arguments[S],v(x))for(E=a(x),o(w+E),T=0;T<E;T++,w++)T in x&&s(b,w,x[T]);else o(w+1),s(b,w++,x);return b.length=w,b}}),nq}var pq={},gq={},bm,yq;function tn(){if(yq)return bm;yq=1;var r=as(),e=String;return bm=function(t){if(r(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},bm}var wm={},mq;function eT(){if(mq)return wm;mq=1;var r=Ct(),e=QW(),t=en(),n=Dn(),i=pn(),a=Fu();return wm.f=r&&!e?Object.defineProperties:function(s,u){n(s);for(var l=i(u),c=a(u),d=c.length,h=0,f;d>h;)t.f(s,f=c[h++],l[f]);return s},wm}var Em,bq;function qZ(){if(bq)return Em;bq=1;var r=zr();return Em=r("document","documentElement"),Em}var Sm,wq;function Xc(){if(wq)return Sm;wq=1;var r=ts(),e=Wc(),t=r("keys");return Sm=function(n){return t[n]||(t[n]=e(n))},Sm}var _m,Eq;function Lu(){if(Eq)return _m;Eq=1;var r=Dn(),e=eT(),t=X_(),n=Bu(),i=qZ(),a=XW(),o=Xc(),s=">",u="<",l="prototype",c="script",d=o("IE_PROTO"),h=function(){},f=function(m){return u+c+s+m+u+"/"+c+s},v=function(m){m.write(f("")),m.close();var b=m.parentWindow.Object;return m=null,b},p=function(){var m=a("iframe"),b="java"+c+":",w;return m.style.display="none",i.appendChild(m),m.src=String(b),w=m.contentWindow.document,w.open(),w.write(f("document.F=Object")),w.close(),w.F},y,g=function(){try{y=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&y?v(y):p():v(y);for(var m=t.length;m--;)delete g[l][t[m]];return g()};return n[d]=!0,_m=Object.create||function(b,w){var S;return b!==null?(h[l]=r(b),S=new h,h[l]=null,S[d]=b):S=g(),w===void 0?S:e.f(S,w)},_m}var Tm={},Sq;function Zc(){if(Sq)return Tm;Sq=1;var r=eH(),e=X_(),t=e.concat("length","prototype");return Tm.f=Object.getOwnPropertyNames||function(i){return r(i,t)},Tm}var xm={},_q;function tT(){if(_q)return xm;_q=1;var r=$n(),e=pn(),t=Zc().f,n=is(),i=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(o){try{return t(o)}catch{return n(i)}};return xm.f=function(s){return i&&r(s)==="Window"?a(s):t(e(s))},xm}var Pm,Tq;function zu(){if(Tq)return Pm;Tq=1;var r=rs();return Pm=function(e,t,n,i){return i&&i.enumerable?e[t]=n:r(e,t,n),e},Pm}var Cm,xq;function rT(){if(xq)return Cm;xq=1;var r=en();return Cm=function(e,t,n){return r.f(e,t,n)},Cm}var Im={},Pq;function Qc(){if(Pq)return Im;Pq=1;var r=Ft();return Im.f=r,Im}var Om,Cq;function wt(){if(Cq)return Om;Cq=1;var r=nt(),e=ur(),t=Qc(),n=en().f;return Om=function(i){var a=r.Symbol||(r.Symbol={});e(a,i)||n(a,i,{value:t.f(i)})},Om}var Rm,Iq;function uH(){if(Iq)return Rm;Iq=1;var r=Fr(),e=zr(),t=Ft(),n=zu();return Rm=function(){var i=e("Symbol"),a=i&&i.prototype,o=a&&a.valueOf,s=t("toPrimitive");a&&!a[s]&&n(a,s,function(u){return r(o,this)},{arity:1})},Rm}var $m,Oq;function kZ(){if(Oq)return $m;Oq=1;var r=Q_(),e=as();return $m=r?{}.toString:function(){return"[object "+e(this)+"]"},$m}var Dm,Rq;function Na(){if(Rq)return Dm;Rq=1;var r=Q_(),e=en().f,t=rs(),n=ur(),i=kZ(),a=Ft(),o=a("toStringTag");return Dm=function(s,u,l,c){var d=l?s:s&&s.prototype;d&&(n(d,o)||e(d,o,{configurable:!0,value:u}),c&&!r&&t(d,"toString",i))},Dm}var Am,$q;function lH(){if($q)return Am;$q=1;var r=yt(),e=er(),t=r.WeakMap;return Am=e(t)&&/native code/.test(String(t)),Am}var qm,Dq;function La(){if(Dq)return qm;Dq=1;var r=lH(),e=yt(),t=tr(),n=rs(),i=ur(),a=U_(),o=Xc(),s=Bu(),u="Object already initialized",l=e.TypeError,c=e.WeakMap,d,h,f,v=function(m){return f(m)?h(m):d(m,{})},p=function(m){return function(b){var w;if(!t(b)||(w=h(b)).type!==m)throw new l("Incompatible receiver, "+m+" required");return w}};if(r||a.state){var y=a.state||(a.state=new c);y.get=y.get,y.has=y.has,y.set=y.set,d=function(m,b){if(y.has(m))throw new l(u);return b.facade=m,y.set(m,b),b},h=function(m){return y.get(m)||{}},f=function(m){return y.has(m)}}else{var g=o("state");s[g]=!0,d=function(m,b){if(i(m,g))throw new l(u);return b.facade=m,n(m,g,b),b},h=function(m){return i(m,g)?m[g]:{}},f=function(m){return i(m,g)}}return qm={set:d,get:h,has:f,enforce:v,getterFor:p},qm}var km,Aq;function zi(){if(Aq)return km;Aq=1;var r=Gc(),e=Ye(),t=Vc(),n=jr(),i=ii(),a=J_(),o=e([].push),s=function(u){var l=u===1,c=u===2,d=u===3,h=u===4,f=u===6,v=u===7,p=u===5||f;return function(y,g,m,b){for(var w=n(y),S=t(w),T=i(S),_=r(g,m),E=0,x=b||a,P=l?x(y,T):c||v?x(y,0):void 0,C,I;T>E;E++)if((p||E in S)&&(C=S[E],I=_(C,E,w),u))if(l)P[E]=I;else if(I)switch(u){case 3:return!0;case 5:return C;case 6:return E;case 2:o(P,C)}else switch(u){case 4:return!1;case 7:o(P,C)}return f?-1:d||h?h:P}};return km={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)},km}var qq;function MZ(){if(qq)return gq;qq=1;var r=xe(),e=yt(),t=Fr(),n=Ye(),i=es(),a=Ct(),o=Qo(),s=Ke(),u=ur(),l=Bt(),c=Dn(),d=pn(),h=K_(),f=tn(),v=qu(),p=Lu(),y=Fu(),g=Zc(),m=tT(),b=Kc(),w=Hc(),S=en(),T=eT(),_=jc(),E=zu(),x=rT(),P=ts(),C=Xc(),I=Bu(),O=Wc(),$=Ft(),D=Qc(),q=wt(),A=uH(),k=Na(),F=La(),j=zi().forEach,M=C("hidden"),L="Symbol",U="prototype",K=F.set,Z=F.getterFor(L),Q=Object[U],te=e.Symbol,oe=te&&te[U],re=e.RangeError,V=e.TypeError,W=e.QObject,G=w.f,X=S.f,se=m.f,be=_.f,ke=n([].push),fe=P("symbols"),ge=P("op-symbols"),Te=P("wks"),le=!W||!W[U]||!W[U].findChild,ye=function(ee,N,R){var B=G(Q,N);B&&delete Q[N],X(ee,N,R),B&&ee!==Q&&X(Q,N,B)},pe=a&&s(function(){return p(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a!==7})?ye:X,Ce=function(ee,N){var R=fe[ee]=p(oe);return K(R,{type:L,tag:ee,description:N}),a||(R.description=N),R},ve=function(N,R,B){N===Q&&ve(ge,R,B),c(N);var z=h(R);return c(B),u(fe,z)?(B.enumerable?(u(N,M)&&N[M][z]&&(N[M][z]=!1),B=p(B,{enumerable:v(0,!1)})):(u(N,M)||X(N,M,v(1,p(null))),N[M][z]=!0),pe(N,z,B)):X(N,z,B)},De=function(N,R){c(N);var B=d(R),z=y(B).concat(Ie(B));return j(z,function(H){(!a||t(Le,B,H))&&ve(N,H,B[H])}),N},Ne=function(N,R){return R===void 0?p(N):De(p(N),R)},Le=function(N){var R=h(N),B=t(be,this,R);return this===Q&&u(fe,R)&&!u(ge,R)?!1:B||!u(this,R)||!u(fe,R)||u(this,M)&&this[M][R]?B:!0},He=function(N,R){var B=d(N),z=h(R);if(!(B===Q&&u(fe,z)&&!u(ge,z))){var H=G(B,z);return H&&u(fe,z)&&!(u(B,M)&&B[M][z])&&(H.enumerable=!0),H}},Ge=function(N){var R=se(d(N)),B=[];return j(R,function(z){!u(fe,z)&&!u(I,z)&&ke(B,z)}),B},Ie=function(ee){var N=ee===Q,R=se(N?ge:d(ee)),B=[];return j(R,function(z){u(fe,z)&&(!N||u(Q,z))&&ke(B,fe[z])}),B};return o||(te=function(){if(l(oe,this))throw new V("Symbol is not a constructor");var N=!arguments.length||arguments[0]===void 0?void 0:f(arguments[0]),R=O(N),B=function(z){var H=this===void 0?e:this;H===Q&&t(B,ge,z),u(H,M)&&u(H[M],R)&&(H[M][R]=!1);var J=v(1,z);try{pe(H,R,J)}catch(de){if(!(de instanceof re))throw de;ye(H,R,J)}};return a&&le&&pe(Q,R,{configurable:!0,set:B}),Ce(R,N)},oe=te[U],E(oe,"toString",function(){return Z(this).tag}),E(te,"withoutSetter",function(ee){return Ce(O(ee),ee)}),_.f=Le,S.f=ve,T.f=De,w.f=He,g.f=m.f=Ge,b.f=Ie,D.f=function(ee){return Ce($(ee),ee)},a&&(x(oe,"description",{configurable:!0,get:function(){return Z(this).description}}),i||E(Q,"propertyIsEnumerable",Le,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!o,sham:!o},{Symbol:te}),j(y(Te),function(ee){q(ee)}),r({target:L,stat:!0,forced:!o},{useSetter:function(){le=!0},useSimple:function(){le=!1}}),r({target:"Object",stat:!0,forced:!o,sham:!a},{create:Ne,defineProperty:ve,defineProperties:De,getOwnPropertyDescriptor:He}),r({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:Ge}),A(),k(te,L),I[M]=!0,gq}var kq={},Mm,Mq;function cH(){if(Mq)return Mm;Mq=1;var r=Qo();return Mm=r&&!!Symbol.for&&!!Symbol.keyFor,Mm}var Bq;function BZ(){if(Bq)return kq;Bq=1;var r=xe(),e=zr(),t=ur(),n=tn(),i=ts(),a=cH(),o=i("string-to-symbol-registry"),s=i("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!a},{for:function(u){var l=n(u);if(t(o,l))return o[l];var c=e("Symbol")(l);return o[l]=c,s[c]=l,c}}),kq}var Fq={},Nq;function FZ(){if(Nq)return Fq;Nq=1;var r=xe(),e=ur(),t=Mu(),n=Jo(),i=ts(),a=cH(),o=i("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!a},{keyFor:function(u){if(!t(u))throw new TypeError(n(u)+" is not a symbol");if(e(o,u))return o[u]}}),Fq}var Lq={},Bm,zq;function NZ(){if(zq)return Bm;zq=1;var r=Ye(),e=Fa(),t=er(),n=$n(),i=tn(),a=r([].push);return Bm=function(o){if(t(o))return o;if(e(o)){for(var s=o.length,u=[],l=0;l<s;l++){var c=o[l];typeof c=="string"?a(u,c):(typeof c=="number"||n(c)==="Number"||n(c)==="String")&&a(u,i(c))}var d=u.length,h=!0;return function(f,v){if(h)return h=!1,v;if(e(this))return v;for(var p=0;p<d;p++)if(u[p]===f)return v}}},Bm}var jq;function dH(){if(jq)return Lq;jq=1;var r=xe(),e=zr(),t=zc(),n=Fr(),i=Ye(),a=Ke(),o=er(),s=Mu(),u=is(),l=NZ(),c=Qo(),d=String,h=e("JSON","stringify"),f=i(/./.exec),v=i("".charAt),p=i("".charCodeAt),y=i("".replace),g=i(1.1.toString),m=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,S=!c||a(function(){var x=e("Symbol")("stringify detection");return h([x])!=="[null]"||h({a:x})!=="{}"||h(Object(x))!=="{}"}),T=a(function(){return h("\uDF06\uD834")!=='"\\udf06\\ud834"'||h("\uDEAD")!=='"\\udead"'}),_=function(x,P){var C=u(arguments),I=l(P);if(!(!o(I)&&(x===void 0||s(x))))return C[1]=function(O,$){if(o(I)&&($=n(I,this,d(O),$)),!s($))return $},t(h,null,C)},E=function(x,P,C){var I=v(C,P-1),O=v(C,P+1);return f(b,x)&&!f(w,O)||f(w,x)&&!f(b,I)?"\\u"+g(p(x,0),16):x};return h&&r({target:"JSON",stat:!0,arity:3,forced:S||T},{stringify:function(P,C,I){var O=u(arguments),$=t(S?_:h,null,O);return T&&typeof $=="string"?y($,m,E):$}}),Lq}var Vq={},Wq;function LZ(){if(Wq)return Vq;Wq=1;var r=xe(),e=Qo(),t=Ke(),n=Kc(),i=jr(),a=!e||t(function(){n.f(1)});return r({target:"Object",stat:!0,forced:a},{getOwnPropertySymbols:function(s){var u=n.f;return u?u(i(s)):[]}}),Vq}var Hq;function hH(){return Hq||(Hq=1,MZ(),BZ(),FZ(),dH(),LZ()),pq}var Gq={},Uq;function fH(){if(Uq)return Gq;Uq=1;var r=wt();return r("asyncDispose"),Gq}var Kq={},Yq;function zZ(){if(Yq)return Kq;Yq=1;var r=wt();return r("asyncIterator"),Kq}var Xq={},Zq;function vH(){if(Zq)return Xq;Zq=1;var r=wt();return r("dispose"),Xq}var Qq={},Jq;function jZ(){if(Jq)return Qq;Jq=1;var r=wt();return r("hasInstance"),Qq}var ek={},tk;function VZ(){if(tk)return ek;tk=1;var r=wt();return r("isConcatSpreadable"),ek}var rk={},nk;function pH(){if(nk)return rk;nk=1;var r=wt();return r("iterator"),rk}var ik={},ak;function WZ(){if(ak)return ik;ak=1;var r=wt();return r("match"),ik}var ok={},sk;function HZ(){if(sk)return ok;sk=1;var r=wt();return r("matchAll"),ok}var uk={},lk;function GZ(){if(lk)return uk;lk=1;var r=wt();return r("replace"),uk}var ck={},dk;function UZ(){if(dk)return ck;dk=1;var r=wt();return r("search"),ck}var hk={},fk;function KZ(){if(fk)return hk;fk=1;var r=wt();return r("species"),hk}var vk={},pk;function YZ(){if(pk)return vk;pk=1;var r=wt();return r("split"),vk}var gk={},yk;function gH(){if(yk)return gk;yk=1;var r=wt(),e=uH();return r("toPrimitive"),e(),gk}var mk={},bk;function XZ(){if(bk)return mk;bk=1;var r=zr(),e=wt(),t=Na();return e("toStringTag"),t(r("Symbol"),"Symbol"),mk}var wk={},Ek;function ZZ(){if(Ek)return wk;Ek=1;var r=wt();return r("unscopables"),wk}var Sk={},_k;function QZ(){if(_k)return Sk;_k=1;var r=yt(),e=Na();return e(r.JSON,"JSON",!0),Sk}var Fm,Tk;function JZ(){if(Tk)return Fm;Tk=1,sH(),hH(),fH(),zZ(),vH(),jZ(),VZ(),pH(),WZ(),HZ(),GZ(),UZ(),KZ(),YZ(),gH(),XZ(),ZZ(),QZ();var r=nt();return Fm=r.Symbol,Fm}var xk={},Nm,Pk;function nT(){return Pk||(Pk=1,Nm=function(){}),Nm}var Lm,Ck;function os(){return Ck||(Ck=1,Lm={}),Lm}var zm,Ik;function eQ(){if(Ik)return zm;Ik=1;var r=Ct(),e=ur(),t=Function.prototype,n=r&&Object.getOwnPropertyDescriptor,i=e(t,"name"),a=i&&(function(){}).name==="something",o=i&&(!r||r&&n(t,"name").configurable);return zm={EXISTS:i,PROPER:a,CONFIGURABLE:o},zm}var jm,Ok;function yH(){if(Ok)return jm;Ok=1;var r=Ke();return jm=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),jm}var Vm,Rk;function Jc(){if(Rk)return Vm;Rk=1;var r=ur(),e=er(),t=jr(),n=Xc(),i=yH(),a=n("IE_PROTO"),o=Object,s=o.prototype;return Vm=i?o.getPrototypeOf:function(u){var l=t(u);if(r(l,a))return l[a];var c=l.constructor;return e(c)&&l instanceof c?c.prototype:l instanceof o?s:null},Vm}var Wm,$k;function mH(){if($k)return Wm;$k=1;var r=Ke(),e=er(),t=tr(),n=Lu(),i=Jc(),a=zu(),o=Ft(),s=es(),u=o("iterator"),l=!1,c,d,h;[].keys&&(h=[].keys(),"next"in h?(d=i(i(h)),d!==Object.prototype&&(c=d)):l=!0);var f=!t(c)||r(function(){var v={};return c[u].call(v)!==v});return f?c={}:s&&(c=n(c)),e(c[u])||a(c,u,function(){return this}),Wm={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:l},Wm}var Hm,Dk;function tQ(){if(Dk)return Hm;Dk=1;var r=mH().IteratorPrototype,e=Lu(),t=qu(),n=Na(),i=os(),a=function(){return this};return Hm=function(o,s,u,l){var c=s+" Iterator";return o.prototype=e(r,{next:t(+!l,u)}),n(o,c,!1,!0),i[c]=a,o},Hm}var Gm,Ak;function rQ(){if(Ak)return Gm;Ak=1;var r=Ye(),e=ni();return Gm=function(t,n,i){try{return r(e(Object.getOwnPropertyDescriptor(t,n)[i]))}catch{}},Gm}var Um,qk;function nQ(){if(qk)return Um;qk=1;var r=tr();return Um=function(e){return r(e)||e===null},Um}var Km,kk;function iQ(){if(kk)return Km;kk=1;var r=nQ(),e=String,t=TypeError;return Km=function(n){if(r(n))return n;throw new t("Can't set "+e(n)+" as a prototype")},Km}var Ym,Mk;function aQ(){if(Mk)return Ym;Mk=1;var r=rQ(),e=tr(),t=ri(),n=iQ();return Ym=Object.setPrototypeOf||("__proto__"in{}?(function(){var i=!1,a={},o;try{o=r(Object.prototype,"__proto__","set"),o(a,[]),i=a instanceof Array}catch{}return function(u,l){return t(u),n(l),e(u)&&(i?o(u,l):u.__proto__=l),u}})():void 0),Ym}var Xm,Bk;function iT(){if(Bk)return Xm;Bk=1;var r=xe(),e=Fr(),t=es(),n=eQ(),i=er(),a=tQ(),o=Jc(),s=aQ(),u=Na(),l=rs(),c=zu(),d=Ft(),h=os(),f=mH(),v=n.PROPER,p=n.CONFIGURABLE,y=f.IteratorPrototype,g=f.BUGGY_SAFARI_ITERATORS,m=d("iterator"),b="keys",w="values",S="entries",T=function(){return this};return Xm=function(_,E,x,P,C,I,O){a(x,E,P);var $=function(K){if(K===C&&F)return F;if(!g&&K&&K in A)return A[K];switch(K){case b:return function(){return new x(this,K)};case w:return function(){return new x(this,K)};case S:return function(){return new x(this,K)}}return function(){return new x(this)}},D=E+" Iterator",q=!1,A=_.prototype,k=A[m]||A["@@iterator"]||C&&A[C],F=!g&&k||$(C),j=E==="Array"&&A.entries||k,M,L,U;if(j&&(M=o(j.call(new _)),M!==Object.prototype&&M.next&&(!t&&o(M)!==y&&(s?s(M,y):i(M[m])||c(M,m,T)),u(M,D,!0,!0),t&&(h[D]=T))),v&&C===w&&k&&k.name!==w&&(!t&&p?l(A,"name",w):(q=!0,F=function(){return e(k,this)})),C)if(L={values:$(w),keys:I?F:$(b),entries:$(S)},O)for(U in L)(g||q||!(U in A))&&c(A,U,L[U]);else r({target:E,proto:!0,forced:g||q},L);return(!t||O)&&A[m]!==F&&c(A,m,F,{name:C}),h[E]=F,L},Xm}var Zm,Fk;function aT(){return Fk||(Fk=1,Zm=function(r,e){return{value:r,done:e}}),Zm}var Qm,Nk;function ss(){if(Nk)return Qm;Nk=1;var r=pn(),e=nT(),t=os(),n=La(),i=en().f,a=iT(),o=aT(),s=es(),u=Ct(),l="Array Iterator",c=n.set,d=n.getterFor(l);Qm=a(Array,"Array",function(f,v){c(this,{type:l,target:r(f),index:0,kind:v})},function(){var f=d(this),v=f.target,p=f.index++;if(!v||p>=v.length)return f.target=null,o(void 0,!0);switch(f.kind){case"keys":return o(p,!1);case"values":return o(v[p],!1)}return o([p,v[p]],!1)},"values");var h=t.Arguments=t.Array;if(e("keys"),e("values"),e("entries"),!s&&u&&h.name!=="values")try{i(h,"name",{value:"values"})}catch{}return Qm}var Jm,Lk;function oQ(){return Lk||(Lk=1,Jm={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Jm}var zk;function us(){if(zk)return xk;zk=1,ss();var r=oQ(),e=yt(),t=Na(),n=os();for(var i in r)t(e[i],i),n[i]=n.Array;return xk}var eb,jk;function bH(){if(jk)return eb;jk=1;var r=JZ();return us(),eb=r,eb}var tb,Vk;function sQ(){return Vk||(Vk=1,tb=bH()),tb}var uQ=sQ(),lQ=Ae(uQ),Wk={},Hk;function cQ(){if(Hk)return Wk;Hk=1;var r=xe(),e=Fa(),t=oH(),n=tr(),i=Uc(),a=ii(),o=pn(),s=Yc(),u=Ft(),l=Nu(),c=is(),d=l("slice"),h=u("species"),f=Array,v=Math.max;return r({target:"Array",proto:!0,forced:!d},{slice:function(y,g){var m=o(this),b=a(m),w=i(y,b),S=i(g===void 0?b:g,b),T,_,E;if(e(m)&&(T=m.constructor,t(T)&&(T===f||e(T.prototype))?T=void 0:n(T)&&(T=T[h],T===null&&(T=void 0)),T===f||T===void 0))return c(m,w,S);for(_=new(T===void 0?f:T)(v(S-w,0)),E=0;w<S;w++,E++)w in m&&s(_,E,m[w]);return _.length=E,_}}),Wk}var rb,Gk;function dQ(){if(Gk)return rb;Gk=1,cQ();var r=lr();return rb=r("Array","slice"),rb}var nb,Uk;function hQ(){if(Uk)return nb;Uk=1;var r=Bt(),e=dQ(),t=Array.prototype;return nb=function(n){var i=n.slice;return n===t||r(t,n)&&i===t.slice?e:i},nb}var ib,Kk;function fQ(){if(Kk)return ib;Kk=1;var r=hQ();return ib=r,ib}var ab,Yk;function vQ(){return Yk||(Yk=1,ab=fQ()),ab}var pQ=vQ(),wn=Ae(pQ),ob,Xk;function gQ(){if(Xk)return ob;Xk=1;var r=zr(),e=Ye(),t=Zc(),n=Kc(),i=Dn(),a=e([].concat);return ob=r("Reflect","ownKeys")||function(s){var u=t.f(i(s)),l=n.f;return l?a(u,l(s)):u},ob}var Zk={},Qk;function yQ(){if(Qk)return Zk;Qk=1;var r=xe(),e=Fa();return r({target:"Array",stat:!0},{isArray:e}),Zk}var sb,Jk;function mQ(){if(Jk)return sb;Jk=1,yQ();var r=nt();return sb=r.Array.isArray,sb}var ub,eM;function bQ(){if(eM)return ub;eM=1;var r=mQ();return ub=r,ub}var lb,tM;function wQ(){return tM||(tM=1,lb=bQ()),lb}var EQ=wQ(),Tt=Ae(EQ),rM={},nM;function SQ(){if(nM)return rM;nM=1;var r=xe(),e=zi().map,t=Nu(),n=t("map");return r({target:"Array",proto:!0,forced:!n},{map:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),rM}var cb,iM;function _Q(){if(iM)return cb;iM=1,SQ();var r=lr();return cb=r("Array","map"),cb}var db,aM;function TQ(){if(aM)return db;aM=1;var r=Bt(),e=_Q(),t=Array.prototype;return db=function(n){var i=n.map;return n===t||r(t,n)&&i===t.map?e:i},db}var hb,oM;function xQ(){if(oM)return hb;oM=1;var r=TQ();return hb=r,hb}var fb,sM;function PQ(){return sM||(sM=1,fb=xQ()),fb}var CQ=PQ(),$o=Ae(CQ),uM={},lM;function IQ(){if(lM)return uM;lM=1;var r=xe(),e=jr(),t=Fu(),n=Ke(),i=n(function(){t(1)});return r({target:"Object",stat:!0,forced:i},{keys:function(o){return t(e(o))}}),uM}var vb,cM;function OQ(){if(cM)return vb;cM=1,IQ();var r=nt();return vb=r.Object.keys,vb}var pb,dM;function RQ(){if(dM)return pb;dM=1;var r=OQ();return pb=r,pb}var gb,hM;function $Q(){return hM||(hM=1,gb=RQ()),gb}var DQ=$Q(),_t=Ae(DQ),fM={},vM;function AQ(){if(vM)return fM;vM=1;var r=xe(),e=Ye(),t=Date,n=e(t.prototype.getTime);return r({target:"Date",stat:!0},{now:function(){return n(new t)}}),fM}var yb,pM;function qQ(){if(pM)return yb;pM=1,AQ();var r=nt();return yb=r.Date.now,yb}var mb,gM;function kQ(){if(gM)return mb;gM=1;var r=qQ();return mb=r,mb}var bb,yM;function MQ(){return yM||(yM=1,bb=kQ()),bb}var BQ=MQ(),ic=Ae(BQ),mM={},wb,bM;function ls(){if(bM)return wb;bM=1;var r=Ke();return wb=function(e,t){var n=[][e];return!!n&&r(function(){n.call(null,t||function(){return 1},1)})},wb}var Eb,wM;function FQ(){if(wM)return Eb;wM=1;var r=zi().forEach,e=ls(),t=e("forEach");return Eb=t?[].forEach:function(i){return r(this,i,arguments.length>1?arguments[1]:void 0)},Eb}var EM;function NQ(){if(EM)return mM;EM=1;var r=xe(),e=FQ();return r({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),mM}var Sb,SM;function LQ(){if(SM)return Sb;SM=1,NQ();var r=lr();return Sb=r("Array","forEach"),Sb}var _b,_M;function zQ(){if(_M)return _b;_M=1;var r=LQ();return _b=r,_b}var Tb,TM;function jQ(){if(TM)return Tb;TM=1;var r=as(),e=ur(),t=Bt(),n=zQ(),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};return Tb=function(o){var s=o.forEach;return o===i||t(i,o)&&s===i.forEach||e(a,r(o))?n:s},Tb}var xb,xM;function VQ(){return xM||(xM=1,xb=jQ()),xb}var WQ=VQ(),at=Ae(WQ),PM={},CM;function HQ(){if(CM)return PM;CM=1;var r=xe(),e=Ye(),t=Fa(),n=e([].reverse),i=[1,2];return r({target:"Array",proto:!0,forced:String(i)===String(i.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),n(this)}}),PM}var Pb,IM;function GQ(){if(IM)return Pb;IM=1,HQ();var r=lr();return Pb=r("Array","reverse"),Pb}var Cb,OM;function UQ(){if(OM)return Cb;OM=1;var r=Bt(),e=GQ(),t=Array.prototype;return Cb=function(n){var i=n.reverse;return n===t||r(t,n)&&i===t.reverse?e:i},Cb}var Ib,RM;function KQ(){if(RM)return Ib;RM=1;var r=UQ();return Ib=r,Ib}var Ob,$M;function YQ(){return $M||($M=1,Ob=KQ()),Ob}var XQ=YQ(),ha=Ae(XQ),DM={},Rb,AM;function ZQ(){if(AM)return Rb;AM=1;var r=Ct(),e=Fa(),t=TypeError,n=Object.getOwnPropertyDescriptor,i=r&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(a){return a instanceof TypeError}})();return Rb=i?function(a,o){if(e(a)&&!n(a,"length").writable)throw new t("Cannot set read only .length");return a.length=o}:function(a,o){return a.length=o},Rb}var $b,qM;function wH(){if(qM)return $b;qM=1;var r=Jo(),e=TypeError;return $b=function(t,n){if(!delete t[n])throw new e("Cannot delete property "+r(n)+" of "+r(t))},$b}var kM;function QQ(){if(kM)return DM;kM=1;var r=xe(),e=jr(),t=Uc(),n=ns(),i=ii(),a=ZQ(),o=aH(),s=J_(),u=Yc(),l=wH(),c=Nu(),d=c("splice"),h=Math.max,f=Math.min;return r({target:"Array",proto:!0,forced:!d},{splice:function(p,y){var g=e(this),m=i(g),b=t(p,m),w=arguments.length,S,T,_,E,x,P;for(w===0?S=T=0:w===1?(S=0,T=m-b):(S=w-2,T=f(h(n(y),0),m-b)),o(m+S-T),_=s(g,T),E=0;E<T;E++)x=b+E,x in g&&u(_,E,g[x]);if(_.length=T,S<T){for(E=b;E<m-T;E++)x=E+T,P=E+S,x in g?g[P]=g[x]:l(g,P);for(E=m;E>m-T+S;E--)l(g,E-1)}else if(S>T)for(E=m-T;E>b;E--)x=E+T-1,P=E+S-1,x in g?g[P]=g[x]:l(g,P);for(E=0;E<S;E++)g[E+b]=arguments[E+2];return a(g,m-T+S),_}}),DM}var Db,MM;function JQ(){if(MM)return Db;MM=1,QQ();var r=lr();return Db=r("Array","splice"),Db}var Ab,BM;function eJ(){if(BM)return Ab;BM=1;var r=Bt(),e=JQ(),t=Array.prototype;return Ab=function(n){var i=n.splice;return n===t||r(t,n)&&i===t.splice?e:i},Ab}var qb,FM;function tJ(){if(FM)return qb;FM=1;var r=eJ();return qb=r,qb}var kb,NM;function rJ(){return NM||(NM=1,kb=tJ()),kb}var nJ=rJ(),Hn=Ae(nJ),LM={},zM;function iJ(){if(zM)return LM;zM=1;var r=xe(),e=Y_().includes,t=Ke(),n=nT(),i=t(function(){return!Array(1).includes()});return r({target:"Array",proto:!0,forced:i},{includes:function(o){return e(this,o,arguments.length>1?arguments[1]:void 0)}}),n("includes"),LM}var Mb,jM;function aJ(){if(jM)return Mb;jM=1,iJ();var r=lr();return Mb=r("Array","includes"),Mb}var VM={},Bb,WM;function oJ(){if(WM)return Bb;WM=1;var r=tr(),e=$n(),t=Ft(),n=t("match");return Bb=function(i){var a;return r(i)&&((a=i[n])!==void 0?!!a:e(i)==="RegExp")},Bb}var Fb,HM;function sJ(){if(HM)return Fb;HM=1;var r=oJ(),e=TypeError;return Fb=function(t){if(r(t))throw new e("The method doesn't accept regular expressions");return t},Fb}var Nb,GM;function uJ(){if(GM)return Nb;GM=1;var r=Ft(),e=r("match");return Nb=function(t){var n=/./;try{"/./"[t](n)}catch{try{return n[e]=!1,"/./"[t](n)}catch{}}return!1},Nb}var UM;function lJ(){if(UM)return VM;UM=1;var r=xe(),e=Ye(),t=sJ(),n=ri(),i=tn(),a=uJ(),o=e("".indexOf);return r({target:"String",proto:!0,forced:!a("includes")},{includes:function(u){return!!~o(i(n(this)),i(t(u)),arguments.length>1?arguments[1]:void 0)}}),VM}var Lb,KM;function cJ(){if(KM)return Lb;KM=1,lJ();var r=lr();return Lb=r("String","includes"),Lb}var zb,YM;function dJ(){if(YM)return zb;YM=1;var r=Bt(),e=aJ(),t=cJ(),n=Array.prototype,i=String.prototype;return zb=function(a){var o=a.includes;return a===n||r(n,a)&&o===n.includes?e:typeof a=="string"||a===i||r(i,a)&&o===i.includes?t:o},zb}var jb,XM;function hJ(){if(XM)return jb;XM=1;var r=dJ();return jb=r,jb}var Vb,ZM;function fJ(){return ZM||(ZM=1,Vb=hJ()),Vb}var vJ=fJ(),wi=Ae(vJ),QM={},JM;function pJ(){if(JM)return QM;JM=1;var r=xe(),e=Ke(),t=jr(),n=Jc(),i=yH(),a=e(function(){n(1)});return r({target:"Object",stat:!0,forced:a,sham:!i},{getPrototypeOf:function(s){return n(t(s))}}),QM}var Wb,eB;function gJ(){if(eB)return Wb;eB=1,pJ();var r=nt();return Wb=r.Object.getPrototypeOf,Wb}var Hb,tB;function yJ(){if(tB)return Hb;tB=1;var r=gJ();return Hb=r,Hb}var Gb,rB;function mJ(){return rB||(rB=1,Gb=yJ()),Gb}var bJ=mJ(),nB=Ae(bJ),Ub,iB;function wJ(){if(iB)return Ub;iB=1,sH();var r=lr();return Ub=r("Array","concat"),Ub}var Kb,aB;function EJ(){if(aB)return Kb;aB=1;var r=Bt(),e=wJ(),t=Array.prototype;return Kb=function(n){var i=n.concat;return n===t||r(t,n)&&i===t.concat?e:i},Kb}var Yb,oB;function SJ(){if(oB)return Yb;oB=1;var r=EJ();return Yb=r,Yb}var Xb,sB;function _J(){return sB||(sB=1,Xb=SJ()),Xb}var TJ=_J(),xJ=Ae(TJ),uB={},lB;function PJ(){if(lB)return uB;lB=1;var r=xe(),e=zi().filter,t=Nu(),n=t("filter");return r({target:"Array",proto:!0,forced:!n},{filter:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),uB}var Zb,cB;function CJ(){if(cB)return Zb;cB=1,PJ();var r=lr();return Zb=r("Array","filter"),Zb}var Qb,dB;function IJ(){if(dB)return Qb;dB=1;var r=Bt(),e=CJ(),t=Array.prototype;return Qb=function(n){var i=n.filter;return n===t||r(t,n)&&i===t.filter?e:i},Qb}var Jb,hB;function OJ(){if(hB)return Jb;hB=1;var r=IJ();return Jb=r,Jb}var e0,fB;function RJ(){return fB||(fB=1,e0=OJ()),e0}var $J=RJ(),Dr=Ae($J),vB={},t0,pB;function DJ(){if(pB)return t0;pB=1;var r=Ct(),e=Ke(),t=Ye(),n=Jc(),i=Fu(),a=pn(),o=jc().f,s=t(o),u=t([].push),l=r&&e(function(){var d=Object.create(null);return d[2]=2,!s(d,2)}),c=function(d){return function(h){for(var f=a(h),v=i(f),p=l&&n(f)===null,y=v.length,g=0,m=[],b;y>g;)b=v[g++],(!r||(p?b in f:s(f,b)))&&u(m,d?[b,f[b]]:f[b]);return m}};return t0={entries:c(!0),values:c(!1)},t0}var gB;function AJ(){if(gB)return vB;gB=1;var r=xe(),e=DJ().values;return r({target:"Object",stat:!0},{values:function(n){return e(n)}}),vB}var r0,yB;function qJ(){if(yB)return r0;yB=1,AJ();var r=nt();return r0=r.Object.values,r0}var n0,mB;function kJ(){if(mB)return n0;mB=1;var r=qJ();return n0=r,n0}var i0,bB;function MJ(){return bB||(bB=1,i0=kJ()),i0}var BJ=MJ(),FJ=Ae(BJ),wB={},a0,EB;function oT(){return EB||(EB=1,a0=`	
\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF`),a0}var o0,SB;function EH(){if(SB)return o0;SB=1;var r=Ye(),e=ri(),t=tn(),n=oT(),i=r("".replace),a=RegExp("^["+n+"]+"),o=RegExp("(^|[^"+n+"])["+n+"]+$"),s=function(u){return function(l){var c=t(e(l));return u&1&&(c=i(c,a,"")),u&2&&(c=i(c,o,"$1")),c}};return o0={start:s(1),end:s(2),trim:s(3)},o0}var s0,_B;function NJ(){if(_B)return s0;_B=1;var r=yt(),e=Ke(),t=Ye(),n=tn(),i=EH().trim,a=oT(),o=r.parseInt,s=r.Symbol,u=s&&s.iterator,l=/^[+-]?0x/i,c=t(l.exec),d=o(a+"08")!==8||o(a+"0x16")!==22||u&&!e(function(){o(Object(u))});return s0=d?function(f,v){var p=i(n(f));return o(p,v>>>0||(c(l,p)?16:10))}:o,s0}var TB;function LJ(){if(TB)return wB;TB=1;var r=xe(),e=NJ();return r({global:!0,forced:parseInt!==e},{parseInt:e}),wB}var u0,xB;function zJ(){if(xB)return u0;xB=1,LJ();var r=nt();return u0=r.parseInt,u0}var l0,PB;function jJ(){if(PB)return l0;PB=1;var r=zJ();return l0=r,l0}var c0,CB;function VJ(){return CB||(CB=1,c0=jJ()),c0}var WJ=VJ(),ln=Ae(WJ),IB={},OB;function HJ(){if(OB)return IB;OB=1;var r=xe(),e=H_(),t=Y_().indexOf,n=ls(),i=e([].indexOf),a=!!i&&1/i([1],1,-0)<0,o=a||!n("indexOf");return r({target:"Array",proto:!0,forced:o},{indexOf:function(u){var l=arguments.length>1?arguments[1]:void 0;return a?i(this,u,l)||0:t(this,u,l)}}),IB}var d0,RB;function GJ(){if(RB)return d0;RB=1,HJ();var r=lr();return d0=r("Array","indexOf"),d0}var h0,$B;function UJ(){if($B)return h0;$B=1;var r=Bt(),e=GJ(),t=Array.prototype;return h0=function(n){var i=n.indexOf;return n===t||r(t,n)&&i===t.indexOf?e:i},h0}var f0,DB;function KJ(){if(DB)return f0;DB=1;var r=UJ();return f0=r,f0}var v0,AB;function YJ(){return AB||(AB=1,v0=KJ()),v0}var XJ=YJ(),tt=Ae(XJ),qB={},kB;function ZJ(){if(kB)return qB;kB=1;var r=xe(),e=Ct(),t=Lu();return r({target:"Object",stat:!0,sham:!e},{create:t}),qB}var p0,MB;function QJ(){if(MB)return p0;MB=1,ZJ();var r=nt(),e=r.Object;return p0=function(n,i){return e.create(n,i)},p0}var g0,BB;function JJ(){if(BB)return g0;BB=1;var r=QJ();return g0=r,g0}var y0,FB;function eee(){return FB||(FB=1,y0=JJ()),y0}var tee=eee(),fa=Ae(tee),NB={},m0,LB;function ree(){if(LB)return m0;LB=1;var r=ns(),e=tn(),t=ri(),n=RangeError;return m0=function(a){var o=e(t(this)),s="",u=r(a);if(u<0||u===1/0)throw new n("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(o+=o))u&1&&(s+=o);return s},m0}var b0,zB;function nee(){if(zB)return b0;zB=1;var r=Ye(),e=JW(),t=tn(),n=ree(),i=ri(),a=r(n),o=r("".slice),s=Math.ceil,u=function(l){return function(c,d,h){var f=t(i(c)),v=e(d),p=f.length,y=h===void 0?" ":t(h),g,m;return v<=p||y===""?f:(g=v-p,m=a(y,s(g/y.length)),m.length>g&&(m=o(m,0,g)),l?f+m:m+f)}};return b0={start:u(!1),end:u(!0)},b0}var w0,jB;function iee(){if(jB)return w0;jB=1;var r=Ye(),e=Ke(),t=nee().start,n=RangeError,i=isFinite,a=Math.abs,o=Date.prototype,s=o.toISOString,u=r(o.getTime),l=r(o.getUTCDate),c=r(o.getUTCFullYear),d=r(o.getUTCHours),h=r(o.getUTCMilliseconds),f=r(o.getUTCMinutes),v=r(o.getUTCMonth),p=r(o.getUTCSeconds);return w0=e(function(){return s.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){s.call(new Date(NaN))})?function(){if(!i(u(this)))throw new n("Invalid time value");var g=this,m=c(g),b=h(g),w=m<0?"-":m>9999?"+":"";return w+t(a(m),w?6:4,0)+"-"+t(v(g)+1,2,0)+"-"+t(l(g),2,0)+"T"+t(d(g),2,0)+":"+t(f(g),2,0)+":"+t(p(g),2,0)+"."+t(b,3,0)+"Z"}:s,w0}var VB;function aee(){if(VB)return NB;VB=1;var r=xe(),e=Fr(),t=jr(),n=YW(),i=iee(),a=$n(),o=Ke(),s=o(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return r({target:"Date",proto:!0,forced:s},{toJSON:function(l){var c=t(this),d=n(c,"number");return typeof d=="number"&&!isFinite(d)?null:!("toISOString"in c)&&a(c)==="Date"?e(i,c):c.toISOString()}}),NB}var E0,WB;function oee(){if(WB)return E0;WB=1,aee(),dH();var r=nt(),e=zc();return r.JSON||(r.JSON={stringify:JSON.stringify}),E0=function(n,i,a){return e(r.JSON.stringify,null,arguments)},E0}var S0,HB;function see(){if(HB)return S0;HB=1;var r=oee();return S0=r,S0}var _0,GB;function uee(){return GB||(GB=1,_0=see()),_0}var lee=uee(),ju=Ae(lee),UB={},KB={},T0,YB;function SH(){if(YB)return T0;YB=1;var r=yt(),e=Zo(),t=$n(),n=function(i){return e.slice(0,i.length)===i};return T0=(function(){return n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":r.Bun&&typeof Bun.version=="string"?"BUN":r.Deno&&typeof Deno.version=="object"?"DENO":t(r.process)==="process"?"NODE":r.window&&r.document?"BROWSER":"REST"})(),T0}var x0,XB;function cee(){if(XB)return x0;XB=1;var r=TypeError;return x0=function(e,t){if(e<t)throw new r("Not enough arguments");return e},x0}var P0,ZB;function _H(){if(ZB)return P0;ZB=1;var r=yt(),e=zc(),t=er(),n=SH(),i=Zo(),a=is(),o=cee(),s=r.Function,u=/MSIE .\./.test(i)||n==="BUN"&&(function(){var l=r.Bun.version.split(".");return l.length<3||l[0]==="0"&&(l[1]<3||l[1]==="3"&&l[2]==="0")})();return P0=function(l,c){var d=c?2:1;return u?function(h,f){var v=o(arguments.length,1)>d,p=t(h)?h:s(h),y=v?a(arguments,d):[],g=v?function(){e(p,this,y)}:p;return c?l(g,f):l(g)}:l},P0}var QB;function dee(){if(QB)return KB;QB=1;var r=xe(),e=yt(),t=_H(),n=t(e.setInterval,!0);return r({global:!0,bind:!0,forced:e.setInterval!==n},{setInterval:n}),KB}var JB={},eF;function hee(){if(eF)return JB;eF=1;var r=xe(),e=yt(),t=_H(),n=t(e.setTimeout,!0);return r({global:!0,bind:!0,forced:e.setTimeout!==n},{setTimeout:n}),JB}var tF;function TH(){return tF||(tF=1,dee(),hee()),UB}var C0,rF;function fee(){if(rF)return C0;rF=1,TH();var r=nt();return C0=r.setTimeout,C0}var I0,nF;function vee(){return nF||(nF=1,I0=fee()),I0}var pee=vee(),Gn=Ae(pee),iF={},O0,aF;function gee(){if(aF)return O0;aF=1;var r=jr(),e=Uc(),t=ii();return O0=function(i){for(var a=r(this),o=t(a),s=arguments.length,u=e(s>1?arguments[1]:void 0,o),l=s>2?arguments[2]:void 0,c=l===void 0?o:e(l,o);c>u;)a[u++]=i;return a},O0}var oF;function yee(){if(oF)return iF;oF=1;var r=xe(),e=gee(),t=nT();return r({target:"Array",proto:!0},{fill:e}),t("fill"),iF}var R0,sF;function mee(){if(sF)return R0;sF=1,yee();var r=lr();return R0=r("Array","fill"),R0}var $0,uF;function bee(){if(uF)return $0;uF=1;var r=Bt(),e=mee(),t=Array.prototype;return $0=function(n){var i=n.fill;return n===t||r(t,n)&&i===t.fill?e:i},$0}var D0,lF;function wee(){if(lF)return D0;lF=1;var r=bee();return D0=r,D0}var A0,cF;function Eee(){return cF||(cF=1,A0=wee()),A0}var See=Eee(),Vu=Ae(See);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function hn(){return hn=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hn.apply(this,arguments)}function rn(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function yl(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var FS;typeof Object.assign!="function"?FS=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}return t}:FS=Object.assign;var wa=FS,dF=["","webkit","Moz","MS","ms","o"],_ee=typeof document>"u"?{style:{}}:document.createElement("div"),Tee="function",vo=Math.round,Ea=Math.abs,sT=Date.now;function ed(r,e){for(var t,n,i=e[0].toUpperCase()+e.slice(1),a=0;a<dF.length;){if(t=dF[a],n=t?t+i:e,n in r)return n;a++}}var Un;typeof window>"u"?Un={}:Un=window;var xH=ed(_ee.style,"touchAction"),PH=xH!==void 0;function xee(){if(!PH)return!1;var r={},e=Un.CSS&&Un.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return r[t]=e?Un.CSS.supports("touch-action",t):!0}),r}var CH="compute",IH="auto",NS="manipulation",va="none",tu="pan-x",ru="pan-y",ml=xee(),Pee=/mobile|tablet|ip(ad|hone|od)|android/i,OH="ontouchstart"in Un,Cee=ed(Un,"PointerEvent")!==void 0,Iee=OH&&Pee.test(navigator.userAgent),Wu="touch",Oee="pen",uT="mouse",Ree="kinect",$ee=25,_r=1,za=2,qt=4,kr=8,ac=1,Hu=2,Gu=4,Uu=8,Do=16,Pn=Hu|Gu,pa=Uu|Do,RH=Pn|pa,$H=["x","y"],oc=["clientX","clientY"];function Kn(r,e,t){var n;if(r)if(r.forEach)r.forEach(e,t);else if(r.length!==void 0)for(n=0;n<r.length;)e.call(t,r[n],n,r),n++;else for(n in r)r.hasOwnProperty(n)&&e.call(t,r[n],n,r)}function td(r,e){return typeof r===Tee?r.apply(e&&e[0]||void 0,e):r}function oa(r,e){return r.indexOf(e)>-1}function Dee(r){if(oa(r,va))return va;var e=oa(r,tu),t=oa(r,ru);return e&&t?va:e||t?e?tu:ru:oa(r,NS)?NS:IH}var DH=(function(){function r(t,n){this.manager=t,this.set(n)}var e=r.prototype;return e.set=function(n){n===CH&&(n=this.compute()),PH&&this.manager.element.style&&ml[n]&&(this.manager.element.style[xH]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Kn(this.manager.recognizers,function(i){td(i.options.enable,[i])&&(n=n.concat(i.getTouchAction()))}),Dee(n.join(" "))},e.preventDefaults=function(n){var i=n.srcEvent,a=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var o=this.actions,s=oa(o,va)&&!ml[va],u=oa(o,ru)&&!ml[ru],l=oa(o,tu)&&!ml[tu];if(s){var c=n.pointers.length===1,d=n.distance<2,h=n.deltaTime<250;if(c&&d&&h)return}if(!(l&&u)&&(s||u&&a&Pn||l&&a&pa))return this.preventSrc(i)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},r})();function lT(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function AH(r){var e=r.length;if(e===1)return{x:vo(r[0].clientX),y:vo(r[0].clientY)};for(var t=0,n=0,i=0;i<e;)t+=r[i].clientX,n+=r[i].clientY,i++;return{x:vo(t/e),y:vo(n/e)}}function hF(r){for(var e=[],t=0;t<r.pointers.length;)e[t]={clientX:vo(r.pointers[t].clientX),clientY:vo(r.pointers[t].clientY)},t++;return{timeStamp:sT(),pointers:e,center:AH(e),deltaX:r.deltaX,deltaY:r.deltaY}}function sc(r,e,t){t||(t=$H);var n=e[t[0]]-r[t[0]],i=e[t[1]]-r[t[1]];return Math.sqrt(n*n+i*i)}function LS(r,e,t){t||(t=$H);var n=e[t[0]]-r[t[0]],i=e[t[1]]-r[t[1]];return Math.atan2(i,n)*180/Math.PI}function qH(r,e){return r===e?ac:Ea(r)>=Ea(e)?r<0?Hu:Gu:e<0?Uu:Do}function Aee(r,e){var t=e.center,n=r.offsetDelta||{},i=r.prevDelta||{},a=r.prevInput||{};(e.eventType===_r||a.eventType===qt)&&(i=r.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=r.offsetDelta={x:t.x,y:t.y}),e.deltaX=i.x+(t.x-n.x),e.deltaY=i.y+(t.y-n.y)}function kH(r,e,t){return{x:e/r||0,y:t/r||0}}function qee(r,e){return sc(e[0],e[1],oc)/sc(r[0],r[1],oc)}function kee(r,e){return LS(e[1],e[0],oc)+LS(r[1],r[0],oc)}function Mee(r,e){var t=r.lastInterval||e,n=e.timeStamp-t.timeStamp,i,a,o,s;if(e.eventType!==kr&&(n>$ee||t.velocity===void 0)){var u=e.deltaX-t.deltaX,l=e.deltaY-t.deltaY,c=kH(n,u,l);a=c.x,o=c.y,i=Ea(c.x)>Ea(c.y)?c.x:c.y,s=qH(u,l),r.lastInterval=e}else i=t.velocity,a=t.velocityX,o=t.velocityY,s=t.direction;e.velocity=i,e.velocityX=a,e.velocityY=o,e.direction=s}function Bee(r,e){var t=r.session,n=e.pointers,i=n.length;t.firstInput||(t.firstInput=hF(e)),i>1&&!t.firstMultiple?t.firstMultiple=hF(e):i===1&&(t.firstMultiple=!1);var a=t.firstInput,o=t.firstMultiple,s=o?o.center:a.center,u=e.center=AH(n);e.timeStamp=sT(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=LS(s,u),e.distance=sc(s,u),Aee(t,e),e.offsetDirection=qH(e.deltaX,e.deltaY);var l=kH(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=Ea(l.x)>Ea(l.y)?l.x:l.y,e.scale=o?qee(o.pointers,n):1,e.rotation=o?kee(o.pointers,n):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,Mee(t,e);var c=r.element,d=e.srcEvent,h;d.composedPath?h=d.composedPath()[0]:d.path?h=d.path[0]:h=d.target,lT(h,c)&&(c=h),e.target=c}function Fee(r,e,t){var n=t.pointers.length,i=t.changedPointers.length,a=e&_r&&n-i===0,o=e&(qt|kr)&&n-i===0;t.isFirst=!!a,t.isFinal=!!o,a&&(r.session={}),t.eventType=e,Bee(r,t),r.emit("hammer.input",t),r.recognize(t),r.session.prevInput=t}function nu(r){return r.trim().split(/\s+/g)}function Ns(r,e,t){Kn(nu(e),function(n){r.addEventListener(n,t,!1)})}function Ls(r,e,t){Kn(nu(e),function(n){r.removeEventListener(n,t,!1)})}function fF(r){var e=r.ownerDocument||r;return e.defaultView||e.parentWindow||window}var cs=(function(){function r(t,n){var i=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(a){td(t.options.enable,[t])&&i.handler(a)},this.init()}var e=r.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Ns(this.element,this.evEl,this.domHandler),this.evTarget&&Ns(this.target,this.evTarget,this.domHandler),this.evWin&&Ns(fF(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ls(this.element,this.evEl,this.domHandler),this.evTarget&&Ls(this.target,this.evTarget,this.domHandler),this.evWin&&Ls(fF(this.element),this.evWin,this.domHandler)},r})();function Sa(r,e,t){if(r.indexOf&&!t)return r.indexOf(e);for(var n=0;n<r.length;){if(t&&r[n][t]==e||!t&&r[n]===e)return n;n++}return-1}var Nee={pointerdown:_r,pointermove:za,pointerup:qt,pointercancel:kr,pointerout:kr},Lee={2:Wu,3:Oee,4:uT,5:Ree},MH="pointerdown",BH="pointermove pointerup pointercancel";Un.MSPointerEvent&&!Un.PointerEvent&&(MH="MSPointerDown",BH="MSPointerMove MSPointerUp MSPointerCancel");var FH=(function(r){rn(e,r);function e(){var n,i=e.prototype;return i.evEl=MH,i.evWin=BH,n=r.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var t=e.prototype;return t.handler=function(i){var a=this.store,o=!1,s=i.type.toLowerCase().replace("ms",""),u=Nee[s],l=Lee[i.pointerType]||i.pointerType,c=l===Wu,d=Sa(a,i.pointerId,"pointerId");u&_r&&(i.button===0||c)?d<0&&(a.push(i),d=a.length-1):u&(qt|kr)&&(o=!0),!(d<0)&&(a[d]=i,this.callback(this.manager,u,{pointers:a,changedPointers:[i],pointerType:l,srcEvent:i}),o&&a.splice(d,1))},e})(cs);function iu(r){return Array.prototype.slice.call(r,0)}function cT(r,e,t){for(var n=[],i=[],a=0;a<r.length;){var o=e?r[a][e]:r[a];Sa(i,o)<0&&n.push(r[a]),i[a]=o,a++}return t&&(e?n=n.sort(function(s,u){return s[e]>u[e]}):n=n.sort()),n}var zee={touchstart:_r,touchmove:za,touchend:qt,touchcancel:kr},jee="touchstart touchmove touchend touchcancel",dT=(function(r){rn(e,r);function e(){var n;return e.prototype.evTarget=jee,n=r.apply(this,arguments)||this,n.targetIds={},n}var t=e.prototype;return t.handler=function(i){var a=zee[i.type],o=Vee.call(this,i,a);o&&this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Wu,srcEvent:i})},e})(cs);function Vee(r,e){var t=iu(r.touches),n=this.targetIds;if(e&(_r|za)&&t.length===1)return n[t[0].identifier]=!0,[t,t];var i,a,o=iu(r.changedTouches),s=[],u=this.target;if(a=t.filter(function(l){return lT(l.target,u)}),e===_r)for(i=0;i<a.length;)n[a[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&s.push(o[i]),e&(qt|kr)&&delete n[o[i].identifier],i++;if(s.length)return[cT(a.concat(s),"identifier",!0),s]}var Wee={mousedown:_r,mousemove:za,mouseup:qt},Hee="mousedown",Gee="mousemove mouseup",hT=(function(r){rn(e,r);function e(){var n,i=e.prototype;return i.evEl=Hee,i.evWin=Gee,n=r.apply(this,arguments)||this,n.pressed=!1,n}var t=e.prototype;return t.handler=function(i){var a=Wee[i.type];a&_r&&i.button===0&&(this.pressed=!0),a&za&&i.which!==1&&(a=qt),this.pressed&&(a&qt&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[i],changedPointers:[i],pointerType:uT,srcEvent:i}))},e})(cs),Uee=2500,vF=25;function pF(r){var e=r.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY},i=this.lastTouches;this.lastTouches.push(n);var a=function(){var s=i.indexOf(n);s>-1&&i.splice(s,1)};setTimeout(a,Uee)}}function Kee(r,e){r&_r?(this.primaryTouch=e.changedPointers[0].identifier,pF.call(this,e)):r&(qt|kr)&&pF.call(this,e)}function Yee(r){for(var e=r.srcEvent.clientX,t=r.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],a=Math.abs(e-i.x),o=Math.abs(t-i.y);if(a<=vF&&o<=vF)return!0}return!1}var NH=(function(){var r=(function(e){rn(t,e);function t(i,a){var o;return o=e.call(this,i,a)||this,o.handler=function(s,u,l){var c=l.pointerType===Wu,d=l.pointerType===uT;if(!(d&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(c)Kee.call(yl(yl(o)),u,l);else if(d&&Yee.call(yl(yl(o)),l))return;o.callback(s,u,l)}},o.touch=new dT(o.manager,o.handler),o.mouse=new hT(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var n=t.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})(cs);return r})();function Xee(r){var e,t=r.options.inputClass;return t?e=t:Cee?e=FH:Iee?e=dT:OH?e=NH:e=hT,new e(r,Fee)}function po(r,e,t){return Array.isArray(r)?(Kn(r,t[e],t),!0):!1}var kl=1,Xr=2,Ao=4,Ei=8,Yn=Ei,au=16,Sn=32,Zee=1;function Qee(){return Zee++}function bl(r,e){var t=e.manager;return t?t.get(r):r}function gF(r){return r&au?"cancel":r&Ei?"end":r&Ao?"move":r&Xr?"start":""}var Ku=(function(){function r(t){t===void 0&&(t={}),this.options=hn({enable:!0},t),this.id=Qee(),this.manager=null,this.state=kl,this.simultaneous={},this.requireFail=[]}var e=r.prototype;return e.set=function(n){return wa(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(po(n,"recognizeWith",this))return this;var i=this.simultaneous;return n=bl(n,this),i[n.id]||(i[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return po(n,"dropRecognizeWith",this)?this:(n=bl(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(po(n,"requireFailure",this))return this;var i=this.requireFail;return n=bl(n,this),Sa(i,n)===-1&&(i.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(po(n,"dropRequireFailure",this))return this;n=bl(n,this);var i=Sa(this.requireFail,n);return i>-1&&this.requireFail.splice(i,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var i=this,a=this.state;function o(s){i.manager.emit(s,n)}a<Ei&&o(i.options.event+gF(a)),o(i.options.event),n.additionalEvent&&o(n.additionalEvent),a>=Ei&&o(i.options.event+gF(a))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=Sn},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(Sn|kl)))return!1;n++}return!0},e.recognize=function(n){var i=wa({},n);if(!td(this.options.enable,[this,i])){this.reset(),this.state=Sn;return}this.state&(Yn|au|Sn)&&(this.state=kl),this.state=this.process(i),this.state&(Xr|Ao|Ei|au)&&this.tryEmit(i)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},r})(),zS=(function(r){rn(e,r);function e(n){var i;return n===void 0&&(n={}),i=r.call(this,hn({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,i.pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}var t=e.prototype;return t.getTouchAction=function(){return[NS]},t.process=function(i){var a=this,o=this.options,s=i.pointers.length===o.pointers,u=i.distance<o.threshold,l=i.deltaTime<o.time;if(this.reset(),i.eventType&_r&&this.count===0)return this.failTimeout();if(u&&l&&s){if(i.eventType!==qt)return this.failTimeout();var c=this.pTime?i.timeStamp-this.pTime<o.interval:!0,d=!this.pCenter||sc(this.pCenter,i.center)<o.posThreshold;this.pTime=i.timeStamp,this.pCenter=i.center,!d||!c?this.count=1:this.count+=1,this._input=i;var h=this.count%o.taps;if(h===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=Yn,a.tryEmit()},o.interval),Xr):Yn}return Sn},t.failTimeout=function(){var i=this;return this._timer=setTimeout(function(){i.state=Sn},this.options.interval),Sn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===Yn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(Ku),qo=(function(r){rn(e,r);function e(n){return n===void 0&&(n={}),r.call(this,hn({pointers:1},n))||this}var t=e.prototype;return t.attrTest=function(i){var a=this.options.pointers;return a===0||i.pointers.length===a},t.process=function(i){var a=this.state,o=i.eventType,s=a&(Xr|Ao),u=this.attrTest(i);return s&&(o&kr||!u)?a|au:s||u?o&qt?a|Ei:a&Xr?a|Ao:Xr:Sn},e})(Ku);function LH(r){return r===Do?"down":r===Uu?"up":r===Hu?"left":r===Gu?"right":""}var fT=(function(r){rn(e,r);function e(n){var i;return n===void 0&&(n={}),i=r.call(this,hn({event:"pan",threshold:10,pointers:1,direction:RH},n))||this,i.pX=null,i.pY=null,i}var t=e.prototype;return t.getTouchAction=function(){var i=this.options.direction,a=[];return i&Pn&&a.push(ru),i&pa&&a.push(tu),a},t.directionTest=function(i){var a=this.options,o=!0,s=i.distance,u=i.direction,l=i.deltaX,c=i.deltaY;return u&a.direction||(a.direction&Pn?(u=l===0?ac:l<0?Hu:Gu,o=l!==this.pX,s=Math.abs(i.deltaX)):(u=c===0?ac:c<0?Uu:Do,o=c!==this.pY,s=Math.abs(i.deltaY))),i.direction=u,o&&s>a.threshold&&u&a.direction},t.attrTest=function(i){return qo.prototype.attrTest.call(this,i)&&(this.state&Xr||!(this.state&Xr)&&this.directionTest(i))},t.emit=function(i){this.pX=i.deltaX,this.pY=i.deltaY;var a=LH(i.direction);a&&(i.additionalEvent=this.options.event+a),r.prototype.emit.call(this,i)},e})(qo),zH=(function(r){rn(e,r);function e(n){return n===void 0&&(n={}),r.call(this,hn({event:"swipe",threshold:10,velocity:.3,direction:Pn|pa,pointers:1},n))||this}var t=e.prototype;return t.getTouchAction=function(){return fT.prototype.getTouchAction.call(this)},t.attrTest=function(i){var a=this.options.direction,o;return a&(Pn|pa)?o=i.overallVelocity:a&Pn?o=i.overallVelocityX:a&pa&&(o=i.overallVelocityY),r.prototype.attrTest.call(this,i)&&a&i.offsetDirection&&i.distance>this.options.threshold&&i.maxPointers===this.options.pointers&&Ea(o)>this.options.velocity&&i.eventType&qt},t.emit=function(i){var a=LH(i.offsetDirection);a&&this.manager.emit(this.options.event+a,i),this.manager.emit(this.options.event,i)},e})(qo),jH=(function(r){rn(e,r);function e(n){return n===void 0&&(n={}),r.call(this,hn({event:"pinch",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[va]},t.attrTest=function(i){return r.prototype.attrTest.call(this,i)&&(Math.abs(i.scale-1)>this.options.threshold||this.state&Xr)},t.emit=function(i){if(i.scale!==1){var a=i.scale<1?"in":"out";i.additionalEvent=this.options.event+a}r.prototype.emit.call(this,i)},e})(qo),VH=(function(r){rn(e,r);function e(n){return n===void 0&&(n={}),r.call(this,hn({event:"rotate",threshold:0,pointers:2},n))||this}var t=e.prototype;return t.getTouchAction=function(){return[va]},t.attrTest=function(i){return r.prototype.attrTest.call(this,i)&&(Math.abs(i.rotation)>this.options.threshold||this.state&Xr)},e})(qo),WH=(function(r){rn(e,r);function e(n){var i;return n===void 0&&(n={}),i=r.call(this,hn({event:"press",pointers:1,time:251,threshold:9},n))||this,i._timer=null,i._input=null,i}var t=e.prototype;return t.getTouchAction=function(){return[IH]},t.process=function(i){var a=this,o=this.options,s=i.pointers.length===o.pointers,u=i.distance<o.threshold,l=i.deltaTime>o.time;if(this._input=i,!u||!s||i.eventType&(qt|kr)&&!l)this.reset();else if(i.eventType&_r)this.reset(),this._timer=setTimeout(function(){a.state=Yn,a.tryEmit()},o.time);else if(i.eventType&qt)return Yn;return Sn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(i){this.state===Yn&&(i&&i.eventType&qt?this.manager.emit(this.options.event+"up",i):(this._input.timeStamp=sT(),this.manager.emit(this.options.event,this._input)))},e})(Ku),HH={domEvents:!1,touchAction:CH,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},yF=[[VH,{enable:!1}],[jH,{enable:!1},["rotate"]],[zH,{direction:Pn}],[fT,{direction:Pn},["swipe"]],[zS],[zS,{event:"doubletap",taps:2},["tap"]],[WH]],Jee=1,mF=2;function bF(r,e){var t=r.element;if(t.style){var n;Kn(r.options.cssProps,function(i,a){n=ed(t.style,a),e?(r.oldCssProps[n]=t.style[n],t.style[n]=i):t.style[n]=r.oldCssProps[n]||""}),e||(r.oldCssProps={})}}function ete(r,e){var t=document.createEvent("Event");t.initEvent(r,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var wF=(function(){function r(t,n){var i=this;this.options=wa({},HH,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Xee(this),this.touchAction=new DH(this,this.options.touchAction),bF(this,!0),Kn(this.options.recognizers,function(a){var o=i.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var e=r.prototype;return e.set=function(n){return wa(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?mF:Jee},e.recognize=function(n){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(n);var a,o=this.recognizers,s=i.curRecognizer;(!s||s&&s.state&Yn)&&(i.curRecognizer=null,s=null);for(var u=0;u<o.length;)a=o[u],i.stopped!==mF&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(n):a.reset(),!s&&a.state&(Xr|Ao|Ei)&&(i.curRecognizer=a,s=a),u++}},e.get=function(n){if(n instanceof Ku)return n;for(var i=this.recognizers,a=0;a<i.length;a++)if(i[a].options.event===n)return i[a];return null},e.add=function(n){if(po(n,"add",this))return this;var i=this.get(n.options.event);return i&&this.remove(i),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(po(n,"remove",this))return this;var i=this.get(n);if(n){var a=this.recognizers,o=Sa(a,i);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},e.on=function(n,i){if(n===void 0||i===void 0)return this;var a=this.handlers;return Kn(nu(n),function(o){a[o]=a[o]||[],a[o].push(i)}),this},e.off=function(n,i){if(n===void 0)return this;var a=this.handlers;return Kn(nu(n),function(o){i?a[o]&&a[o].splice(Sa(a[o],i),1):delete a[o]}),this},e.emit=function(n,i){this.options.domEvents&&ete(n,i);var a=this.handlers[n]&&this.handlers[n].slice();if(!(!a||!a.length)){i.type=n,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](i),o++}},e.destroy=function(){this.element&&bF(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},r})(),tte={touchstart:_r,touchmove:za,touchend:qt,touchcancel:kr},rte="touchstart",nte="touchstart touchmove touchend touchcancel",ite=(function(r){rn(e,r);function e(){var n,i=e.prototype;return i.evTarget=rte,i.evWin=nte,n=r.apply(this,arguments)||this,n.started=!1,n}var t=e.prototype;return t.handler=function(i){var a=tte[i.type];if(a===_r&&(this.started=!0),!!this.started){var o=ate.call(this,i,a);a&(qt|kr)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:Wu,srcEvent:i})}},e})(cs);function ate(r,e){var t=iu(r.touches),n=iu(r.changedTouches);return e&(qt|kr)&&(t=cT(t.concat(n),"identifier",!0)),[t,n]}function GH(r,e,t){var n="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var i=new Error("get-stack-trace"),a=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,n,a),r.apply(this,arguments)}}var UH=GH(function(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;)(!t||t&&r[n[i]]===void 0)&&(r[n[i]]=e[n[i]]),i++;return r},"extend","Use `assign`."),ote=GH(function(r,e){return UH(r,e,!0)},"merge","Use `assign`.");function ste(r,e,t){var n=e.prototype,i;i=r.prototype=Object.create(n),i.constructor=r,i._super=n,t&&wa(i,t)}function EF(r,e){return function(){return r.apply(e,arguments)}}var KH=(function(){var r=function(t,n){return n===void 0&&(n={}),new wF(t,hn({recognizers:yF.concat()},n))};return r.VERSION="2.0.17-rc",r.DIRECTION_ALL=RH,r.DIRECTION_DOWN=Do,r.DIRECTION_LEFT=Hu,r.DIRECTION_RIGHT=Gu,r.DIRECTION_UP=Uu,r.DIRECTION_HORIZONTAL=Pn,r.DIRECTION_VERTICAL=pa,r.DIRECTION_NONE=ac,r.DIRECTION_DOWN=Do,r.INPUT_START=_r,r.INPUT_MOVE=za,r.INPUT_END=qt,r.INPUT_CANCEL=kr,r.STATE_POSSIBLE=kl,r.STATE_BEGAN=Xr,r.STATE_CHANGED=Ao,r.STATE_ENDED=Ei,r.STATE_RECOGNIZED=Yn,r.STATE_CANCELLED=au,r.STATE_FAILED=Sn,r.Manager=wF,r.Input=cs,r.TouchAction=DH,r.TouchInput=dT,r.MouseInput=hT,r.PointerEventInput=FH,r.TouchMouseInput=NH,r.SingleTouchInput=ite,r.Recognizer=Ku,r.AttrRecognizer=qo,r.Tap=zS,r.Pan=fT,r.Swipe=zH,r.Pinch=jH,r.Rotate=VH,r.Press=WH,r.on=Ns,r.off=Ls,r.each=Kn,r.merge=ote,r.extend=UH,r.bindFn=EF,r.assign=wa,r.inherit=ste,r.bindFn=EF,r.prefixed=ed,r.toArray=iu,r.inArray=Sa,r.uniqueArray=cT,r.splitStr=nu,r.boolOrFn=td,r.hasParent=lT,r.addEventListeners=Ns,r.removeEventListeners=Ls,r.defaults=wa({},HH,{preset:yF}),r})();KH.defaults;lQ("DELETE");function rd(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return ute(e.length?e:[ic()])}function ute(r){let[e,t,n]=lte(r),i=1;const a=()=>{const o=2091639*e+i*23283064365386963e-26;return e=t,t=n,n=o-(i=o|0)};return a.uint32=()=>a()*4294967296,a.fract53=()=>a()+(a()*2097152|0)*11102230246251565e-32,a.algorithm="Alea",a.seed=r,a.version="0.9",a}function lte(){const r=cte();let e=r(" "),t=r(" "),n=r(" ");for(let i=0;i<arguments.length;i++)e-=r(i<0||arguments.length<=i?void 0:arguments[i]),e<0&&(e+=1),t-=r(i<0||arguments.length<=i?void 0:arguments[i]),t<0&&(t+=1),n-=r(i<0||arguments.length<=i?void 0:arguments[i]),n<0&&(n+=1);return[e,t,n]}function cte(){let r=4022871197;return function(e){const t=e.toString();for(let n=0;n<t.length;n++){r+=t.charCodeAt(n);let i=.02519603282416938*r;r=i>>>0,i-=r,i*=r,r=i>>>0,i-=r,r+=i*4294967296}return(r>>>0)*23283064365386963e-26}}function dte(){const r=()=>{};return{on:r,off:r,destroy:r,emit:r,get(){return{set:r}}}}const vT=typeof window<"u"?window.Hammer||KH:function(){return dte()};function _n(r){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:r,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=vT(this._dom.overlay);t.on("tap",ae(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{t.destroy()});const n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];at(n).call(n,i=>{t.on(i,a=>{a.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=i=>{hte(i.target,r)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=i=>{("key"in i?i.key==="Escape":i.keyCode===27)&&this.deactivate()}}iH(_n.prototype);_n.current=null;_n.prototype.destroy=function(){this.deactivate();for(const t of ha(r=Hn(e=this._cleanupQueue).call(e,0)).call(r)){var r,e;t()}};_n.prototype.activate=function(){_n.current&&_n.current.deactivate(),_n.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};_n.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};_n.prototype._onTapOverlay=function(r){this.activate(),r.srcEvent.stopPropagation()};function hte(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}const fte=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,vte=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pte=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,gte=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function ci(r){if(r)for(;r.hasChildNodes()===!0;){const e=r.firstChild;e&&(ci(e),r.removeChild(e))}}function wo(r){return r instanceof String||typeof r=="string"}function SF(r){return typeof r=="object"&&r!==null}function _a(r,e,t,n){let i=!1;n===!0&&(i=e[t]===null&&r[t]!==void 0),i?delete r[t]:r[t]=e[t]}function YH(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const n in r)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")_a(r,e,n,t);else{const i=r[n],a=e[n];SF(i)&&SF(a)&&YH(i,a,t)}}function ds(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Tt(t))throw new TypeError("Arrays are not supported by deepExtend");for(let i=0;i<r.length;i++){const a=r[i];if(Object.prototype.hasOwnProperty.call(t,a))if(t[a]&&t[a].constructor===Object)e[a]===void 0&&(e[a]={}),e[a].constructor===Object?ct(e[a],t[a],!1,n):_a(e,t,a,n);else{if(Tt(t[a]))throw new TypeError("Arrays are not supported by deepExtend");_a(e,t,a,n)}}return e}function uc(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Tt(t))throw new TypeError("Arrays are not supported by deepExtend");for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!wi(r).call(r,i))if(t[i]&&t[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i].constructor===Object?ct(e[i],t[i]):_a(e,t,i,n);else if(Tt(t[i])){e[i]=[];for(let a=0;a<t[i].length;a++)e[i].push(t[i][a])}else _a(e,t,i,n);return e}function ct(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)||t===!0)if(typeof e[a]=="object"&&e[a]!==null&&nB(e[a])===Object.prototype)r[a]===void 0?r[a]=ct({},e[a],t):typeof r[a]=="object"&&r[a]!==null&&nB(r[a])===Object.prototype?ct(r[a],e[a],t):_a(r,e,a,n);else if(Tt(e[a])){var i;r[a]=wn(i=e[a]).call(i)}else _a(r,e,a,n);return r}function lc(r,e){return[...r,e]}function yte(r){return wn(r).call(r)}function mte(r){return r.getBoundingClientRect().left}function bte(r){return r.getBoundingClientRect().top}function Ve(r,e){if(Tt(r)){const t=r.length;for(let n=0;n<t;n++)e(r[n],n,r)}else for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(r[t],t,r)}function pT(r){let e;switch(r.length){case 3:case 4:return e=vte.exec(r),e?{r:ln(e[1]+e[1],16),g:ln(e[2]+e[2],16),b:ln(e[3]+e[3],16)}:null;case 6:case 7:return e=fte.exec(r),e?{r:ln(e[1],16),g:ln(e[2],16),b:ln(e[3],16)}:null;default:return null}}function Ur(r,e){if(wi(r).call(r,"rgba"))return r;if(wi(r).call(r,"rgb")){const t=r.substr(tt(r).call(r,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+e+")"}else{const t=pT(r);return t==null?r:"rgba("+t.r+","+t.g+","+t.b+","+e+")"}}function XH(r,e,t){var n;return"#"+wn(n=((1<<24)+(r<<16)+(e<<8)+t).toString(16)).call(n,1)}function jS(r,e){if(wo(r)){let n=r;if(QH(n)){var t;const i=$o(t=n.substr(4).substr(0,n.length-5).split(",")).call(t,function(a){return ln(a)});n=XH(i[0],i[1],i[2])}if(ZH(n)===!0){const i=wte(n),a={h:i.h,s:i.s*.8,v:Math.min(1,i.v*1.02)},o={h:i.h,s:Math.min(1,i.s*1.25),v:i.v*.8},s=VS(o.h,o.s,o.v),u=VS(a.h,a.s,a.v);return{background:n,border:s,highlight:{background:u,border:s},hover:{background:u,border:s}}}else return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}else return{background:r.background||void 0,border:r.border||void 0,highlight:wo(r.highlight)?{border:r.highlight,background:r.highlight}:{background:r.highlight&&r.highlight.background||void 0,border:r.highlight&&r.highlight.border||void 0},hover:wo(r.hover)?{border:r.hover,background:r.hover}:{border:r.hover&&r.hover.border||void 0,background:r.hover&&r.hover.background||void 0}}}function Ds(r,e,t){r=r/255,e=e/255,t=t/255;const n=Math.min(r,Math.min(e,t)),i=Math.max(r,Math.max(e,t));if(n===i)return{h:0,s:0,v:n};const a=r===n?e-t:t===n?r-e:t-r,s=60*((r===n?3:t===n?1:5)-a/(i-n))/360,u=(i-n)/i;return{h:s,s:u,v:i}}function Ml(r,e,t){let n,i,a;const o=Math.floor(r*6),s=r*6-o,u=t*(1-e),l=t*(1-s*e),c=t*(1-(1-s)*e);switch(o%6){case 0:n=t,i=c,a=u;break;case 1:n=l,i=t,a=u;break;case 2:n=u,i=t,a=c;break;case 3:n=u,i=l,a=t;break;case 4:n=c,i=u,a=t;break;case 5:n=t,i=u,a=l;break}return{r:Math.floor(n*255),g:Math.floor(i*255),b:Math.floor(a*255)}}function VS(r,e,t){const n=Ml(r,e,t);return XH(n.r,n.g,n.b)}function wte(r){const e=pT(r);if(!e)throw new TypeError("'".concat(r,"' is not a valid color."));return Ds(e.r,e.g,e.b)}function ZH(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)}function QH(r){return pte.test(r)}function Ete(r){return gte.test(r)}function Si(r){if(r===null||typeof r!="object")return null;if(r instanceof Element)return r;const e=fa(r);for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&typeof r[t]=="object"&&(e[t]=Si(r[t]));return e}function Hr(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=function(f){return f!=null},a=function(f){return f!==null&&typeof f=="object"},o=function(f){for(const v in f)if(Object.prototype.hasOwnProperty.call(f,v))return!1;return!0};if(!a(r))throw new Error("Parameter mergeTarget must be an object");if(!a(e))throw new Error("Parameter options must be an object");if(!i(t))throw new Error("Parameter option must have a value");if(!a(n))throw new Error("Parameter globalOptions must be an object");const s=function(f,v,p){a(f[p])||(f[p]={});const y=v[p],g=f[p];for(const m in y)Object.prototype.hasOwnProperty.call(y,m)&&(g[m]=y[m])},u=e[t],c=a(n)&&!o(n)?n[t]:void 0,d=c?c.enabled:void 0;if(u===void 0)return;if(typeof u=="boolean"){a(r[t])||(r[t]={}),r[t].enabled=u;return}if(u===null&&!a(r[t]))if(i(c))r[t]=fa(c);else return;if(!a(u))return;let h=!0;u.enabled!==void 0?h=u.enabled:d!==void 0&&(h=c.enabled),s(r,e,t),r[t].enabled=h}const Ste={linear(r){return r},easeInQuad(r){return r*r},easeOutQuad(r){return r*(2-r)},easeInOutQuad(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic(r){return r*r*r},easeOutCubic(r){return--r*r*r+1},easeInOutCubic(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart(r){return r*r*r*r},easeOutQuart(r){return 1- --r*r*r*r},easeInOutQuart(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint(r){return r*r*r*r*r},easeOutQuint(r){return 1+--r*r*r*r*r},easeInOutQuint(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function di(r,e){let t;Tt(e)||(e=[e]);for(const n of r)if(n){t=n[e[0]];for(let i=1;i<e.length;i++)t&&(t=t[e[i]]);if(typeof t<"u")break}return t}const _te={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let Tte=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return _te[e]}setColor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let n;const i=this._isColorString(e);if(i!==void 0&&(e=i),wo(e)===!0){if(QH(e)===!0){const a=e.substr(4).substr(0,e.length-5).split(",");n={r:a[0],g:a[1],b:a[2],a:1}}else if(Ete(e)===!0){const a=e.substr(5).substr(0,e.length-6).split(",");n={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(ZH(e)===!0){const a=pT(e);n={r:a.r,g:a.g,b:a.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const a=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+ju(e));this._setColor(n,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=At({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Gn(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=At({},e)),this.color=e;const n=Ds(e.r,e.g,e.b),i=2*Math.PI,a=this.r*n.s,o=this.centerCoordinates.x+a*Math.sin(i*n.h),s=this.centerCoordinates.y+a*Math.cos(i*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=s-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const t=Ds(this.color.r,this.color.g,this.color.b);t.v=e/100;const n=Ml(t.h,t.s,t.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const t=Ds(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const i=this.colorPickerCanvas.clientWidth,a=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,a),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-t.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),Vu(n).call(n),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,t,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const o=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const a=this;this.opacityRange.onchange=function(){a._setOpacity(this.value)},this.opacityRange.oninput=function(){a._setOpacity(this.value)},this.brightnessRange.onchange=function(){a._setBrightness(this.value)},this.brightnessRange.oninput=function(){a._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=ae(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=ae(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=ae(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=ae(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new vT(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const t=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,n);let i,a,o,s;this.centerCoordinates={x:t*.5,y:n*.5},this.r=.49*t;const u=2*Math.PI/360,l=1/360,c=1/this.r;let d;for(o=0;o<360;o++)for(s=0;s<this.r;s++)i=this.centerCoordinates.x+s*Math.sin(u*o),a=this.centerCoordinates.y+s*Math.cos(u*o),d=Ml(o*l,s*c,1),e.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",e.fillRect(i-.5,a-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,n)}this.generated=!0}_moveSelector(e){const t=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-t.left,i=e.center.y-t.top,a=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,s=n-o,u=i-a,l=Math.atan2(s,u),c=.98*Math.min(Math.sqrt(s*s+u*u),o),d=Math.cos(l)*c+a,h=Math.sin(l)*c+o;this.colorPickerSelector.style.top=d-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=h-.5*this.colorPickerSelector.clientWidth+"px";let f=l/(2*Math.PI);f=f<0?f+1:f;const v=c/this.r,p=Ds(this.color.r,this.color.g,this.color.b);p.h=f,p.s=v;const y=Ml(p.h,p.s,p.v);y.a=this.color.a,this.color=y,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function WS(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const n=document.createElement(e[0]);return n.appendChild(WS(...wn(e).call(e,1))),n}}let xte=class{constructor(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=a,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},At(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Tte(i),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(Tt(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),Dr(e)!==void 0&&(this.options.filter=Dr(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);Dr(this.options)===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=Dr(this.options);let t=0,n=!1;for(const i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(i,[]),n=n||this._handleObject(this.configureOptions[i],[i],!0)):(e===!0||tt(e).call(e,i)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let n=0;n<e.length;n++)if(t[e[n]]!==void 0)t=t[e[n]];else{t=void 0;break}return t}_makeItem(e){if(this.allowCreation===!0){const a=document.createElement("div");a.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return at(n).call(n,o=>{a.appendChild(o)}),this.domElements.push(a),this.domElements.length}return 0}_makeHeader(e){const t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}_makeLabel(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+t.length,n===!0){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(WS("i","b",e))}else i.innerText=e+":";return i}_makeDropdown(e,t,n){const i=document.createElement("select");i.className="vis-configuration vis-config-select";let a=0;t!==void 0&&tt(e).call(e,t)!==-1&&(a=tt(e).call(e,t));for(let u=0;u<e.length;u++){const l=document.createElement("option");l.value=e[u],u===a&&(l.selected="selected"),l.innerText=e[u],i.appendChild(l)}const o=this;i.onchange=function(){o._update(this.value,n)};const s=this._makeLabel(n[n.length-1],n);this._makeItem(n,s,i)}_makeRange(e,t,n){const i=e[0],a=e[1],o=e[2],s=e[3],u=document.createElement("input");u.className="vis-configuration vis-config-range";try{u.type="range",u.min=a,u.max=o}catch{}u.step=s;let l="",c=0;t!==void 0?(t<0&&t*1.2<a?(u.min=Math.ceil(t*1.2),c=u.min,l="range increased"):t/1.2<a&&(u.min=Math.ceil(t/1.2),c=u.min,l="range increased"),t*1.2>o&&o!==1&&(u.max=Math.ceil(t*1.2),c=u.max,l="range increased"),u.value=t):u.value=i;const d=document.createElement("input");d.className="vis-configuration vis-config-rangeinput",d.value=u.value;const h=this;u.onchange=function(){d.value=this.value,h._update(Number(this.value),n)},u.oninput=function(){d.value=this.value};const f=this._makeLabel(n[n.length-1],n),v=this._makeItem(n,f,u,d);l!==""&&this.popupHistory[v]!==c&&(this.popupHistory[v]=c,this._setupPopup(l,v))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Gn(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Gn(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,n){const i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=e,t!==void 0&&(i.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:n,value:t}):this.changedOptions.push({path:n,value:t})));const a=this;i.onchange=function(){a._update(this.checked,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeTextInput(e,t,n){const i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=t,t!==e&&this.changedOptions.push({path:n,value:t});const a=this;i.onchange=function(){a._update(this.value,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}_makeColorField(e,t,n){const i=e[1],a=document.createElement("div");t=t===void 0?i:t,t!=="none"?(a.className="vis-configuration vis-config-colorBlock",a.style.backgroundColor=t):a.className="vis-configuration vis-config-colorBlock none",t=t===void 0?i:t,a.onclick=()=>{this._showColorPicker(t,a,n)};const o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,a)}_showColorPicker(e,t,n){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(i=>{const a="rgba("+i.r+","+i.g+","+i.b+","+i.a+")";t.style.backgroundColor=a,this._update(a,n)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,n)}})}_handleObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=!1;const a=Dr(this.options);let o=!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){i=!0;const u=e[s],l=lc(t,s);if(typeof a=="function"&&(i=a(s,t),i===!1&&!Tt(u)&&typeof u!="string"&&typeof u!="boolean"&&u instanceof Object&&(this.allowCreation=!1,i=this._handleObject(u,l,!0),this.allowCreation=n===!1)),i!==!1){o=!0;const c=this._getValue(l);if(Tt(u))this._handleArray(u,c,l);else if(typeof u=="string")this._makeTextInput(u,c,l);else if(typeof u=="boolean")this._makeCheckbox(u,c,l);else if(u instanceof Object){if(!this.hideOption(t,s,this.moduleOptions))if(u.enabled!==void 0){const d=lc(l,"enabled"),h=this._getValue(d);if(h===!0){const f=this._makeLabel(s,l,!0);this._makeItem(l,f),o=this._handleObject(u,l)||o}else this._makeCheckbox(u,h,l)}else{const d=this._makeLabel(s,l,!0);this._makeItem(l,d),o=this._handleObject(u,l)||o}}else console.error("dont know how to handle",u,s,l)}}return o}_handleArray(e,t,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,n),e[1]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,n),e[0]!==t&&this.changedOptions.push({path:n,value:Number(t)}))}_update(e,t){const n=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let a=0;a<t.length;a++)t[a]!=="global"&&(i[t[a]]===void 0&&(i[t[a]]={}),a!==t.length-1?i=i[t[a]]:i[t[a]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(WS("pre","const options = "+ju(e,null,2)))}getOptions(){const e={};for(let t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}},Pte=class{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=ln(e),this.y=ln(t)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const t=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,a=this.frame.parentNode.clientWidth;let o=0,s=0;if(this.overflowMethod=="flip"){let u=!1,l=!0;this.y-t<this.padding&&(l=!1),this.x+n>a-this.padding&&(u=!0),u?o=this.x-n:o=this.x,l?s=this.y-t:s=this.y}else s=this.y-t,s+t+this.padding>i&&(s=i-t-this.padding),s<this.padding&&(s=this.padding),o=this.x,o+n+this.padding>a&&(o=a-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},_s=!1,_F;const HS="background: #FFeeee; color: #dd0000";let Cte=class St{static validate(e,t,n){_s=!1,_F=t;let i=t;return n!==void 0&&(i=t[n]),St.parse(e,i,[]),_s}static parse(e,t,n){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&St.check(i,e,t,n)}static check(e,t,n,i){if(n[e]===void 0&&n.__any__===void 0){St.getSuggestion(e,n,i);return}let a=e,o=!0;n[e]===void 0&&n.__any__!==void 0&&(a="__any__",o=St.getType(t[e])==="object");let s=n[a];o&&s.__type__!==void 0&&(s=s.__type__),St.checkFields(e,t,n,a,s,i)}static checkFields(e,t,n,i,a,o){const s=function(c){console.error("%c"+c+St.printLocation(o,e),HS)},u=St.getType(t[e]),l=a[u];l!==void 0?St.getType(l)==="array"&&tt(l).call(l,t[e])===-1?(s('Invalid option detected in "'+e+'". Allowed values are:'+St.print(l)+' not "'+t[e]+'". '),_s=!0):u==="object"&&i!=="__any__"&&(o=lc(o,e),St.parse(t[e],n[i],o)):a.any===void 0&&(s('Invalid type received for "'+e+'". Expected: '+St.print(_t(a))+". Received ["+u+'] "'+t[e]+'"'),_s=!0)}static getType(e){const t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Tt(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,n){const i=St.findInOptions(e,t,n,!1),a=St.findInOptions(e,_F,[],!0),o=8,s=4;let u;i.indexMatch!==void 0?u=" in "+St.printLocation(i.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+i.indexMatch+`"?

`:a.distance<=s&&i.distance>a.distance?u=" in "+St.printLocation(i.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+St.printLocation(a.path,a.closestMatch,""):i.distance<=o?u='. Did you mean "'+i.closestMatch+'"?'+St.printLocation(i.path,e):u=". Did you mean one of these: "+St.print(_t(t))+St.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+u,HS),_s=!0}static findInOptions(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=1e9,o="",s=[];const u=e.toLowerCase();let l;for(const d in t){let h;if(t[d].__type__!==void 0&&i===!0){const f=St.findInOptions(e,t[d],lc(n,d));a>f.distance&&(o=f.closestMatch,s=f.path,a=f.distance,l=f.indexMatch)}else{var c;tt(c=d.toLowerCase()).call(c,u)!==-1&&(l=d),h=St.levenshteinDistance(e,d),a>h&&(o=d,s=yte(n),a=h)}}return{closestMatch:o,path:s,distance:a,indexMatch:l}}static printLocation(e,t){let i=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let a=0;a<e.length;a++){for(let o=0;o<a+1;o++)i+="  ";i+=e[a]+`: {
`}for(let a=0;a<e.length+1;a++)i+="  ";i+=t+`
`;for(let a=0;a<e.length+1;a++){for(let o=0;o<e.length-a;o++)i+="  ";i+=`}
`}return i+`

`}static print(e){return ju(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;const n=[];let i;for(i=0;i<=t.length;i++)n[i]=[i];let a;for(a=0;a<=e.length;a++)n[0][a]=a;for(i=1;i<=t.length;i++)for(a=1;a<=e.length;a++)t.charAt(i-1)==e.charAt(a-1)?n[i][a]=n[i-1][a-1]:n[i][a]=Math.min(n[i-1][a-1]+1,Math.min(n[i][a-1]+1,n[i-1][a]+1));return n[t.length][e.length]}};const Ite=_n,Ote=xte,Eo=vT,Rte=Pte,JH=HS,$te=Cte;function Dte(r){return vi=r,Mte()}var e4={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},gT=fa(e4);gT.color="color.color";gT.style="dashes";var mr={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},TF={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},vi="",ko=0,Be="",$e="",Or=mr.NULL;function Ate(){ko=0,Be=vi.charAt(0)}function Ut(){ko++,Be=vi.charAt(ko)}function Qa(){return vi.charAt(ko+1)}function xF(r){var e=r.charCodeAt(0);return e<47?e===35||e===46:e<59?e>47:e<91?e>64:e<96?e===95:e<123?e>96:!1}function Pi(r,e){if(r||(r={}),e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function qte(r,e,t){for(var n=e.split("."),i=r;n.length;){var a=n.shift();n.length?(i[a]||(i[a]={}),i=i[a]):i[a]=t}}function t4(r,e){for(var t,n,i=null,a=[r],o=r;o.parent;)a.push(o.parent),o=o.parent;if(o.nodes){for(t=0,n=o.nodes.length;t<n;t++)if(e.id===o.nodes[t].id){i=o.nodes[t];break}}for(i||(i={id:e.id},r.node&&(i.attr=Pi(i.attr,r.node))),t=a.length-1;t>=0;t--){var s,u=a[t];u.nodes||(u.nodes=[]),tt(s=u.nodes).call(s,i)===-1&&u.nodes.push(i)}e.attr&&(i.attr=Pi(i.attr,e.attr))}function kte(r,e){if(r.edges||(r.edges=[]),r.edges.push(e),r.edge){var t=Pi({},r.edge);e.attr=Pi(t,e.attr)}}function r4(r,e,t,n,i){var a={from:e,to:t,type:n};return r.edge&&(a.attr=Pi({},r.edge)),a.attr=Pi(a.attr||{},i),i!=null&&i.hasOwnProperty("arrows")&&i.arrows!=null&&(a.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),a}function dt(){for(Or=mr.NULL,$e="";Be===" "||Be==="	"||Be===`
`||Be==="\r";)Ut();do{var r=!1;if(Be==="#"){for(var e=ko-1;vi.charAt(e)===" "||vi.charAt(e)==="	";)e--;if(vi.charAt(e)===`
`||vi.charAt(e)===""){for(;Be!=""&&Be!=`
`;)Ut();r=!0}}if(Be==="/"&&Qa()==="/"){for(;Be!=""&&Be!=`
`;)Ut();r=!0}if(Be==="/"&&Qa()==="*"){for(;Be!="";)if(Be==="*"&&Qa()==="/"){Ut(),Ut();break}else Ut();r=!0}for(;Be===" "||Be==="	"||Be===`
`||Be==="\r";)Ut()}while(r);if(Be===""){Or=mr.DELIMITER;return}var t=Be+Qa();if(TF[t]){Or=mr.DELIMITER,$e=t,Ut(),Ut();return}if(TF[Be]){Or=mr.DELIMITER,$e=Be,Ut();return}if(xF(Be)||Be==="-"){for($e+=Be,Ut();xF(Be);)$e+=Be,Ut();$e==="false"?$e=!1:$e==="true"?$e=!0:isNaN(Number($e))||($e=Number($e)),Or=mr.IDENTIFIER;return}if(Be==='"'){for(Ut();Be!=""&&(Be!='"'||Be==='"'&&Qa()==='"');)Be==='"'?($e+=Be,Ut()):Be==="\\"&&Qa()==="n"?($e+=`
`,Ut()):$e+=Be,Ut();if(Be!='"')throw br('End of string " expected');Ut(),Or=mr.IDENTIFIER;return}for(Or=mr.UNKNOWN;Be!="";)$e+=Be,Ut();throw new SyntaxError('Syntax error in part "'+o4($e,30)+'"')}function Mte(){var r={};if(Ate(),dt(),$e==="strict"&&(r.strict=!0,dt()),($e==="graph"||$e==="digraph")&&(r.type=$e,dt()),Or===mr.IDENTIFIER&&(r.id=$e,dt()),$e!="{")throw br("Angle bracket { expected");if(dt(),n4(r),$e!="}")throw br("Angle bracket } expected");if(dt(),$e!=="")throw br("End of file expected");return dt(),delete r.node,delete r.edge,delete r.graph,r}function n4(r){for(;$e!==""&&$e!="}";)Bte(r),$e===";"&&dt()}function Bte(r){var e=i4(r);if(e){a4(r,e);return}var t=Fte(r);if(!t){if(Or!=mr.IDENTIFIER)throw br("Identifier expected");var n=$e;if(dt(),$e==="="){if(dt(),Or!=mr.IDENTIFIER)throw br("Identifier expected");r[n]=$e,dt()}else Nte(r,n)}}function i4(r){var e=null;if($e==="subgraph"&&(e={},e.type="subgraph",dt(),Or===mr.IDENTIFIER&&(e.id=$e,dt())),$e==="{"){if(dt(),e||(e={}),e.parent=r,e.node=r.node,e.edge=r.edge,e.graph=r.graph,n4(e),$e!="}")throw br("Angle bracket } expected");dt(),delete e.node,delete e.edge,delete e.graph,delete e.parent,r.subgraphs||(r.subgraphs=[]),r.subgraphs.push(e)}return e}function Fte(r){return $e==="node"?(dt(),r.node=zs(),"node"):$e==="edge"?(dt(),r.edge=zs(),"edge"):$e==="graph"?(dt(),r.graph=zs(),"graph"):null}function Nte(r,e){var t={id:e},n=zs();n&&(t.attr=n),t4(r,t),a4(r,e)}function a4(r,e){for(;$e==="->"||$e==="--";){var t,n=$e;dt();var i=i4(r);if(i)t=i;else{if(Or!=mr.IDENTIFIER)throw br("Identifier or subgraph expected");t=$e,t4(r,{id:t}),dt()}var a=zs(),o=r4(r,e,t,n,a);kte(r,o),e=t}}function zs(){for(var r,e=null,t={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},i=new Array,a=new Array;$e==="[";){for(dt(),e={};$e!==""&&$e!="]";){if(Or!=mr.IDENTIFIER)throw br("Attribute name expected");var o=$e;if(dt(),$e!="=")throw br("Equal sign = expected");if(dt(),Or!=mr.IDENTIFIER)throw br("Attribute value expected");var s=$e;o==="style"&&(s=t[s]);var u;o==="arrowhead"&&(u=n[s],o="arrows",s={to:{enabled:!0,type:u}}),o==="arrowtail"&&(u=n[s],o="arrows",s={from:{enabled:!0,type:u}}),i.push({attr:e,name:o,value:s}),a.push(o),dt(),$e==","&&dt()}if($e!="]")throw br("Bracket ] expected");dt()}if(wi(a).call(a,"dir")){var l={};for(l.arrows={},r=0;r<i.length;r++)if(i[r].name==="arrows")if(i[r].value.to!=null)l.arrows.to=r;else if(i[r].value.from!=null)l.arrows.from=r;else throw br("Invalid value of arrows");else i[r].name==="dir"&&(l.dir=r);var c=i[l.dir].value;if(!wi(a).call(a,"arrows"))if(c==="both")i.push({attr:i[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=i.length-1,i.push({attr:i[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=i.length-1;else if(c==="forward")i.push({attr:i[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=i.length-1;else if(c==="back")i.push({attr:i[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=i.length-1;else if(c==="none")i.push({attr:i[l.dir].attr,name:"arrows",value:""}),l.arrows.to=i.length-1;else throw br('Invalid dir type "'+c+'"');var d,h;if(c==="both")l.arrows.to&&l.arrows.from?(h=i[l.arrows.to].value.to.type,d=i[l.arrows.from].value.from.type,i[l.arrows.to]={attr:i[l.arrows.to].attr,name:i[l.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}},Hn(i).call(i,l.arrows.from,1)):l.arrows.to?(h=i[l.arrows.to].value.to.type,d="arrow",i[l.arrows.to]={attr:i[l.arrows.to].attr,name:i[l.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}}):l.arrows.from&&(h="arrow",d=i[l.arrows.from].value.from.type,i[l.arrows.from]={attr:i[l.arrows.from].attr,name:i[l.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}});else if(c==="back")l.arrows.to&&l.arrows.from?(h="",d=i[l.arrows.from].value.from.type,i[l.arrows.from]={attr:i[l.arrows.from].attr,name:i[l.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}}):l.arrows.to?(h="",d="arrow",l.arrows.from=l.arrows.to,i[l.arrows.from]={attr:i[l.arrows.from].attr,name:i[l.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}}):l.arrows.from&&(h="",d=i[l.arrows.from].value.from.type,i[l.arrows.to]={attr:i[l.arrows.from].attr,name:i[l.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}}),i[l.arrows.from]={attr:i[l.arrows.from].attr,name:i[l.arrows.from].name,value:{from:{enabled:!0,type:i[l.arrows.from].value.from.type}}};else if(c==="none"){var f;l.arrows.to?f=l.arrows.to:f=l.arrows.from,i[f]={attr:i[f].attr,name:i[f].name,value:""}}else if(c==="forward")l.arrows.to&&l.arrows.from?(h=i[l.arrows.to].value.to.type,d="",i[l.arrows.to]={attr:i[l.arrows.to].attr,name:i[l.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}}):l.arrows.to?(h=i[l.arrows.to].value.to.type,d="",i[l.arrows.to]={attr:i[l.arrows.to].attr,name:i[l.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}}):l.arrows.from&&(h="arrow",d="",l.arrows.to=l.arrows.from,i[l.arrows.to]={attr:i[l.arrows.to].attr,name:i[l.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:d}}}),i[l.arrows.to]={attr:i[l.arrows.to].attr,name:i[l.arrows.to].name,value:{to:{enabled:!0,type:i[l.arrows.to].value.to.type}}};else throw br('Invalid dir type "'+c+'"');Hn(i).call(i,l.dir,1)}var v;if(wi(a).call(a,"penwidth")){var p=[];for(v=i.length,r=0;r<v;r++)i[r].name!=="width"&&(i[r].name==="penwidth"&&(i[r].name="width"),p.push(i[r]));i=p}for(v=i.length,r=0;r<v;r++)qte(i[r].attr,i[r].name,i[r].value);return e}function br(r){return new SyntaxError(r+', got "'+o4($e,30)+'" (char '+ko+")")}function o4(r,e){return r.length<=e?r:r.substr(0,27)+"..."}function Lte(r,e,t){Tt(r)?at(r).call(r,function(n){Tt(e)?at(e).call(e,function(i){t(n,i)}):t(n,e)}):Tt(e)?at(e).call(e,function(n){t(r,n)}):t(r,e)}function q0(r,e,t){for(var n=e.split("."),i=n.pop(),a=r,o=0;o<n.length;o++){var s=n[o];s in a||(a[s]={}),a=a[s]}return a[i]=t,r}function PF(r,e){var t={};for(var n in r)if(r.hasOwnProperty(n)){var i=e[n];Tt(i)?at(i).call(i,function(a){q0(t,a,r[n])}):typeof i=="string"?q0(t,i,r[n]):q0(t,n,r[n])}return t}function zte(r){var e=Dte(r),t={nodes:[],edges:[],options:{}};if(e.nodes){var n;at(n=e.nodes).call(n,function(o){var s={id:o.id,label:String(o.label||o.id)};Pi(s,PF(o.attr,e4)),s.image&&(s.shape="image"),t.nodes.push(s)})}if(e.edges){var i,a=function(o){var s={from:o.from,to:o.to};return Pi(s,PF(o.attr,gT)),s.arrows==null&&o.type==="->"&&(s.arrows="to"),s};at(i=e.edges).call(i,function(o){var s,u;if(o.from instanceof Object?s=o.from.nodes:s={id:o.from},o.to instanceof Object?u=o.to.nodes:u={id:o.to},o.from instanceof Object&&o.from.edges){var l;at(l=o.from.edges).call(l,function(d){var h=a(d);t.edges.push(h)})}if(Lte(s,u,function(d,h){var f=r4(t,d.id,h.id,o.type,o.attr),v=a(f);t.edges.push(v)}),o.to instanceof Object&&o.to.edges){var c;at(c=o.to.edges).call(c,function(d){var h=a(d);t.edges.push(h)})}})}return e.attr&&(t.options=e.attr),t}function jte(r,e){var t;const n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!=null&&(e.fixed!=null&&(n.nodes.fixed=e.fixed),e.parseColor!=null&&(n.nodes.parseColor=e.parseColor),e.inheritColor!=null&&(n.edges.inheritColor=e.inheritColor));const i=r.edges,a=$o(i).call(i,s=>{const u={from:s.source,id:s.id,to:s.target};return s.attributes!=null&&(u.attributes=s.attributes),s.label!=null&&(u.label=s.label),s.attributes!=null&&s.attributes.title!=null&&(u.title=s.attributes.title),s.type==="Directed"&&(u.arrows="to"),s.color&&n.edges.inheritColor===!1&&(u.color=s.color),u});return{nodes:$o(t=r.nodes).call(t,s=>{const u={id:s.id,fixed:n.nodes.fixed&&s.x!=null&&s.y!=null};return s.attributes!=null&&(u.attributes=s.attributes),s.label!=null&&(u.label=s.label),s.size!=null&&(u.size=s.size),s.attributes!=null&&s.attributes.title!=null&&(u.title=s.attributes.title),s.title!=null&&(u.title=s.title),s.x!=null&&(u.x=s.x),s.y!=null&&(u.y=s.y),s.color!=null&&(n.nodes.parseColor===!0?u.color=s.color:u.color={background:s.color,border:s.color,highlight:{background:s.color,border:s.color},hover:{background:s.color,border:s.color}}),u}),edges:a}}const Vte={addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},Wte={addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufÃ¼gen",addNode:"Knoten hinzufÃ¼gen",back:"ZurÃ¼ck",close:"SchlieÃen",createEdgeError:"Es ist nicht mÃ¶glich, Kanten mit Clustern zu verbinden.",del:"LÃ¶sche Auswahl",deleteClusterError:"Cluster kÃ¶nnen nicht gelÃ¶scht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster kÃ¶nnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},Hte={addDescription:"Haga clic en un lugar vacÃ­o para colocar un nuevo nodo.",addEdge:"AÃ±adir arista",addNode:"AÃ±adir nodo",back:"AtrÃ¡s",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selecciÃ³n",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},Gte={addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},Ute={addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},Kte={addDescription:"Clique em um espaÃ§o em branco para adicionar um novo nÃ³",addEdge:"Adicionar aresta",addNode:"Adicionar nÃ³",back:"Voltar",close:"Fechar",createEdgeError:"NÃ£o foi possÃ­vel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters nÃ£o puderam ser removidos.",edgeDescription:"Clique em um nÃ³ e arraste a aresta atÃ© outro nÃ³ para conectÃ¡-los",edit:"Editar",editClusterError:"Clusters nÃ£o puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nÃ³ para conectÃ¡-los",editNode:"Editar nÃ³"},Yte={addDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð² ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ðµ Ð¼ÐµÑÑÐ¾, ÑÑÐ¾Ð±Ñ Ð´Ð¾Ð±Ð°Ð²Ð¸ÑÑ Ð½Ð¾Ð²ÑÐ¹ ÑÐ·ÐµÐ».",addEdge:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐµÐ±ÑÐ¾",addNode:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐ·ÐµÐ»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÑÐ²Ð°ÑÑ",createEdgeError:"ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ ÑÐµÐ±ÑÐ° Ð² ÐºÐ»Ð°ÑÑÐµÑ.",del:"Ð£Ð´Ð°Ð»Ð¸ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½Ð¾Ðµ",deleteClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½Ðµ Ð¼Ð¾Ð³ÑÑ Ð±ÑÑÑ ÑÐ´Ð°Ð»ÐµÐ½Ñ",edgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÑÐ·ÐµÐ» Ð¸ Ð¿ÑÐ¾ÑÑÐ½Ð¸ÑÐµ ÑÐµÐ±ÑÐ¾ Ðº Ð´ÑÑÐ³Ð¾Ð¼Ñ ÑÐ·Ð»Ñ, ÑÑÐ¾Ð±Ñ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ Ð¸Ñ.",edit:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ",editClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ.",editEdge:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐµÐ±ÑÐ¾",editEdgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½ÑÐµ ÑÐ¾ÑÐºÐ¸ Ð¸ Ð¿ÐµÑÐµÑÐ°ÑÐ¸ÑÐµ Ð¸Ñ Ð² ÑÐ·ÐµÐ», ÑÑÐ¾Ð±Ñ Ð¿Ð¾Ð´ÐºÐ»ÑÑÐ¸ÑÑÑÑ Ðº Ð½ÐµÐ¼Ñ.",editNode:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐ·ÐµÐ»"},Xte={addDescription:"åå»ç©ºç½å¤æ¾ç½®æ°èç¹ã",addEdge:"æ·»å è¿æ¥çº¿",addNode:"æ·»å èç¹",back:"è¿å",close:"éé",createEdgeError:"æ æ³å°è¿æ¥çº¿è¿æ¥å°ç¾¤éã",del:"å é¤éå®",deleteClusterError:"æ æ³å é¤ç¾¤éã",edgeDescription:"åå»æä¸ªèç¹å¹¶å°è¯¥è¿æ¥çº¿æå¨å°å¦ä¸ä¸ªèç¹ä»¥è¿æ¥å®ä»¬ã",edit:"ç¼è¾",editClusterError:"æ æ³ç¼è¾ç¾¤éã",editEdge:"ç¼è¾è¿æ¥çº¿",editEdgeDescription:"åå»æ§å¶èç¹å¹¶å°å®ä»¬æå°èç¹ä¸è¿æ¥ã",editNode:"ç¼è¾èç¹"},Zte={addDescription:"KÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ»ÑÐ½Ðµ Ð¼ÑÑÑÐµ, ÑÐ¾Ð± Ð´Ð¾Ð´Ð°ÑÐ¸ Ð½Ð¾Ð²Ð¸Ð¹ Ð²ÑÐ·Ð¾Ð».",addEdge:"ÐÐ¾Ð´Ð°ÑÐ¸ ÐºÑÐ°Ð¹",addNode:"ÐÐ¾Ð´Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÐ¸ÑÐ¸",createEdgeError:"ÐÐµ Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾ Ð¾Ð±'ÑÐ´Ð½Ð°ÑÐ¸ ÐºÑÐ°Ñ Ð² Ð³ÑÑÐ¿Ñ.",del:"ÐÐ¸Ð´Ð°Ð»Ð¸ÑÐ¸ Ð¾Ð±ÑÐ°Ð½Ðµ",deleteClusterError:"ÐÑÑÐ¿Ð¸ Ð½Ðµ Ð¼Ð¾Ð¶ÑÑÑ Ð±ÑÑÐ¸ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ñ.",edgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ·Ð¾Ð» Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÐºÑÐ°Ð¹ Ð´Ð¾ ÑÐ½ÑÐ¾Ð³Ð¾ Ð²ÑÐ·Ð»Ð°, ÑÐ¾Ð± ÑÑ Ð·'ÑÐ´Ð½Ð°ÑÐ¸.",edit:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸",editClusterError:"ÐÑÑÐ¿Ð¸ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°Ð³ÑÐ²Ð°Ð½Ð½Ñ.",editEdge:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ ÐºÑÐ°Ð¹",editEdgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½Ñ ÑÐ¾ÑÐºÐ¸ Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÑÑ Ñ Ð²ÑÐ·Ð¾Ð», ÑÐ¾Ð± Ð¿ÑÐ´ÐºÐ»ÑÑÐ¸ÑÐ¸ÑÑ Ð´Ð¾ Ð½ÑÐ¾Ð³Ð¾.",editNode:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»"},Qte={addDescription:"Cliquez dans un endroit vide pour placer un nÅud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nÅud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crÃ©er un lien vers un cluster.",del:"Effacer la sÃ©lection",deleteClusterError:"Les clusters ne peuvent pas Ãªtre effacÃ©s.",edgeDescription:"Cliquez sur un nÅud et glissez le lien vers un autre nÅud pour les connecter.",edit:"Ãditer",editClusterError:"Les clusters ne peuvent pas Ãªtre Ã©ditÃ©s.",editEdge:"Ãditer le lien",editEdgeDescription:"Cliquez sur les points de contrÃ´le et glissez-les pour connecter un nÅud.",editNode:"Ãditer le nÅud"},Jte={addDescription:"KluknutÃ­m do prÃ¡zdnÃ©ho prostoru mÅ¯Å¾ete pÅidat novÃ½ vrchol.",addEdge:"PÅidat hranu",addNode:"PÅidat vrchol",back:"ZpÄt",close:"ZavÅÃ­t",createEdgeError:"Nelze pÅipojit hranu ke shluku.",del:"Smazat vÃ½bÄr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"PÅetaÅ¾enÃ­m z jednoho vrcholu do druhÃ©ho mÅ¯Å¾ete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"PÅetaÅ¾enÃ­m kontrolnÃ­ho vrcholu hrany ji mÅ¯Å¾ete pÅipojit k jinÃ©mu vrcholu.",editNode:"Upravit vrchol"};var ere=Object.freeze({__proto__:null,cn:Xte,cs:Jte,de:Wte,en:Vte,es:Hte,fr:Qte,it:Gte,nl:Ute,pt:Kte,ru:Yte,uk:Zte});function tre(r,e){try{const[n,i]=e.split(/[-_ /]/,2),a=n!=null?n.toLowerCase():null,o=i!=null?i.toUpperCase():null;if(a&&o){const s=a+"-"+o;if(Object.prototype.hasOwnProperty.call(r,s))return s;var t;console.warn(xJ(t="Unknown variant ".concat(o," of language ")).call(t,a,"."))}if(a){const s=a;if(Object.prototype.hasOwnProperty.call(r,s))return s;console.warn("Unknown language ".concat(a))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(n){return console.error(n),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}class rre{constructor(){this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}init(){if(this.initialized())return;this.src=this.image.src;const e=this.image.width,t=this.image.height;this.width=e,this.height=t;const n=Math.floor(t/2),i=Math.floor(t/4),a=Math.floor(t/8),o=Math.floor(t/16),s=Math.floor(e/2),u=Math.floor(e/4),l=Math.floor(e/8),c=Math.floor(e/16);this.canvas.width=3*u,this.canvas.height=n,this.coordinates=[[0,0,s,n],[s,0,u,i],[s,i,l,a],[5*l,i,c,o]],this._fillMipMap()}initialized(){return this.coordinates!==void 0}_fillMipMap(){const e=this.canvas.getContext("2d"),t=this.coordinates[0];e.drawImage(this.image,t[0],t[1],t[2],t[3]);for(let n=1;n<this.NUM_ITERATIONS;n++){const i=this.coordinates[n-1],a=this.coordinates[n];e.drawImage(this.canvas,i[0],i[1],i[2],i[3],a[0],a[1],a[2],a[3])}}drawImageAtPosition(e,t,n,i,a,o){if(this.initialized())if(t>2){t*=.5;let s=0;for(;t>2&&s<this.NUM_ITERATIONS;)t*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);const u=this.coordinates[s];e.drawImage(this.canvas,u[0],u[1],u[2],u[3],n,i,a,o)}else e.drawImage(this.image,n,i,a,o)}}class nre{constructor(e){this.images={},this.imageBroken={},this.callback=e}_tryloadBrokenUrl(e,t,n){if(!(e===void 0||n===void 0)){if(t===void 0){console.warn("No broken url image defined");return}n.image.onerror=()=>{console.error("Could not load brokenImage:",t)},n.image.src=t}}_redrawWithImage(e){this.callback&&this.callback(e)}load(e,t){const n=this.images[e];if(n)return n;const i=new rre;return this.images[e]=i,i.image.onload=()=>{this._fixImageCoordinates(i.image),i.init(),this._redrawWithImage(i)},i.image.onerror=()=>{console.error("Could not load image:",e),this._tryloadBrokenUrl(e,t,i)},i.image.src=e,i}_fixImageCoordinates(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}var CF={},IF={},k0={exports:{}},M0,OF;function ire(){if(OF)return M0;OF=1;var r=Ke();return M0=r(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),M0}var B0,RF;function are(){if(RF)return B0;RF=1;var r=Ke(),e=tr(),t=$n(),n=ire(),i=Object.isExtensible,a=r(function(){});return B0=a||n?function(s){return!e(s)||n&&t(s)==="ArrayBuffer"?!1:i?i(s):!0}:i,B0}var F0,$F;function s4(){if($F)return F0;$F=1;var r=Ke();return F0=!r(function(){return Object.isExtensible(Object.preventExtensions({}))}),F0}var DF;function nd(){if(DF)return k0.exports;DF=1;var r=xe(),e=Ye(),t=Bu(),n=tr(),i=ur(),a=en().f,o=Zc(),s=tT(),u=are(),l=Wc(),c=s4(),d=!1,h=l("meta"),f=0,v=function(w){a(w,h,{value:{objectID:"O"+f++,weakData:{}}})},p=function(w,S){if(!n(w))return typeof w=="symbol"?w:(typeof w=="string"?"S":"P")+w;if(!i(w,h)){if(!u(w))return"F";if(!S)return"E";v(w)}return w[h].objectID},y=function(w,S){if(!i(w,h)){if(!u(w))return!0;if(!S)return!1;v(w)}return w[h].weakData},g=function(w){return c&&d&&u(w)&&!i(w,h)&&v(w),w},m=function(){b.enable=function(){},d=!0;var w=o.f,S=e([].splice),T={};T[h]=1,w(T).length&&(o.f=function(_){for(var E=w(_),x=0,P=E.length;x<P;x++)if(E[x]===h){S(E,x,1);break}return E},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:s.f}))},b=k0.exports={enable:m,fastKey:p,getWeakData:y,onFreeze:g};return t[h]=!0,k0.exports}var N0,AF;function ore(){if(AF)return N0;AF=1;var r=Ft(),e=os(),t=r("iterator"),n=Array.prototype;return N0=function(i){return i!==void 0&&(e.Array===i||n[t]===i)},N0}var L0,qF;function u4(){if(qF)return L0;qF=1;var r=as(),e=G_(),t=Xo(),n=os(),i=Ft(),a=i("iterator");return L0=function(o){if(!t(o))return e(o,a)||e(o,"@@iterator")||n[r(o)]},L0}var z0,kF;function sre(){if(kF)return z0;kF=1;var r=Fr(),e=ni(),t=Dn(),n=Jo(),i=u4(),a=TypeError;return z0=function(o,s){var u=arguments.length<2?i(o):s;if(e(u))return t(r(u,o));throw new a(n(o)+" is not iterable")},z0}var j0,MF;function yT(){if(MF)return j0;MF=1;var r=Fr(),e=Dn(),t=G_();return j0=function(n,i,a){var o,s;e(n);try{if(o=t(n,"return"),!o){if(i==="throw")throw a;return a}o=r(o,n)}catch(u){s=!0,o=u}if(i==="throw")throw a;if(s)throw o;return e(o),a},j0}var V0,BF;function id(){if(BF)return V0;BF=1;var r=Gc(),e=Fr(),t=Dn(),n=Jo(),i=ore(),a=ii(),o=Bt(),s=sre(),u=u4(),l=yT(),c=TypeError,d=function(f,v){this.stopped=f,this.result=v},h=d.prototype;return V0=function(f,v,p){var y=p&&p.that,g=!!(p&&p.AS_ENTRIES),m=!!(p&&p.IS_RECORD),b=!!(p&&p.IS_ITERATOR),w=!!(p&&p.INTERRUPTED),S=r(v,y),T,_,E,x,P,C,I,O=function(D){return T&&l(T,"normal"),new d(!0,D)},$=function(D){return g?(t(D),w?S(D[0],D[1],O):S(D[0],D[1])):w?S(D,O):S(D)};if(m)T=f.iterator;else if(b)T=f;else{if(_=u(f),!_)throw new c(n(f)+" is not iterable");if(i(_)){for(E=0,x=a(f);x>E;E++)if(P=$(f[E]),P&&o(h,P))return P;return new d(!1)}T=s(f,_)}for(C=m?f.next:T.next;!(I=e(C,T)).done;){try{P=$(I.value)}catch(D){l(T,"throw",D)}if(typeof P=="object"&&P&&o(h,P))return P}return new d(!1)},V0}var W0,FF;function mT(){if(FF)return W0;FF=1;var r=Bt(),e=TypeError;return W0=function(t,n){if(r(n,t))return t;throw new e("Incorrect invocation")},W0}var H0,NF;function bT(){if(NF)return H0;NF=1;var r=xe(),e=yt(),t=nd(),n=Ke(),i=rs(),a=id(),o=mT(),s=er(),u=tr(),l=Xo(),c=Na(),d=en().f,h=zi().forEach,f=Ct(),v=La(),p=v.set,y=v.getterFor;return H0=function(g,m,b){var w=g.indexOf("Map")!==-1,S=g.indexOf("Weak")!==-1,T=w?"set":"add",_=e[g],E=_&&_.prototype,x={},P;if(!f||!s(_)||!(S||E.forEach&&!n(function(){new _().entries().next()})))P=b.getConstructor(m,g,w,T),t.enable();else{P=m(function(O,$){p(o(O,C),{type:g,collection:new _}),l($)||a($,O[T],{that:O,AS_ENTRIES:w})});var C=P.prototype,I=y(g);h(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(O){var $=O==="add"||O==="set";O in E&&!(S&&O==="clear")&&i(C,O,function(D,q){var A=I(this).collection;if(!$&&S&&!u(D))return O==="get"?void 0:!1;var k=A[O](D===0?0:D,q);return $?this:k})}),S||d(C,"size",{configurable:!0,get:function(){return I(this).collection.size}})}return c(P,g,!1,!0),x[g]=P,r({global:!0,forced:!0},x),S||b.setStrong(P,g,w),P},H0}var G0,LF;function wT(){if(LF)return G0;LF=1;var r=zu();return G0=function(e,t,n){for(var i in t)n&&n.unsafe&&e[i]?e[i]=t[i]:r(e,i,t[i],n);return e},G0}var U0,zF;function ure(){if(zF)return U0;zF=1;var r=zr(),e=rT(),t=Ft(),n=Ct(),i=t("species");return U0=function(a){var o=r(a);n&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})},U0}var K0,jF;function l4(){if(jF)return K0;jF=1;var r=Lu(),e=rT(),t=wT(),n=Gc(),i=mT(),a=Xo(),o=id(),s=iT(),u=aT(),l=ure(),c=Ct(),d=nd().fastKey,h=La(),f=h.set,v=h.getterFor;return K0={getConstructor:function(p,y,g,m){var b=p(function(E,x){i(E,w),f(E,{type:y,index:r(null),first:null,last:null,size:0}),c||(E.size=0),a(x)||o(x,E[m],{that:E,AS_ENTRIES:g})}),w=b.prototype,S=v(y),T=function(E,x,P){var C=S(E),I=_(E,x),O,$;return I?I.value=P:(C.last=I={index:$=d(x,!0),key:x,value:P,previous:O=C.last,next:null,removed:!1},C.first||(C.first=I),O&&(O.next=I),c?C.size++:E.size++,$!=="F"&&(C.index[$]=I)),E},_=function(E,x){var P=S(E),C=d(x),I;if(C!=="F")return P.index[C];for(I=P.first;I;I=I.next)if(I.key===x)return I};return t(w,{clear:function(){for(var x=this,P=S(x),C=P.first;C;)C.removed=!0,C.previous&&(C.previous=C.previous.next=null),C=C.next;P.first=P.last=null,P.index=r(null),c?P.size=0:x.size=0},delete:function(E){var x=this,P=S(x),C=_(x,E);if(C){var I=C.next,O=C.previous;delete P.index[C.index],C.removed=!0,O&&(O.next=I),I&&(I.previous=O),P.first===C&&(P.first=I),P.last===C&&(P.last=O),c?P.size--:x.size--}return!!C},forEach:function(x){for(var P=S(this),C=n(x,arguments.length>1?arguments[1]:void 0),I;I=I?I.next:P.first;)for(C(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(x){return!!_(this,x)}}),t(w,g?{get:function(x){var P=_(this,x);return P&&P.value},set:function(x,P){return T(this,x===0?0:x,P)}}:{add:function(x){return T(this,x=x===0?0:x,x)}}),c&&e(w,"size",{configurable:!0,get:function(){return S(this).size}}),b},setStrong:function(p,y,g){var m=y+" Iterator",b=v(y),w=v(m);s(p,y,function(S,T){f(this,{type:m,target:S,state:b(S),kind:T,last:null})},function(){for(var S=w(this),T=S.kind,_=S.last;_&&_.removed;)_=_.previous;return!S.target||!(S.last=_=_?_.next:S.state.first)?(S.target=null,u(void 0,!0)):u(T==="keys"?_.key:T==="values"?_.value:[_.key,_.value],!1)},g?"entries":"values",!g,!0),l(y)}},K0}var VF;function lre(){if(VF)return IF;VF=1;var r=bT(),e=l4();return r("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),IF}var WF;function cre(){return WF||(WF=1,lre()),CF}var HF={},Y0,GF;function c4(){return GF||(GF=1,Y0=function(r,e){return e===1?function(t,n){return t[r](n)}:function(t,n,i){return t[r](n,i)}}),Y0}var X0,UF;function dre(){if(UF)return X0;UF=1;var r=zr(),e=c4(),t=r("Map");return X0={Map:t,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:t.prototype},X0}var KF;function hre(){if(KF)return HF;KF=1;var r=xe(),e=Ye(),t=ni(),n=ri(),i=id(),a=dre(),o=es(),s=Ke(),u=a.Map,l=a.has,c=a.get,d=a.set,h=e([].push),f=o||s(function(){return u.groupBy("ab",function(v){return v}).get("a").length!==1});return r({target:"Map",stat:!0,forced:o||f},{groupBy:function(p,y){n(p),t(y);var g=new u,m=0;return i(p,function(b){var w=y(b,m++);l(g,w)?h(c(g,w),b):d(g,w,[b])}),g}}),HF}var YF={},Z0,XF;function fre(){if(XF)return Z0;XF=1;var r=Ye(),e=ns(),t=tn(),n=ri(),i=r("".charAt),a=r("".charCodeAt),o=r("".slice),s=function(u){return function(l,c){var d=t(n(l)),h=e(c),f=d.length,v,p;return h<0||h>=f?u?"":void 0:(v=a(d,h),v<55296||v>56319||h+1===f||(p=a(d,h+1))<56320||p>57343?u?i(d,h):v:u?o(d,h,h+2):(v-55296<<10)+(p-56320)+65536)}};return Z0={codeAt:s(!1),charAt:s(!0)},Z0}var ZF;function ET(){if(ZF)return YF;ZF=1;var r=fre().charAt,e=tn(),t=La(),n=iT(),i=aT(),a="String Iterator",o=t.set,s=t.getterFor(a);return n(String,"String",function(u){o(this,{type:a,string:e(u),index:0})},function(){var l=s(this),c=l.string,d=l.index,h;return d>=c.length?i(void 0,!0):(h=r(c,d),l.index+=h.length,i(h,!1))}),YF}var Q0,QF;function vre(){if(QF)return Q0;QF=1,ss(),cre(),hre(),ET();var r=nt();return Q0=r.Map,Q0}var J0,JF;function pre(){if(JF)return J0;JF=1;var r=vre();return us(),J0=r,J0}var e1,eN;function gre(){return eN||(eN=1,e1=pre()),e1}var yre=gre(),ST=Ae(yre);class mre{constructor(){this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},At(this.options,this.defaultOptions)}setOptions(e){const t=["useDefaultGroups"];if(e!==void 0){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&tt(t).call(t,n)===-1){const i=e[n];this.add(n,i)}}}clear(){this._groups=new ST,this._groupNames=[]}get(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this._groups.get(e);if(n===void 0&&t)if(this.options.useDefaultGroups===!1&&this._groupNames.length>0){const i=this._groupIndex%this._groupNames.length;++this._groupIndex,n={},n.color=this._groups.get(this._groupNames[i]),this._groups.set(e,n)}else{const i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,n={},n.color=this._defaultGroups[i],this._groups.set(e,n)}return n}add(e,t){return this._groups.has(e)||this._groupNames.push(e),this._groups.set(e,t),t}}var tN={},rN;function bre(){if(rN)return tN;rN=1;var r=xe();return r({target:"Number",stat:!0},{isNaN:function(t){return t!==t}}),tN}var t1,nN;function wre(){if(nN)return t1;nN=1,bre();var r=nt();return t1=r.Number.isNaN,t1}var r1,iN;function Ere(){if(iN)return r1;iN=1;var r=wre();return r1=r,r1}var n1,aN;function Sre(){return aN||(aN=1,n1=Ere()),n1}var _re=Sre(),GS=Ae(_re),oN={},i1,sN;function Tre(){if(sN)return i1;sN=1;var r=yt(),e=r.isFinite;return i1=Number.isFinite||function(n){return typeof n=="number"&&e(n)},i1}var uN;function xre(){if(uN)return oN;uN=1;var r=xe(),e=Tre();return r({target:"Number",stat:!0},{isFinite:e}),oN}var a1,lN;function Pre(){if(lN)return a1;lN=1,xre();var r=nt();return a1=r.Number.isFinite,a1}var o1,cN;function Cre(){if(cN)return o1;cN=1;var r=Pre();return o1=r,o1}var s1,dN;function Ire(){return dN||(dN=1,s1=Cre()),s1}var Ore=Ire(),sa=Ae(Ore),hN={},fN;function Rre(){if(fN)return hN;fN=1;var r=xe(),e=zi().some,t=ls(),n=t("some");return r({target:"Array",proto:!0,forced:!n},{some:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),hN}var u1,vN;function $re(){if(vN)return u1;vN=1,Rre();var r=lr();return u1=r("Array","some"),u1}var l1,pN;function Dre(){if(pN)return l1;pN=1;var r=Bt(),e=$re(),t=Array.prototype;return l1=function(n){var i=n.some;return n===t||r(t,n)&&i===t.some?e:i},l1}var c1,gN;function Are(){if(gN)return c1;gN=1;var r=Dre();return c1=r,c1}var d1,yN;function qre(){return yN||(yN=1,d1=Are()),d1}var kre=qre(),Mre=Ae(kre),h1={exports:{}},mN={},bN;function Bre(){if(bN)return mN;bN=1;var r=xe(),e=Ct(),t=en().f;return r({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!e},{defineProperty:t}),mN}var wN;function Fre(){if(wN)return h1.exports;wN=1,Bre();var r=nt(),e=r.Object,t=h1.exports=function(i,a,o){return e.defineProperty(i,a,o)};return e.defineProperty.sham&&(t.sham=!0),h1.exports}var f1,EN;function d4(){if(EN)return f1;EN=1;var r=Fre();return f1=r,f1}var v1,SN;function Nre(){if(SN)return v1;SN=1;var r=d4();return v1=r,v1}var p1,_N;function Lre(){if(_N)return p1;_N=1;var r=Nre();return p1=r,p1}var g1,TN;function zre(){return TN||(TN=1,g1=Lre()),g1}var jre=zre(),Vre=Ae(jre),xN={},PN;function Wre(){if(PN)return xN;PN=1;var r=Ft(),e=en().f,t=r("metadata"),n=Function.prototype;return n[t]===void 0&&e(n,t,{value:null}),xN}var CN={},IN;function Hre(){return IN||(IN=1,fH()),CN}var ON={},RN;function Gre(){return RN||(RN=1,vH()),ON}var $N={},DN;function Ure(){if(DN)return $N;DN=1;var r=wt();return r("metadata"),$N}var y1,AN;function Kre(){if(AN)return y1;AN=1;var r=bH();return Wre(),Hre(),Gre(),Ure(),y1=r,y1}var qN={},m1,kN;function h4(){if(kN)return m1;kN=1;var r=zr(),e=Ye(),t=r("Symbol"),n=t.keyFor,i=e(t.prototype.valueOf);return m1=t.isRegisteredSymbol||function(o){try{return n(i(o))!==void 0}catch{return!1}},m1}var MN;function Yre(){if(MN)return qN;MN=1;var r=xe(),e=h4();return r({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),qN}var BN={},b1,FN;function f4(){if(FN)return b1;FN=1;for(var r=ts(),e=zr(),t=Ye(),n=Mu(),i=Ft(),a=e("Symbol"),o=a.isWellKnownSymbol,s=e("Object","getOwnPropertyNames"),u=t(a.prototype.valueOf),l=r("wks"),c=0,d=s(a),h=d.length;c<h;c++)try{var f=d[c];n(a[f])&&i(f)}catch{}return b1=function(p){if(o&&o(p))return!0;try{for(var y=u(p),g=0,m=s(l),b=m.length;g<b;g++)if(l[m[g]]==y)return!0}catch{}return!1},b1}var NN;function Xre(){if(NN)return BN;NN=1;var r=xe(),e=f4();return r({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),BN}var LN={},zN;function Zre(){if(zN)return LN;zN=1;var r=wt();return r("customMatcher"),LN}var jN={},VN;function Qre(){if(VN)return jN;VN=1;var r=wt();return r("observable"),jN}var WN={},HN;function Jre(){if(HN)return WN;HN=1;var r=xe(),e=h4();return r({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),WN}var GN={},UN;function ene(){if(UN)return GN;UN=1;var r=xe(),e=f4();return r({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),GN}var KN={},YN;function tne(){if(YN)return KN;YN=1;var r=wt();return r("matcher"),KN}var XN={},ZN;function rne(){if(ZN)return XN;ZN=1;var r=wt();return r("metadataKey"),XN}var QN={},JN;function nne(){if(JN)return QN;JN=1;var r=wt();return r("patternMatch"),QN}var eL={},tL;function ine(){if(tL)return eL;tL=1;var r=wt();return r("replaceAll"),eL}var w1,rL;function ane(){if(rL)return w1;rL=1;var r=Kre();return Yre(),Xre(),Zre(),Qre(),Jre(),ene(),tne(),rne(),nne(),ine(),w1=r,w1}var E1,nL;function one(){return nL||(nL=1,E1=ane()),E1}var sne=one(),wl=Ae(sne),S1,iL;function une(){if(iL)return S1;iL=1,ss(),ET(),pH();var r=Qc();return S1=r.f("iterator"),S1}var _1,aL;function lne(){if(aL)return _1;aL=1;var r=une();return us(),_1=r,_1}var T1,oL;function cne(){if(oL)return T1;oL=1;var r=lne();return T1=r,T1}var x1,sL;function dne(){if(sL)return x1;sL=1;var r=cne();return x1=r,x1}var P1,uL;function hne(){return uL||(uL=1,P1=dne()),P1}var fne=hne(),vne=Ae(fne);function ou(r){"@babel/helpers - typeof";return ou=typeof wl=="function"&&typeof vne=="symbol"?function(e){return typeof e}:function(e){return e&&typeof wl=="function"&&e.constructor===wl&&e!==wl.prototype?"symbol":typeof e},ou(r)}var C1,lL;function pne(){if(lL)return C1;lL=1,gH();var r=Qc();return C1=r.f("toPrimitive"),C1}var I1,cL;function gne(){if(cL)return I1;cL=1;var r=pne();return I1=r,I1}var O1,dL;function yne(){if(dL)return O1;dL=1;var r=gne();return O1=r,O1}var R1,hL;function mne(){if(hL)return R1;hL=1;var r=yne();return R1=r,R1}var $1,fL;function bne(){return fL||(fL=1,$1=mne()),$1}var wne=bne(),Ene=Ae(wne);function Sne(r,e){if(ou(r)!="object"||!r)return r;var t=r[Ene];if(t!==void 0){var n=t.call(r,e);if(ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function _ne(r){var e=Sne(r,"string");return ou(e)=="symbol"?e:e+""}function Ln(r,e,t){return(e=_ne(e))in r?Vre(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var vL={},D1,pL;function Tne(){if(pL)return D1;pL=1;var r=yt(),e=Ke(),t=Ye(),n=tn(),i=EH().trim,a=oT(),o=t("".charAt),s=r.parseFloat,u=r.Symbol,l=u&&u.iterator,c=1/s(a+"-0")!==-1/0||l&&!e(function(){s(Object(l))});return D1=c?function(h){var f=i(n(h)),v=s(f);return v===0&&o(f,0)==="-"?-0:v}:s,D1}var gL;function xne(){if(gL)return vL;gL=1;var r=xe(),e=Tne();return r({global:!0,forced:parseFloat!==e},{parseFloat:e}),vL}var A1,yL;function Pne(){if(yL)return A1;yL=1,xne();var r=nt();return A1=r.parseFloat,A1}var q1,mL;function Cne(){if(mL)return q1;mL=1;var r=Pne();return q1=r,q1}var k1,bL;function Ine(){return bL||(bL=1,k1=Cne()),k1}var One=Ine(),v4=Ae(One),wL={},EL;function Rne(){if(EL)return wL;EL=1;var r=xe(),e=Ke(),t=tT().f,n=e(function(){return!Object.getOwnPropertyNames(1)});return r({target:"Object",stat:!0,forced:n},{getOwnPropertyNames:t}),wL}var M1,SL;function $ne(){if(SL)return M1;SL=1,Rne();var r=nt(),e=r.Object;return M1=function(n){return e.getOwnPropertyNames(n)},M1}var B1,_L;function Dne(){if(_L)return B1;_L=1;var r=$ne();return B1=r,B1}var F1,TL;function Ane(){return TL||(TL=1,F1=Dne()),F1}var qne=Ane(),kne=Ae(qne),N1,xL;function Mne(){if(xL)return N1;xL=1,hH();var r=nt();return N1=r.Object.getOwnPropertySymbols,N1}var L1,PL;function Bne(){if(PL)return L1;PL=1;var r=Mne();return L1=r,L1}var z1,CL;function Fne(){return CL||(CL=1,z1=Bne()),z1}var Nne=Fne(),Ci=Ae(Nne),j1={exports:{}},IL={},OL;function Lne(){if(OL)return IL;OL=1;var r=xe(),e=Ke(),t=pn(),n=Hc().f,i=Ct(),a=!i||e(function(){n(1)});return r({target:"Object",stat:!0,forced:a,sham:!i},{getOwnPropertyDescriptor:function(s,u){return n(t(s),u)}}),IL}var RL;function zne(){if(RL)return j1.exports;RL=1,Lne();var r=nt(),e=r.Object,t=j1.exports=function(i,a){return e.getOwnPropertyDescriptor(i,a)};return e.getOwnPropertyDescriptor.sham&&(t.sham=!0),j1.exports}var V1,$L;function jne(){if($L)return V1;$L=1;var r=zne();return V1=r,V1}var W1,DL;function Vne(){return DL||(DL=1,W1=jne()),W1}var Wne=Vne(),ji=Ae(Wne),AL={},qL;function Hne(){if(qL)return AL;qL=1;var r=xe(),e=Ct(),t=gQ(),n=pn(),i=Hc(),a=Yc();return r({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(s){for(var u=n(s),l=i.f,c=t(u),d={},h=0,f,v;c.length>h;)v=l(u,f=c[h++]),v!==void 0&&a(d,f,v);return d}}),AL}var H1,kL;function Gne(){if(kL)return H1;kL=1,Hne();var r=nt();return H1=r.Object.getOwnPropertyDescriptors,H1}var G1,ML;function Une(){if(ML)return G1;ML=1;var r=Gne();return G1=r,G1}var U1,BL;function Kne(){return BL||(BL=1,U1=Une()),U1}var Yne=Kne(),Ii=Ae(Yne),K1={exports:{}},FL={},NL;function Xne(){if(NL)return FL;NL=1;var r=xe(),e=Ct(),t=eT().f;return r({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!e},{defineProperties:t}),FL}var LL;function Zne(){if(LL)return K1.exports;LL=1,Xne();var r=nt(),e=r.Object,t=K1.exports=function(i,a){return e.defineProperties(i,a)};return e.defineProperties.sham&&(t.sham=!0),K1.exports}var Y1,zL;function Qne(){if(zL)return Y1;zL=1;var r=Zne();return Y1=r,Y1}var X1,jL;function Jne(){return jL||(jL=1,X1=Qne()),X1}var eie=Jne(),ad=Ae(eie),Z1,VL;function tie(){return VL||(VL=1,Z1=d4()),Z1}var rie=tie(),od=Ae(rie);function _T(r,e){const t=["node","edge","label"];let n=!0;const i=di(e,"chosen");if(typeof i=="boolean")n=i;else if(typeof i=="object"){if(tt(t).call(t,r)===-1)throw new Error("choosify: subOption '"+r+"' should be one of '"+t.join("', '")+"'");const a=di(e,["chosen",r]);(typeof a=="boolean"||typeof a=="function")&&(n=a)}return n}function US(r,e,t){if(r.width<=0||r.height<=0)return!1;if(t!==void 0){const a={x:e.x-t.x,y:e.y-t.y};if(t.angle!==0){const o=-t.angle;e={x:Math.cos(o)*a.x-Math.sin(o)*a.y,y:Math.sin(o)*a.x+Math.cos(o)*a.y}}else e=a}const n=r.x+r.width,i=r.y+r.width;return r.left<e.x&&n>e.x&&r.top<e.y&&i>e.y}function cc(r){return typeof r=="string"&&r!==""}function p4(r,e,t,n){let i=n.x,a=n.y;if(typeof n.distanceToBorder=="function"){const o=n.distanceToBorder(r,e),s=Math.sin(e)*o,u=Math.cos(e)*o;u===o?(i+=o,a=n.y):s===o?(i=n.x,a-=o):(i+=u,a-=s)}else n.shape.width>n.shape.height?(i=n.x+n.shape.width*.5,a=n.y-t):(i=n.x+t,a=n.y-n.shape.height*.5);return{x:i,y:a}}var Q1,WL;function nie(){if(WL)return Q1;WL=1,ss();var r=lr();return Q1=r("Array","values"),Q1}var J1,HL;function iie(){if(HL)return J1;HL=1;var r=nie();return J1=r,J1}var ew,GL;function aie(){if(GL)return ew;GL=1,us();var r=as(),e=ur(),t=Bt(),n=iie(),i=Array.prototype,a={DOMTokenList:!0,NodeList:!0};return ew=function(o){var s=o.values;return o===i||t(i,o)&&s===i.values||e(a,r(o))?n:s},ew}var tw,UL;function oie(){return UL||(UL=1,tw=aie()),tw}var sie=oie(),g4=Ae(sie);class uie{constructor(e){this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}_add(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});let i=t;(t===void 0||t==="")&&(i=" ");const a=this.measureText(i,n),o=At({},g4(a));o.text=t,o.width=a.width,o.mod=n,(t===void 0||t==="")&&(o.width=0),this.lines[e].blocks.push(o),this.lines[e].width+=o.width}curWidth(){const e=this.lines[this.current];return e===void 0?0:e.width}append(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,t)}newLine(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,t),this.current++}determineLineHeights(){for(let e=0;e<this.lines.length;e++){const t=this.lines[e];let n=0;if(t.blocks!==void 0)for(let i=0;i<t.blocks.length;i++){const a=t.blocks[i];n<a.height&&(n=a.height)}t.height=n}}determineLabelSize(){let e=0,t=0;for(let n=0;n<this.lines.length;n++){const i=this.lines[n];i.width>e&&(e=i.width),t+=i.height}this.width=e,this.height=t}removeEmptyBlocks(){const e=[];for(let t=0;t<this.lines.length;t++){const n=this.lines[t];if(n.blocks.length===0||t===this.lines.length-1&&n.width===0)continue;const i={};At(i,n),i.blocks=[];let a;const o=[];for(let s=0;s<n.blocks.length;s++){const u=n.blocks[s];u.width!==0?o.push(u):a===void 0&&(a=u)}o.length===0&&a!==void 0&&o.push(a),i.blocks=o,e.push(i)}return e}finalize(){this.determineLineHeights(),this.determineLabelSize();const e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}const lie={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/};class KL{constructor(e){this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}mod(){return this.modStack.length===0?"normal":this.modStack[0]}modName(){if(this.modStack.length===0)return"normal";if(this.modStack[0]==="mono")return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}emitBlock(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}add(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}parseWS(e){return/[ \t]/.test(e)?(this.mono?this.add(e):this.spacing=!0,!0):!1}setTag(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}unsetTag(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}parseStartTag(e,t){return!this.mono&&!this[e]&&this.match(t)?(this.setTag(e),!0):!1}match(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const[n,i]=this.prepareRegExp(e),a=n.test(this.text.substr(this.position,i));return a&&t&&(this.position+=i-1),a}parseEndTag(e,t,n){let i=this.mod()===e;return e==="mono"?i=i&&this.mono:i=i&&!this.mono,i&&this.match(t)?(n!==void 0?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e):this.unsetTag(e),!0):!1}replace(e,t){return this.match(e)?(this.add(t),this.position+=length-1,!0):!1}prepareRegExp(e){let t,n;if(e instanceof RegExp)n=e,t=1;else{const i=lie[e];i!==void 0?n=i:n=new RegExp(e),t=e.length}return[n,t]}}class cie{constructor(e,t,n,i){this.ctx=e,this.parent=t,this.selected=n,this.hover=i;const a=(o,s)=>{if(o===void 0)return 0;const u=this.parent.getFormattingValues(e,n,i,s);let l=0;return o!==""&&(l=this.ctx.measureText(o).width),{width:l,values:u}};this.lines=new uie(a)}process(e){if(!cc(e))return this.lines.finalize();const t=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);const n=String(e).split(`
`),i=n.length;if(t.multi)for(let a=0;a<i;a++){const o=this.splitBlocks(n[a],t.multi);if(o!==void 0){if(o.length===0){this.lines.newLine("");continue}if(t.maxWdt>0)for(let s=0;s<o.length;s++){const u=o[s].mod,l=o[s].text;this.splitStringIntoLines(l,u,!0)}else for(let s=0;s<o.length;s++){const u=o[s].mod,l=o[s].text;this.lines.append(l,u)}this.lines.newLine()}}else if(t.maxWdt>0)for(let a=0;a<i;a++)this.splitStringIntoLines(n[a]);else for(let a=0;a<i;a++)this.lines.newLine(n[a]);return this.lines.finalize()}decodeMarkupSystem(e){let t="none";return e==="markdown"||e==="md"?t="markdown":(e===!0||e==="html")&&(t="html"),t}splitHtmlBlocks(e){const t=new KL(e),n=i=>/&/.test(i)?(t.replace(t.text,"&lt;","<")||t.replace(t.text,"&amp;","&")||t.add("&"),!0):!1;for(;t.position<t.text.length;){const i=t.text.charAt(t.position);t.parseWS(i)||/</.test(i)&&(t.parseStartTag("bold","<b>")||t.parseStartTag("ital","<i>")||t.parseStartTag("mono","<code>")||t.parseEndTag("bold","</b>")||t.parseEndTag("ital","</i>")||t.parseEndTag("mono","</code>"))||n(i)||t.add(i),t.position++}return t.emitBlock(),t.blocks}splitMarkdownBlocks(e){const t=new KL(e);let n=!0;const i=a=>/\\/.test(a)?(t.position<this.text.length+1&&(t.position++,a=this.text.charAt(t.position),/ \t/.test(a)?t.spacing=!0:(t.add(a),n=!1)),!0):!1;for(;t.position<t.text.length;){const a=t.text.charAt(t.position);t.parseWS(a)||i(a)||(n||t.spacing)&&(t.parseStartTag("bold","*")||t.parseStartTag("ital","_")||t.parseStartTag("mono","`"))||t.parseEndTag("bold","*","afterBold")||t.parseEndTag("ital","_","afterItal")||t.parseEndTag("mono","`","afterMono")||(t.add(a),n=!1),t.position++}return t.emitBlock(),t.blocks}splitBlocks(e,t){const n=this.decodeMarkupSystem(t);if(n==="none")return[{text:e,mod:"normal"}];if(n==="markdown")return this.splitMarkdownBlocks(e);if(n==="html")return this.splitHtmlBlocks(e)}overMaxWidth(e){const t=this.ctx.measureText(e).width;return this.lines.curWidth()+t>this.parent.fontOptions.maxWdt}getLongestFit(e){let t="",n=0;for(;n<e.length;){const a=t+(t===""?"":" ")+e[n];if(this.overMaxWidth(a))break;t=a,n++}return n}getLongestFitWord(e){let t=0;for(;t<e.length&&!this.overMaxWidth(wn(e).call(e,0,t));)t++;return t}splitStringIntoLines(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"normal",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,this.selected,this.hover,t),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");let i=e.split("\r");for(;i.length>0;){let a=this.getLongestFit(i);if(a===0){const o=i[0],s=this.getLongestFitWord(o);this.lines.newLine(wn(o).call(o,0,s),t),i[0]=wn(o).call(o,s)}else{let o=a;i[a-1]===" "?a--:i[o]===" "&&o++;const s=wn(i).call(i,0,a).join("");a==i.length&&n?this.lines.append(s,t):this.lines.newLine(s,t),i=wn(i).call(i,o)}}}}const Ts=["bold","ital","boldital","mono"];class So{constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(t),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}setOptions(e){if(this.elementOptions=e,this.initFontOptions(e.font),cc(e.label)?this.labelDirty=!0:e.label=void 0,e.font!==void 0&&e.font!==null){if(typeof e.font=="string")this.baseSize=this.fontOptions.size;else if(typeof e.font=="object"){const t=e.font.size;t!==void 0&&(this.baseSize=t)}}}initFontOptions(e){if(Ve(Ts,t=>{this.fontOptions[t]={}}),So.parseFontString(this.fontOptions,e)){this.fontOptions.vadjust=0;return}Ve(e,(t,n)=>{t!=null&&typeof t!="object"&&(this.fontOptions[n]=t)})}static parseFontString(e,t){if(!t||typeof t!="string")return!1;const n=t.split(" ");return e.size=+n[0].replace("px",""),e.face=n[1],e.color=n[2],!0}constrain(e){const t={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=di(e,"widthConstraint");if(typeof n=="number")t.maxWdt=Number(n),t.minWdt=Number(n);else if(typeof n=="object"){const a=di(e,["widthConstraint","maximum"]);typeof a=="number"&&(t.maxWdt=Number(a));const o=di(e,["widthConstraint","minimum"]);typeof o=="number"&&(t.minWdt=Number(o))}const i=di(e,"heightConstraint");if(typeof i=="number")t.minHgt=Number(i);else if(typeof i=="object"){const a=di(e,["heightConstraint","minimum"]);typeof a=="number"&&(t.minHgt=Number(a));const o=di(e,["heightConstraint","valign"]);typeof o=="string"&&(o==="top"||o==="bottom")&&(t.valign=o)}return t}update(e,t){this.setOptions(e,!0),this.propagateFonts(t),ct(this.fontOptions,this.constrain(t)),this.fontOptions.chooser=_T("label",t)}adjustSizes(e){const t=e?e.right+e.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=t,this.fontOptions.minWdt-=t);const n=e?e.top+e.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}addFontOptionsToPile(e,t){for(let n=0;n<t.length;++n)this.addFontToPile(e,t[n])}addFontToPile(e,t){if(t===void 0||t.font===void 0||t.font===null)return;const n=t.font;e.push(n)}getBasicOptions(e){const t={};for(let n=0;n<e.length;++n){let i=e[n];const a={};So.parseFontString(a,i)&&(i=a),Ve(i,(o,s)=>{o!==void 0&&(Object.prototype.hasOwnProperty.call(t,s)||(tt(Ts).call(Ts,s)!==-1?t[s]={}:t[s]=o))})}return t}getFontOption(e,t,n){let i;for(let a=0;a<e.length;++a){const o=e[a];if(Object.prototype.hasOwnProperty.call(o,t)){if(i=o[t],i==null)continue;const s={};if(So.parseFontString(s,i)&&(i=s),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}getFontOptions(e,t){const n={},i=["color","size","face","mod","vadjust"];for(let a=0;a<i.length;++a){const o=i[a];n[o]=this.getFontOption(e,t,o)}return n}propagateFonts(e){const t=[];this.addFontOptionsToPile(t,e),this.fontOptions=this.getBasicOptions(t);for(let n=0;n<Ts.length;++n){const i=Ts[n],a=this.fontOptions[i],o=this.getFontOptions(t,i);Ve(o,(s,u)=>{a[u]=s}),a.size=Number(a.size),a.vadjust=Number(a.vadjust)}}draw(e,t,n,i,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label===void 0)return;let s=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&s<this.elementOptions.scaling.label.drawThreshold-1||(s>=this.elementOptions.scaling.label.maxVisible&&(s=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(e,i,a,t,n,o),this._drawBackground(e),this._drawText(e,t,this.size.yLine,o,s))}_drawBackground(e){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){e.fillStyle=this.fontOptions.background;const t=this.getSize();e.fillRect(t.left,t.top,t.width,t.height)}}_drawText(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"middle",a=arguments.length>4?arguments[4]:void 0;[t,n]=this._setAlignment(e,t,n,i),e.textAlign="left",t=t-this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(n-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(n+=(this.size.height-this.size.labelHeight)/2));for(let o=0;o<this.lineCount;o++){const s=this.lines[o];if(s&&s.blocks){let u=0;this.isEdgeLabel||this.fontOptions.align==="center"?u+=(this.size.width-s.width)/2:this.fontOptions.align==="right"&&(u+=this.size.width-s.width);for(let l=0;l<s.blocks.length;l++){const c=s.blocks[l];e.font=c.font;const[d,h]=this._getColor(c.color,a,c.strokeColor);c.strokeWidth>0&&(e.lineWidth=c.strokeWidth,e.strokeStyle=h,e.lineJoin="round"),e.fillStyle=d,c.strokeWidth>0&&e.strokeText(c.text,t+u,n+c.vadjust),e.fillText(c.text,t+u,n+c.vadjust),u+=c.width}n+=s.height}}}_setAlignment(e,t,n,i){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1){t=0,n=0;const a=2;this.fontOptions.align==="top"?(e.textBaseline="alphabetic",n-=2*a):this.fontOptions.align==="bottom"?(e.textBaseline="hanging",n+=2*a):e.textBaseline="middle"}else e.textBaseline=i;return[t,n]}_getColor(e,t,n){let i=e||"#000000",a=n||"#ffffff";if(t<=this.elementOptions.scaling.label.drawThreshold){const o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-t)));i=Ur(i,o),a=Ur(a,o)}return[i,a]}getTextSize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this._processLabel(e,t,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}getSize(){let t=this.size.left,n=this.size.top-.5*2;if(this.isEdgeLabel){const a=-this.size.width*.5;switch(this.fontOptions.align){case"middle":t=a,n=-this.size.height*.5;break;case"top":t=a,n=-(this.size.height+2);break;case"bottom":t=a,n=2;break}}return{left:t,top:n,width:this.size.width,height:this.size.height}}calculateLabelSize(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(e,t,n),this.size.left=i-this.size.width*.5,this.size.top=a-this.size.height*.5,this.size.yLine=a+(1-this.lineCount)*.5*this.fontOptions.size,o==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}getFormattingValues(e,t,n,i){const a=function(u,l,c){return l==="normal"?c==="mod"?"":u[c]:u[l][c]!==void 0?u[l][c]:u[c]},o={color:a(this.fontOptions,i,"color"),size:a(this.fontOptions,i,"size"),face:a(this.fontOptions,i,"face"),mod:a(this.fontOptions,i,"mod"),vadjust:a(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(t||n)&&(i==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?o.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(o,this.elementOptions.id,t,n));let s="";return o.mod!==void 0&&o.mod!==""&&(s+=o.mod+" "),s+=o.size+"px "+o.face,e.font=s.replace(/"/g,""),o.font=e.font,o.height=o.size,o}differentState(e,t){return e!==this.selectedState||t!==this.hoverState}_processLabelText(e,t,n,i){return new cie(e,this,t,n).process(i)}_processLabel(e,t,n){if(this.labelDirty===!1&&!this.differentState(t,n))return;const i=this._processLabelText(e,t,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=t,this.hoverState=n,this.labelDirty=!1}visible(){return!(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}class ja{constructor(e,t,n){this.body=t,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}setOptions(e){this.options=e}_setMargins(e){this.margin={},this.options.margin&&(typeof this.options.margin=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),e.adjustSizes(this.margin)}_distanceToBorder(e,t){const n=this.options.borderWidth;return e&&this.resize(e),Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+n}enableShadow(e,t){t.shadow&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}disableShadow(e,t){t.shadow&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}enableBorderDashes(e,t){if(t.borderDashes!==!1)if(e.setLineDash!==void 0){let n=t.borderDashes;n===!0&&(n=[5,15]),e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1}disableBorderDashes(e,t){t.borderDashes!==!1&&(e.setLineDash!==void 0?e.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,t.borderDashes=!1))}needsRefresh(e,t){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(e,t)}initContextForDraw(e,t){const n=t.borderWidth/this.body.view.scale;e.lineWidth=Math.min(this.width,n),e.strokeStyle=t.borderColor,e.fillStyle=t.color}performStroke(e,t){const n=t.borderWidth/this.body.view.scale;e.save(),n>0&&(this.enableBorderDashes(e,t),e.stroke(),this.disableBorderDashes(e,t)),e.restore()}performFill(e,t){e.save(),e.fillStyle=t.color,this.enableShadow(e,t),Vu(e).call(e),this.disableShadow(e,t),e.restore(),this.performStroke(e,t)}_addBoundingBoxMargin(e){this.boundingBox.left-=e,this.boundingBox.top-=e,this.boundingBox.bottom+=e,this.boundingBox.right+=e}_updateBoundingBox(e,t,n,i,a){n!==void 0&&this.resize(n,i,a),this.left=e-this.width/2,this.top=t-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}updateBoundingBox(e,t,n,i,a){this._updateBoundingBox(e,t,n,i,a)}getDimensionsFromLabel(e,t,n){this.textSize=this.labelModule.getTextSize(e,t,n);let i=this.textSize.width,a=this.textSize.height;const o=14;return i===0&&(i=o,a=o),{width:i,height:a}}}let die=class extends ja{constructor(e,t,n){super(e,t,n),this._setMargins(n)}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(t,n)){const i=this.getDimensionsFromLabel(e,t,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}draw(e,t,n,i,a,o){this.resize(e,i,a),this.left=t-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),tH(e,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(e,o),this.updateBoundingBox(t,n,e,i,a),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,a)}updateBoundingBox(e,t,n,i,a){this._updateBoundingBox(e,t,n,i,a);const o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}distanceToBorder(e,t){e&&this.resize(e);const n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+n}};class TT extends ja{constructor(e,t,n){super(e,t,n),this.labelOffset=0,this.selected=!1}setOptions(e,t,n){this.options=e,t===void 0&&n===void 0||this.setImages(t,n)}setImages(e,t){t&&this.selected?(this.imageObj=t,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=t)}switchImages(e){const t=e&&!this.selected||!e&&this.selected;if(this.selected=e,this.imageObjAlt!==void 0&&t){const n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}_getImagePadding(){const e={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){const t=this.options.imagePadding;typeof t=="object"?(e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left):(e.top=t,e.right=t,e.bottom=t,e.left=t)}return e}_resizeImage(){let e,t;if(this.options.shapeProperties.useImageSize===!1){let n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),e=this.options.size*2*n,t=this.options.size*2*i}else{const n=this._getImagePadding();e=this.imageObj.width+n.left+n.right,t=this.imageObj.height+n.top+n.bottom}this.width=e,this.height=t,this.radius=.5*this.width}_drawRawCircle(e,t,n,i){this.initContextForDraw(e,i),Z_(e,t,n,i.size),this.performFill(e,i)}_drawImageAtPosition(e,t){if(this.imageObj.width!=0){e.globalAlpha=t.opacity!==void 0?t.opacity:1,this.enableShadow(e,t);let n=1;this.options.shapeProperties.interpolation===!0&&(n=this.imageObj.width/this.width/this.body.view.scale);const i=this._getImagePadding(),a=this.left+i.left,o=this.top+i.top,s=this.width-i.left-i.right,u=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(e,n,a,o,s,u),this.disableShadow(e,t)}}_drawImageLabel(e,t,n,i,a){let o=0;if(this.height!==void 0){o=this.height*.5;const u=this.labelModule.getTextSize(e,i,a);u.lineCount>=1&&(o+=u.height/2)}const s=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(e,t,s,i,a,"hanging")}}let hie=class extends TT{constructor(e,t,n){super(e,t,n),this._setMargins(n)}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(t,n)){const i=this.getDimensionsFromLabel(e,t,n),a=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=a/2,this.width=a,this.height=a,this.radius=this.width/2}}draw(e,t,n,i,a,o){this.resize(e,i,a),this.left=t-this.width/2,this.top=n-this.height/2,this._drawRawCircle(e,t,n,o),this.updateBoundingBox(t,n),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,n,i,a)}updateBoundingBox(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size}distanceToBorder(e){return e&&this.resize(e),this.width*.5}};class fie extends TT{constructor(e,t,n,i,a){super(e,t,n),this.setImages(i,a)}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const a=this.options.size*2;this.width=a,this.height=a,this.radius=.5*this.width;return}this.needsRefresh(t,n)&&this._resizeImage()}draw(e,t,n,i,a,o){this.switchImages(i),this.resize();let s=t,u=n;this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=t,this.top=n,s+=this.width/2,u+=this.height/2):(this.left=t-this.width/2,this.top=n-this.height/2),this._drawRawCircle(e,s,u,o),e.save(),e.clip(),this._drawImageAtPosition(e,o),e.restore(),this._drawImageLabel(e,s,u,i,a),this.updateBoundingBox(t,n)}updateBoundingBox(e,t){this.options.shapeProperties.coordinateOrigin==="top-left"?(this.boundingBox.top=t,this.boundingBox.left=e,this.boundingBox.right=e+this.options.size*2,this.boundingBox.bottom=t+this.options.size*2):(this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}distanceToBorder(e){return e&&this.resize(e),this.width*.5}}class Vi extends ja{constructor(e,t,n){super(e,t,n)}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(t,n)){var a,o;this.labelModule.getTextSize(e,t,n);const s=2*i.size;this.width=(a=this.customSizeWidth)!==null&&a!==void 0?a:s,this.height=(o=this.customSizeHeight)!==null&&o!==void 0?o:s,this.radius=.5*this.width}}_drawShape(e,t,n,i,a,o,s,u){return this.resize(e,o,s,u),this.left=i-this.width/2,this.top=a-this.height/2,this.initContextForDraw(e,u),OZ(t)(e,i,a,u.size),this.performFill(e,u),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(e.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,i,a)),{drawExternalLabel:()=>{if(this.options.label!==void 0){this.labelModule.calculateLabelSize(e,o,s,i,a,"hanging");const l=a+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(e,i,l,o,s,"hanging")}this.updateBoundingBox(i,a)}}}updateBoundingBox(e,t){this.boundingBox.top=t-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=t+this.options.size,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}function YL(r,e){var t=_t(r);if(Ci){var n=Ci(r);e&&(n=Dr(n).call(n,function(i){return ji(r,i).enumerable})),t.push.apply(t,n)}return t}function vie(r){for(var e=1;e<arguments.length;e++){var t,n,i=arguments[e]!=null?arguments[e]:{};e%2?at(t=YL(Object(i),!0)).call(t,function(a){Ln(r,a,i[a])}):Ii?ad(r,Ii(i)):at(n=YL(Object(i))).call(n,function(a){od(r,a,ji(i,a))})}return r}class pie extends Vi{constructor(e,t,n,i){super(e,t,n,i),this.ctxRenderer=i}draw(e,t,n,i,a,o){this.resize(e,i,a,o),this.left=t-this.width/2,this.top=n-this.height/2,e.save();const s=this.ctxRenderer({ctx:e,id:this.options.id,x:t,y:n,state:{selected:i,hover:a},style:vie({},o),label:this.options.label});if(s.drawNode!=null&&s.drawNode(),e.restore(),s.drawExternalLabel){const u=s.drawExternalLabel;s.drawExternalLabel=()=>{e.save(),u(),e.restore()}}return s.nodeDimensions&&(this.customSizeWidth=s.nodeDimensions.width,this.customSizeHeight=s.nodeDimensions.height),s}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}class gie extends ja{constructor(e,t,n){super(e,t,n),this._setMargins(n)}resize(e,t,n){if(this.needsRefresh(t,n)){const a=this.getDimensionsFromLabel(e,t,n).width+this.margin.right+this.margin.left;this.width=a,this.height=a,this.radius=this.width/2}}draw(e,t,n,i,a,o){this.resize(e,i,a),this.left=t-this.width/2,this.top=n-this.height/2,this.initContextForDraw(e,o),rH(e,t-this.width/2,n-this.height/2,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(t,n,e,i,a),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,a)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}let yie=class extends Vi{constructor(e,t,n){super(e,t,n)}draw(e,t,n,i,a,o){return this._drawShape(e,"diamond",4,t,n,i,a,o)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}};class mie extends Vi{constructor(e,t,n){super(e,t,n)}draw(e,t,n,i,a,o){return this._drawShape(e,"circle",2,t,n,i,a,o)}distanceToBorder(e){return e&&this.resize(e),this.options.size}}class XL extends ja{constructor(e,t,n){super(e,t,n)}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(t,n)){const i=this.getDimensionsFromLabel(e,t,n);this.height=i.height*2,this.width=i.width+i.height,this.radius=.5*this.width}}draw(e,t,n,i,a,o){this.resize(e,i,a),this.left=t-this.width*.5,this.top=n-this.height*.5,this.initContextForDraw(e,o),BS(e,this.left,this.top,this.width,this.height),this.performFill(e,o),this.updateBoundingBox(t,n,e,i,a),this.labelModule.draw(e,t,n,i,a)}distanceToBorder(e,t){e&&this.resize(e);const n=this.width*.5,i=this.height*.5,a=Math.sin(t)*n,o=Math.cos(t)*i;return n*i/Math.sqrt(a*a+o*o)}}class bie extends ja{constructor(e,t,n){super(e,t,n),this._setMargins(n)}resize(e,t,n){this.needsRefresh(t,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,t,n,i,a,o){return this.resize(e,i,a),this.options.icon.size=this.options.icon.size||50,this.left=t-this.width/2,this.top=n-this.height/2,this._icon(e,t,n,i,a,o),{drawExternalLabel:()=>{this.options.label!==void 0&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(t,n)}}}updateBoundingBox(e,t){this.boundingBox.top=t-this.options.icon.size*.5,this.boundingBox.left=e-this.options.icon.size*.5,this.boundingBox.right=e+this.options.icon.size*.5,this.boundingBox.bottom=t+this.options.icon.size*.5,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}_icon(e,t,n,i,a,o){const s=Number(this.options.icon.size);this.options.icon.code!==void 0?(e.font=[this.options.icon.weight!=null?this.options.icon.weight:i?"bold":"",(this.options.icon.weight!=null&&i?5:0)+s+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,o),e.fillText(this.options.icon.code,t,n),this.disableShadow(e,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}let wie=class extends TT{constructor(e,t,n,i,a){super(e,t,n),this.setImages(i,a)}resize(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selected,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0){const a=this.options.size*2;this.width=a,this.height=a;return}this.needsRefresh(t,n)&&this._resizeImage()}draw(e,t,n,i,a,o){e.save(),this.switchImages(i),this.resize();let s=t,u=n;if(this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=t,this.top=n,s+=this.width/2,u+=this.height/2):(this.left=t-this.width/2,this.top=n-this.height/2),this.options.shapeProperties.useBorderWithImage===!0){const l=this.options.borderWidth,c=this.options.borderWidthSelected||2*this.options.borderWidth,d=(i?c:l)/this.body.view.scale;e.lineWidth=Math.min(this.width,d),e.beginPath();let h=i?this.options.color.highlight.border:a?this.options.color.hover.border:this.options.color.border,f=i?this.options.color.highlight.background:a?this.options.color.hover.background:this.options.color.background;o.opacity!==void 0&&(h=Ur(h,o.opacity),f=Ur(f,o.opacity)),e.strokeStyle=h,e.fillStyle=f,e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+e.lineWidth),Vu(e).call(e),this.performStroke(e,o),e.closePath()}this._drawImageAtPosition(e,o),this._drawImageLabel(e,s,u,i,a),this.updateBoundingBox(t,n),e.restore()}updateBoundingBox(e,t){this.resize(),this.options.shapeProperties.coordinateOrigin==="top-left"?(this.left=e,this.top=t):(this.left=e-this.width/2,this.top=t-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,this.options.label!==void 0&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}distanceToBorder(e,t){return this._distanceToBorder(e,t)}};class Eie extends Vi{constructor(e,t,n){super(e,t,n)}draw(e,t,n,i,a,o){return this._drawShape(e,"square",2,t,n,i,a,o)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}class Sie extends Vi{constructor(e,t,n){super(e,t,n)}draw(e,t,n,i,a,o){return this._drawShape(e,"hexagon",4,t,n,i,a,o)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}class _ie extends Vi{constructor(e,t,n){super(e,t,n)}draw(e,t,n,i,a,o){return this._drawShape(e,"star",4,t,n,i,a,o)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}class Tie extends ja{constructor(e,t,n){super(e,t,n),this._setMargins(n)}resize(e,t,n){this.needsRefresh(t,n)&&(this.textSize=this.labelModule.getTextSize(e,t,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}draw(e,t,n,i,a,o){this.resize(e,i,a),this.left=t-this.width/2,this.top=n-this.height/2,this.enableShadow(e,o),this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,a),this.disableShadow(e,o),this.updateBoundingBox(t,n,e,i,a)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}let xie=class extends Vi{constructor(e,t,n){super(e,t,n)}draw(e,t,n,i,a,o){return this._drawShape(e,"triangle",3,t,n,i,a,o)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}};class Pie extends Vi{constructor(e,t,n){super(e,t,n)}draw(e,t,n,i,a,o){return this._drawShape(e,"triangleDown",3,t,n,i,a,o)}distanceToBorder(e,t){return this._distanceToBorder(e,t)}}function ZL(r,e){var t=_t(r);if(Ci){var n=Ci(r);e&&(n=Dr(n).call(n,function(i){return ji(r,i).enumerable})),t.push.apply(t,n)}return t}function QL(r){for(var e=1;e<arguments.length;e++){var t,n,i=arguments[e]!=null?arguments[e]:{};e%2?at(t=ZL(Object(i),!0)).call(t,function(a){Ln(r,a,i[a])}):Ii?ad(r,Ii(i)):at(n=ZL(Object(i))).call(n,function(a){od(r,a,ji(i,a))})}return r}class pt{constructor(e,t,n,i,a,o){this.options=Si(a),this.globalOptions=a,this.defaultOptions=o,this.body=t,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new So(this.body,this.options,!1),this.setOptions(e)}attachEdge(e){var t;tt(t=this.edges).call(t,e)===-1&&this.edges.push(e)}detachEdge(e){var t;const n=tt(t=this.edges).call(t,e);if(n!=-1){var i;Hn(i=this.edges).call(i,n,1)}}setOptions(e){const t=this.options.shape;if(!e)return;if(typeof e.color<"u"&&(this._localColor=e.color),e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");pt.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=ln(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=ln(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=v4(e.value)),pt.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);const n=[e,this.options,this.defaultOptions];return this.chooser=_T("node",n),this._load_images(),this.updateLabelModule(e),e.opacity!==void 0&&pt.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(t),e.hidden!==void 0||e.physics!==void 0}_load_images(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.options.image.selected!==void 0?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}static checkOpacity(e){return 0<=e&&e<=1}static checkCoordinateOrigin(e){return e===void 0||e==="center"||e==="top-left"}static updateGroupOptions(e,t,n){var i;if(n===void 0)return;const a=e.group;if(t!==void 0&&t.group!==void 0&&a!==t.group)throw new Error("updateGroupOptions: group values in options don't match.");if(!(typeof a=="number"||typeof a=="string"&&a!=""))return;const s=n.get(a);s.opacity!==void 0&&t.opacity===void 0&&(pt.checkOpacity(s.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+s.opacity),s.opacity=void 0));const u=Dr(i=kne(t)).call(i,l=>t[l]!=null);u.push("font"),uc(u,e,s),e.color=jS(e.color)}static parseOptions(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;if(uc(["color","fixed","shadow"],e,t,n),pt.checkMass(t),e.opacity!==void 0&&(pt.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),t.opacity!==void 0&&(pt.checkOpacity(t.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity),t.opacity=void 0)),t.shapeProperties&&!pt.checkCoordinateOrigin(t.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+t.shapeProperties.coordinateOrigin),Hr(e,t,"shadow",i),t.color!==void 0&&t.color!==null){const s=jS(t.color);YH(e.color,s)}else n===!0&&t.color===null&&(e.color=Si(i.color));t.fixed!==void 0&&t.fixed!==null&&(typeof t.fixed=="boolean"?(e.fixed.x=t.fixed,e.fixed.y=t.fixed):(t.fixed.x!==void 0&&typeof t.fixed.x=="boolean"&&(e.fixed.x=t.fixed.x),t.fixed.y!==void 0&&typeof t.fixed.y=="boolean"&&(e.fixed.y=t.fixed.y))),n===!0&&t.font===null&&(e.font=Si(i.font)),pt.updateGroupOptions(e,t,a),t.scaling!==void 0&&Hr(e.scaling,t.scaling,"label",i.scaling)}getFormattingValues(){const e={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?this.chooser===!0?this.selected?(this.options.borderWidthSelected!=null?e.borderWidth=this.options.borderWidthSelected:e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,this.options.opacity!==void 0){const t=this.options.opacity;e.borderColor=Ur(e.borderColor,t),e.color=Ur(e.color,t),e.shadowColor=Ur(e.shadowColor,t)}return e}updateLabelModule(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),pt.updateGroupOptions(this.options,QL(QL({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);const t=this.grouplist.get(this.options.group,!1),n=[e,this.options,t,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateShape(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new die(this.options,this.body,this.labelModule);break;case"circle":this.shape=new hie(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new fie(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new pie(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new gie(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new yie(this.options,this.body,this.labelModule);break;case"dot":this.shape=new mie(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new XL(this.options,this.body,this.labelModule);break;case"icon":this.shape=new bie(this.options,this.body,this.labelModule);break;case"image":this.shape=new wie(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Eie(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new Sie(this.options,this.body,this.labelModule);break;case"star":this.shape=new _ie(this.options,this.body,this.labelModule);break;case"text":this.shape=new Tie(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new xie(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new Pie(this.options,this.body,this.labelModule);break;default:this.shape=new XL(this.options,this.body,this.labelModule);break}this.needsRefresh()}select(){this.selected=!0,this.needsRefresh()}unselect(){this.selected=!1,this.needsRefresh()}needsRefresh(){this.shape.refreshNeeded=!0}getTitle(){return this.options.title}distanceToBorder(e,t){return this.shape.distanceToBorder(e,t)}isFixed(){return this.options.fixed.x&&this.options.fixed.y}isSelected(){return this.selected}getValue(){return this.options.value}getLabelSize(){return this.labelModule.size()}setValueRange(e,t,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,t,n,this.options.value),a=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*a}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}draw(e){const t=this.getFormattingValues();return this.shape.draw(e,this.x,this.y,this.selected,this.hover,t)||{}}updateBoundingBox(e){this.shape.updateBoundingBox(this.x,this.y,e)}resize(e){const t=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,t)}getItemsOnPoint(e){const t=[];return this.labelModule.visible()&&US(this.labelModule.getSize(),e)&&t.push({nodeId:this.id,labelId:0}),US(this.shape.boundingBox,e)&&t.push({nodeId:this.id}),t}isOverlappingWith(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}isBoundingBoxOverlappingWith(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}static checkMass(e,t){if(e.mass!==void 0&&e.mass<=0){let n="";t!==void 0&&(n=" in node id: "+t),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",JH),e.mass=1}}}class Cie{constructor(e,t,n,i){var a;if(this.body=e,this.images=t,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=ae(a=this.create).call(a,this),this.nodesListeners={add:(o,s)=>{this.add(s.items)},update:(o,s)=>{this.update(s.items,s.data,s.oldData)},remove:(o,s)=>{this.remove(s.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(o,s,u,l){if(s===o)return .5;{const c=1/(s-o);return Math.max(0,(l-o)*c)}}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Si(this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e,t;this.body.emitter.on("refreshNodes",ae(e=this.refresh).call(e,this)),this.body.emitter.on("refresh",ae(t=this.refresh).call(t,this)),this.body.emitter.on("destroy",()=>{Ve(this.nodesListeners,(n,i)=>{this.body.data.nodes&&this.body.data.nodes.off(i,n)}),delete this.body.functions.createNode,delete this.nodesListeners.add,delete this.nodesListeners.update,delete this.nodesListeners.remove,delete this.nodesListeners})}setOptions(e){if(e!==void 0){if(pt.parseOptions(this.options,e),e.opacity!==void 0&&(GS(e.opacity)||!sa(e.opacity)||e.opacity<0||e.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity):this.options.opacity=e.opacity),e.shape!==void 0)for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&this.body.nodes[t].updateShape();if(typeof e.font<"u"||typeof e.widthConstraint<"u"||typeof e.heightConstraint<"u")for(const t of _t(this.body.nodes))this.body.nodes[t].updateLabelModule(),this.body.nodes[t].needsRefresh();if(e.size!==void 0)for(const t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&this.body.nodes[t].needsRefresh();(e.hidden!==void 0||e.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.nodes;if(UW("id",e))this.body.data.nodes=e;else if(Tt(e))this.body.data.nodes=new nc,this.body.data.nodes.add(e);else if(!e)this.body.data.nodes=new nc;else throw new TypeError("Array or DataSet expected");if(n&&Ve(this.nodesListeners,function(i,a){n.off(a,i)}),this.body.nodes={},this.body.data.nodes){const i=this;Ve(this.nodesListeners,function(o,s){i.body.data.nodes.on(s,o)});const a=this.body.data.nodes.getIds();this.add(a,!0)}t===!1&&this.body.emitter.emit("_dataChanged")}add(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;const i=[];for(let a=0;a<e.length;a++){n=e[a];const o=this.body.data.nodes.get(n),s=this.create(o);i.push(s),this.body.nodes[n]=s}this.layoutEngine.positionInitially(i),t===!1&&this.body.emitter.emit("_dataChanged")}update(e,t,n){const i=this.body.nodes;let a=!1;for(let o=0;o<e.length;o++){const s=e[o];let u=i[s];const l=t[o];u!==void 0?u.setOptions(l)&&(a=!0):(a=!0,u=this.create(l),i[s]=u)}!a&&n!==void 0&&(a=Mre(t).call(t,function(o,s){const u=n[s];return u&&u.level!==o.level})),a===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}remove(e){const t=this.body.nodes;for(let n=0;n<e.length;n++){const i=e[n];delete t[i]}this.body.emitter.emit("_dataChanged")}create(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt;return new t(e,this.body,this.images,this.groups,this.options,this.defaultOptions)}refresh(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ve(this.body.nodes,(t,n)=>{const i=this.body.data.nodes.get(n);i!==void 0&&(e===!0&&t.setOptions({x:null,y:null}),t.setOptions({fixed:!1}),t.setOptions(i))})}getPositions(e){const t={};if(e!==void 0){if(Tt(e)===!0){for(let n=0;n<e.length;n++)if(this.body.nodes[e[n]]!==void 0){const i=this.body.nodes[e[n]];t[e[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];t[e]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];t[this.body.nodeIndices[n]]={x:Math.round(i.x),y:Math.round(i.y)}}return t}getPosition(e){if(e==null)throw new TypeError("No id was specified for getPosition method.");if(this.body.nodes[e]==null)throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(e));return{x:Math.round(this.body.nodes[e].x),y:Math.round(this.body.nodes[e].y)}}storePositions(){const e=[],t=this.body.data.nodes.getDataSet();for(const n of t.get()){const i=n.id,a=this.body.nodes[i],o=Math.round(a.x),s=Math.round(a.y);(n.x!==o||n.y!==s)&&e.push({id:i,x:o,y:s})}t.update(e)}getBoundingBox(e){if(this.body.nodes[e]!==void 0)return this.body.nodes[e].shape.boundingBox}getConnectedNodes(e,t){const n=[];if(this.body.nodes[e]!==void 0){const i=this.body.nodes[e],a={};for(let o=0;o<i.edges.length;o++){const s=i.edges[o];t!=="to"&&s.toId==i.id?a[s.fromId]===void 0&&(n.push(s.fromId),a[s.fromId]=!0):t!=="from"&&s.fromId==i.id&&a[s.toId]===void 0&&(n.push(s.toId),a[s.toId]=!0)}}return n}getConnectedEdges(e){const t=[];if(this.body.nodes[e]!==void 0){const n=this.body.nodes[e];for(let i=0;i<n.edges.length;i++)t.push(n.edges[i].id)}else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",e);return t}moveNode(e,t,n){this.body.nodes[e]!==void 0?(this.body.nodes[e].x=Number(t),this.body.nodes[e].y=Number(n),Gn(()=>{this.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",e)}}var JL={},ez;function Iie(){if(ez)return JL;ez=1;var r=xe(),e=Math.hypot,t=Math.abs,n=Math.sqrt,i=!!e&&e(1/0,NaN)!==1/0;return r({target:"Math",stat:!0,arity:2,forced:i},{hypot:function(o,s){for(var u=0,l=0,c=arguments.length,d=0,h,f;l<c;)h=t(arguments[l++]),d<h?(f=d/h,u=u*f*f+1,d=h):h>0?(f=h/d,u+=f*f):u+=h;return d===1/0?1/0:d*n(u)}}),JL}var rw,tz;function Oie(){if(tz)return rw;tz=1,Iie();var r=nt();return rw=r.Math.hypot,rw}var nw,rz;function Rie(){if(rz)return nw;rz=1;var r=Oie();return nw=r,nw}var iw,nz;function $ie(){return nz||(nz=1,iw=Rie()),iw}var Die=$ie(),Aie=Ae(Die);class Pt{static transform(e,t){Tt(e)||(e=[e]);const n=t.point.x,i=t.point.y,a=t.angle,o=t.length;for(let s=0;s<e.length;++s){const u=e[s],l=u.x*Math.cos(a)-u.y*Math.sin(a),c=u.x*Math.sin(a)+u.y*Math.cos(a);u.x=n+o*l,u.y=i+o*c}}static drawPath(e,t){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let n=1;n<t.length;++n)e.lineTo(t[n].x,t[n].y);e.closePath()}}let qie=class extends Pt{static draw(e,t){if(t.image){e.save(),e.translate(t.point.x,t.point.y),e.rotate(Math.PI/2+t.angle);const n=t.imageWidth!=null?t.imageWidth:t.image.width,i=t.imageHeight!=null?t.imageHeight:t.image.height;t.image.drawImageAtPosition(e,1,-n/2,0,n,i),e.restore()}return!1}};class kie extends Pt{static draw(e,t){const n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class Mie{static draw(e,t){const n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class Bie{static draw(e,t){const n={x:-.4,y:0};Pt.transform(n,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,a=t.angle-i/2,o=t.angle+i/2;return e.beginPath(),e.arc(n.x,n.y,t.length*.4,a,o,!1),e.stroke(),!0}}class Fie{static draw(e,t){const n={x:-.3,y:0};Pt.transform(n,t),e.strokeStyle=e.fillStyle,e.fillStyle="rgba(0, 0, 0, 0)";const i=Math.PI,a=t.angle+i/2,o=t.angle+3*i/2;return e.beginPath(),e.arc(n.x,n.y,t.length*.4,a,o,!1),e.stroke(),!0}}class Nie{static draw(e,t){const n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class Lie{static draw(e,t){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class zie{static draw(e,t){const n={x:-.4,y:0};return Pt.transform(n,t),Z_(e,n.x,n.y,t.length*.4),!0}}class jie{static draw(e,t){const n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class Vie{static draw(e,t){const n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class Wie{static draw(e,t){const n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class Hie{static draw(e,t){const n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Pt.transform(n,t),Pt.drawPath(e,n),!0}}class y4{static draw(e,t){let n;switch(t.type&&(n=t.type.toLowerCase()),n){case"image":return qie.draw(e,t);case"circle":return zie.draw(e,t);case"box":return Vie.draw(e,t);case"crow":return Mie.draw(e,t);case"curve":return Bie.draw(e,t);case"diamond":return Wie.draw(e,t);case"inv_curve":return Fie.draw(e,t);case"triangle":return Nie.draw(e,t);case"inv_triangle":return Lie.draw(e,t);case"bar":return jie.draw(e,t);case"vee":return Hie.draw(e,t);case"arrow":default:return kie.draw(e,t)}}}function iz(r,e){var t=_t(r);if(Ci){var n=Ci(r);e&&(n=Dr(n).call(n,function(i){return ji(r,i).enumerable})),t.push.apply(t,n)}return t}function az(r){for(var e=1;e<arguments.length;e++){var t,n,i=arguments[e]!=null?arguments[e]:{};e%2?at(t=iz(Object(i),!0)).call(t,function(a){Ln(r,a,i[a])}):Ii?ad(r,Ii(i)):at(n=iz(Object(i))).call(n,function(a){od(r,a,ji(i,a))})}return r}class m4{constructor(e,t,n){Ln(this,"color",{}),Ln(this,"colorDirty",!0),Ln(this,"hoverWidth",1.5),Ln(this,"selectionWidth",2),this._body=t,this._labelModule=n,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}cleanup(){return!1}setOptions(e){this.options=e,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}drawLine(e,t,n,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.getViaNode();e.strokeStyle=this.getColor(e,t),e.lineWidth=t.width,t.dashes!==!1?this._drawDashedLine(e,t,a):this._drawLine(e,t,a)}_drawLine(e,t,n,i,a){if(this.from!=this.to)this._line(e,t,n,i,a);else{const[o,s,u]=this._getCircleData(e);this._circle(e,t,o,s,u)}}_drawDashedLine(e,t,n,i,a){e.lineCap="round";const o=Tt(t.dashes)?t.dashes:[5,5];if(e.setLineDash!==void 0){if(e.save(),e.setLineDash(o),e.lineDashOffset=0,this.from!=this.to)this._line(e,t,n);else{const[s,u,l]=this._getCircleData(e);this._circle(e,t,s,u,l)}e.setLineDash([0]),e.lineDashOffset=0,e.restore()}else{if(this.from!=this.to)nH(e,this.from.x,this.from.y,this.to.x,this.to.y,o);else{const[s,u,l]=this._getCircleData(e);this._circle(e,t,s,u,l)}this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}}findBorderPosition(e,t,n){return this.from!=this.to?this._findBorderPosition(e,t,n):this._findBorderPositionCircle(e,t,n)}findBorderPositions(e){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,e),to:this._findBorderPosition(this.to,e)};{var t;const[n,i]=wn(t=this._getCircleData(e)).call(t,0,2);return{from:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:.6,high:.8,direction:1})}}}_getCircleData(e){const t=this.options.selfReference.size;e!==void 0&&this.from.shape.width===void 0&&this.from.shape.resize(e);const n=p4(e,this.options.selfReference.angle,t,this.from);return[n.x,n.y,t]}_pointOnCircle(e,t,n,i){const a=i*2*Math.PI;return{x:e+n*Math.cos(a),y:t-n*Math.sin(a)}}_findBorderPositionCircle(e,t,n){const i=n.x,a=n.y;let o=n.low,s=n.high;const u=n.direction,l=10,c=this.options.selfReference.size,d=.05;let h,f=(o+s)*.5,v=0;this.options.arrowStrikethrough===!0&&(u===-1?v=this.options.endPointOffset.from:u===1&&(v=this.options.endPointOffset.to));let p=0;do{f=(o+s)*.5,h=this._pointOnCircle(i,a,c,f);const y=Math.atan2(e.y-h.y,e.x-h.x),g=e.distanceToBorder(t,y)+v,m=Math.sqrt(Math.pow(h.x-e.x,2)+Math.pow(h.y-e.y,2)),b=g-m;if(Math.abs(b)<d)break;b>0?u>0?o=f:s=f:u>0?s=f:o=f,++p}while(o<=s&&p<l);return az(az({},h),{},{t:f})}getLineWidth(e,t){return e===!0?Math.max(this.selectionWidth,.3/this._body.view.scale):t===!0?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}getColor(e,t){if(t.inheritsColor!==!1){if(t.inheritsColor==="both"&&this.from.id!==this.to.id){const n=e.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);let i=this.from.options.color.highlight.border,a=this.to.options.color.highlight.border;return this.from.selected===!1&&this.to.selected===!1?(i=Ur(this.from.options.color.border,t.opacity),a=Ur(this.to.options.color.border,t.opacity)):this.from.selected===!0&&this.to.selected===!1?a=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,a),n}return t.inheritsColor==="to"?Ur(this.to.options.color.border,t.opacity):Ur(this.from.options.color.border,t.opacity)}else return Ur(t.color,t.opacity)}_circle(e,t,n,i,a){this.enableShadow(e,t);let o=0,s=Math.PI*2;if(!this.options.selfReference.renderBehindTheNode){const u=this.options.selfReference.angle,l=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:u,high:l,direction:-1}),d=this._findBorderPositionCircle(this.from,e,{x:n,y:i,low:u,high:l,direction:1});o=Math.atan2(c.y-i,c.x-n),s=Math.atan2(d.y-i,d.x-n)}e.beginPath(),e.arc(n,i,a,o,s,!1),e.stroke(),this.disableShadow(e,t)}getDistanceToEdge(e,t,n,i,a,o){if(this.from!=this.to)return this._getDistanceToEdge(e,t,n,i,a,o);{const[s,u,l]=this._getCircleData(void 0),c=s-a,d=u-o;return Math.abs(Math.sqrt(c*c+d*d)-l)}}_getDistanceToLine(e,t,n,i,a,o){const s=n-e,u=i-t,l=s*s+u*u;let c=((a-e)*s+(o-t)*u)/l;c>1?c=1:c<0&&(c=0);const d=e+c*s,h=t+c*u,f=d-a,v=h-o;return Math.sqrt(f*f+v*v)}getArrowData(e,t,n,i,a,o){let s,u,l,c,d,h,f;const v=o.width;t==="from"?(l=this.from,c=this.to,d=o.fromArrowScale<0,h=Math.abs(o.fromArrowScale),f=o.fromArrowType):t==="to"?(l=this.to,c=this.from,d=o.toArrowScale<0,h=Math.abs(o.toArrowScale),f=o.toArrowType):(l=this.to,c=this.from,d=o.middleArrowScale<0,h=Math.abs(o.middleArrowScale),f=o.middleArrowType);const p=15*h+3*v;if(l!=c){const b=Aie(l.x-c.x,l.y-c.y),w=p/b;if(t!=="middle")if(this.options.smooth.enabled===!0){const S=this._findBorderPosition(l,e,{via:n}),T=this.getPoint(S.t+w*(t==="from"?1:-1),n);s=Math.atan2(S.y-T.y,S.x-T.x),u=S}else s=Math.atan2(l.y-c.y,l.x-c.x),u=this._findBorderPosition(l,e);else{const S=(d?-w:w)/2,T=this.getPoint(.5+S,n),_=this.getPoint(.5-S,n);s=Math.atan2(T.y-_.y,T.x-_.x),u=this.getPoint(.5,n)}}else{const[b,w,S]=this._getCircleData(e);if(t==="from"){const T=this.options.selfReference.angle,_=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:b,y:w,low:T,high:_,direction:-1});s=E.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI,u=E}else if(t==="to"){const T=this.options.selfReference.angle,_=this.options.selfReference.angle+Math.PI,E=this._findBorderPositionCircle(this.from,e,{x:b,y:w,low:T,high:_,direction:1});s=E.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI,u=E}else{const T=this.options.selfReference.angle/(2*Math.PI);u=this._pointOnCircle(b,w,S,T),s=T*-2*Math.PI+1.5*Math.PI+.1*Math.PI}}const y=u.x-p*.9*Math.cos(s),g=u.y-p*.9*Math.sin(s);return{point:u,core:{x:y,y:g},angle:s,length:p,type:f}}drawArrowHead(e,t,n,i,a){e.strokeStyle=this.getColor(e,t),e.fillStyle=e.strokeStyle,e.lineWidth=t.width,y4.draw(e,a)&&(this.enableShadow(e,t),Vu(e).call(e),this.disableShadow(e,t))}enableShadow(e,t){t.shadow===!0&&(e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowSize,e.shadowOffsetX=t.shadowX,e.shadowOffsetY=t.shadowY)}disableShadow(e,t){t.shadow===!0&&(e.shadowColor="rgba(0,0,0,0)",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}drawBackground(e,t){if(t.background!==!1){const n={strokeStyle:e.strokeStyle,lineWidth:e.lineWidth,dashes:e.dashes};e.strokeStyle=t.backgroundColor,e.lineWidth=t.backgroundSize,this.setStrokeDashed(e,t.backgroundDashes),e.stroke(),e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.dashes=n.dashes,this.setStrokeDashed(e,t.dashes)}}setStrokeDashed(e,t){if(t!==!1)if(e.setLineDash!==void 0){const n=Tt(t)?t:[5,5];e.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else e.setLineDash!==void 0?e.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}function oz(r,e){var t=_t(r);if(Ci){var n=Ci(r);e&&(n=Dr(n).call(n,function(i){return ji(r,i).enumerable})),t.push.apply(t,n)}return t}function sz(r){for(var e=1;e<arguments.length;e++){var t,n,i=arguments[e]!=null?arguments[e]:{};e%2?at(t=oz(Object(i),!0)).call(t,function(a){Ln(r,a,i[a])}):Ii?ad(r,Ii(i)):at(n=oz(Object(i))).call(n,function(a){od(r,a,ji(i,a))})}return r}class xT extends m4{constructor(e,t,n){super(e,t,n)}_findBorderPositionBezier(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates();const i=10,a=.2;let o=!1,s=1,u=0,l=this.to,c,d,h=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(l=this.from,o=!0,h=this.options.endPointOffset?this.options.endPointOffset.from:0),this.options.arrowStrikethrough===!1&&(h=0);let f=0;do{d=(u+s)*.5,c=this.getPoint(d,n);const v=Math.atan2(l.y-c.y,l.x-c.x),p=l.distanceToBorder(t,v)+h,y=Math.sqrt(Math.pow(c.x-l.x,2)+Math.pow(c.y-l.y,2)),g=p-y;if(Math.abs(g)<a)break;g<0?o===!1?u=d:s=d:o===!1?s=d:u=d,++f}while(u<=s&&f<i);return sz(sz({},c),{},{t:d})}_getDistanceToBezierEdge(e,t,n,i,a,o,s){let u=1e9,l,c,d,h,f,v=e,p=t;for(c=1;c<10;c++)d=.1*c,h=Math.pow(1-d,2)*e+2*d*(1-d)*s.x+Math.pow(d,2)*n,f=Math.pow(1-d,2)*t+2*d*(1-d)*s.y+Math.pow(d,2)*i,c>0&&(l=this._getDistanceToLine(v,p,h,f,a,o),u=l<u?l:u),v=h,p=f;return u}_bezierCurve(e,t,n,i){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),n!=null&&n.x!=null?i!=null&&i.x!=null?e.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(e,t),this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}getViaNode(){return this._getViaCoordinates()}}class uz extends xT{constructor(e,t,n){super(e,t,n),Ln(this,"via",this.via),this._boundFunction=()=>{this.positionBezierNode()},this._body.emitter.on("_repositionBezierNodes",this._boundFunction)}setOptions(e){super.setOptions(e);let t=!1;this.options.physics!==e.physics&&(t=!0),this.options=e,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),t===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}connect(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}cleanup(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}setupSupportNode(){if(this.via===void 0){const e="edgeId:"+this.id,t=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});this._body.nodes[e]=t,this.via=t,this.via.parentEdgeId=this.id,this.positionBezierNode()}}positionBezierNode(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}_line(e,t,n){this._bezierCurve(e,t,n)}_getViaCoordinates(){return this.via}getViaNode(){return this.via}getPoint(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.via;if(this.from===this.to){const[n,i,a]=this._getCircleData(),o=2*Math.PI*(1-e);return{x:n+a*Math.sin(o),y:i+a-a*(1-Math.cos(o))}}else return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*t.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*t.y+Math.pow(e,2)*this.toPoint.y}}_findBorderPosition(e,t){return this._findBorderPositionBezier(e,t,this.via)}_getDistanceToEdge(e,t,n,i,a,o){return this._getDistanceToBezierEdge(e,t,n,i,a,o,this.via)}}class lz extends xT{constructor(e,t,n){super(e,t,n)}_line(e,t,n){this._bezierCurve(e,t,n)}getViaNode(){return this._getViaCoordinates()}_getViaCoordinates(){const e=this.options.smooth.roundness,t=this.options.smooth.type;let n=Math.abs(this.from.x-this.to.x),i=Math.abs(this.from.y-this.to.y);if(t==="discrete"||t==="diagonalCross"){let a,o;n<=i?a=o=e*i:a=o=e*n,this.from.x>this.to.x&&(a=-a),this.from.y>=this.to.y&&(o=-o);let s=this.from.x+a,u=this.from.y+o;return t==="discrete"&&(n<=i?s=n<e*i?this.from.x:s:u=i<e*n?this.from.y:u),{x:s,y:u}}else if(t==="straightCross"){let a=(1-e)*n,o=(1-e)*i;return n<=i?(a=0,this.from.y<this.to.y&&(o=-o)):(this.from.x<this.to.x&&(a=-a),o=0),{x:this.to.x+a,y:this.to.y+o}}else if(t==="horizontal"){let a=(1-e)*n;return this.from.x<this.to.x&&(a=-a),{x:this.to.x+a,y:this.from.y}}else if(t==="vertical"){let a=(1-e)*i;return this.from.y<this.to.y&&(a=-a),{x:this.from.x,y:this.to.y+a}}else if(t==="curvedCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const a=Math.sqrt(n*n+i*i),o=Math.PI,u=(Math.atan2(i,n)+(e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*a*Math.sin(u),y:this.from.y+(e*.5+.5)*a*Math.cos(u)}}else if(t==="curvedCCW"){n=this.to.x-this.from.x,i=this.from.y-this.to.y;const a=Math.sqrt(n*n+i*i),o=Math.PI,u=(Math.atan2(i,n)+(-e*.5+.5)*o)%(2*o);return{x:this.from.x+(e*.5+.5)*a*Math.sin(u),y:this.from.y+(e*.5+.5)*a*Math.cos(u)}}else{let a,o;n<=i?a=o=e*i:a=o=e*n,this.from.x>this.to.x&&(a=-a),this.from.y>=this.to.y&&(o=-o);let s=this.from.x+a,u=this.from.y+o;return n<=i?this.from.x<=this.to.x?s=this.to.x<s?this.to.x:s:s=this.to.x>s?this.to.x:s:this.from.y>=this.to.y?u=this.to.y>u?this.to.y:u:u=this.to.y<u?this.to.y:u,{x:s,y:u}}}_findBorderPosition(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(e,t,n.via)}_getDistanceToEdge(e,t,n,i,a,o){let s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,t,n,i,a,o,s)}getPoint(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const n=e,i=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*t.x+Math.pow(n,2)*this.toPoint.x,a=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*t.y+Math.pow(n,2)*this.toPoint.y;return{x:i,y:a}}}class Gie extends xT{constructor(e,t,n){super(e,t,n)}_getDistanceToBezierEdge2(e,t,n,i,a,o,s,u){let l=1e9,c=e,d=t;const h=[0,0,0,0];for(let f=1;f<10;f++){const v=.1*f;h[0]=Math.pow(1-v,3),h[1]=3*v*Math.pow(1-v,2),h[2]=3*Math.pow(v,2)*(1-v),h[3]=Math.pow(v,3);const p=h[0]*e+h[1]*s.x+h[2]*u.x+h[3]*n,y=h[0]*t+h[1]*s.y+h[2]*u.y+h[3]*i;if(f>0){const g=this._getDistanceToLine(c,d,p,y,a,o);l=g<l?g:l}c=p,d=y}return l}}class cz extends Gie{constructor(e,t,n){super(e,t,n)}_line(e,t,n){const i=n[0],a=n[1];this._bezierCurve(e,t,i,a)}_getViaCoordinates(){const e=this.from.x-this.to.x,t=this.from.y-this.to.y;let n,i,a,o;const s=this.options.smooth.roundness;return(Math.abs(e)>Math.abs(t)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(i=this.from.y,o=this.to.y,n=this.from.x-s*e,a=this.to.x+s*e):(i=this.from.y-s*t,o=this.to.y+s*t,n=this.from.x,a=this.to.x),[{x:n,y:i},{x:a,y:o}]}getViaNode(){return this._getViaCoordinates()}_findBorderPosition(e,t){return this._findBorderPositionBezier(e,t)}_getDistanceToEdge(e,t,n,i,a,o){let[s,u]=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge2(e,t,n,i,a,o,s,u)}getPoint(e){let[t,n]=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates();const i=e,a=[Math.pow(1-i,3),3*i*Math.pow(1-i,2),3*Math.pow(i,2)*(1-i),Math.pow(i,3)],o=a[0]*this.fromPoint.x+a[1]*t.x+a[2]*n.x+a[3]*this.toPoint.x,s=a[0]*this.fromPoint.y+a[1]*t.y+a[2]*n.y+a[3]*this.toPoint.y;return{x:o,y:s}}}class dz extends m4{constructor(e,t,n){super(e,t,n)}_line(e,t){e.beginPath(),e.moveTo(this.fromPoint.x,this.fromPoint.y),e.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(e,t),e.stroke(),this.disableShadow(e,t)}getViaNode(){}getPoint(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}_findBorderPosition(e,t){let n=this.to,i=this.from;e.id===this.from.id&&(n=this.from,i=this.to);const a=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,s=n.y-i.y,u=Math.sqrt(o*o+s*s),l=e.distanceToBorder(t,a),c=(u-l)/u;return{x:(1-c)*i.x+c*n.x,y:(1-c)*i.y+c*n.y,t:0}}_getDistanceToEdge(e,t,n,i,a,o){return this._getDistanceToLine(e,t,n,i,a,o)}}class _i{constructor(e,t,n,i,a){if(t===void 0)throw new Error("No body provided");this.options=Si(i),this.globalOptions=i,this.defaultOptions=a,this.body=t,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new So(this.body,this.options,!0),this.setOptions(e)}setOptions(e){if(!e)return;let t=typeof e.physics<"u"&&this.options.physics!==e.physics||typeof e.hidden<"u"&&(this.options.hidden||!1)!==(e.hidden||!1)||typeof e.from<"u"&&this.options.from!==e.from||typeof e.to<"u"&&this.options.to!==e.to;_i.parseOptions(this.options,e,!0,this.globalOptions),e.id!==void 0&&(this.id=e.id),e.from!==void 0&&(this.fromId=e.from),e.to!==void 0&&(this.toId=e.to),e.title!==void 0&&(this.title=e.title),e.value!==void 0&&(e.value=v4(e.value));const n=[e,this.options,this.defaultOptions];return this.chooser=_T("edge",n),this.updateLabelModule(e),t=this.updateEdgeType()||t,this._setInteractionWidths(),this.connect(),t}static parseOptions(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ds(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],e,t,n),t.endPointOffset!==void 0&&t.endPointOffset.from!==void 0&&(sa(t.endPointOffset.from)?e.endPointOffset.from=t.endPointOffset.from:(e.endPointOffset.from=i.endPointOffset.from!==void 0?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),t.endPointOffset!==void 0&&t.endPointOffset.to!==void 0&&(sa(t.endPointOffset.to)?e.endPointOffset.to=t.endPointOffset.to:(e.endPointOffset.to=i.endPointOffset.to!==void 0?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),cc(t.label)?e.label=t.label:cc(e.label)||(e.label=void 0),Hr(e,t,"smooth",i),Hr(e,t,"shadow",i),Hr(e,t,"background",i),t.dashes!==void 0&&t.dashes!==null?e.dashes=t.dashes:n===!0&&t.dashes===null&&(e.dashes=fa(i.dashes)),t.scaling!==void 0&&t.scaling!==null?(t.scaling.min!==void 0&&(e.scaling.min=t.scaling.min),t.scaling.max!==void 0&&(e.scaling.max=t.scaling.max),Hr(e.scaling,t.scaling,"label",i.scaling)):n===!0&&t.scaling===null&&(e.scaling=fa(i.scaling)),t.arrows!==void 0&&t.arrows!==null)if(typeof t.arrows=="string"){const s=t.arrows.toLowerCase();e.arrows.to.enabled=tt(s).call(s,"to")!=-1,e.arrows.middle.enabled=tt(s).call(s,"middle")!=-1,e.arrows.from.enabled=tt(s).call(s,"from")!=-1}else if(typeof t.arrows=="object")Hr(e.arrows,t.arrows,"to",i.arrows),Hr(e.arrows,t.arrows,"middle",i.arrows),Hr(e.arrows,t.arrows,"from",i.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+ju(t.arrows));else n===!0&&t.arrows===null&&(e.arrows=fa(i.arrows));if(t.color!==void 0&&t.color!==null){const s=wo(t.color)?{color:t.color,highlight:t.color,hover:t.color,inherit:!1,opacity:1}:t.color,u=e.color;if(a)ct(u,i.color,!1,n);else for(const l in u)Object.prototype.hasOwnProperty.call(u,l)&&delete u[l];if(wo(u))u.color=u,u.highlight=u,u.hover=u,u.inherit=!1,s.opacity===void 0&&(u.opacity=1);else{let l=!1;s.color!==void 0&&(u.color=s.color,l=!0),s.highlight!==void 0&&(u.highlight=s.highlight,l=!0),s.hover!==void 0&&(u.hover=s.hover,l=!0),s.inherit!==void 0&&(u.inherit=s.inherit),s.opacity!==void 0&&(u.opacity=Math.min(1,Math.max(0,s.opacity))),l===!0?u.inherit=!1:u.inherit===void 0&&(u.inherit="from")}}else n===!0&&t.color===null&&(e.color=Si(i.color));n===!0&&t.font===null&&(e.font=Si(i.font)),Object.prototype.hasOwnProperty.call(t,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),e.selfReference.size=t.selfReferenceSize)}getFormattingValues(){const e=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,t=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,n=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,i=this.options.color.inherit,a={toArrow:e,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:t,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(this.chooser===!0){if(this.selected){const o=this.options.selectionWidth;typeof o=="function"?a.width=o(a.width):typeof o=="number"&&(a.width+=o),a.width=Math.max(a.width,.3/this.body.view.scale),a.color=this.options.color.highlight,a.shadow=this.options.shadow.enabled}else if(this.hover){const o=this.options.hoverWidth;typeof o=="function"?a.width=o(a.width):typeof o=="number"&&(a.width+=o),a.width=Math.max(a.width,.3/this.body.view.scale),a.color=this.options.color.hover,a.shadow=this.options.shadow.enabled}}else typeof this.chooser=="function"&&(this.chooser(a,this.options.id,this.selected,this.hover),a.color!==void 0&&(a.inheritsColor=!1),a.shadow===!1&&(a.shadowColor!==this.options.shadow.color||a.shadowSize!==this.options.shadow.size||a.shadowX!==this.options.shadow.x||a.shadowY!==this.options.shadow.y)&&(a.shadow=!0));else a.shadow=this.options.shadow.enabled,a.width=Math.max(a.width,.3/this.body.view.scale);return a}updateLabelModule(e){const t=[e,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,t),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}updateEdgeType(){const e=this.options.smooth;let t=!1,n=!0;return this.edgeType!==void 0&&((this.edgeType instanceof uz&&e.enabled===!0&&e.type==="dynamic"||this.edgeType instanceof cz&&e.enabled===!0&&e.type==="cubicBezier"||this.edgeType instanceof lz&&e.enabled===!0&&e.type!=="dynamic"&&e.type!=="cubicBezier"||this.edgeType instanceof dz&&e.type.enabled===!1)&&(n=!1),n===!0&&(t=this.cleanup())),n===!0?e.enabled===!0?e.type==="dynamic"?(t=!0,this.edgeType=new uz(this.options,this.body,this.labelModule)):e.type==="cubicBezier"?this.edgeType=new cz(this.options,this.body,this.labelModule):this.edgeType=new lz(this.options,this.body,this.labelModule):this.edgeType=new dz(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),t}connect(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}disconnect(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}getTitle(){return this.title}isSelected(){return this.selected}getValue(){return this.options.value}setValueRange(e,t,n){if(this.options.value!==void 0){const i=this.options.scaling.customScalingFunction(e,t,n,this.options.value),a=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){const o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*a}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}_setInteractionWidths(){typeof this.options.hoverWidth=="function"?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,typeof this.options.selectionWidth=="function"?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}draw(e){const t=this.getFormattingValues();if(t.hidden)return;const n=this.edgeType.getViaNode();this.edgeType.drawLine(e,t,this.selected,this.hover,n),this.drawLabel(e,n)}drawArrows(e){const t=this.getFormattingValues();if(t.hidden)return;const n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,t.fromArrow&&(i.from=this.edgeType.getArrowData(e,"from",n,this.selected,this.hover,t),t.arrowStrikethrough===!1&&(this.edgeType.fromPoint=i.from.core),t.fromArrowSrc&&(i.from.image=this.imagelist.load(t.fromArrowSrc)),t.fromArrowImageWidth&&(i.from.imageWidth=t.fromArrowImageWidth),t.fromArrowImageHeight&&(i.from.imageHeight=t.fromArrowImageHeight)),t.toArrow&&(i.to=this.edgeType.getArrowData(e,"to",n,this.selected,this.hover,t),t.arrowStrikethrough===!1&&(this.edgeType.toPoint=i.to.core),t.toArrowSrc&&(i.to.image=this.imagelist.load(t.toArrowSrc)),t.toArrowImageWidth&&(i.to.imageWidth=t.toArrowImageWidth),t.toArrowImageHeight&&(i.to.imageHeight=t.toArrowImageHeight)),t.middleArrow&&(i.middle=this.edgeType.getArrowData(e,"middle",n,this.selected,this.hover,t),t.middleArrowSrc&&(i.middle.image=this.imagelist.load(t.middleArrowSrc)),t.middleArrowImageWidth&&(i.middle.imageWidth=t.middleArrowImageWidth),t.middleArrowImageHeight&&(i.middle.imageHeight=t.middleArrowImageHeight)),t.fromArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,i.from),t.middleArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,i.middle),t.toArrow&&this.edgeType.drawArrowHead(e,t,this.selected,this.hover,i.to)}drawLabel(e,t){if(this.options.label!==void 0){const n=this.from,i=this.to;this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(e,this.selected,this.hover);let a;if(n.id!=i.id){this.labelModule.pointToSelf=!1,a=this.edgeType.getPoint(.5,t),e.save();const o=this._getRotation(e);o.angle!=0&&(e.translate(o.x,o.y),e.rotate(o.angle)),this.labelModule.draw(e,a.x,a.y,this.selected,this.hover),e.restore()}else{this.labelModule.pointToSelf=!0;const o=p4(e,this.options.selfReference.angle,this.options.selfReference.size,n);a=this._pointOnCircle(o.x,o.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(e,a.x,a.y,this.selected,this.hover)}}}getItemsOnPoint(e){const t=[];if(this.labelModule.visible()){const i=this._getRotation();US(this.labelModule.getSize(),e,i)&&t.push({edgeId:this.id,labelId:0})}const n={left:e.x,top:e.y};return this.isOverlappingWith(n)&&t.push({edgeId:this.id}),t}isOverlappingWith(e){if(this.connected){const n=this.from.x,i=this.from.y,a=this.to.x,o=this.to.y,s=e.left,u=e.top;return this.edgeType.getDistanceToEdge(n,i,a,o,s,u)<10}else return!1}_getRotation(e){const t=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,t);e!==void 0&&this.labelModule.calculateLabelSize(e,this.selected,this.hover,n.x,n.y);const i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return i;const a=this.from.y-this.to.y,o=this.from.x-this.to.x;let s=Math.atan2(a,o);return(s<-1&&o<0||s>0&&o<0)&&(s+=Math.PI),i.angle=s,i}_pointOnCircle(e,t,n,i){return{x:e+n*Math.cos(i),y:t-n*Math.sin(i)}}select(){this.selected=!0}unselect(){this.selected=!1}cleanup(){return this.edgeType.cleanup()}remove(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}endPointsValid(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}class Uie{constructor(e,t,n){var i;this.body=e,this.images=t,this.groups=n,this.body.functions.createEdge=ae(i=this.create).call(i,this),this.edgesListeners={add:(a,o)=>{this.add(o.items)},update:(a,o)=>{this.update(o.items)},remove:(a,o)=>{this.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,o,s,u){if(o===a)return .5;{const l=1/(o-a);return Math.max(0,(u-a)*l)}}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},ct(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e=this,t,n;this.body.emitter.on("_forceDisableDynamicCurves",function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i==="dynamic"&&(i="continuous");let o=!1;for(const s in e.body.edges)if(Object.prototype.hasOwnProperty.call(e.body.edges,s)){const u=e.body.edges[s],l=e.body.data.edges.get(s);if(l!=null){const c=l.smooth;c!==void 0&&c.enabled===!0&&c.type==="dynamic"&&(i===void 0?u.setOptions({smooth:!1}):u.setOptions({smooth:{type:i}}),o=!0)}}a===!0&&o===!0&&e.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",()=>{this.reconnectEdges()}),this.body.emitter.on("refreshEdges",ae(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",ae(n=this.refresh).call(n,this)),this.body.emitter.on("destroy",()=>{Ve(this.edgesListeners,(i,a)=>{this.body.data.edges&&this.body.data.edges.off(a,i)}),delete this.body.functions.createEdge,delete this.edgesListeners.add,delete this.edgesListeners.update,delete this.edgesListeners.remove,delete this.edgesListeners})}setOptions(e){if(e!==void 0){_i.parseOptions(this.options,e,!0,this.defaultOptions,!0);let t=!1;if(e.smooth!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(t=this.body.edges[n].updateEdgeType()||t);if(e.font!==void 0)for(const n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();(e.hidden!==void 0||e.physics!==void 0||t===!0)&&this.body.emitter.emit("_dataChanged")}}setData(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.data.edges;if(UW("id",e))this.body.data.edges=e;else if(Tt(e))this.body.data.edges=new nc,this.body.data.edges.add(e);else if(!e)this.body.data.edges=new nc;else throw new TypeError("Array or DataSet expected");if(n&&Ve(this.edgesListeners,(i,a)=>{n.off(a,i)}),this.body.edges={},this.body.data.edges){Ve(this.edgesListeners,(a,o)=>{this.body.data.edges.on(o,a)});const i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),t===!1&&this.body.emitter.emit("_dataChanged")}add(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.edges,i=this.body.data.edges;for(let a=0;a<e.length;a++){const o=e[a],s=n[o];s&&s.disconnect();const u=i.get(o,{showInternalIds:!0});n[o]=this.create(u)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),t===!1&&this.body.emitter.emit("_dataChanged")}update(e){const t=this.body.edges,n=this.body.data.edges;let i=!1;for(let a=0;a<e.length;a++){const o=e[a],s=n.get(o),u=t[o];u!==void 0?(u.disconnect(),i=u.setOptions(s)||i,u.connect()):(this.body.edges[o]=this.create(s),i=!0)}i===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}remove(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.length===0)return;const n=this.body.edges;Ve(e,i=>{const a=n[i];a!==void 0&&a.remove()}),t&&this.body.emitter.emit("_dataChanged")}refresh(){Ve(this.body.edges,(e,t)=>{const n=this.body.data.edges.get(t);n!==void 0&&e.setOptions(n)})}create(e){return new _i(e,this.body,this.images,this.options,this.defaultOptions)}reconnectEdges(){let e;const t=this.body.nodes,n=this.body.edges;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(t[e].edges=[]);for(e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];i.from=null,i.to=null,i.connect()}}getConnectedNodes(e){const t=[];if(this.body.edges[e]!==void 0){const n=this.body.edges[e];n.fromId!==void 0&&t.push(n.fromId),n.toId!==void 0&&t.push(n.toId)}return t}_updateState(){this._addMissingEdges(),this._removeInvalidEdges()}_removeInvalidEdges(){const e=[];Ve(this.body.edges,(t,n)=>{const i=this.body.nodes[t.toId],a=this.body.nodes[t.fromId];i!==void 0&&i.isCluster===!0||a!==void 0&&a.isCluster===!0||(i===void 0||a===void 0)&&e.push(n)}),this.remove(e,!1)}_addMissingEdges(){const e=this.body.data.edges;if(e==null)return;const t=this.body.edges,n=[];at(e).call(e,(i,a)=>{t[a]===void 0&&n.push(a)}),this.add(n,!0)}}class b4{constructor(e,t,n){this.body=e,this.physicsBody=t,this.barnesHutTree,this.setOptions(n),this._rng=rd("BARNES HUT SOLVER")}setOptions(e){this.options=e,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}solve(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){let e;const t=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,a=this._formBarnesHutTree(t,n);this.barnesHutTree=a;for(let o=0;o<i;o++)e=t[n[o]],e.options.mass>0&&this._getForceContributions(a.root,e)}}_getForceContributions(e,t){this._getForceContribution(e.children.NW,t),this._getForceContribution(e.children.NE,t),this._getForceContribution(e.children.SW,t),this._getForceContribution(e.children.SE,t)}_getForceContribution(e,t){if(e.childrenCount>0){const n=e.centerOfMass.x-t.x,i=e.centerOfMass.y-t.y,a=Math.sqrt(n*n+i*i);a*e.calcSize>this.thetaInversed?this._calculateForces(a,n,i,t,e):e.childrenCount===4?this._getForceContributions(e,t):e.children.data.id!=t.id&&this._calculateForces(a,n,i,t,e)}}_calculateForces(e,t,n,i,a){e===0&&(e=.1,t=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=this.options.gravitationalConstant*a.mass*i.options.mass/Math.pow(e,3),s=t*o,u=n*o;this.physicsBody.forces[i.id].x+=s,this.physicsBody.forces[i.id].y+=u}_formBarnesHutTree(e,t){let n;const i=t.length;let a=e[t[0]].x,o=e[t[0]].y,s=e[t[0]].x,u=e[t[0]].y;for(let y=1;y<i;y++){const g=e[t[y]],m=g.x,b=g.y;g.options.mass>0&&(m<a&&(a=m),m>s&&(s=m),b<o&&(o=b),b>u&&(u=b))}const l=Math.abs(s-a)-Math.abs(u-o);l>0?(o-=.5*l,u+=.5*l):(a+=.5*l,s-=.5*l);const d=Math.max(1e-5,Math.abs(s-a)),h=.5*d,f=.5*(a+s),v=.5*(o+u),p={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:f-h,maxX:f+h,minY:v-h,maxY:v+h},size:d,calcSize:1/d,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(p.root);for(let y=0;y<i;y++)n=e[t[y]],n.options.mass>0&&this._placeInTree(p.root,n);return p}_updateBranchMass(e,t){const n=e.centerOfMass,i=e.mass+t.options.mass,a=1/i;n.x=n.x*e.mass+t.x*t.options.mass,n.x*=a,n.y=n.y*e.mass+t.y*t.options.mass,n.y*=a,e.mass=i;const o=Math.max(Math.max(t.height,t.radius),t.width);e.maxWidth=e.maxWidth<o?o:e.maxWidth}_placeInTree(e,t,n){(n!=!0||n===void 0)&&this._updateBranchMass(e,t);const i=e.children.NW.range;let a;i.maxX>t.x?i.maxY>t.y?a="NW":a="SW":i.maxY>t.y?a="NE":a="SE",this._placeInRegion(e,t,a)}_placeInRegion(e,t,n){const i=e.children[n];switch(i.childrenCount){case 0:i.children.data=t,i.childrenCount=1,this._updateBranchMass(i,t);break;case 1:i.children.data.x===t.x&&i.children.data.y===t.y?(t.x+=this._rng(),t.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,t));break;case 4:this._placeInTree(i,t);break}}_splitBranch(e){let t=null;e.childrenCount===1&&(t=e.children.data,e.mass=0,e.centerOfMass.x=0,e.centerOfMass.y=0),e.childrenCount=4,e.children.data=null,this._insertRegion(e,"NW"),this._insertRegion(e,"NE"),this._insertRegion(e,"SW"),this._insertRegion(e,"SE"),t!=null&&this._placeInTree(e,t)}_insertRegion(e,t){let n,i,a,o;const s=.5*e.size;switch(t){case"NW":n=e.range.minX,i=e.range.minX+s,a=e.range.minY,o=e.range.minY+s;break;case"NE":n=e.range.minX+s,i=e.range.maxX,a=e.range.minY,o=e.range.minY+s;break;case"SW":n=e.range.minX,i=e.range.minX+s,a=e.range.minY+s,o=e.range.maxY;break;case"SE":n=e.range.minX+s,i=e.range.maxX,a=e.range.minY+s,o=e.range.maxY;break}e.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:a,maxY:o},size:.5*e.size,calcSize:2*e.calcSize,children:{data:null},maxWidth:0,level:e.level+1,childrenCount:0}}_debug(e,t){this.barnesHutTree!==void 0&&(e.lineWidth=1,this._drawBranch(this.barnesHutTree.root,e,t))}_drawBranch(e,t,n){n===void 0&&(n="#FF0000"),e.childrenCount===4&&(this._drawBranch(e.children.NW,t),this._drawBranch(e.children.NE,t),this._drawBranch(e.children.SE,t),this._drawBranch(e.children.SW,t)),t.strokeStyle=n,t.beginPath(),t.moveTo(e.range.minX,e.range.minY),t.lineTo(e.range.maxX,e.range.minY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.minY),t.lineTo(e.range.maxX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.maxX,e.range.maxY),t.lineTo(e.range.minX,e.range.maxY),t.stroke(),t.beginPath(),t.moveTo(e.range.minX,e.range.maxY),t.lineTo(e.range.minX,e.range.minY),t.stroke()}}class Kie{constructor(e,t,n){this._rng=rd("REPULSION SOLVER"),this.body=e,this.physicsBody=t,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,t,n,i,a,o,s,u;const l=this.body.nodes,c=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,h=this.options.nodeDistance,f=-2/3/h,v=4/3;for(let p=0;p<c.length-1;p++){s=l[c[p]];for(let y=p+1;y<c.length;y++)u=l[c[y]],e=u.x-s.x,t=u.y-s.y,n=Math.sqrt(e*e+t*t),n===0&&(n=.1*this._rng(),e=n),n<2*h&&(n<.5*h?o=1:o=f*n+v,o=o/n,i=e*o,a=t*o,d[s.id].x-=i,d[s.id].y-=a,d[u.id].x+=i,d[u.id].y+=a)}}}class Yie{constructor(e,t,n){this.body=e,this.physicsBody=t,this.setOptions(n)}setOptions(e){this.options=e,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}solve(){const e=this.body.nodes,t=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance;for(let a=0;a<t.length-1;a++){const o=e[t[a]];for(let s=a+1;s<t.length;s++){const u=e[t[s]];if(o.level===u.level){const l=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(u.shape.radius||0)/2),c=u.x-o.x,d=u.y-o.y,h=Math.sqrt(c*c+d*d),f=.05;let v;h<l?v=-Math.pow(f*h,2)+Math.pow(f*l,2):v=0,h!==0&&(v=v/h);const p=c*v,y=d*v;n[o.id].x-=p,n[o.id].y-=y,n[u.id].x+=p,n[u.id].y+=y}}}}}class aw{constructor(e,t,n){this.body=e,this.physicsBody=t,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,t;const n=this.physicsBody.physicsEdgeIndices,i=this.body.edges;let a,o,s;for(let u=0;u<n.length;u++)t=i[n[u]],t.connected===!0&&t.toId!==t.fromId&&this.body.nodes[t.toId]!==void 0&&this.body.nodes[t.fromId]!==void 0&&(t.edgeType.via!==void 0?(e=t.options.length===void 0?this.options.springLength:t.options.length,a=t.to,o=t.edgeType.via,s=t.from,this._calculateSpringForce(a,o,.5*e),this._calculateSpringForce(o,s,.5*e)):(e=t.options.length===void 0?this.options.springLength*1.5:t.options.length,this._calculateSpringForce(t.from,t.to,e)))}_calculateSpringForce(e,t,n){const i=e.x-t.x,a=e.y-t.y,o=Math.max(Math.sqrt(i*i+a*a),.01),s=this.options.springConstant*(n-o)/o,u=i*s,l=a*s;this.physicsBody.forces[e.id]!==void 0&&(this.physicsBody.forces[e.id].x+=u,this.physicsBody.forces[e.id].y+=l),this.physicsBody.forces[t.id]!==void 0&&(this.physicsBody.forces[t.id].x-=u,this.physicsBody.forces[t.id].y-=l)}}class Xie{constructor(e,t,n){this.body=e,this.physicsBody=t,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,t,n,i,a,o,s,u;const l=this.body.edges,c=.5,d=this.physicsBody.physicsEdgeIndices,h=this.physicsBody.physicsNodeIndices,f=this.physicsBody.forces;for(let w=0;w<h.length;w++){const S=h[w];f[S].springFx=0,f[S].springFy=0}for(let w=0;w<d.length;w++)t=l[d[w]],t.connected===!0&&(e=t.options.length===void 0?this.options.springLength:t.options.length,n=t.from.x-t.to.x,i=t.from.y-t.to.y,u=Math.sqrt(n*n+i*i),u=u===0?.01:u,s=this.options.springConstant*(e-u)/u,a=n*s,o=i*s,t.to.level!=t.from.level?(f[t.toId]!==void 0&&(f[t.toId].springFx-=a,f[t.toId].springFy-=o),f[t.fromId]!==void 0&&(f[t.fromId].springFx+=a,f[t.fromId].springFy+=o)):(f[t.toId]!==void 0&&(f[t.toId].x-=c*a,f[t.toId].y-=c*o),f[t.fromId]!==void 0&&(f[t.fromId].x+=c*a,f[t.fromId].y+=c*o)));s=1;let v,p;for(let w=0;w<h.length;w++){const S=h[w];v=Math.min(s,Math.max(-s,f[S].springFx)),p=Math.min(s,Math.max(-s,f[S].springFy)),f[S].x+=v,f[S].y+=p}let y=0,g=0;for(let w=0;w<h.length;w++){const S=h[w];y+=f[S].x,g+=f[S].y}const m=y/h.length,b=g/h.length;for(let w=0;w<h.length;w++){const S=h[w];f[S].x-=m,f[S].y-=b}}}class Bl{constructor(e,t,n){this.body=e,this.physicsBody=t,this.setOptions(n)}setOptions(e){this.options=e}solve(){let e,t,n,i;const a=this.body.nodes,o=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces;for(let u=0;u<o.length;u++){const l=o[u];i=a[l],e=-i.x,t=-i.y,n=Math.sqrt(e*e+t*t),this._calculateForces(n,e,t,s,i)}}_calculateForces(e,t,n,i,a){const o=e===0?0:this.options.centralGravity/e;i[a.id].x=t*o,i[a.id].y=n*o}}class Zie extends b4{constructor(e,t,n){super(e,t,n),this._rng=rd("FORCE ATLAS 2 BASED REPULSION SOLVER")}_calculateForces(e,t,n,i,a){e===0&&(e=.1*this._rng(),t=e),this.overlapAvoidanceFactor<1&&i.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,e-i.shape.radius));const o=i.edges.length+1,s=this.options.gravitationalConstant*a.mass*i.options.mass*o/Math.pow(e,2),u=t*s,l=n*s;this.physicsBody.forces[i.id].x+=u,this.physicsBody.forces[i.id].y+=l}}class Qie extends Bl{constructor(e,t,n){super(e,t,n)}_calculateForces(e,t,n,i,a){if(e>0){const o=a.edges.length+1,s=this.options.centralGravity*o*a.options.mass;i[a.id].x=t*s,i[a.id].y=n*s}}}class Jie{constructor(e){this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},At(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("initPhysics",()=>{this.initPhysics()}),this.body.emitter.on("_layoutFailed",()=>{this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",()=>{this.stopSimulation(),this.ready=!1}),this.body.emitter.on("disablePhysics",()=>{this.physicsEnabled=!1,this.stopSimulation()}),this.body.emitter.on("restorePhysics",()=>{this.setOptions(this.options),this.ready===!0&&this.startSimulation()}),this.body.emitter.on("startSimulation",()=>{this.ready===!0&&this.startSimulation()}),this.body.emitter.on("stopSimulation",()=>{this.stopSimulation()}),this.body.emitter.on("destroy",()=>{this.stopSimulation(!1),this.body.emitter.off()}),this.body.emitter.on("_dataChanged",()=>{this.updatePhysicsData()})}setOptions(e){if(e!==void 0)if(e===!1)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(e===!0)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,uc(["stabilization"],this.options,e),Hr(this.options,e,"stabilization"),e.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation());const t=this.options.wind;t&&((typeof t.x!="number"||GS(t.x))&&(t.x=0),(typeof t.y!="number"||GS(t.y))&&(t.y=0)),this.timestep=this.options.timestep}this.init()}init(){let e;this.options.solver==="forceAtlas2Based"?(e=this.options.forceAtlas2Based,this.nodesSolver=new Zie(this.body,this.physicsBody,e),this.edgesSolver=new aw(this.body,this.physicsBody,e),this.gravitySolver=new Qie(this.body,this.physicsBody,e)):this.options.solver==="repulsion"?(e=this.options.repulsion,this.nodesSolver=new Kie(this.body,this.physicsBody,e),this.edgesSolver=new aw(this.body,this.physicsBody,e),this.gravitySolver=new Bl(this.body,this.physicsBody,e)):this.options.solver==="hierarchicalRepulsion"?(e=this.options.hierarchicalRepulsion,this.nodesSolver=new Yie(this.body,this.physicsBody,e),this.edgesSolver=new Xie(this.body,this.physicsBody,e),this.gravitySolver=new Bl(this.body,this.physicsBody,e)):(e=this.options.barnesHut,this.nodesSolver=new b4(this.body,this.physicsBody,e),this.edgesSolver=new aw(this.body,this.physicsBody,e),this.gravitySolver=new Bl(this.body,this.physicsBody,e)),this.modelOptions=e}initPhysics(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}startSimulation(){if(this.physicsEnabled===!0&&this.options.enabled===!0){if(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0){var e;this.viewFunction=ae(e=this.simulationStep).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}else this.body.emitter.emit("_redraw")}stopSimulation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.stabilized=!0,e===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,e===!0&&this.body.emitter.emit("_stopRendering"))}simulationStep(){const e=ic();this.physicsTick(),(ic()-e<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}_emitStabilized(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||this.startedStabilization===!0)&&Gn(()=>{this.body.emitter.emit("stabilized",{iterations:e}),this.startedStabilization=!1,this.stabilizationIterations=0},0)}physicsStep(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}adjustTimeStep(){this._evaluateStepQuality()===!0?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}physicsTick(){this._startStabilizing(),this.stabilized!==!0&&(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0?(this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),this.stabilized===!0&&this.revert(),this.stabilizationIterations++)}updatePhysicsData(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];const e=this.body.nodes,t=this.body.edges;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(e[n].id);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&t[n].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(t[n].id);for(let n=0;n<this.physicsBody.physicsNodeIndices.length;n++){const i=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[i]={x:0,y:0},this.physicsBody.velocities[i]===void 0&&(this.physicsBody.velocities[i]={x:0,y:0})}for(const n in this.physicsBody.velocities)e[n]===void 0&&delete this.physicsBody.velocities[n]}revert(){const e=_t(this.previousStates),t=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(let i=0;i<e.length;i++){const a=e[i];t[a]!==void 0?t[a].options.physics===!0&&(this.referenceState[a]={positions:{x:t[a].x,y:t[a].y}},n[a].x=this.previousStates[a].vx,n[a].y=this.previousStates[a].vy,t[a].x=this.previousStates[a].x,t[a].y=this.previousStates[a].y):delete this.previousStates[a]}}_evaluateStepQuality(){let e,t,n;const i=this.body.nodes,a=this.referenceState,o=.3;for(const s in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,s)&&i[s]!==void 0&&(e=i[s].x-a[s].positions.x,t=i[s].y-a[s].positions.y,n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),n>o))return!1;return!0}moveNodes(){const e=this.physicsBody.physicsNodeIndices;let t=0,n=0;const i=5;for(let a=0;a<e.length;a++){const o=e[a],s=this._performStep(o);t=Math.max(t,s),n+=s}this.adaptiveTimestepEnabled=n/e.length<i,this.stabilized=t<this.options.minVelocity}calculateComponentVelocity(e,t,n){const i=this.modelOptions.damping*e,a=(t-i)/n;e+=a*this.timestep;const o=this.options.maxVelocity||1e9;return Math.abs(e)>o&&(e=e>0?o:-o),e}_performStep(e){const t=this.body.nodes[e],n=this.physicsBody.forces[e];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);const i=this.physicsBody.velocities[e];return this.previousStates[e]={x:t.x,y:t.y,vx:i.x,vy:i.y},t.options.fixed.x===!1?(i.x=this.calculateComponentVelocity(i.x,n.x,t.options.mass),t.x+=i.x*this.timestep):(n.x=0,i.x=0),t.options.fixed.y===!1?(i.y=this.calculateComponentVelocity(i.y,n.y,t.options.mass),t.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}_freezeNodes(){const e=this.body.nodes;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t].x&&e[t].y){const n=e[t].options.fixed;this.freezeCache[t]={x:n.x,y:n.y},n.x=!0,n.y=!0}}_restoreFrozenNodes(){const e=this.body.nodes;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.freezeCache[t]!==void 0&&(e[t].options.fixed.x=this.freezeCache[t].x,e[t].options.fixed.y=this.freezeCache[t].y);this.freezeCache={}}stabilize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;if(typeof e!="number"&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),this.physicsBody.physicsNodeIndices.length===0){this.ready=!0;return}this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,Gn(()=>this._stabilizationBatch(),0)}_startStabilizing(){return this.startedStabilization===!0?!1:(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}_stabilizationBatch(){const e=()=>this.stabilized===!1&&this.stabilizationIterations<this.targetIterations,t=()=>{this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations})};this._startStabilizing()&&t();let n=0;for(;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;if(t(),e()){var i;Gn(ae(i=this._stabilizationBatch).call(i,this),0)}else this._finalizeStabilization()}_finalizeStabilization(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}_drawForces(e){for(let t=0;t<this.physicsBody.physicsNodeIndices.length;t++){const n=this.physicsBody.physicsNodeIndices[t],i=this.body.nodes[n],a=this.physicsBody.forces[n],o=20,s=.03,u=Math.sqrt(Math.pow(a.x,2)+Math.pow(a.x,2)),l=Math.min(Math.max(5,u),15),c=3*l,d=VS((180-Math.min(1,Math.max(0,s*u))*180)/360,1,1),h={x:i.x+o*a.x,y:i.y+o*a.y};e.lineWidth=l,e.strokeStyle=d,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(h.x,h.y),e.stroke();const f=Math.atan2(a.y,a.x);e.fillStyle=d,y4.draw(e,{type:"arrow",point:h,angle:f,length:c}),Vu(e).call(e)}}}const ar=[];for(let r=0;r<256;++r)ar.push((r+256).toString(16).slice(1));function eae(r,e=0){return(ar[r[e+0]]+ar[r[e+1]]+ar[r[e+2]]+ar[r[e+3]]+"-"+ar[r[e+4]]+ar[r[e+5]]+"-"+ar[r[e+6]]+ar[r[e+7]]+"-"+ar[r[e+8]]+ar[r[e+9]]+"-"+ar[r[e+10]]+ar[r[e+11]]+ar[r[e+12]]+ar[r[e+13]]+ar[r[e+14]]+ar[r[e+15]]).toLowerCase()}let ow;const tae=new Uint8Array(16);function rae(){if(!ow){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ow=crypto.getRandomValues.bind(crypto)}return ow(tae)}const nae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var hz={randomUUID:nae};function iae(r,e,t){r=r||{};const n=r.random??r.rng?.()??rae();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,eae(n)}function js(r,e,t){return hz.randomUUID&&!r?hz.randomUUID():iae(r)}class wr{constructor(){}static getRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,a=1e9,o=-1e9,s;if(t.length>0)for(let u=0;u<t.length;u++)s=e[t[u]],a>s.shape.boundingBox.left&&(a=s.shape.boundingBox.left),o<s.shape.boundingBox.right&&(o=s.shape.boundingBox.right),n>s.shape.boundingBox.top&&(n=s.shape.boundingBox.top),i<s.shape.boundingBox.bottom&&(i=s.shape.boundingBox.bottom);return a===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,a=0,o=0),{minX:a,maxX:o,minY:n,maxY:i}}static getRangeCore(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=1e9,i=-1e9,a=1e9,o=-1e9,s;if(t.length>0)for(let u=0;u<t.length;u++)s=e[t[u]],a>s.x&&(a=s.x),o<s.x&&(o=s.x),n>s.y&&(n=s.y),i<s.y&&(i=s.y);return a===1e9&&o===-1e9&&n===1e9&&i===-1e9&&(n=0,i=0,a=0,o=0),{minX:a,maxX:o,minY:n,maxY:i}}static findCenter(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}static cloneOptions(e,t){const n={};return t===void 0||t==="node"?(ct(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):ct(n,e.options,!0),n}}class aae extends pt{constructor(e,t,n,i,a,o){super(e,t,n,i,a,o),this.isCluster=!0,this.containedNodes={},this.containedEdges={}}_openChildCluster(e){const t=this.body.nodes[e];if(this.containedNodes[e]===void 0)throw new Error("node with id: "+e+" not in current cluster");if(!t.isCluster)throw new Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e],Ve(t.edges,n=>{delete this.containedEdges[n.id]}),Ve(t.containedNodes,(n,i)=>{this.containedNodes[i]=n}),t.containedNodes={},Ve(t.containedEdges,(n,i)=>{this.containedEdges[i]=n}),t.containedEdges={},Ve(t.edges,n=>{Ve(this.edges,i=>{var a,o;const s=tt(a=i.clusteringEdgeReplacingIds).call(a,n.id);s!==-1&&(Ve(n.clusteringEdgeReplacingIds,u=>{i.clusteringEdgeReplacingIds.push(u),this.body.edges[u].edgeReplacedById=i.id}),Hn(o=i.clusteringEdgeReplacingIds).call(o,s,1))})}),t.edges=[]}}class oae{constructor(e){this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},At(this.options,this.defaultOptions),this.body.emitter.on("_resetData",()=>{this.clusteredNodes={},this.clusteredEdges={}})}clusterByHubsize(e,t){e===void 0?e=this._getHubSize():typeof e=="object"&&(t=this._checkOptions(e),e=this._getHubSize());const n=[];for(let i=0;i<this.body.nodeIndices.length;i++){const a=this.body.nodes[this.body.nodeIndices[i]];a.edges.length>=e&&n.push(a.id)}for(let i=0;i<n.length;i++)this.clusterByConnection(n[i],t,!0);this.body.emitter.emit("_dataChanged")}cluster(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);const n={},i={};Ve(this.body.nodes,(a,o)=>{a.options&&e.joinCondition(a.options)===!0&&(n[o]=a,Ve(a.edges,s=>{this.clusteredEdges[s.id]===void 0&&(i[s.id]=s)}))}),this._cluster(n,i,e,t)}clusterByEdgeCount(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;t=this._checkOptions(t);const i=[],a={};let o,s,u;for(let l=0;l<this.body.nodeIndices.length;l++){const c={},d={},h=this.body.nodeIndices[l],f=this.body.nodes[h];if(a[h]===void 0){u=0,s=[];for(let v=0;v<f.edges.length;v++)o=f.edges[v],this.clusteredEdges[o.id]===void 0&&(o.toId!==o.fromId&&u++,s.push(o));if(u===e){const v=function(y){if(t.joinCondition===void 0||t.joinCondition===null)return!0;const g=wr.cloneOptions(y);return t.joinCondition(g)};let p=!0;for(let y=0;y<s.length;y++){o=s[y];const g=this._getConnectedId(o,h);if(v(f))d[o.id]=o,c[h]=f,c[g]=this.body.nodes[g],a[h]=!0;else{p=!1;break}}if(_t(c).length>0&&_t(d).length>0&&p===!0){const g=function(){for(let m=0;m<i.length;++m)for(const b in c)if(i[m].nodes[b]!==void 0)return i[m]}();if(g!==void 0){for(const m in c)g.nodes[m]===void 0&&(g.nodes[m]=c[m]);for(const m in d)g.edges[m]===void 0&&(g.edges[m]=d[m])}else i.push({nodes:c,edges:d})}}}}for(let l=0;l<i.length;l++)this._cluster(i[l].nodes,i[l].edges,t,!1);n===!0&&this.body.emitter.emit("_dataChanged")}clusterOutliers(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(1,e,t)}clusterBridges(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.clusterByEdgeCount(2,e,t)}clusterByConnection(e,t){var n;let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[e]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");const a=this.body.nodes[e];t=this._checkOptions(t,a),t.clusterNodeProperties.x===void 0&&(t.clusterNodeProperties.x=a.x),t.clusterNodeProperties.y===void 0&&(t.clusterNodeProperties.y=a.y),t.clusterNodeProperties.fixed===void 0&&(t.clusterNodeProperties.fixed={},t.clusterNodeProperties.fixed.x=a.options.fixed.x,t.clusterNodeProperties.fixed.y=a.options.fixed.y);const o={},s={},u=a.id,l=wr.cloneOptions(a);o[u]=a;for(let d=0;d<a.edges.length;d++){const h=a.edges[d];if(this.clusteredEdges[h.id]===void 0){const f=this._getConnectedId(h,u);if(this.clusteredNodes[f]===void 0)if(f!==u)if(t.joinCondition===void 0)s[h.id]=h,o[f]=this.body.nodes[f];else{const v=wr.cloneOptions(this.body.nodes[f]);t.joinCondition(l,v)===!0&&(s[h.id]=h,o[f]=this.body.nodes[f])}else s[h.id]=h}}const c=$o(n=_t(o)).call(n,function(d){return o[d].id});for(const d in o){if(!Object.prototype.hasOwnProperty.call(o,d))continue;const h=o[d];for(let f=0;f<h.edges.length;f++){const v=h.edges[f];tt(c).call(c,this._getConnectedId(v,h.id))>-1&&(s[v.id]=v)}}this._cluster(o,s,t,i)}_createClusterEdges(e,t,n,i){let a,o,s,u,l,c;const d=_t(e),h=[];for(let p=0;p<d.length;p++){o=d[p],s=e[o];for(let y=0;y<s.edges.length;y++)a=s.edges[y],this.clusteredEdges[a.id]===void 0&&(a.toId==a.fromId?t[a.id]=a:a.toId==o?(u=n.id,l=a.fromId,c=l):(u=a.toId,l=n.id,c=u),e[c]===void 0&&h.push({edge:a,fromId:l,toId:u}))}const f=[],v=function(p){for(let y=0;y<f.length;y++){const g=f[y],m=p.fromId===g.fromId&&p.toId===g.toId,b=p.fromId===g.toId&&p.toId===g.fromId;if(m||b)return g}return null};for(let p=0;p<h.length;p++){const y=h[p],g=y.edge;let m=v(y);m===null?(m=this._createClusteredEdge(y.fromId,y.toId,g,i),f.push(m)):m.clusteringEdgeReplacingIds.push(g.id),this.body.edges[g.id].edgeReplacedById=m.id,this._backupEdgeOptions(g),g.setOptions({physics:!1})}}_checkOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.clusterEdgeProperties===void 0&&(e.clusterEdgeProperties={}),e.clusterNodeProperties===void 0&&(e.clusterNodeProperties={}),e}_cluster(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const a=[];for(const c in e)Object.prototype.hasOwnProperty.call(e,c)&&this.clusteredNodes[c]!==void 0&&a.push(c);for(let c=0;c<a.length;++c)delete e[a[c]];if(_t(e).length==0||_t(e).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=!0)return;let o=ct({},n.clusterNodeProperties);if(n.processProperties!==void 0){const c=[];for(const h in e)if(Object.prototype.hasOwnProperty.call(e,h)){const f=wr.cloneOptions(e[h]);c.push(f)}const d=[];for(const h in t)if(Object.prototype.hasOwnProperty.call(t,h)&&h.substr(0,12)!=="clusterEdge:"){const f=wr.cloneOptions(t[h],"edge");d.push(f)}if(o=n.processProperties(o,c,d),!o)throw new Error("The processProperties function does not return properties!")}o.id===void 0&&(o.id="cluster:"+js());const s=o.id;o.label===void 0&&(o.label="cluster");let u;o.x===void 0&&(u=this._getClusterPosition(e),o.x=u.x),o.y===void 0&&(u===void 0&&(u=this._getClusterPosition(e)),o.y=u.y),o.id=s;const l=this.body.functions.createNode(o,aae);l.containedNodes=e,l.containedEdges=t,l.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[o.id]=l,this._clusterEdges(e,t,o,n.clusterEdgeProperties),o.id=void 0,i===!0&&this.body.emitter.emit("_dataChanged")}_backupEdgeOptions(e){this.clusteredEdges[e.id]===void 0&&(this.clusteredEdges[e.id]={physics:e.options.physics})}_restoreEdge(e){const t=this.clusteredEdges[e.id];t!==void 0&&(e.setOptions({physics:t.physics}),delete this.clusteredEdges[e.id])}isCluster(e){return this.body.nodes[e]!==void 0?this.body.nodes[e].isCluster===!0:(console.error("Node does not exist."),!1)}_getClusterPosition(e){const t=_t(e);let n=e[t[0]].x,i=e[t[0]].x,a=e[t[0]].y,o=e[t[0]].y,s;for(let u=1;u<t.length;u++)s=e[t[u]],n=s.x<n?s.x:n,i=s.x>i?s.x:i,a=s.y<a?s.y:a,o=s.y>o?s.y:o;return{x:.5*(n+i),y:.5*(a+o)}}openCluster(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0)throw new Error("No clusterNodeId supplied to openCluster.");const i=this.body.nodes[e];if(i===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(i.isCluster!==!0||i.containedNodes===void 0||i.containedEdges===void 0)throw new Error("The node:"+e+" is not a valid cluster.");const a=this.findNode(e),o=tt(a).call(a,e)-1;if(o>=0){const c=a[o];this.body.nodes[c]._openChildCluster(e),delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged");return}const s=i.containedNodes,u=i.containedEdges;if(t!==void 0&&t.releaseFunction!==void 0&&typeof t.releaseFunction=="function"){const c={},d={x:i.x,y:i.y};for(const f in s)if(Object.prototype.hasOwnProperty.call(s,f)){const v=this.body.nodes[f];c[f]={x:v.x,y:v.y}}const h=t.releaseFunction(d,c);for(const f in s)if(Object.prototype.hasOwnProperty.call(s,f)){const v=this.body.nodes[f];h[f]!==void 0&&(v.x=h[f].x===void 0?i.x:h[f].x,v.y=h[f].y===void 0?i.y:h[f].y)}}else Ve(s,function(c){c.options.fixed.x===!1&&(c.x=i.x),c.options.fixed.y===!1&&(c.y=i.y)});for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=this.body.nodes[c];d.vx=i.vx,d.vy=i.vy,d.setOptions({physics:!0}),delete this.clusteredNodes[c]}const l=[];for(let c=0;c<i.edges.length;c++)l.push(i.edges[c]);for(let c=0;c<l.length;c++){const d=l[c],h=this._getConnectedId(d,e),f=this.clusteredNodes[h];for(let v=0;v<d.clusteringEdgeReplacingIds.length;v++){const p=d.clusteringEdgeReplacingIds[v],y=this.body.edges[p];if(y!==void 0)if(f!==void 0){const g=this.body.nodes[f.clusterId];g.containedEdges[y.id]=y,delete u[y.id];let m=y.fromId,b=y.toId;y.toId==h?b=f.clusterId:m=f.clusterId,this._createClusteredEdge(m,b,y,g.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(y)}d.remove()}for(const c in u)Object.prototype.hasOwnProperty.call(u,c)&&this._restoreEdge(u[c]);delete this.body.nodes[e],n===!0&&this.body.emitter.emit("_dataChanged")}getNodesInCluster(e){const t=[];if(this.isCluster(e)===!0){const n=this.body.nodes[e].containedNodes;for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(this.body.nodes[i].id)}return t}findNode(e){const t=[];let i=0,a;for(;this.clusteredNodes[e]!==void 0&&i<100;){if(a=this.body.nodes[e],a===void 0)return[];t.push(a.id),e=this.clusteredNodes[e].clusterId,i++}return a=this.body.nodes[e],a===void 0?[]:(t.push(a.id),ha(t).call(t),t)}updateClusteredNode(e,t){if(e===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(t===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[e]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[e].setOptions(t),this.body.emitter.emit("_dataChanged")}updateEdge(e,t){if(e===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(t===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[e]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");const n=this.getClusteredEdges(e);for(let i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(t);this.body.emitter.emit("_dataChanged")}getClusteredEdges(e){const t=[];let i=0;for(;e!==void 0&&this.body.edges[e]!==void 0&&i<100;)t.push(this.body.edges[e].id),e=this.body.edges[e].edgeReplacedById,i++;return ha(t).call(t),t}getBaseEdge(e){return this.getBaseEdges(e)[0]}getBaseEdges(e){const t=[e],n=[],i=[],a=100;let o=0;for(;t.length>0&&o<a;){const s=t.pop();if(s===void 0)continue;const u=this.body.edges[s];if(u===void 0)continue;o++;const l=u.clusteringEdgeReplacingIds;if(l===void 0)i.push(s);else for(let c=0;c<l.length;++c){const d=l[c];tt(t).call(t,l)!==-1||tt(n).call(n,l)!==-1||t.push(d)}n.push(s)}return i}_getConnectedId(e,t){return e.toId!=t?e.toId:(e.fromId!=t,e.fromId)}_getHubSize(){let e=0,t=0,n=0,i=0;for(let u=0;u<this.body.nodeIndices.length;u++){const l=this.body.nodes[this.body.nodeIndices[u]];l.edges.length>i&&(i=l.edges.length),e+=l.edges.length,t+=Math.pow(l.edges.length,2),n+=1}e=e/n,t=t/n;const a=t-Math.pow(e,2),o=Math.sqrt(a);let s=Math.floor(e+2*o);return s>i&&(s=i),s}_createClusteredEdge(e,t,n,i,a){const o=wr.cloneOptions(n,"edge");ct(o,i),o.from=e,o.to=t,o.id="clusterEdge:"+js(),a!==void 0&&ct(o,a);const s=this.body.functions.createEdge(o);return s.clusteringEdgeReplacingIds=[n.id],s.connect(),this.body.edges[s.id]=s,s}_clusterEdges(e,t,n,i){if(t instanceof _i){const a=t,o={};o[a.id]=a,t=o}if(e instanceof pt){const a=e,o={};o[a.id]=a,e=o}if(n==null)throw new Error("_clusterEdges: parameter clusterNode required");i===void 0&&(i=n.clusterEdgeProperties),this._createClusterEdges(e,t,n,i);for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&this.body.edges[a]!==void 0){const o=this.body.edges[a];this._backupEdgeOptions(o),o.setOptions({physics:!1})}for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(this.clusteredNodes[a]={clusterId:n.id,node:this.body.nodes[a]},this.body.nodes[a].setOptions({physics:!1}))}_getClusterNodeForNode(e){if(e===void 0)return;const t=this.clusteredNodes[e];if(t===void 0)return;const n=t.clusterId;if(n!==void 0)return this.body.nodes[n]}_filter(e,t){const n=[];return Ve(e,i=>{t(i)&&n.push(i)}),n}_updateState(){let e;const t=[],n={},i=u=>{Ve(this.body.nodes,l=>{l.isCluster===!0&&u(l)})};for(e in this.clusteredNodes){if(!Object.prototype.hasOwnProperty.call(this.clusteredNodes,e))continue;this.body.nodes[e]===void 0&&t.push(e)}i(function(u){for(let l=0;l<t.length;l++)delete u.containedNodes[t[l]]});for(let u=0;u<t.length;u++)delete this.clusteredNodes[t[u]];Ve(this.clusteredEdges,u=>{const l=this.body.edges[u];(l===void 0||!l.endPointsValid())&&(n[u]=u)}),i(function(u){Ve(u.containedEdges,(l,c)=>{!l.endPointsValid()&&!n[c]&&(n[c]=c)})}),Ve(this.body.edges,(u,l)=>{let c=!0;const d=u.clusteringEdgeReplacingIds;if(d!==void 0){let h=0;Ve(d,f=>{const v=this.body.edges[f];v!==void 0&&v.endPointsValid()&&(h+=1)}),c=h>0}(!u.endPointsValid()||!c)&&(n[l]=l)}),i(u=>{Ve(n,l=>{delete u.containedEdges[l],Ve(u.edges,(c,d)=>{if(c.id===l){u.edges[d]=null;return}c.clusteringEdgeReplacingIds=this._filter(c.clusteringEdgeReplacingIds,function(h){return!n[h]})}),u.edges=this._filter(u.edges,function(c){return c!==null})})}),Ve(n,u=>{delete this.clusteredEdges[u]}),Ve(n,u=>{delete this.body.edges[u]});const a=_t(this.body.edges);Ve(a,u=>{const l=this.body.edges[u],c=this._isClusteredNode(l.fromId)||this._isClusteredNode(l.toId);if(c!==this._isClusteredEdge(l.id))if(c){const d=this._getClusterNodeForNode(l.fromId);d!==void 0&&this._clusterEdges(this.body.nodes[l.fromId],l,d);const h=this._getClusterNodeForNode(l.toId);h!==void 0&&this._clusterEdges(this.body.nodes[l.toId],l,h)}else delete this._clusterEdges[u],this._restoreEdge(l)});let o=!1,s=!0;for(;s;){const u=[];i(function(l){const c=_t(l.containedNodes).length,d=l.options.allowSingleNodeCluster===!0;(d&&c<1||!d&&c<2)&&u.push(l.id)});for(let l=0;l<u.length;++l)this.openCluster(u[l],{},!1);s=u.length>0,o=o||s}o&&this._updateState()}_isClusteredNode(e){return this.clusteredNodes[e]!==void 0}_isClusteredEdge(e){return this.clusteredEdges[e]!==void 0}}let sae=class{constructor(e,t){this.body=e,this.canvas=t,this.redrawRequested=!1,this.requestAnimationFrameRequestId=void 0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},At(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.on("dragStart",()=>{this.dragging=!0}),this.body.emitter.on("dragEnd",()=>{this.dragging=!1}),this.body.emitter.on("zoom",()=>{this.zooming=!0,window.clearTimeout(this.zoomTimeoutId),this.zoomTimeoutId=Gn(()=>{var t;this.zooming=!1,ae(t=this._requestRedraw).call(t,this)()},250)}),this.body.emitter.on("_resizeNodes",()=>{this._resizeNodes()}),this.body.emitter.on("_redraw",()=>{this.renderingActive===!1&&this._redraw()}),this.body.emitter.on("_blockRedraw",()=>{this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",()=>{this.allowRedraw=!0,this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",ae(e=this._requestRedraw).call(e,this)),this.body.emitter.on("_startRendering",()=>{this.renderRequests+=1,this.renderingActive=!0,this._startRendering()}),this.body.emitter.on("_stopRendering",()=>{this.renderRequests-=1,this.renderingActive=this.renderRequests>0,this.requestAnimationFrameRequestId=void 0}),this.body.emitter.on("destroy",()=>{this.renderRequests=0,this.allowRedraw=!1,this.renderingActive=!1,window.cancelAnimationFrame(this.requestAnimationFrameRequestId),this.body.emitter.off()})}setOptions(e){e!==void 0&&ds(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}_startRendering(){if(this.renderingActive===!0&&this.requestAnimationFrameRequestId===void 0){var e;this.requestAnimationFrameRequestId=window.requestAnimationFrame(ae(e=this._renderStep).call(e,this),this.simulationInterval)}}_renderStep(){this.renderingActive===!0&&(this.requestAnimationFrameRequestId=void 0,this._startRendering(),this._redraw())}redraw(){this.body.emitter.emit("setSize"),this._redraw()}_requestRedraw(){this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,window.requestAnimationFrame(()=>{this._redraw(!1)}))}_redraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;const t={drawExternalLabels:null};(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();const n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,a=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,a),this.canvas.frame.clientWidth===0)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(n),this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1){const{drawExternalLabels:o}=this._drawNodes(n,e);t.drawExternalLabels=o}e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawArrows(n),t.drawExternalLabels!=null&&t.drawExternalLabels(),e===!1&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),e===!0&&n.clearRect(0,0,i,a)}}_resizeNodes(){this.canvas.setTransform();const e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);const t=this.body.nodes;let n;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n=t[i],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}_drawNodes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.body.nodes,i=this.body.nodeIndices;let a;const o=[],s=[],u=20,l=this.canvas.DOMtoCanvas({x:-u,y:-u}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+u,y:this.canvas.frame.canvas.clientHeight+u}),d={top:l.y,left:l.x,bottom:c.y,right:c.x},h=[];for(let y=0;y<i.length;y++)if(a=n[i[y]],a.hover)s.push(i[y]);else if(a.isSelected())o.push(i[y]);else if(t===!0){const g=a.draw(e);g.drawExternalLabel!=null&&h.push(g.drawExternalLabel)}else if(a.isBoundingBoxOverlappingWith(d)===!0){const g=a.draw(e);g.drawExternalLabel!=null&&h.push(g.drawExternalLabel)}else a.updateBoundingBox(e,a.selected);let f;const v=o.length,p=s.length;for(f=0;f<v;f++){a=n[o[f]];const y=a.draw(e);y.drawExternalLabel!=null&&h.push(y.drawExternalLabel)}for(f=0;f<p;f++){a=n[s[f]];const y=a.draw(e);y.drawExternalLabel!=null&&h.push(y.drawExternalLabel)}return{drawExternalLabels:()=>{for(const y of h)y()}}}_drawEdges(e){const t=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const a=t[n[i]];a.connected===!0&&a.draw(e)}}_drawArrows(e){const t=this.body.edges,n=this.body.edgeIndices;for(let i=0;i<n.length;i++){const a=t[n[i]];a.connected===!0&&a.drawArrows(e)}}_drawSelectionBox(e){if(this.body.selectionBox.show){e.beginPath();const t=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;e.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,t,n),e.fillStyle="rgba(151, 194, 252, 0.2)",e.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,t,n),e.strokeStyle="rgba(151, 194, 252, 1)",e.stroke()}else e.closePath()}};var sw,fz;function uae(){if(fz)return sw;fz=1,TH();var r=nt();return sw=r.setInterval,sw}var uw,vz;function lae(){return vz||(vz=1,uw=uae()),uw}var cae=lae(),dae=Ae(cae);function dc(r,e){e.inputHandler=function(t){t.isFirst&&e(t)},r.on("hammer.input",e.inputHandler)}function w4(r,e){return e.inputHandler=function(t){t.isFinal&&e(t)},r.on("hammer.input",e.inputHandler)}class hae{constructor(e){this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},At(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){var e;this.body.emitter.once("resize",t=>{t.width!==0&&(this.body.view.translation.x=t.width*.5),t.height!==0&&(this.body.view.translation.y=t.height*.5)}),this.body.emitter.on("setSize",ae(e=this.setSize).call(e,this)),this.body.emitter.on("destroy",()=>{this.hammerFrame.destroy(),this.hammer.destroy(),this._cleanUp()})}setOptions(e){if(e!==void 0&&ds(["width","height","autoResize"],this.options,e),this._cleanUp(),this.options.autoResize===!0){var t;if(window.ResizeObserver){const i=new ResizeObserver(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")}),{frame:a}=this;i.observe(a),this._cleanupCallbacks.push(()=>{i.unobserve(a)})}else{const i=dae(()=>{this.setSize()===!0&&this.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(()=>{clearInterval(i)})}const n=ae(t=this._onResize).call(t,this);window.addEventListener("resize",n),this._cleanupCallbacks.push(()=>{window.removeEventListener("resize",n)})}}_cleanUp(){var e,t,n;at(e=ha(t=Hn(n=this._cleanupCallbacks).call(n,0)).call(t)).call(e,i=>{try{i()}catch(a){console.error(a)}})}_onResize(){this.setSize(),this.body.emitter.emit("_redraw")}_getCameraState(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}_setCameraState(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){const e=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,t=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;let n=this.cameraState.scale;e!=1&&t!=1?n=this.cameraState.scale*.5*(e+t):e!=1?n=this.cameraState.scale*e:t!=1&&(n=this.cameraState.scale*t),this.body.view.scale=n;const i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),a={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=a.x*this.body.view.scale,this.body.view.translation.y+=a.y*this.body.view.scale}}_prepareValue(e){if(typeof e=="number")return e+"px";if(typeof e=="string"){if(tt(e).call(e,"%")!==-1||tt(e).call(e,"px")!==-1)return e;if(tt(e).call(e,"%")===-1)return e+"px"}throw new Error("Could not use the value supplied for width or height:"+e)}_create(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{const e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(e)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}_bindHammer(){this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Eo(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Eo.DIRECTION_ALL}),dc(this.hammer,e=>{this.body.eventListeners.onTouch(e)}),this.hammer.on("tap",e=>{this.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",e=>{this.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",e=>{this.body.eventListeners.onHold(e)}),this.hammer.on("panstart",e=>{this.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",e=>{this.body.eventListeners.onDrag(e)}),this.hammer.on("panend",e=>{this.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",e=>{this.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",e=>{this.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",e=>{this.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",e=>{this.body.eventListeners.onContext(e)}),this.hammerFrame=new Eo(this.frame),w4(this.hammerFrame,e=>{this.body.eventListeners.onRelease(e)})}setSize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.width,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.height;e=this._prepareValue(e),t=this._prepareValue(t);let n=!1;const i=this.frame.canvas.width,a=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),e!=this.options.width||t!=this.options.height||this.frame.style.width!=e||this.frame.style.height!=t)this._getCameraState(o),this.frame.style.width=e,this.frame.style.height=t,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=e,this.options.height=t,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{const s=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),u=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==s||this.frame.canvas.height!==u)&&this._getCameraState(o),this.frame.canvas.width!==s&&(this.frame.canvas.width=s,n=!0),this.frame.canvas.height!==u&&(this.frame.canvas.height=u,n=!0)}return n===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(a/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}getContext(){return this.frame.canvas.getContext("2d")}_determinePixelRatio(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");let t=1;typeof window<"u"&&(t=window.devicePixelRatio||1);const n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}_setPixelRatio(){this.pixelRatio=this._determinePixelRatio()}setTransform(){const e=this.getContext();if(e===void 0)throw new Error("Could not get canvax context");e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}_XconvertDOMtoCanvas(e){return(e-this.body.view.translation.x)/this.body.view.scale}_XconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.x}_YconvertDOMtoCanvas(e){return(e-this.body.view.translation.y)/this.body.view.scale}_YconvertCanvasToDOM(e){return e*this.body.view.scale+this.body.view.translation.y}canvasToDOM(e){return{x:this._XconvertCanvasToDOM(e.x),y:this._YconvertCanvasToDOM(e.y)}}DOMtoCanvas(e){return{x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)}}}function fae(r,e){const t=At({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},r??{});if(!Tt(t.nodes))throw new TypeError("Nodes has to be an array of ids.");if(t.nodes.length===0&&(t.nodes=e),!(typeof t.minZoomLevel=="number"&&t.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!(typeof t.maxZoomLevel=="number"&&t.minZoomLevel<=t.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return t}class vae{constructor(e,t){var n,i;this.body=e,this.canvas=t,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",ae(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",()=>{this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",ae(i=this.releaseNode).call(i,this))}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=e}fit(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;e=fae(e,this.body.nodeIndices);const n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;let a,o;if(n===0||i===0)o=1,a=wr.getRange(this.body.nodes,e.nodes);else if(t===!0){let l=0;for(const h in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,h)&&this.body.nodes[h].predefinedPosition===!0&&(l+=1);if(l>.5*this.body.nodeIndices.length){this.fit(e,!1);return}a=wr.getRange(this.body.nodes,e.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822;const d=Math.min(n/600,i/600);o*=d}else{this.body.emitter.emit("_resizeNodes"),a=wr.getRange(this.body.nodes,e.nodes);const l=Math.abs(a.maxX-a.minX)*1.1,c=Math.abs(a.maxY-a.minY)*1.1,d=n/l,h=i/c;o=d<=h?d:h}o>e.maxZoomLevel?o=e.maxZoomLevel:o<e.minZoomLevel&&(o=e.minZoomLevel);const u={position:wr.findCenter(a),scale:o,animation:e.animation};this.moveTo(u)}focus(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[e]!==void 0){const n={x:this.body.nodes[e].x,y:this.body.nodes[e].y};t.position=n,t.lockedOnNode=e,this.moveTo(t)}else console.error("Node: "+e+" cannot be found.")}moveTo(e){if(e===void 0){e={};return}if(e.offset!=null){if(e.offset.x!=null){if(e.offset.x=+e.offset.x,!sa(e.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else e.offset.x=0;if(e.offset.y!=null){if(e.offset.y=+e.offset.y,!sa(e.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else e.offset.x=0}else e.offset={x:0,y:0};if(e.position!=null){if(e.position.x!=null){if(e.position.x=+e.position.x,!sa(e.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else e.position.x=0;if(e.position.y!=null){if(e.position.y=+e.position.y,!sa(e.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else e.position.x=0}else e.position=this.getViewPosition();if(e.scale!=null){if(e.scale=+e.scale,!(e.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else e.scale=this.body.view.scale;e.animation===void 0&&(e.animation={duration:0}),e.animation===!1&&(e.animation={duration:0}),e.animation===!0&&(e.animation={}),e.animation.duration===void 0&&(e.animation.duration=1e3),e.animation.easingFunction===void 0&&(e.animation.easingFunction="easeInOutQuad"),this.animateView(e)}animateView(e){if(e===void 0)return;this.animationEasingFunction=e.animation.easingFunction,this.releaseNode(),e.locked===!0&&(this.lockedOnNodeId=e.lockedOnNode,this.lockedOnNodeOffset=e.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=e.scale,this.body.view.scale=this.targetScale;const t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:t.x-e.position.x,y:t.y-e.position.y};if(this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+e.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+e.offset.y},e.animation.duration===0)if(this.lockedOnNodeId!=null){var i;this.viewFunction=ae(i=this._lockedRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction)}else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else{var a;this.animationSpeed=1/(60*e.animation.duration*.001)||1/60,this.animationEasingFunction=e.animation.easingFunction,this.viewFunction=ae(a=this._transitionRedraw).call(a,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}_lockedRedraw(){const e={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},t=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n={x:t.x-e.x,y:t.y-e.y},i=this.body.view.translation,a={x:i.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:i.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=a}releaseNode(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}_transitionRedraw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.easingTime+=this.animationSpeed,this.easingTime=e===!0?1:this.easingTime;const t=Ste[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*t,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*t,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*t},this.easingTime>=1){if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null){var n;this.viewFunction=ae(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}getScale(){return this.body.view.scale}getViewPosition(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}function pz(r){var e=r&&r.preventDefault||!1,t=r&&r.container||window,n={},i={keydown:{},keyup:{}},a={},o;for(o=97;o<=122;o++)a[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)a[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)a[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)a["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)a["num"+o]={code:96+o,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(c){l(c,"keydown")},u=function(c){l(c,"keyup")},l=function(c,d){if(i[d][c.keyCode]!==void 0){for(var h=i[d][c.keyCode],f=0;f<h.length;f++)(h[f].shift===void 0||h[f].shift==!0&&c.shiftKey==!0||h[f].shift==!1&&c.shiftKey==!1)&&h[f].fn(c);e==!0&&c.preventDefault()}};return n.bind=function(c,d,h){if(h===void 0&&(h="keydown"),a[c]===void 0)throw new Error("unsupported key: "+c);i[h][a[c].code]===void 0&&(i[h][a[c].code]=[]),i[h][a[c].code].push({fn:d,shift:a[c].shift})},n.bindAll=function(c,d){d===void 0&&(d="keydown");for(var h in a)a.hasOwnProperty(h)&&n.bind(h,c,d)},n.getKey=function(c){for(var d in a)if(a.hasOwnProperty(d)){if(c.shiftKey==!0&&a[d].shift==!0&&c.keyCode==a[d].code)return d;if(c.shiftKey==!1&&a[d].shift==!1&&c.keyCode==a[d].code)return d;if(c.keyCode==a[d].code&&d=="shift")return d}return"unknown key, currently not supported"},n.unbind=function(c,d,h){if(h===void 0&&(h="keydown"),a[c]===void 0)throw new Error("unsupported key: "+c);if(d!==void 0){var f=[],v=i[h][a[c].code];if(v!==void 0)for(var p=0;p<v.length;p++)v[p].fn==d&&v[p].shift==a[c].shift||f.push(i[h][a[c].code][p]);i[h][a[c].code]=f}else i[h][a[c].code]=[]},n.reset=function(){i={keydown:{},keyup:{}}},n.destroy=function(){i={keydown:{},keyup:{}},t.removeEventListener("keydown",s,!0),t.removeEventListener("keyup",u,!0)},t.addEventListener("keydown",s,!0),t.addEventListener("keyup",u,!0),n}class pae{constructor(e,t){this.body=e,this.canvas=t,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",()=>{this.activated=!0,this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",()=>{this.activated=!1,this.configureKeyboardBindings()}),this.body.emitter.on("destroy",()=>{this.keycharm!==void 0&&this.keycharm.destroy()}),this.options={}}setOptions(e){e!==void 0&&(this.options=e,this.create())}create(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}cleanNavigation(){if(this.navigationHammers.length!=0){for(let e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}loadNavigationElements(){this.cleanNavigation(),this.navigationDOM={};const e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],t=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(let o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);const s=new Eo(this.navigationDOM[e[o]]);if(t[o]==="_fit"){var n;dc(s,ae(n=this._fit).call(n,this))}else{var i;dc(s,ae(i=this.bindToRedraw).call(i,this,t[o]))}this.navigationHammers.push(s)}const a=new Eo(this.canvas.frame);w4(a,()=>{this._stopMovement()}),this.navigationHammers.push(a),this.iconsCreated=!0}bindToRedraw(e){if(this.boundFunctions[e]===void 0){var t;this.boundFunctions[e]=ae(t=this[e]).call(t,this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering")}}unbindFromRedraw(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}_fit(){new Date().valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}_stopMovement(){for(const e in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}_moveUp(){this.body.view.translation.y+=this.options.keyboard.speed.y}_moveDown(){this.body.view.translation.y-=this.options.keyboard.speed.y}_moveLeft(){this.body.view.translation.x+=this.options.keyboard.speed.x}_moveRight(){this.body.view.translation.x-=this.options.keyboard.speed.x}_zoomIn(){const e=this.body.view.scale,t=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=t/e,a=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=t,this.body.view.translation={x:a,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}_zoomOut(){const e=this.body.view.scale,t=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=t/e,a=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=t,this.body.view.translation={x:a,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}configureKeyboardBindings(){if(this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=pz({container:window,preventDefault:!0}):this.keycharm=pz({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0)){var e,t,n,i,a,o,s,u,l,c,d,h,f,v,p,y,g,m,b,w,S,T,_,E;ae(e=this.keycharm).call(e,"up",()=>{this.bindToRedraw("_moveUp")},"keydown"),ae(t=this.keycharm).call(t,"down",()=>{this.bindToRedraw("_moveDown")},"keydown"),ae(n=this.keycharm).call(n,"left",()=>{this.bindToRedraw("_moveLeft")},"keydown"),ae(i=this.keycharm).call(i,"right",()=>{this.bindToRedraw("_moveRight")},"keydown"),ae(a=this.keycharm).call(a,"=",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(o=this.keycharm).call(o,"num+",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(s=this.keycharm).call(s,"num-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(u=this.keycharm).call(u,"-",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(l=this.keycharm).call(l,"[",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(c=this.keycharm).call(c,"]",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(d=this.keycharm).call(d,"pageup",()=>{this.bindToRedraw("_zoomIn")},"keydown"),ae(h=this.keycharm).call(h,"pagedown",()=>{this.bindToRedraw("_zoomOut")},"keydown"),ae(f=this.keycharm).call(f,"up",()=>{this.unbindFromRedraw("_moveUp")},"keyup"),ae(v=this.keycharm).call(v,"down",()=>{this.unbindFromRedraw("_moveDown")},"keyup"),ae(p=this.keycharm).call(p,"left",()=>{this.unbindFromRedraw("_moveLeft")},"keyup"),ae(y=this.keycharm).call(y,"right",()=>{this.unbindFromRedraw("_moveRight")},"keyup"),ae(g=this.keycharm).call(g,"=",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(m=this.keycharm).call(m,"num+",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(b=this.keycharm).call(b,"num-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ae(w=this.keycharm).call(w,"-",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ae(S=this.keycharm).call(S,"[",()=>{this.unbindFromRedraw("_zoomOut")},"keyup"),ae(T=this.keycharm).call(T,"]",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(_=this.keycharm).call(_,"pageup",()=>{this.unbindFromRedraw("_zoomIn")},"keyup"),ae(E=this.keycharm).call(E,"pagedown",()=>{this.unbindFromRedraw("_zoomOut")},"keyup")}}}class gae{constructor(e,t,n){var i,a,o,s,u,l,c,d,h,f,v,p,y;this.body=e,this.canvas=t,this.selectionHandler=n,this.navigationHandler=new pae(e,t),this.body.eventListeners.onTap=ae(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=ae(a=this.onTouch).call(a,this),this.body.eventListeners.onDoubleTap=ae(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=ae(s=this.onHold).call(s,this),this.body.eventListeners.onDragStart=ae(u=this.onDragStart).call(u,this),this.body.eventListeners.onDrag=ae(l=this.onDrag).call(l,this),this.body.eventListeners.onDragEnd=ae(c=this.onDragEnd).call(c,this),this.body.eventListeners.onMouseWheel=ae(d=this.onMouseWheel).call(d,this),this.body.eventListeners.onPinch=ae(h=this.onPinch).call(h,this),this.body.eventListeners.onMouseMove=ae(f=this.onMouseMove).call(f,this),this.body.eventListeners.onRelease=ae(v=this.onRelease).call(v,this),this.body.eventListeners.onContext=ae(p=this.onContext).call(p,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=ae(y=this.getPointer).call(y,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},At(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("destroy",()=>{clearTimeout(this.popupTimer),delete this.body.functions.getPointer})}setOptions(e){e!==void 0&&(uc(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),Hr(this.options,e,"keyboard"),e.tooltip&&(At(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=jS(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}getPointer(e){return{x:e.x-mte(this.canvas.frame.canvas),y:e.y-bte(this.canvas.frame.canvas)}}onTouch(e){new Date().valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}onTap(e){const t=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(t,n),this.selectionHandler.commitAndEmit(t,e),this.selectionHandler.generateClickEvent("click",e,t)}onDoubleTap(e){const t=this.getPointer(e.center);this.selectionHandler.generateClickEvent("doubleClick",e,t)}onHold(e){const t=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(t,n),this.selectionHandler.commitAndEmit(t,e),this.selectionHandler.generateClickEvent("click",e,t),this.selectionHandler.generateClickEvent("hold",e,t)}onRelease(e){if(new Date().valueOf()-this.touchTime>10){const t=this.getPointer(e.center);this.selectionHandler.generateClickEvent("release",e,t),this.touchTime=new Date().valueOf()}}onContext(e){const t=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler.generateClickEvent("oncontext",e,t)}checkSelectionChanges(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e)}_determineDifference(e,t){const n=function(i,a){const o=[];for(let s=0;s<i.length;s++){const u=i[s];tt(a).call(a,u)===-1&&o.push(u)}return o};return{nodes:n(e.nodes,t.nodes),edges:n(e.edges,t.edges)}}onDragStart(e){if(this.drag.dragging)return;this.drag.pointer===void 0&&this.onTouch(e);const t=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=At({},this.body.view.translation),this.drag.nodeId=void 0,e.srcEvent.shiftKey){this.body.selectionBox.show=!0;const n=this.getPointer(e.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(t!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=t.id,t.isSelected()===!1&&this.selectionHandler.setSelection({nodes:[t.id]}),this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer);for(const n of this.selectionHandler.getSelectedNodes()){const i={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.options.fixed.x,yFixed:n.options.fixed.y};n.options.fixed.x=!0,n.options.fixed.y=!0,this.drag.selection.push(i)}}else this.selectionHandler.generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}onDrag(e){if(this.drag.pinched===!0)return;this.body.emitter.emit("unlockNode");const t=this.getPointer(e.center),n=this.drag.selection;if(n&&n.length&&this.options.dragNodes===!0){this.selectionHandler.generateClickEvent("dragging",e,t);const i=t.x-this.drag.pointer.x,a=t.y-this.drag.pointer.y;at(n).call(n,o=>{const s=o.node;o.xFixed===!1&&(s.x=this.canvas._XconvertDOMtoCanvas(this.canvas._XconvertCanvasToDOM(o.x)+i)),o.yFixed===!1&&(s.y=this.canvas._YconvertDOMtoCanvas(this.canvas._YconvertCanvasToDOM(o.y)+a))}),this.body.emitter.emit("startSimulation")}else{if(e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,t,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(t.x),y:this.canvas._YconvertDOMtoCanvas(t.y)},this.body.emitter.emit("_requestRedraw")}if(this.options.dragView===!0&&!e.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",e,t,void 0,!0),this.drag.pointer===void 0){this.onDragStart(e);return}const i=t.x-this.drag.pointer.x,a=t.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+i,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}onDragEnd(e){if(this.drag.dragging=!1,this.body.selectionBox.show){var t;this.body.selectionBox.show=!1;const n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},a=Dr(t=this.body.nodeIndices).call(t,s=>{const u=this.body.nodes[s];return u.x>=i.minX&&u.x<=i.maxX&&u.y>=i.minY&&u.y<=i.maxY});at(a).call(a,s=>this.selectionHandler.selectObject(this.body.nodes[s]));const o=this.getPointer(e.center);this.selectionHandler.commitAndEmit(o,e),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{const n=this.drag.selection;n&&n.length?(at(n).call(n,function(i){i.node.options.fixed.x=i.xFixed,i.node.options.fixed.y=i.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}onPinch(e){const t=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);const n=this.pinch.scale*e.scale;this.zoom(n,t)}zoom(e,t){if(this.options.zoomView===!0){const n=this.body.view.scale;e<1e-5&&(e=1e-5),e>10&&(e=10);let i;this.drag!==void 0&&this.drag.dragging===!0&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));const a=this.body.view.translation,o=e/n,s=(1-o)*t.x+a.x*o,u=(1-o)*t.y+a.y*o;if(this.body.view.scale=e,this.body.view.translation={x:s,y:u},i!=null){const l=this.canvas.canvasToDOM(i);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:t}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:t})}}onMouseWheel(e){if(this.options.zoomView===!0){if(e.deltaY!==0){let t=this.body.view.scale;t*=1+(e.deltaY<0?1:-1)*(this.options.zoomSpeed*.1);const n=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(t,n)}e.preventDefault()}}onMouseMove(e){const t=this.getPointer({x:e.clientX,y:e.clientY});let n=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(t),this.popup.hidden===!1&&(n=!0,this.popup.setPosition(t.x+3,t.y-5),this.popup.show())),this.options.keyboard.autoFocus&&this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),n===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=Gn(()=>this._checkShowPopup(t),this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,t)}_checkShowPopup(e){const t=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),i={left:t,top:n,right:t,bottom:n},a=this.popupObj===void 0?void 0:this.popupObj.id;let o=!1,s="node";if(this.popupObj===void 0){const u=this.body.nodeIndices,l=this.body.nodes;let c;const d=[];for(let h=0;h<u.length;h++)c=l[u[h]],c.isOverlappingWith(i)===!0&&(o=!0,c.getTitle()!==void 0&&d.push(u[h]));d.length>0&&(this.popupObj=l[d[d.length-1]],o=!0)}if(this.popupObj===void 0&&o===!1){const u=this.body.edgeIndices,l=this.body.edges;let c;const d=[];for(let h=0;h<u.length;h++)c=l[u[h]],c.isOverlappingWith(i)===!0&&c.connected===!0&&c.getTitle()!==void 0&&d.push(u[h]);d.length>0&&(this.popupObj=l[d[d.length-1]],s="edge")}this.popupObj!==void 0?this.popupObj.id!==a&&(this.popup===void 0&&(this.popup=new Rte(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}_checkHidePopup(e){const t=this.selectionHandler._pointerToPositionObject(e);let n=!1;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(t),n===!0)){const i=this.selectionHandler.getNodeAt(e);n=i===void 0?!1:i.id===this.popup.popupTargetId}}else this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(t));n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}var gz={},yz={},mz;function yae(){if(mz)return yz;mz=1;var r=bT(),e=l4();return r("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),yz}var bz;function mae(){return bz||(bz=1,yae()),gz}var wz={},lw,Ez;function Va(){if(Ez)return lw;Ez=1;var r=Jo(),e=TypeError;return lw=function(t){if(typeof t=="object"&&"size"in t&&"has"in t&&"add"in t&&"delete"in t&&"keys"in t)return t;throw new e(r(t)+" is not a set")},lw}var cw,Sz;function Wa(){if(Sz)return cw;Sz=1;var r=zr(),e=c4(),t=r("Set"),n=t.prototype;return cw={Set:t,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:n},cw}var dw,_z;function Ha(){if(_z)return dw;_z=1;var r=Fr();return dw=function(e,t,n){for(var i=n?e:e.iterator,a=e.next,o,s;!(o=r(a,i)).done;)if(s=t(o.value),s!==void 0)return s},dw}var hw,Tz;function Yu(){if(Tz)return hw;Tz=1;var r=Ha();return hw=function(e,t,n){return n?r(e.keys(),t,!0):e.forEach(t)},hw}var fw,xz;function PT(){if(xz)return fw;xz=1;var r=Wa(),e=Yu(),t=r.Set,n=r.add;return fw=function(i){var a=new t;return e(i,function(o){n(a,o)}),a},fw}var vw,Pz;function Xu(){return Pz||(Pz=1,vw=function(r){return r.size}),vw}var pw,Cz;function bae(){return Cz||(Cz=1,pw=function(r){return{iterator:r,next:r.next,done:!1}}),pw}var gw,Iz;function Ga(){if(Iz)return gw;Iz=1;var r=ni(),e=Dn(),t=Fr(),n=ns(),i=bae(),a="Invalid size",o=RangeError,s=TypeError,u=Math.max,l=function(c,d){this.set=c,this.size=u(d,0),this.has=r(c.has),this.keys=r(c.keys)};return l.prototype={getIterator:function(){return i(e(t(this.keys,this.set)))},includes:function(c){return t(this.has,this.set,c)}},gw=function(c){e(c);var d=+c.size;if(d!==d)throw new s(a);var h=n(d);if(h<0)throw new o(a);return new l(c,h)},gw}var yw,Oz;function wae(){if(Oz)return yw;Oz=1;var r=Va(),e=Wa(),t=PT(),n=Xu(),i=Ga(),a=Yu(),o=Ha(),s=e.has,u=e.remove;return yw=function(c){var d=r(this),h=i(c),f=t(d);return n(d)<=h.size?a(d,function(v){h.includes(v)&&u(f,v)}):o(h.getIterator(),function(v){s(f,v)&&u(f,v)}),f},yw}var mw,Rz;function Ua(){return Rz||(Rz=1,mw=function(){return!1}),mw}var $z;function Eae(){if($z)return wz;$z=1;var r=xe(),e=wae(),t=Ke(),n=Ua(),i=!n("difference",function(o){return o.size===0}),a=i||t(function(){var o={size:1,has:function(){return!0},keys:function(){var u=0;return{next:function(){var l=u++>1;return s.has(1)&&s.clear(),{done:l,value:2}}}}},s=new Set([1,2,3,4]);return s.difference(o).size!==3});return r({target:"Set",proto:!0,real:!0,forced:a},{difference:e}),wz}var Dz={},bw,Az;function Sae(){if(Az)return bw;Az=1;var r=Va(),e=Wa(),t=Xu(),n=Ga(),i=Yu(),a=Ha(),o=e.Set,s=e.add,u=e.has;return bw=function(c){var d=r(this),h=n(c),f=new o;return t(d)>h.size?a(h.getIterator(),function(v){u(d,v)&&s(f,v)}):i(d,function(v){h.includes(v)&&s(f,v)}),f},bw}var qz;function _ae(){if(qz)return Dz;qz=1;var r=xe(),e=Ke(),t=Sae(),n=Ua(),i=!n("intersection",function(a){return a.size===2&&a.has(1)&&a.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return r({target:"Set",proto:!0,real:!0,forced:i},{intersection:t}),Dz}var kz={},ww,Mz;function Tae(){if(Mz)return ww;Mz=1;var r=Va(),e=Wa().has,t=Xu(),n=Ga(),i=Yu(),a=Ha(),o=yT();return ww=function(u){var l=r(this),c=n(u);if(t(l)<=c.size)return i(l,function(h){if(c.includes(h))return!1},!0)!==!1;var d=c.getIterator();return a(d,function(h){if(e(l,h))return o(d,"normal",!1)})!==!1},ww}var Bz;function xae(){if(Bz)return kz;Bz=1;var r=xe(),e=Tae(),t=Ua(),n=!t("isDisjointFrom",function(i){return!i});return r({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:e}),kz}var Fz={},Ew,Nz;function Pae(){if(Nz)return Ew;Nz=1;var r=Va(),e=Xu(),t=Yu(),n=Ga();return Ew=function(a){var o=r(this),s=n(a);return e(o)>s.size?!1:t(o,function(u){if(!s.includes(u))return!1},!0)!==!1},Ew}var Lz;function Cae(){if(Lz)return Fz;Lz=1;var r=xe(),e=Pae(),t=Ua(),n=!t("isSubsetOf",function(i){return i});return r({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:e}),Fz}var zz={},Sw,jz;function Iae(){if(jz)return Sw;jz=1;var r=Va(),e=Wa().has,t=Xu(),n=Ga(),i=Ha(),a=yT();return Sw=function(s){var u=r(this),l=n(s);if(t(u)<l.size)return!1;var c=l.getIterator();return i(c,function(d){if(!e(u,d))return a(c,"normal",!1)})!==!1},Sw}var Vz;function Oae(){if(Vz)return zz;Vz=1;var r=xe(),e=Iae(),t=Ua(),n=!t("isSupersetOf",function(i){return!i});return r({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:e}),zz}var Wz={},_w,Hz;function Rae(){if(Hz)return _w;Hz=1;var r=Va(),e=Wa(),t=PT(),n=Ga(),i=Ha(),a=e.add,o=e.has,s=e.remove;return _w=function(l){var c=r(this),d=n(l).getIterator(),h=t(c);return i(d,function(f){o(c,f)?s(h,f):a(h,f)}),h},_w}var Tw,Gz;function E4(){return Gz||(Gz=1,Tw=function(r){try{var e=new Set,t={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[r](t);return n.size===1&&n.values().next().value===4}catch{return!1}}),Tw}var Uz;function $ae(){if(Uz)return Wz;Uz=1;var r=xe(),e=Rae(),t=E4(),n=Ua(),i=!n("symmetricDifference")||!t("symmetricDifference");return r({target:"Set",proto:!0,real:!0,forced:i},{symmetricDifference:e}),Wz}var Kz={},xw,Yz;function Dae(){if(Yz)return xw;Yz=1;var r=Va(),e=Wa().add,t=PT(),n=Ga(),i=Ha();return xw=function(o){var s=r(this),u=n(o).getIterator(),l=t(s);return i(u,function(c){e(l,c)}),l},xw}var Xz;function Aae(){if(Xz)return Kz;Xz=1;var r=xe(),e=Dae(),t=E4(),n=Ua(),i=!n("union")||!t("union");return r({target:"Set",proto:!0,real:!0,forced:i},{union:e}),Kz}var Pw,Zz;function qae(){if(Zz)return Pw;Zz=1,ss(),mae(),Eae(),_ae(),xae(),Cae(),Oae(),$ae(),Aae(),ET();var r=nt();return Pw=r.Set,Pw}var Cw,Qz;function kae(){if(Qz)return Cw;Qz=1;var r=qae();return us(),Cw=r,Cw}var Iw,Jz;function Mae(){return Jz||(Jz=1,Iw=kae()),Iw}var Bae=Mae(),fi=Ae(Bae),e5={},t5={},Ow,r5;function Fae(){if(r5)return Ow;r5=1;var r=Ye(),e=wT(),t=nd().getWeakData,n=mT(),i=Dn(),a=Xo(),o=tr(),s=id(),u=zi(),l=ur(),c=La(),d=c.set,h=c.getterFor,f=u.find,v=u.findIndex,p=r([].splice),y=0,g=function(w){return w.frozen||(w.frozen=new m)},m=function(){this.entries=[]},b=function(w,S){return f(w.entries,function(T){return T[0]===S})};return m.prototype={get:function(w){var S=b(this,w);if(S)return S[1]},has:function(w){return!!b(this,w)},set:function(w,S){var T=b(this,w);T?T[1]=S:this.entries.push([w,S])},delete:function(w){var S=v(this.entries,function(T){return T[0]===w});return~S&&p(this.entries,S,1),!!~S}},Ow={getConstructor:function(w,S,T,_){var E=w(function(I,O){n(I,x),d(I,{type:S,id:y++,frozen:null}),a(O)||s(O,I[_],{that:I,AS_ENTRIES:T})}),x=E.prototype,P=h(S),C=function(I,O,$){var D=P(I),q=t(i(O),!0);return q===!0?g(D).set(O,$):q[D.id]=$,I};return e(x,{delete:function(I){var O=P(this);if(!o(I))return!1;var $=t(I);return $===!0?g(O).delete(I):$&&l($,O.id)&&delete $[O.id]},has:function(O){var $=P(this);if(!o(O))return!1;var D=t(O);return D===!0?g($).has(O):D&&l(D,$.id)}}),e(x,T?{get:function(O){var $=P(this);if(o(O)){var D=t(O);if(D===!0)return g($).get(O);if(D)return D[$.id]}},set:function(O,$){return C(this,O,$)}}:{add:function(O){return C(this,O,!0)}}),E}},Ow}var n5;function Nae(){if(n5)return t5;n5=1;var r=s4(),e=yt(),t=Ye(),n=wT(),i=nd(),a=bT(),o=Fae(),s=tr(),u=La().enforce,l=Ke(),c=lH(),d=Object,h=Array.isArray,f=d.isExtensible,v=d.isFrozen,p=d.isSealed,y=d.freeze,g=d.seal,m=!e.ActiveXObject&&"ActiveXObject"in e,b,w=function(I){return function(){return I(this,arguments.length?arguments[0]:void 0)}},S=a("WeakMap",w,o),T=S.prototype,_=t(T.set),E=function(){return r&&l(function(){var I=y([]);return _(new S,I,1),!v(I)})};if(c)if(m){b=o.getConstructor(w,"WeakMap",!0),i.enable();var x=t(T.delete),P=t(T.has),C=t(T.get);n(T,{delete:function(I){if(s(I)&&!f(I)){var O=u(this);return O.frozen||(O.frozen=new b),x(this,I)||O.frozen.delete(I)}return x(this,I)},has:function(O){if(s(O)&&!f(O)){var $=u(this);return $.frozen||($.frozen=new b),P(this,O)||$.frozen.has(O)}return P(this,O)},get:function(O){if(s(O)&&!f(O)){var $=u(this);return $.frozen||($.frozen=new b),P(this,O)?C(this,O):$.frozen.get(O)}return C(this,O)},set:function(O,$){if(s(O)&&!f(O)){var D=u(this);D.frozen||(D.frozen=new b),P(this,O)?_(this,O,$):D.frozen.set(O,$)}else _(this,O,$);return this}})}else E()&&n(T,{set:function(O,$){var D;return h(O)&&(v(O)?D=y:p(O)&&(D=g)),_(this,O,$),D&&D(O),this}});return t5}var i5;function Lae(){return i5||(i5=1,Nae()),e5}var Rw,a5;function zae(){if(a5)return Rw;a5=1,ss(),Lae();var r=nt();return Rw=r.WeakMap,Rw}var $w,o5;function jae(){if(o5)return $w;o5=1;var r=zae();return us(),$w=r,$w}var Dw,s5;function Vae(){return s5||(s5=1,Dw=jae()),Dw}var Wae=Vae(),Zu=Ae(Wae);function Vs(r,e,t){Hae(r,e),e.set(r,t)}function Hae(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function KS(r,e,t){return r.set(S4(r,e),t),t}function lt(r,e){return r.get(S4(r,e))}function S4(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function u5(r,e){const t=new fi;for(const n of e)r.has(n)||t.add(n);return t}var Ja=new Zu,on=new Zu;class l5{constructor(){Vs(this,Ja,new fi),Vs(this,on,new fi)}get size(){return lt(on,this).size}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)lt(on,this).add(i)}delete(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)lt(on,this).delete(i)}clear(){lt(on,this).clear()}getSelection(){return[...lt(on,this)]}getChanges(){return{added:[...u5(lt(Ja,this),lt(on,this))],deleted:[...u5(lt(on,this),lt(Ja,this))],previous:[...new fi(lt(Ja,this))],current:[...new fi(lt(on,this))]}}commit(){const e=this.getChanges();KS(Ja,this,lt(on,this)),KS(on,this,new fi(lt(Ja,this)));for(const t of e.added)t.select();for(const t of e.deleted)t.unselect();return e}}var Xi=new Zu,Zi=new Zu,Aw=new Zu;class Gae{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:()=>{};Vs(this,Xi,new l5),Vs(this,Zi,new l5),Vs(this,Aw,void 0),KS(Aw,this,e)}get sizeNodes(){return lt(Xi,this).size}get sizeEdges(){return lt(Zi,this).size}getNodes(){return lt(Xi,this).getSelection()}getEdges(){return lt(Zi,this).getSelection()}addNodes(){lt(Xi,this).add(...arguments)}addEdges(){lt(Zi,this).add(...arguments)}deleteNodes(e){lt(Xi,this).delete(e)}deleteEdges(e){lt(Zi,this).delete(e)}clear(){lt(Xi,this).clear(),lt(Zi,this).clear()}commit(){const e={nodes:lt(Xi,this).commit(),edges:lt(Zi,this).commit()};for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return lt(Aw,this).call(this,e,...n),e}}class Uae{constructor(e,t){this.body=e,this.canvas=t,this._selectionAccumulator=new Gae,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},At(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",()=>{this.updateSelection()})}setOptions(e){e!==void 0&&ds(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}selectOnPoint(e){let t=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(t=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return t}selectAdditionalOnPoint(e){let t=!1;if(this.options.selectable===!0){const n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(t=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return t}_initBaseEvent(e,t){const n={};return n.pointer={DOM:{x:t.x,y:t.y},canvas:this.canvas.DOMtoCanvas(t)},n.event=e,n}generateClickEvent(e,t,n,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const o=this._initBaseEvent(t,n);if(a===!0)o.nodes=[],o.edges=[];else{const s=this.getSelection();o.nodes=s.nodes,o.edges=s.edges}i!==void 0&&(o.previousSelection=i),e=="click"&&(o.items=this.getClickedItems(n)),t.controlEdge!==void 0&&(o.controlEdge=t.controlEdge),this.body.emitter.emit(e,o)}selectObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0?(e instanceof pt?(t===!0&&this._selectionAccumulator.addEdges(...e.edges),this._selectionAccumulator.addNodes(e)):this._selectionAccumulator.addEdges(e),!0):!1}deselectObject(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}_getAllNodesOverlappingWith(e){const t=[],n=this.body.nodes;for(let i=0;i<this.body.nodeIndices.length;i++){const a=this.body.nodeIndices[i];n[a].isOverlappingWith(e)&&t.push(a)}return t}_pointerToPositionObject(e){const t=this.canvas.DOMtoCanvas(e);return{left:t.x-1,top:t.y+1,right:t.x+1,bottom:t.y-1}}getNodeAt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this._pointerToPositionObject(e),i=this._getAllNodesOverlappingWith(n);if(i.length>0)return t===!0?this.body.nodes[i[i.length-1]]:i[i.length-1]}_getEdgesOverlappingWith(e,t){const n=this.body.edges;for(let i=0;i<this.body.edgeIndices.length;i++){const a=this.body.edgeIndices[i];n[a].isOverlappingWith(e)&&t.push(a)}}_getAllEdgesOverlappingWith(e){const t=[];return this._getEdgesOverlappingWith(e,t),t}getEdgeAt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const n=this.canvas.DOMtoCanvas(e);let i=10,a=null;const o=this.body.edges;for(let s=0;s<this.body.edgeIndices.length;s++){const u=this.body.edgeIndices[s],l=o[u];if(l.connected){const c=l.from.x,d=l.from.y,h=l.to.x,f=l.to.y,v=l.edgeType.getDistanceToEdge(c,d,h,f,n.x,n.y);v<i&&(a=u,i=v)}}if(a!==null)return t===!0?this.body.edges[a]:a}_addToHover(e){e instanceof pt?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}_removeFromSelection(e){e instanceof pt?(this._selectionAccumulator.deleteNodes(e),this._selectionAccumulator.deleteEdges(...e.edges)):this._selectionAccumulator.deleteEdges(e)}unselectAll(){this._selectionAccumulator.clear()}getSelectedNodeCount(){return this._selectionAccumulator.sizeNodes}getSelectedEdgeCount(){return this._selectionAccumulator.sizeEdges}_hoverConnectedEdges(e){for(let t=0;t<e.edges.length;t++){const n=e.edges[t];n.hover=!0,this._addToHover(n)}}emitBlurEvent(e,t,n){const i=this._initBaseEvent(e,t);n.hover===!0&&(n.hover=!1,n instanceof pt?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}emitHoverEvent(e,t,n){const i=this._initBaseEvent(e,t);let a=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),a=!0,n instanceof pt?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),a}hoverObject(e,t){let n=this.getNodeAt(t);n===void 0&&(n=this.getEdgeAt(t));let i=!1;for(const a in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,a)&&(n===void 0||n instanceof pt&&n.id!=a||n instanceof _i)&&(this.emitBlurEvent(e,t,this.hoverObj.nodes[a]),delete this.hoverObj.nodes[a],i=!0);for(const a in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,a)&&(i===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(n===void 0||n instanceof _i&&n.id!=a||n instanceof pt&&!n.hover)&&(this.emitBlurEvent(e,t,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],i=!0));if(n!==void 0){const a=_t(this.hoverObj.edges).length,o=_t(this.hoverObj.nodes).length,s=n instanceof _i&&a===0&&o===0,u=n instanceof pt&&a===0&&o===0;(i||s||u)&&(i=this.emitHoverEvent(e,t,n)),n instanceof pt&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}i===!0&&this.body.emitter.emit("_requestRedraw")}commitWithoutEmitting(){this._selectionAccumulator.commit()}commitAndEmit(e,t){let n=!1;const i=this._selectionAccumulator.commit(),a={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",t,e,a),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",t,e,a),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",t,e),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",t,e),n=!0),n===!0&&this.generateClickEvent("select",t,e)}getSelection(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}getSelectedNodes(){return this._selectionAccumulator.getNodes()}getSelectedEdges(){return this._selectionAccumulator.getEdges()}getSelectedNodeIds(){var e;return $o(e=this._selectionAccumulator.getNodes()).call(e,t=>t.id)}getSelectedEdgeIds(){var e;return $o(e=this._selectionAccumulator.getEdges()).call(e,t=>t.id)}setSelection(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!e.nodes&&!e.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((t.unselectAll||t.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(const n of e.nodes){const i=this.body.nodes[n];if(!i)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(i,t.highlightEdges)}if(e.edges)for(const n of e.edges){const i=this.body.edges[n];if(!i)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(i)}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}selectNodes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:t})}selectEdges(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}updateSelection(){for(const e in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,e.id)||this._selectionAccumulator.deleteNodes(e);for(const e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}getClickedItems(e){const t=this.canvas.DOMtoCanvas(e),n=[],i=this.body.nodeIndices,a=this.body.nodes;for(let u=i.length-1;u>=0;u--){const c=a[i[u]].getItemsOnPoint(t);n.push.apply(n,c)}const o=this.body.edgeIndices,s=this.body.edges;for(let u=o.length-1;u>=0;u--){const c=s[o[u]].getItemsOnPoint(t);n.push.apply(n,c)}return n}}var c5={},qw,d5;function Kae(){if(d5)return qw;d5=1;var r=is(),e=Math.floor,t=function(n,i){var a=n.length;if(a<8)for(var o=1,s,u;o<a;){for(u=o,s=n[o];u&&i(n[u-1],s)>0;)n[u]=n[--u];u!==o++&&(n[u]=s)}else for(var l=e(a/2),c=t(r(n,0,l),i),d=t(r(n,l),i),h=c.length,f=d.length,v=0,p=0;v<h||p<f;)n[v+p]=v<h&&p<f?i(c[v],d[p])<=0?c[v++]:d[p++]:v<h?c[v++]:d[p++];return n};return qw=t,qw}var kw,h5;function Yae(){if(h5)return kw;h5=1;var r=Zo(),e=r.match(/firefox\/(\d+)/i);return kw=!!e&&+e[1],kw}var Mw,f5;function Xae(){if(f5)return Mw;f5=1;var r=Zo();return Mw=/MSIE|Trident/.test(r),Mw}var Bw,v5;function Zae(){if(v5)return Bw;v5=1;var r=Zo(),e=r.match(/AppleWebKit\/(\d+)\./);return Bw=!!e&&+e[1],Bw}var p5;function Qae(){if(p5)return c5;p5=1;var r=xe(),e=Ye(),t=ni(),n=jr(),i=ii(),a=wH(),o=tn(),s=Ke(),u=Kae(),l=ls(),c=Yae(),d=Xae(),h=ku(),f=Zae(),v=[],p=e(v.sort),y=e(v.push),g=s(function(){v.sort(void 0)}),m=s(function(){v.sort(null)}),b=l("sort"),w=!s(function(){if(h)return h<70;if(!(c&&c>3)){if(d)return!0;if(f)return f<603;var _="",E,x,P,C;for(E=65;E<76;E++){switch(x=String.fromCharCode(E),E){case 66:case 69:case 70:case 72:P=3;break;case 68:case 71:P=4;break;default:P=2}for(C=0;C<47;C++)v.push({k:x+C,v:P})}for(v.sort(function(I,O){return O.v-I.v}),C=0;C<v.length;C++)x=v[C].k.charAt(0),_.charAt(_.length-1)!==x&&(_+=x);return _!=="DGBEFHACIJK"}}),S=g||!m||!b||!w,T=function(_){return function(E,x){return x===void 0?-1:E===void 0?1:_!==void 0?+_(E,x)||0:o(E)>o(x)?1:-1}};return r({target:"Array",proto:!0,forced:S},{sort:function(E){E!==void 0&&t(E);var x=n(this);if(w)return E===void 0?p(x):p(x,E);var P=[],C=i(x),I,O;for(O=0;O<C;O++)O in x&&y(P,x[O]);for(u(P,T(E)),I=i(P),O=0;O<I;)x[O]=P[O++];for(;O<C;)a(x,O++);return x}}),c5}var Fw,g5;function Jae(){if(g5)return Fw;g5=1,Qae();var r=lr();return Fw=r("Array","sort"),Fw}var Nw,y5;function eoe(){if(y5)return Nw;y5=1;var r=Bt(),e=Jae(),t=Array.prototype;return Nw=function(n){var i=n.sort;return n===t||r(t,n)&&i===t.sort?e:i},Nw}var Lw,m5;function toe(){if(m5)return Lw;m5=1;var r=eoe();return Lw=r,Lw}var zw,b5;function roe(){return b5||(b5=1,zw=toe()),zw}var noe=roe(),_o=Ae(noe),w5={},jw,E5;function ioe(){if(E5)return jw;E5=1;var r=ni(),e=jr(),t=Vc(),n=ii(),i=TypeError,a="Reduce of empty array with no initial value",o=function(s){return function(u,l,c,d){var h=e(u),f=t(h),v=n(h);if(r(l),v===0&&c<2)throw new i(a);var p=s?v-1:0,y=s?-1:1;if(c<2)for(;;){if(p in f){d=f[p],p+=y;break}if(p+=y,s?p<0:v<=p)throw new i(a)}for(;s?p>=0:v>p;p+=y)p in f&&(d=l(d,f[p],p,h));return d}};return jw={left:o(!1),right:o(!0)},jw}var Vw,S5;function aoe(){if(S5)return Vw;S5=1;var r=SH();return Vw=r==="NODE",Vw}var _5;function ooe(){if(_5)return w5;_5=1;var r=xe(),e=ioe().left,t=ls(),n=ku(),i=aoe(),a=!i&&n>79&&n<83,o=a||!t("reduce");return r({target:"Array",proto:!0,forced:o},{reduce:function(u){var l=arguments.length;return e(this,u,l,l>1?arguments[1]:void 0)}}),w5}var Ww,T5;function soe(){if(T5)return Ww;T5=1,ooe();var r=lr();return Ww=r("Array","reduce"),Ww}var Hw,x5;function uoe(){if(x5)return Hw;x5=1;var r=Bt(),e=soe(),t=Array.prototype;return Hw=function(n){var i=n.reduce;return n===t||r(t,n)&&i===t.reduce?e:i},Hw}var Gw,P5;function loe(){if(P5)return Gw;P5=1;var r=uoe();return Gw=r,Gw}var Uw,C5;function coe(){return C5||(C5=1,Uw=loe()),Uw}var doe=coe(),_4=Ae(doe);class T4{abstract(){throw new Error("Can't instantiate abstract class!")}fake_use(){}curveType(){return this.abstract()}getPosition(e){return this.fake_use(e),this.abstract()}setPosition(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,t,n),this.abstract()}getTreeSize(e){return this.fake_use(e),this.abstract()}sort(e){this.fake_use(e),this.abstract()}fix(e,t){this.fake_use(e,t),this.abstract()}shift(e,t){this.fake_use(e,t),this.abstract()}}class hoe extends T4{constructor(e){super(),this.layout=e}curveType(){return"horizontal"}getPosition(e){return e.x}setPosition(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.x=t}getTreeSize(e){const t=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:t.min_x,max:t.max_x}}sort(e){_o(e).call(e,function(t,n){return t.x-n.x})}fix(e,t){e.y=this.layout.options.hierarchical.levelSeparation*t,e.options.fixed.y=!0}shift(e,t){this.layout.body.nodes[e].x+=t}}class foe extends T4{constructor(e){super(),this.layout=e}curveType(){return"vertical"}getPosition(e){return e.y}setPosition(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;n!==void 0&&this.layout.hierarchical.addToOrdering(e,n),e.y=t}getTreeSize(e){const t=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:t.min_y,max:t.max_y}}sort(e){_o(e).call(e,function(t,n){return t.y-n.y})}fix(e,t){e.x=this.layout.options.hierarchical.levelSeparation*t,e.options.fixed.x=!0}shift(e,t){this.layout.body.nodes[e].y+=t}}var I5={},O5;function voe(){if(O5)return I5;O5=1;var r=xe(),e=zi().every,t=ls(),n=t("every");return r({target:"Array",proto:!0,forced:!n},{every:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),I5}var Kw,R5;function poe(){if(R5)return Kw;R5=1,voe();var r=lr();return Kw=r("Array","every"),Kw}var Yw,$5;function goe(){if($5)return Yw;$5=1;var r=Bt(),e=poe(),t=Array.prototype;return Yw=function(n){var i=n.every;return n===t||r(t,n)&&i===t.every?e:i},Yw}var Xw,D5;function yoe(){if(D5)return Xw;D5=1;var r=goe();return Xw=r,Xw}var Zw,A5;function moe(){return A5||(A5=1,Zw=yoe()),Zw}var boe=moe(),x4=Ae(boe);function woe(r,e){const t=new fi;return at(r).call(r,n=>{var i;at(i=n.edges).call(i,a=>{a.connected&&t.add(a)})}),at(t).call(t,n=>{const i=n.from.id,a=n.to.id;e[i]==null&&(e[i]=0),(e[a]==null||e[i]>=e[a])&&(e[a]=e[i]+1)}),e}function Eoe(r){return P4(e=>{var t,n;return x4(t=Dr(n=e.edges).call(n,i=>r.has(i.toId))).call(t,i=>i.to===e)},(e,t)=>t>e,"from",r)}function Soe(r){return P4(e=>{var t,n;return x4(t=Dr(n=e.edges).call(n,i=>r.has(i.toId))).call(t,i=>i.from===e)},(e,t)=>t<e,"to",r)}function P4(r,e,t,n){var i;const a=fa(null),o=_4(i=[...g4(n).call(n)]).call(i,(d,h)=>d+1+h.edges.length,0),s=t+"Id",u=t==="to"?1:-1;for(const[d,h]of n){if(!n.has(d)||!r(h))continue;a[d]=0;const f=[h];let v=0,p;for(;p=f.pop();){var l,c;if(!n.has(d))continue;const y=a[p.id]+u;if(at(l=Dr(c=p.edges).call(c,g=>g.connected&&g.to!==g.from&&g[t]!==p&&n.has(g.toId)&&n.has(g.fromId))).call(l,g=>{const m=g[s],b=a[m];(b==null||e(y,b))&&(a[m]=y,f.push(g[t]))}),v>o)return woe(n,a);++v}}return a}class _oe{constructor(){this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}addRelation(e,t){this.childrenReference[e]===void 0&&(this.childrenReference[e]=[]),this.childrenReference[e].push(t),this.parentReference[t]===void 0&&(this.parentReference[t]=[]),this.parentReference[t].push(e)}checkIfTree(){for(const e in this.parentReference)if(this.parentReference[e].length>1){this.isTree=!1;return}this.isTree=!0}numTrees(){return this.treeIndex+1}setTreeIndex(e,t){t!==void 0&&this.trees[e.id]===void 0&&(this.trees[e.id]=t,this.treeIndex=Math.max(t,this.treeIndex))}ensureLevel(e){this.levels[e]===void 0&&(this.levels[e]=0)}getMaxLevel(e){const t={},n=i=>{if(t[i]!==void 0)return t[i];let a=this.levels[i];if(this.childrenReference[i]){const o=this.childrenReference[i];if(o.length>0)for(let s=0;s<o.length;s++)a=Math.max(a,n(o[s]))}return t[i]=a,a};return n(e)}levelDownstream(e,t){this.levels[t.id]===void 0&&(this.levels[e.id]===void 0&&(this.levels[e.id]=0),this.levels[t.id]=this.levels[e.id]+1)}setMinLevelToZero(){var e;const t=new ST;let n=0;const i=_o(e=[...new fi(FJ(this.levels))]).call(e,(a,o)=>a-o);for(const a of i)t.set(a,n++);for(const a in this.levels)Object.prototype.hasOwnProperty.call(this.levels,a)&&(this.levels[a]=t.get(this.levels[a]))}getTreeSize(e,t){let n=1e9,i=-1e9,a=1e9,o=-1e9;for(const s in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,s)&&this.trees[s]===t){const u=e[s];n=Math.min(u.x,n),i=Math.max(u.x,i),a=Math.min(u.y,a),o=Math.max(u.y,o)}return{min_x:n,max_x:i,min_y:a,max_y:o}}hasSameParent(e,t){const n=this.parentReference[e.id],i=this.parentReference[t.id];if(n===void 0||i===void 0)return!1;for(let a=0;a<n.length;a++)for(let o=0;o<i.length;o++)if(n[a]==i[o])return!0;return!1}inSameSubNetwork(e,t){return this.trees[e.id]===this.trees[t.id]}getLevels(){return _t(this.distributionOrdering)}addToOrdering(e,t){this.distributionOrdering[t]===void 0&&(this.distributionOrdering[t]=[]);let n=!1;const i=this.distributionOrdering[t];for(const a in i)if(i[a]===e){n=!0;break}n||(this.distributionOrdering[t].push(e),this.distributionIndex[e.id]=this.distributionOrdering[t].length-1)}}class Toe{constructor(e){this.body=e,this._resetRNG(Math.random()+":"+ic()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},At(this.options,this.defaultOptions),this.bindEventListeners()}bindEventListeners(){this.body.emitter.on("_dataChanged",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",()=>{this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",()=>{this.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",()=>{if(this.options.hierarchical.enabled!==!0)return;const e=this.direction.curveType();this.body.emitter.emit("_forceDisableDynamicCurves",e,!1)})}setOptions(e,t){if(e!==void 0){const n=this.options.hierarchical,i=n.enabled;if(ds(["randomSeed","improvedLayout","clusterThreshold"],this.options,e),Hr(this.options,e,"hierarchical"),e.randomSeed!==void 0&&this._resetRNG(e.randomSeed),n.enabled===!0)return i===!0&&this.body.emitter.emit("refresh",!0),n.direction==="RL"||n.direction==="DU"?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(t);if(i===!0)return this.body.emitter.emit("refresh"),ct(t,this.optionsBackup)}return t}_resetRNG(e){this.initialRandomSeed=e,this._rng=rd(this.initialRandomSeed)}adaptAllOptionsForHierarchicalLayout(e){if(this.options.hierarchical.enabled===!0){const t=this.optionsBackup.physics;e.physics===void 0||e.physics===!0?(e.physics={enabled:t.enabled===void 0?!0:t.enabled,solver:"hierarchicalRepulsion"},t.enabled=t.enabled===void 0?!0:t.enabled,t.solver=t.solver||"barnesHut"):typeof e.physics=="object"?(t.enabled=e.physics.enabled===void 0?!0:e.physics.enabled,t.solver=e.physics.solver||"barnesHut",e.physics.solver="hierarchicalRepulsion"):e.physics!==!1&&(t.solver="barnesHut",e.physics={solver:"hierarchicalRepulsion"});let n=this.direction.curveType();if(e.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges={smooth:!1};else if(e.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},e.edges.smooth=!1;else if(typeof e.edges.smooth=="boolean")this.optionsBackup.edges={smooth:e.edges.smooth},e.edges.smooth={enabled:e.edges.smooth,type:n};else{const i=e.edges.smooth;i.type!==void 0&&i.type!=="dynamic"&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:i.enabled===void 0?!0:i.enabled,type:i.type===void 0?"dynamic":i.type,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}},e.edges.smooth={enabled:i.enabled===void 0?!0:i.enabled,type:n,roundness:i.roundness===void 0?.5:i.roundness,forceDirection:i.forceDirection===void 0?!1:i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return e}positionInitially(e){if(this.options.hierarchical.enabled!==!0){this._resetRNG(this.initialRandomSeed);const t=e.length+50;for(let n=0;n<e.length;n++){const i=e[n],a=2*Math.PI*this._rng();i.x===void 0&&(i.x=t*Math.cos(a)),i.y===void 0&&(i.y=t*Math.sin(a))}}}layoutNetwork(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){const e=this.body.nodeIndices;let t=0;for(let n=0;n<e.length;n++)this.body.nodes[e[n]].predefinedPosition===!0&&(t+=1);if(t<.5*e.length){let i=0;const a=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(e.length>a){const u=e.length;for(;e.length>a&&i<=10;){i+=1;const l=e.length;i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o);const c=e.length;if(l==c&&i%3!==0){this._declusterAll(),this.body.emitter.emit("_layoutFailed"),console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*u)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(e,this.body.edgeIndices,!0),this._shiftToCenter();const s=70;for(let u=0;u<e.length;u++){const l=this.body.nodes[e[u]];l.predefinedPosition===!1&&(l.x+=(.5-this._rng())*s,l.y+=(.5-this._rng())*s)}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}_shiftToCenter(){const e=wr.getRangeCore(this.body.nodes,this.body.nodeIndices),t=wr.findCenter(e);for(let n=0;n<this.body.nodeIndices.length;n++){const i=this.body.nodes[this.body.nodeIndices[n]];i.x-=t.x,i.y-=t.y}}_declusterAll(){let e=!0;for(;e===!0;){e=!1;for(let t=0;t<this.body.nodeIndices.length;t++)this.body.nodes[this.body.nodeIndices[t]].isCluster===!0&&(e=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[t],{},!1));e===!0&&this.body.emitter.emit("_dataChanged")}}getSeed(){return this.initialRandomSeed}setupHierarchicalLayout(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){let e,t,n=!1,i=!1;this.lastNodeOnLevel={},this.hierarchical=new _oe;for(t in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&(e=this.body.nodes[t],e.options.level!==void 0?(n=!0,this.hierarchical.levels[t]=e.options.level):i=!0);if(i===!0&&n===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");{if(i===!0){const o=this.options.hierarchical.sortMethod;o==="hubsize"?this._determineLevelsByHubsize():o==="directed"?this._determineLevelsDirected():o==="custom"&&this._determineLevelsCustomCallback()}for(const o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);const a=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(a),this._condenseHierarchy(),this._shiftToCenter()}}}_condenseHierarchy(){var e=this;let t=!1;const n={},i=()=>{const g=o();let m=0;for(let b=0;b<g.length-1;b++){const w=g[b].max-g[b+1].min;m+=w+this.options.hierarchical.treeSpacing,a(b+1,m)}},a=(g,m)=>{const b=this.hierarchical.trees;for(const w in b)Object.prototype.hasOwnProperty.call(b,w)&&b[w]===g&&this.direction.shift(w,m)},o=()=>{const g=[];for(let m=0;m<this.hierarchical.numTrees();m++)g.push(this.direction.getTreeSize(m));return g},s=(g,m)=>{if(!m[g.id]&&(m[g.id]=!0,this.hierarchical.childrenReference[g.id])){const b=this.hierarchical.childrenReference[g.id];if(b.length>0)for(let w=0;w<b.length;w++)s(this.body.nodes[b[w]],m)}},u=function(g){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e9,b=1e9,w=1e9,S=1e9,T=-1e9;for(const _ in g)if(Object.prototype.hasOwnProperty.call(g,_)){const E=e.body.nodes[_],x=e.hierarchical.levels[E.id],P=e.direction.getPosition(E),[C,I]=e._getSpaceAroundNode(E,g);b=Math.min(C,b),w=Math.min(I,w),x<=m&&(S=Math.min(P,S),T=Math.max(P,T))}return[S,T,b,w]},l=(g,m)=>{const b=this.hierarchical.getMaxLevel(g.id),w=this.hierarchical.getMaxLevel(m.id);return Math.min(b,w)},c=(g,m,b)=>{const w=this.hierarchical;for(let S=0;S<m.length;S++){const T=m[S],_=w.distributionOrdering[T];if(_.length>1)for(let E=0;E<_.length-1;E++){const x=_[E],P=_[E+1];w.hasSameParent(x,P)&&w.inSameSubNetwork(x,P)&&g(x,P,b)}}},d=function(g,m){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const w=e.direction.getPosition(g),S=e.direction.getPosition(m),T=Math.abs(S-w),_=e.options.hierarchical.nodeSpacing;if(T>_){const E={},x={};s(g,E),s(m,x);const P=l(g,m),C=u(E,P),I=u(x,P),O=C[1],$=I[0],D=I[2];if(Math.abs(O-$)>_){let A=O-$+_;A<-D+_&&(A=-D+_),A<0&&(e._shiftBlock(m.id,A),t=!0,b===!0&&e._centerParent(m))}}},h=(g,m)=>{const b=m.id,w=m.edges,S=this.hierarchical.levels[m.id],T=this.options.hierarchical.levelSeparation*this.options.hierarchical.levelSeparation,_={},E=[];for(let D=0;D<w.length;D++){const q=w[D];if(q.toId!=q.fromId){const A=q.toId==b?q.from:q.to;_[w[D].id]=A,this.hierarchical.levels[A.id]<S&&E.push(q)}}const x=(D,q)=>{let A=0;for(let k=0;k<q.length;k++)if(_[q[k].id]!==void 0){const F=this.direction.getPosition(_[q[k].id])-D;A+=F/Math.sqrt(F*F+T)}return A},P=(D,q)=>{let A=0;for(let k=0;k<q.length;k++)if(_[q[k].id]!==void 0){const F=this.direction.getPosition(_[q[k].id])-D;A-=T*Math.pow(F*F+T,-1.5)}return A},C=(D,q)=>{let A=this.direction.getPosition(m);const k={};for(let F=0;F<D;F++){const j=x(A,q),M=P(A,q),L=40,U=Math.max(-L,Math.min(L,Math.round(j/M)));if(A=A-U,k[A]!==void 0)break;k[A]=F}return A},I=D=>{const q=this.direction.getPosition(m);if(n[m.id]===void 0){const L={};s(m,L),n[m.id]=L}const A=u(n[m.id]),k=A[2],F=A[3],j=D-q;let M=0;j>0?M=Math.min(j,F-this.options.hierarchical.nodeSpacing):j<0&&(M=-Math.min(-j,k-this.options.hierarchical.nodeSpacing)),M!=0&&(this._shiftBlock(m.id,M),t=!0)},O=D=>{const q=this.direction.getPosition(m),[A,k]=this._getSpaceAroundNode(m),F=D-q;let j=q;F>0?j=Math.min(q+(k-this.options.hierarchical.nodeSpacing),D):F<0&&(j=Math.max(q-(A-this.options.hierarchical.nodeSpacing),D)),j!==q&&(this.direction.setPosition(m,j),t=!0)};let $=C(g,E);I($),$=C(g,w),O($)},f=g=>{let m=this.hierarchical.getLevels();m=ha(m).call(m);for(let b=0;b<g;b++){t=!1;for(let w=0;w<m.length;w++){const S=m[w],T=this.hierarchical.distributionOrdering[S];for(let _=0;_<T.length;_++)h(1e3,T[_])}if(t!==!0)break}},v=g=>{let m=this.hierarchical.getLevels();m=ha(m).call(m);for(let b=0;b<g&&(t=!1,c(d,m,!0),t===!0);b++);},p=()=>{for(const g in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,g)&&this._centerParent(this.body.nodes[g])},y=()=>{let g=this.hierarchical.getLevels();g=ha(g).call(g);for(let m=0;m<g.length;m++){const b=g[m],w=this.hierarchical.distributionOrdering[b];for(let S=0;S<w.length;S++)this._centerParent(w[S])}};this.options.hierarchical.blockShifting===!0&&(v(5),p()),this.options.hierarchical.edgeMinimization===!0&&f(20),this.options.hierarchical.parentCentralization===!0&&y(),i()}_getSpaceAroundNode(e,t){let n=!0;t===void 0&&(n=!1);const i=this.hierarchical.levels[e.id];if(i!==void 0){const a=this.hierarchical.distributionIndex[e.id],o=this.direction.getPosition(e),s=this.hierarchical.distributionOrdering[i];let u=1e9,l=1e9;if(a!==0){const c=s[a-1];if(n===!0&&t[c.id]===void 0||n===!1){const d=this.direction.getPosition(c);u=o-d}}if(a!=s.length-1){const c=s[a+1];if(n===!0&&t[c.id]===void 0||n===!1){const d=this.direction.getPosition(c);l=Math.min(l,d-o)}}return[u,l]}else return[0,0]}_centerParent(e){if(this.hierarchical.parentReference[e.id]){const t=this.hierarchical.parentReference[e.id];for(let n=0;n<t.length;n++){const i=t[n],a=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(o!==void 0){const s=this._getCenterPosition(o),u=this.direction.getPosition(a),[l,c]=this._getSpaceAroundNode(a),d=u-s;(d<0&&Math.abs(d)<c-this.options.hierarchical.nodeSpacing||d>0&&Math.abs(d)<l-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(a,s)}}}}_placeNodesByHierarchy(e){this.positionedNodes={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var t;let i=_t(e[n]);i=this._indexArrayToNodes(i),_o(t=this.direction).call(t,i);let a=0;for(let o=0;o<i.length;o++){const s=i[o];if(this.positionedNodes[s.id]===void 0){const u=this.options.hierarchical.nodeSpacing;let l=u*a;a>0&&(l=this.direction.getPosition(i[o-1])+u),this.direction.setPosition(s,l,n),this._validatePositionAndContinue(s,n,l),a++}}}}_placeBranchNodes(e,t){var n;const i=this.hierarchical.childrenReference[e];if(i===void 0)return;const a=[];for(let s=0;s<i.length;s++)a.push(this.body.nodes[i[s]]);_o(n=this.direction).call(n,a);for(let s=0;s<a.length;s++){const u=a[s],l=this.hierarchical.levels[u.id];if(l>t&&this.positionedNodes[u.id]===void 0){const c=this.options.hierarchical.nodeSpacing;let d;s===0?d=this.direction.getPosition(this.body.nodes[e]):d=this.direction.getPosition(a[s-1])+c,this.direction.setPosition(u,d,l),this._validatePositionAndContinue(u,l,d)}else return}const o=this._getCenterPosition(a);this.direction.setPosition(this.body.nodes[e],o,t)}_validatePositionAndContinue(e,t,n){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[t]!==void 0){const i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[t]]);if(n-i<this.options.hierarchical.nodeSpacing){const a=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[t],e.id);this._shiftBlock(o.withChild,a)}}this.lastNodeOnLevel[t]=e.id,this.positionedNodes[e.id]=!0,this._placeBranchNodes(e.id,t)}}_indexArrayToNodes(e){const t=[];for(let n=0;n<e.length;n++)t.push(this.body.nodes[e[n]]);return t}_getDistribution(){const e={};let t,n;for(t in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,t)){n=this.body.nodes[t];const i=this.hierarchical.levels[t]===void 0?0:this.hierarchical.levels[t];this.direction.fix(n,i),e[i]===void 0&&(e[i]={}),e[i][t]=n}return e}_getActiveEdges(e){const t=[];return Ve(e.edges,n=>{var i;tt(i=this.body.edgeIndices).call(i,n.id)!==-1&&t.push(n)}),t}_getHubSizes(){const e={},t=this.body.nodeIndices;Ve(t,i=>{const a=this.body.nodes[i],o=this._getActiveEdges(a).length;e[o]=!0});const n=[];return Ve(e,i=>{n.push(Number(i))}),_o(n).call(n,function(i,a){return a-i}),n}_determineLevelsByHubsize(){const e=(n,i)=>{this.hierarchical.levelDownstream(n,i)},t=this._getHubSizes();for(let n=0;n<t.length;++n){const i=t[n];if(i===0)break;Ve(this.body.nodeIndices,a=>{const o=this.body.nodes[a];i===this._getActiveEdges(o).length&&this._crawlNetwork(e,a)})}}_determineLevelsCustomCallback(){const t=function(i,a,o){},n=(i,a,o)=>{let s=this.hierarchical.levels[i.id];s===void 0&&(s=this.hierarchical.levels[i.id]=1e5);const u=t(wr.cloneOptions(i,"node"),wr.cloneOptions(a,"node"),wr.cloneOptions(o,"edge"));this.hierarchical.levels[a.id]=s+u};this._crawlNetwork(n),this.hierarchical.setMinLevelToZero()}_determineLevelsDirected(){var e;const t=_4(e=this.body.nodeIndices).call(e,(n,i)=>(n.set(i,this.body.nodes[i]),n),new ST);this.options.hierarchical.shakeTowards==="roots"?this.hierarchical.levels=Soe(t):this.hierarchical.levels=Eoe(t),this.hierarchical.setMinLevelToZero()}_generateMap(){const e=(t,n)=>{this.hierarchical.levels[n.id]>this.hierarchical.levels[t.id]&&this.hierarchical.addRelation(t.id,n.id)};this._crawlNetwork(e),this.hierarchical.checkIfTree()}_crawlNetwork(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0;const n={},i=(a,o)=>{if(n[a.id]===void 0){this.hierarchical.setTreeIndex(a,o),n[a.id]=!0;let s;const u=this._getActiveEdges(a);for(let l=0;l<u.length;l++){const c=u[l];c.connected===!0&&(c.toId==a.id?s=c.from:s=c.to,a.id!=s.id&&(e(a,s,c),i(s,o)))}}};if(t===void 0){let a=0;for(let o=0;o<this.body.nodeIndices.length;o++){const s=this.body.nodeIndices[o];if(n[s]===void 0){const u=this.body.nodes[s];i(u,a),a+=1}}}else{const a=this.body.nodes[t];if(a===void 0){console.error("Node not found:",t);return}i(a)}}_shiftBlock(e,t){const n={},i=a=>{if(n[a])return;n[a]=!0,this.direction.shift(a,t);const o=this.hierarchical.childrenReference[a];if(o!==void 0)for(let s=0;s<o.length;s++)i(o[s])};i(e)}_findCommonParent(e,t){const n={},i=(o,s)=>{const u=this.hierarchical.parentReference[s];if(u!==void 0)for(let l=0;l<u.length;l++){const c=u[l];o[c]=!0,i(o,c)}},a=(o,s)=>{const u=this.hierarchical.parentReference[s];if(u!==void 0)for(let l=0;l<u.length;l++){const c=u[l];if(o[c]!==void 0)return{foundParent:c,withChild:s};const d=a(o,c);if(d.foundParent!==null)return d}return{foundParent:null,withChild:s}};return i(n,e),a(n,t)}setDirectionStrategy(){this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"?this.direction=new hoe(this):this.direction=new foe(this)}_getCenterPosition(e){let t=1e9,n=-1e9;for(let i=0;i<e.length;i++){let a;if(e[i].id!==void 0)a=e[i];else{const s=e[i];a=this.body.nodes[s]}const o=this.direction.getPosition(a);t=Math.min(t,o),n=Math.max(n,o)}return .5*(t+n)}}class xoe{constructor(e,t,n,i){var a,o;this.body=e,this.canvas=t,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},At(this.options,this.defaultOptions),this.body.emitter.on("destroy",()=>{this._clean()}),this.body.emitter.on("_dataChanged",ae(a=this._restore).call(a,this)),this.body.emitter.on("_resetData",ae(o=this._restore).call(o,this))}_restore(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}setOptions(e,t,n){t!==void 0&&(t.locale!==void 0?this.options.locale=t.locale:this.options.locale=n.locale,t.locales!==void 0?this.options.locales=t.locales:this.options.locales=n.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,ct(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}toggleEditMode(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}enableEditMode(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}disableEditMode(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}showManipulatorToolbar(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){var e,t;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";const n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),a=n+i,o=this.options.locales[this.options.locale];let s=!1;this.options.addNode!==!1&&(this._createAddNodeButton(o),s=!0),this.options.addEdge!==!1&&(s===!0?this._createSeperator(1):s=!0,this._createAddEdgeButton(o)),n===1&&typeof this.options.editNode=="function"?(s===!0?this._createSeperator(2):s=!0,this._createEditNodeButton(o)):i===1&&n===0&&this.options.editEdge!==!1&&(s===!0?this._createSeperator(3):s=!0,this._createEditEdgeButton(o)),a!==0&&(n>0&&this.options.deleteNode!==!1?(s===!0&&this._createSeperator(4),this._createDeleteButton(o)):n===0&&this.options.deleteEdge!==!1&&(s===!0&&this._createSeperator(4),this._createDeleteButton(o))),this._bindElementEvents(this.closeDiv,ae(e=this.toggleEditMode).call(e,this)),this._temporaryBindEvent("select",ae(t=this.showManipulatorToolbar).call(t,this))}this.body.emitter.emit("_redraw")}addNodeMode(){var e;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var t;const n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,ae(t=this.toggleEditMode).call(t,this))}this._temporaryBindEvent("click",ae(e=this._performAddNode).call(e,this))}editNode(){this.editMode!==!0&&this.enableEditMode(),this._clean();const e=this.selectionHandler.getSelectedNodes()[0];if(e!==void 0)if(this.inMode="editNode",typeof this.options.editNode=="function")if(e.isCluster!==!0){const t=ct({},e.options,!1);if(t.x=e.x,t.y=e.y,this.options.editNode.length===2)this.options.editNode(t,n=>{n!=null&&this.inMode==="editNode"&&this.body.data.nodes.getDataSet().update(n),this.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw new Error("No function has been configured to handle the editing of nodes.");else this.showManipulatorToolbar()}addEdgeMode(){var e,t,n,i,a;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var o;const s=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(s),this._createSeperator(),this._createDescription(s.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,ae(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",ae(e=this._handleConnect).call(e,this)),this._temporaryBindUI("onDragEnd",ae(t=this._finishConnect).call(t,this)),this._temporaryBindUI("onDrag",ae(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",ae(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",ae(a=this._dragStartEdge).call(a,this)),this._temporaryBindUI("onHold",()=>{})}editEdgeMode(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",typeof this.options.editEdge=="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0)){const o=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(o.from.id,o.to.id);return}if(this.guiEnabled===!0){var e;const o=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(o),this._createSeperator(),this._createDescription(o.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,ae(e=this.toggleEditMode).call(e,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],this.edgeBeingEditedId!==void 0){var t,n,i,a;const o=this.body.edges[this.edgeBeingEditedId],s=this._getNewTargetNode(o.from.x,o.from.y),u=this._getNewTargetNode(o.to.x,o.to.y);this.temporaryIds.nodes.push(s.id),this.temporaryIds.nodes.push(u.id),this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id),this.body.nodes[u.id]=u,this.body.nodeIndices.push(u.id),this._temporaryBindUI("onTouch",ae(t=this._controlNodeTouch).call(t,this)),this._temporaryBindUI("onTap",()=>{}),this._temporaryBindUI("onHold",()=>{}),this._temporaryBindUI("onDragStart",ae(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",ae(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",ae(a=this._controlNodeDragEnd).call(a,this)),this._temporaryBindUI("onMouseMove",()=>{}),this._temporaryBindEvent("beforeDrawing",l=>{const c=o.edgeType.findBorderPositions(l);s.selected===!1&&(s.x=c.from.x,s.y=c.from.y),u.selected===!1&&(u.x=c.to.x,u.y=c.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}deleteSelected(){this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";const e=this.selectionHandler.getSelectedNodeIds(),t=this.selectionHandler.getSelectedEdgeIds();let n;if(e.length>0){for(let i=0;i<e.length;i++)if(this.body.nodes[e[i]].isCluster===!0){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}typeof this.options.deleteNode=="function"&&(n=this.options.deleteNode)}else t.length>0&&typeof this.options.deleteEdge=="function"&&(n=this.options.deleteEdge);if(typeof n=="function"){const i={nodes:e,edges:t};if(n.length===2)n(i,a=>{a!=null&&this.inMode==="delete"?(this.body.data.edges.getDataSet().remove(a.edges),this.body.data.nodes.getDataSet().remove(a.nodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()):(this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)")}else this.body.data.edges.getDataSet().remove(t),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}_setup(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}_createWrappers(){if(this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0){var e,t;this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",(e=(t=this.options.locales[this.options.locale])===null||t===void 0?void 0:t.close)!==null&&e!==void 0?e:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv)}}_getNewTargetNode(e,t){const n=ct({},this.options.controlNodeStyle);n.id="targetNode"+js(),n.hidden=!1,n.physics=!1,n.x=e,n.y=t;const i=this.body.functions.createNode(n);return i.shape.boundingBox={left:e,right:e,top:t,bottom:t},i}_createEditButton(){var e;this._clean(),this.manipulationDOM={},ci(this.editModeDiv);const t=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,ae(e=this.toggleEditMode).call(e,this))}_clean(){this.inMode=!1,this.guiEnabled===!0&&(ci(this.editModeDiv),ci(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}_cleanupDOMEventListeners(){for(const t of Hn(e=this._domEventListenerCleanupQueue).call(e,0)){var e;t()}}_removeManipulationDOM(){this._clean(),ci(this.manipulationDiv),ci(this.editModeDiv),ci(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}_createSeperator(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}_createAddNodeButton(e){var t;const n=this._createButton("addNode","vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(t=this.addNodeMode).call(t,this))}_createAddEdgeButton(e){var t;const n=this._createButton("addEdge","vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(t=this.addEdgeMode).call(t,this))}_createEditNodeButton(e){var t;const n=this._createButton("editNode","vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(t=this.editNode).call(t,this))}_createEditEdgeButton(e){var t;const n=this._createButton("editEdge","vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(t=this.editEdgeMode).call(t,this))}_createDeleteButton(e){var t;let n;this.options.rtl?n="vis-delete-rtl":n="vis-delete";const i=this._createButton("delete",n,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,ae(t=this.deleteSelected).call(t,this))}_createBackButton(e){var t;const n=this._createButton("back","vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,ae(t=this.showManipulatorToolbar).call(t,this))}_createButton(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("button"),this.manipulationDOM[e+"Div"].className="vis-button "+t,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=i,this.manipulationDOM[e+"Label"].innerText=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}_createDescription(e){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=e,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}_temporaryBindEvent(e,t){this.temporaryEventFunctions.push({event:e,boundFunction:t}),this.body.emitter.on(e,t)}_temporaryBindUI(e,t){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=t;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+ju(_t(this.body.eventListeners)))}_unbindTemporaryUIs(){for(const e in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}_unbindTemporaryEvents(){for(let e=0;e<this.temporaryEventFunctions.length;e++){const t=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(t,n)}this.temporaryEventFunctions=[]}_bindElementEvents(e,t){const n=new Eo(e,{});dc(n,t),this._domEventListenerCleanupQueue.push(()=>{n.destroy()});const i=a=>{let{keyCode:o,key:s}=a;(s==="Enter"||s===" "||o===13||o===32)&&t()};e.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push(()=>{e.removeEventListener("keyup",i,!1)})}_cleanupTemporaryNodesAndEdges(){for(let a=0;a<this.temporaryIds.edges.length;a++){var e;this.body.edges[this.temporaryIds.edges[a]].disconnect(),delete this.body.edges[this.temporaryIds.edges[a]];const o=tt(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[a]);if(o!==-1){var t;Hn(t=this.body.edgeIndices).call(t,o,1)}}for(let a=0;a<this.temporaryIds.nodes.length;a++){var n;delete this.body.nodes[this.temporaryIds.nodes[a]];const o=tt(n=this.body.nodeIndices).call(n,this.temporaryIds.nodes[a]);if(o!==-1){var i;Hn(i=this.body.nodeIndices).call(i,o,1)}}this.temporaryIds={nodes:[],edges:[]}}_controlNodeTouch(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=At({},this.body.view.translation)}_controlNodeDragStart(){const e=this.lastTouch,t=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],a=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;const o=n.isOverlappingWith(t),s=i.isOverlappingWith(t);o===!0?(this.selectedControlNode=n,a.edgeType.from=n):s===!0&&(this.selectedControlNode=i,a.edgeType.to=i),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}_controlNodeDrag(e){this.body.emitter.emit("disablePhysics");const t=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(t);this.selectedControlNode!==void 0?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(e),this.body.emitter.emit("_redraw")}_controlNodeDragEnd(e){const t=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(t),i=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===void 0)return;this.selectionHandler.unselectAll();const a=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let s=a.length-1;s>=0;s--)if(a[s]!==this.selectedControlNode.id){o=this.body.nodes[a[s]];break}if(o!==void 0&&this.selectedControlNode!==void 0)if(o.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const s=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===s.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}_handleConnect(e){if(new Date().valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=At({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;const t=this.lastTouch,n=this.selectionHandler.getNodeAt(t);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{const i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);const a=this.body.functions.createEdge({id:"connectionEdge"+js(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[a.id]=a,this.body.edgeIndices.push(a.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(a.id)}this.touchTime=new Date().valueOf()}}_dragControlNode(e){const t=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(t);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const a=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let u=a.length-1;u>=0;u--){var s;if(tt(s=this.temporaryIds.nodes).call(s,a[u])===-1){o=this.body.nodes[a[u]];break}}if(e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",e,t),this.temporaryIds.nodes[0]!==void 0){const u=this.body.nodes[this.temporaryIds.nodes[0]];u.x=this.canvas._XconvertDOMtoCanvas(t.x),u.y=this.canvas._YconvertDOMtoCanvas(t.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(e)}_finishConnect(e){const t=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(t);let i;this.temporaryIds.edges[0]!==void 0&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);const a=this.selectionHandler._getAllNodesOverlappingWith(n);let o;for(let u=a.length-1;u>=0;u--){var s;if(tt(s=this.temporaryIds.nodes).call(s,a[u])===-1){o=this.body.nodes[a[u]];break}}this._cleanupTemporaryNodesAndEdges(),o!==void 0&&(o.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[i]!==void 0&&this.body.nodes[o.id]!==void 0&&this._performAddEdge(i,o.id)),e.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",e,t),this.body.emitter.emit("_redraw")}_dragStartEdge(e){const t=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",e,t,void 0,!0)}_performAddNode(e){const t={id:js(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode=="function")if(this.options.addNode.length===2)this.options.addNode(t,n=>{n!=null&&this.inMode==="addNode"&&this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(t),this.showManipulatorToolbar()}_performAddEdge(e,t){const n={from:e,to:t};if(typeof this.options.addEdge=="function")if(this.options.addEdge.length===2)this.options.addEdge(n,i=>{i!=null&&this.inMode==="addEdge"&&(this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}_performEditEdge(e,t){const n={id:this.edgeBeingEditedId,from:e,to:t,label:this.body.data.edges.get(this.edgeBeingEditedId).label};let i=this.options.editEdge;if(typeof i=="object"&&(i=i.editWithoutDrag),typeof i=="function")if(i.length===2)i(n,a=>{a==null||this.inMode!=="editEdge"?(this.body.edges[n.id].updateEdgeType(),this.body.emitter.emit("_redraw"),this.showManipulatorToolbar()):(this.body.data.edges.getDataSet().update(a),this.selectionHandler.unselectAll(),this.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}const ue="string",ie="boolean",Y="number",As="array",_e="object",C4="dom",Poe="any",Qw=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Jw={borderWidth:{number:Y},borderWidthSelected:{number:Y,undefined:"undefined"},brokenImage:{string:ue,undefined:"undefined"},chosen:{label:{boolean:ie,function:"function"},node:{boolean:ie,function:"function"},__type__:{object:_e,boolean:ie}},color:{border:{string:ue},background:{string:ue},highlight:{border:{string:ue},background:{string:ue},__type__:{object:_e,string:ue}},hover:{border:{string:ue},background:{string:ue},__type__:{object:_e,string:ue}},__type__:{object:_e,string:ue}},opacity:{number:Y,undefined:"undefined"},fixed:{x:{boolean:ie},y:{boolean:ie},__type__:{object:_e,boolean:ie}},font:{align:{string:ue},color:{string:ue},size:{number:Y},face:{string:ue},background:{string:ue},strokeWidth:{number:Y},strokeColor:{string:ue},vadjust:{number:Y},multi:{boolean:ie,string:ue},bold:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},boldital:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},ital:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},mono:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},__type__:{object:_e,string:ue}},group:{string:ue,number:Y,undefined:"undefined"},heightConstraint:{minimum:{number:Y},valign:{string:ue},__type__:{object:_e,boolean:ie,number:Y}},hidden:{boolean:ie},icon:{face:{string:ue},code:{string:ue},size:{number:Y},color:{string:ue},weight:{string:ue,number:Y},__type__:{object:_e}},id:{string:ue,number:Y},image:{selected:{string:ue,undefined:"undefined"},unselected:{string:ue,undefined:"undefined"},__type__:{object:_e,string:ue}},imagePadding:{top:{number:Y},right:{number:Y},bottom:{number:Y},left:{number:Y},__type__:{object:_e,number:Y}},label:{string:ue,undefined:"undefined"},labelHighlightBold:{boolean:ie},level:{number:Y,undefined:"undefined"},margin:{top:{number:Y},right:{number:Y},bottom:{number:Y},left:{number:Y},__type__:{object:_e,number:Y}},mass:{number:Y},physics:{boolean:ie},scaling:{min:{number:Y},max:{number:Y},label:{enabled:{boolean:ie},min:{number:Y},max:{number:Y},maxVisible:{number:Y},drawThreshold:{number:Y},__type__:{object:_e,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:_e}},shadow:{enabled:{boolean:ie},color:{string:ue},size:{number:Y},x:{number:Y},y:{number:Y},__type__:{object:_e,boolean:ie}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:ie,array:As},borderRadius:{number:Y},interpolation:{boolean:ie},useImageSize:{boolean:ie},useBorderWithImage:{boolean:ie},coordinateOrigin:{string:["center","top-left"]},__type__:{object:_e}},size:{number:Y},title:{string:ue,dom:C4,undefined:"undefined"},value:{number:Y,undefined:"undefined"},widthConstraint:{minimum:{number:Y},maximum:{number:Y},__type__:{object:_e,boolean:ie,number:Y}},x:{number:Y},y:{number:Y},__type__:{object:_e}},Coe={configure:{enabled:{boolean:ie},filter:{boolean:ie,string:ue,array:As,function:"function"},container:{dom:C4},showButton:{boolean:ie},__type__:{object:_e,boolean:ie,string:ue,array:As,function:"function"}},edges:{arrows:{to:{enabled:{boolean:ie},scaleFactor:{number:Y},type:{string:Qw},imageHeight:{number:Y},imageWidth:{number:Y},src:{string:ue},__type__:{object:_e,boolean:ie}},middle:{enabled:{boolean:ie},scaleFactor:{number:Y},type:{string:Qw},imageWidth:{number:Y},imageHeight:{number:Y},src:{string:ue},__type__:{object:_e,boolean:ie}},from:{enabled:{boolean:ie},scaleFactor:{number:Y},type:{string:Qw},imageWidth:{number:Y},imageHeight:{number:Y},src:{string:ue},__type__:{object:_e,boolean:ie}},__type__:{string:["from","to","middle"],object:_e}},endPointOffset:{from:{number:Y},to:{number:Y},__type__:{object:_e,number:Y}},arrowStrikethrough:{boolean:ie},background:{enabled:{boolean:ie},color:{string:ue},size:{number:Y},dashes:{boolean:ie,array:As},__type__:{object:_e,boolean:ie}},chosen:{label:{boolean:ie,function:"function"},edge:{boolean:ie,function:"function"},__type__:{object:_e,boolean:ie}},color:{color:{string:ue},highlight:{string:ue},hover:{string:ue},inherit:{string:["from","to","both"],boolean:ie},opacity:{number:Y},__type__:{object:_e,string:ue}},dashes:{boolean:ie,array:As},font:{color:{string:ue},size:{number:Y},face:{string:ue},background:{string:ue},strokeWidth:{number:Y},strokeColor:{string:ue},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Y},multi:{boolean:ie,string:ue},bold:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},boldital:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},ital:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},mono:{color:{string:ue},size:{number:Y},face:{string:ue},mod:{string:ue},vadjust:{number:Y},__type__:{object:_e,string:ue}},__type__:{object:_e,string:ue}},hidden:{boolean:ie},hoverWidth:{function:"function",number:Y},label:{string:ue,undefined:"undefined"},labelHighlightBold:{boolean:ie},length:{number:Y,undefined:"undefined"},physics:{boolean:ie},scaling:{min:{number:Y},max:{number:Y},label:{enabled:{boolean:ie},min:{number:Y},max:{number:Y},maxVisible:{number:Y},drawThreshold:{number:Y},__type__:{object:_e,boolean:ie}},customScalingFunction:{function:"function"},__type__:{object:_e}},selectionWidth:{function:"function",number:Y},selfReferenceSize:{number:Y},selfReference:{size:{number:Y},angle:{number:Y},renderBehindTheNode:{boolean:ie},__type__:{object:_e}},shadow:{enabled:{boolean:ie},color:{string:ue},size:{number:Y},x:{number:Y},y:{number:Y},__type__:{object:_e,boolean:ie}},smooth:{enabled:{boolean:ie},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Y},forceDirection:{string:["horizontal","vertical","none"],boolean:ie},__type__:{object:_e,boolean:ie}},title:{string:ue,undefined:"undefined"},width:{number:Y},widthConstraint:{maximum:{number:Y},__type__:{object:_e,boolean:ie,number:Y}},value:{number:Y,undefined:"undefined"},__type__:{object:_e}},groups:{useDefaultGroups:{boolean:ie},__any__:Jw,__type__:{object:_e}},interaction:{dragNodes:{boolean:ie},dragView:{boolean:ie},hideEdgesOnDrag:{boolean:ie},hideEdgesOnZoom:{boolean:ie},hideNodesOnDrag:{boolean:ie},hover:{boolean:ie},keyboard:{enabled:{boolean:ie},speed:{x:{number:Y},y:{number:Y},zoom:{number:Y},__type__:{object:_e}},bindToWindow:{boolean:ie},autoFocus:{boolean:ie},__type__:{object:_e,boolean:ie}},multiselect:{boolean:ie},navigationButtons:{boolean:ie},selectable:{boolean:ie},selectConnectedEdges:{boolean:ie},hoverConnectedEdges:{boolean:ie},tooltipDelay:{number:Y},zoomView:{boolean:ie},zoomSpeed:{number:Y},__type__:{object:_e}},layout:{randomSeed:{undefined:"undefined",number:Y,string:ue},improvedLayout:{boolean:ie},clusterThreshold:{number:Y},hierarchical:{enabled:{boolean:ie},levelSeparation:{number:Y},nodeSpacing:{number:Y},treeSpacing:{number:Y},blockShifting:{boolean:ie},edgeMinimization:{boolean:ie},parentCentralization:{boolean:ie},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:_e,boolean:ie}},__type__:{object:_e}},manipulation:{enabled:{boolean:ie},initiallyActive:{boolean:ie},addNode:{boolean:ie,function:"function"},addEdge:{boolean:ie,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:_e,boolean:ie,function:"function"}},deleteNode:{boolean:ie,function:"function"},deleteEdge:{boolean:ie,function:"function"},controlNodeStyle:Jw,__type__:{object:_e,boolean:ie}},nodes:Jw,physics:{enabled:{boolean:ie},barnesHut:{theta:{number:Y},gravitationalConstant:{number:Y},centralGravity:{number:Y},springLength:{number:Y},springConstant:{number:Y},damping:{number:Y},avoidOverlap:{number:Y},__type__:{object:_e}},forceAtlas2Based:{theta:{number:Y},gravitationalConstant:{number:Y},centralGravity:{number:Y},springLength:{number:Y},springConstant:{number:Y},damping:{number:Y},avoidOverlap:{number:Y},__type__:{object:_e}},repulsion:{centralGravity:{number:Y},springLength:{number:Y},springConstant:{number:Y},nodeDistance:{number:Y},damping:{number:Y},__type__:{object:_e}},hierarchicalRepulsion:{centralGravity:{number:Y},springLength:{number:Y},springConstant:{number:Y},nodeDistance:{number:Y},damping:{number:Y},avoidOverlap:{number:Y},__type__:{object:_e}},maxVelocity:{number:Y},minVelocity:{number:Y},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:ie},iterations:{number:Y},updateInterval:{number:Y},onlyDynamicEdges:{boolean:ie},fit:{boolean:ie},__type__:{object:_e,boolean:ie}},timestep:{number:Y},adaptiveTimestep:{boolean:ie},wind:{x:{number:Y},y:{number:Y},__type__:{object:_e}},__type__:{object:_e,boolean:ie}},autoResize:{boolean:ie},clickToUse:{boolean:ie},locale:{string:ue},locales:{__any__:{any:Poe},__type__:{object:_e}},height:{string:ue},width:{string:ue},__type__:{object:_e}},I4={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},Ioe=(r,e,t)=>{var n;return!!(wi(r).call(r,"physics")&&wi(n=I4.physics.solver).call(n,e)&&t.physics.solver!==e&&e!=="wind")};class Ooe{constructor(){}getDistances(e,t,n){const i={},a=e.edges;for(let s=0;s<t.length;s++){const u=t[s],l={};i[u]=l;for(let c=0;c<t.length;c++)l[t[c]]=s==c?0:1e9}for(let s=0;s<n.length;s++){const u=a[n[s]];u.connected===!0&&i[u.fromId]!==void 0&&i[u.toId]!==void 0&&(i[u.fromId][u.toId]=1,i[u.toId][u.fromId]=1)}const o=t.length;for(let s=0;s<o;s++){const u=t[s],l=i[u];for(let c=0;c<o-1;c++){const d=t[c],h=i[d];for(let f=c+1;f<o;f++){const v=t[f],p=i[v],y=Math.min(h[v],h[u]+l[v]);h[v]=y,p[d]=y}}}return i}}class Roe{constructor(e,t,n){this.body=e,this.springLength=t,this.springConstant=n,this.distanceSolver=new Ooe}setOptions(e){e&&(e.springLength&&(this.springLength=e.springLength),e.springConstant&&(this.springConstant=e.springConstant))}solve(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const i=this.distanceSolver.getDistances(this.body,e,t);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();const a=.01,o=1;let s=0;const u=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),l=5;let c=1e9,d=0,h=0,f=0,v=0,p=0;for(;c>a&&s<u;)for(s+=1,[d,c,h,f]=this._getHighestEnergyNode(n),v=c,p=0;v>o&&p<l;)p+=1,this._moveNode(d,h,f),[v,h,f]=this._getEnergy(d)}_getHighestEnergyNode(e){const t=this.body.nodeIndices,n=this.body.nodes;let i=0,a=t[0],o=0,s=0;for(let u=0;u<t.length;u++){const l=t[u];if(n[l].predefinedPosition!==!0||n[l].isCluster===!0&&e===!0||n[l].options.fixed.x!==!0||n[l].options.fixed.y!==!0){const[c,d,h]=this._getEnergy(l);i<c&&(i=c,a=l,o=d,s=h)}}return[a,i,o,s]}_getEnergy(e){const[t,n]=this.E_sums[e];return[Math.sqrt(t**2+n**2),t,n]}_moveNode(e,t,n){const i=this.body.nodeIndices,a=this.body.nodes;let o=0,s=0,u=0;const l=a[e].x,c=a[e].y,d=this.K_matrix[e],h=this.L_matrix[e];for(let w=0;w<i.length;w++){const S=i[w];if(S!==e){const T=a[S].x,_=a[S].y,E=d[S],x=h[S],P=1/((l-T)**2+(c-_)**2)**1.5;o+=E*(1-x*(c-_)**2*P),s+=E*(x*(l-T)*(c-_)*P),u+=E*(1-x*(l-T)**2*P)}}const f=o,v=s,p=t,y=u,g=n,m=(p/f+g/v)/(v/f-y/v),b=-(v*m+p)/f;a[e].x+=b,a[e].y+=m,this._updateE_matrix(e)}_createL_matrix(e){const t=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(let i=0;i<t.length;i++){this.L_matrix[t[i]]={};for(let a=0;a<t.length;a++)this.L_matrix[t[i]][t[a]]=n*e[t[i]][t[a]]}}_createK_matrix(e){const t=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(let i=0;i<t.length;i++){this.K_matrix[t[i]]={};for(let a=0;a<t.length;a++)this.K_matrix[t[i]][t[a]]=n*e[t[i]][t[a]]**-2}}_createE_matrix(){const e=this.body.nodeIndices,t=this.body.nodes;this.E_matrix={},this.E_sums={};for(let n=0;n<e.length;n++)this.E_matrix[e[n]]=[];for(let n=0;n<e.length;n++){const i=e[n],a=t[i].x,o=t[i].y;let s=0,u=0;for(let l=n;l<e.length;l++){const c=e[l];if(c!==i){const d=t[c].x,h=t[c].y,f=1/Math.sqrt((a-d)**2+(o-h)**2);this.E_matrix[i][l]=[this.K_matrix[i][c]*(a-d-this.L_matrix[i][c]*(a-d)*f),this.K_matrix[i][c]*(o-h-this.L_matrix[i][c]*(o-h)*f)],this.E_matrix[c][n]=this.E_matrix[i][l],s+=this.E_matrix[i][l][0],u+=this.E_matrix[i][l][1]}}this.E_sums[i]=[s,u]}}_updateE_matrix(e){const t=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[e],a=this.K_matrix[e],o=this.L_matrix[e],s=n[e].x,u=n[e].y;let l=0,c=0;for(let d=0;d<t.length;d++){const h=t[d];if(h!==e){const f=i[d],v=f[0],p=f[1],y=n[h].x,g=n[h].y,m=1/Math.sqrt((s-y)**2+(u-g)**2),b=a[h]*(s-y-o[h]*(s-y)*m),w=a[h]*(u-g-o[h]*(u-g)*m);i[d]=[b,w],l+=b,c+=w;const S=this.E_sums[h];S[0]+=b-v,S[1]+=w-p}}this.E_sums[e]=[l,c]}}function we(r,e,t){var n,i,a,o;if(!(this instanceof we))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:ere,clickToUse:!1},At(this.options,this.defaultOptions),this.body={container:r,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:ae(n=this.on).call(n,this),off:ae(i=this.off).call(i,this),emit:ae(a=this.emit).call(a,this),once:ae(o=this.once).call(o,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new nre(()=>this.body.emitter.emit("_requestRedraw")),this.groups=new mre,this.canvas=new hae(this.body),this.selectionHandler=new Uae(this.body,this.canvas),this.interactionHandler=new gae(this.body,this.canvas,this.selectionHandler),this.view=new vae(this.body,this.canvas),this.renderer=new sae(this.body,this.canvas),this.physics=new Jie(this.body),this.layoutEngine=new Toe(this.body),this.clustering=new oae(this.body),this.manipulation=new xoe(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Cie(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new Uie(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new Roe(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(t),this.setData(e)}iH(we.prototype);we.prototype.setOptions=function(r){if(r===null&&(r=void 0),r!==void 0){if($te.validate(r,Coe)===!0&&console.error("%cErrors have been found in the supplied options object.",JH),ds(["locale","locales","clickToUse"],this.options,r),r.locale!==void 0&&(r.locale=tre(r.locales||this.options.locales,r.locale)),r=this.layoutEngine.setOptions(r.layout,r),this.canvas.setOptions(r),this.groups.setOptions(r.groups),this.nodesHandler.setOptions(r.nodes),this.edgesHandler.setOptions(r.edges),this.physics.setOptions(r.physics),this.manipulation.setOptions(r.manipulation,r,this.options),this.interactionHandler.setOptions(r.interaction),this.renderer.setOptions(r.interaction),this.selectionHandler.setOptions(r.interaction),r.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in r&&(this.configurator||(this.configurator=new Ote(this,this.body.container,I4,this.canvas.pixelRatio,Ioe)),this.configurator.setOptions(r.configure)),this.configurator&&this.configurator.options.enabled===!0){const n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};ct(n.nodes,this.nodesHandler.options),ct(n.edges,this.edgesHandler.options),ct(n.layout,this.layoutEngine.options),ct(n.interaction,this.selectionHandler.options),ct(n.interaction,this.renderer.options),ct(n.interaction,this.interactionHandler.options),ct(n.manipulation,this.manipulation.options),ct(n.physics,this.physics.options),ct(n.global,this.canvas.options),ct(n.global,this.options),this.configurator.setModuleOptions(n)}r.clickToUse!==void 0?r.clickToUse===!0?this.activator===void 0&&(this.activator=new Ite(this.canvas.frame),this.activator.on("change",()=>{this.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}};we.prototype._updateVisibleIndices=function(){const r=this.body.nodes,e=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&!this.clustering._isClusteredNode(t)&&r[t].options.hidden===!1&&this.body.nodeIndices.push(r[t].id);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t],i=r[n.fromId],a=r[n.toId],o=i!==void 0&&a!==void 0;!this.clustering._isClusteredEdge(t)&&n.options.hidden===!1&&o&&i.options.hidden===!1&&a.options.hidden===!1&&this.body.edgeIndices.push(n.id)}};we.prototype.bindEventListeners=function(){this.body.emitter.on("_dataChanged",()=>{this.edgesHandler._updateState(),this.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",()=>{this.clustering._updateState(),this._updateVisibleIndices(),this._updateValueRange(this.body.nodes),this._updateValueRange(this.body.edges),this.body.emitter.emit("startSimulation"),this.body.emitter.emit("_requestRedraw")})};we.prototype.setData=function(r){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),r&&r.dot&&(r.nodes||r.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(r&&r.options),r&&r.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");const e=zte(r.dot);this.setData(e);return}else if(r&&r.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");const e=jte(r.gephi);this.setData(e);return}else this.nodesHandler.setData(r&&r.nodes,!0),this.edgesHandler.setData(r&&r.edges,!0);this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")};we.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(const r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&delete this.body.nodes[r];for(const r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&delete this.body.edges[r];ci(this.body.container)};we.prototype._updateValueRange=function(r){let e,t,n,i=0;for(e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const a=r[e].getValue();a!==void 0&&(t=t===void 0?a:Math.min(a,t),n=n===void 0?a:Math.max(a,n),i+=a)}if(t!==void 0&&n!==void 0)for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&r[e].setValueRange(t,n,i)};we.prototype.isActive=function(){return!this.activator||this.activator.active};we.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};we.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};we.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};we.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};we.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};we.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};we.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};we.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};we.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};we.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};we.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};we.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};we.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};we.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};we.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)};we.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};we.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};we.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};we.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};we.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};we.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};we.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)};we.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};we.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};we.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};we.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};we.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};we.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};we.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};we.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};we.prototype.getConnectedNodes=function(r){return this.body.nodes[r]!==void 0?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};we.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};we.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};we.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};we.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};we.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};we.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};we.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)};we.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)};we.prototype.getNodeAt=function(){const r=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return r!==void 0&&r.id!==void 0?r.id:r};we.prototype.getEdgeAt=function(){const r=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return r!==void 0&&r.id!==void 0?r.id:r};we.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};we.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};we.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()};we.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};we.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};we.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};we.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};we.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};we.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};we.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};we.prototype.getOptionsFromConfigurator=function(){let r={};return this.configurator&&(r=this.configurator.getOptions.apply(this.configurator)),r};function YS(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function $oe(r){if(Array.isArray(r))return r}function Doe(r){if(Array.isArray(r))return YS(r)}function Wi(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Aoe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,R4(n.key),n)}}function Hi(r,e,t){return e&&Aoe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ar(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=CT(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function O4(r,e,t){return(e=R4(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function qoe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function koe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=a.call(t)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function Moe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Boe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(r,e){return $oe(r)||koe(r,e)||CT(r,e)||Moe()}function hc(r){return Doe(r)||qoe(r)||CT(r)||Boe()}function Foe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function R4(r){var e=Foe(r,"string");return typeof e=="symbol"?e:e+""}function Vt(r){"@babel/helpers - typeof";return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(r)}function CT(r,e){if(r){if(typeof r=="string")return YS(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?YS(r,e):void 0}}var zt=typeof window>"u"?null:window,q5=zt?zt.navigator:null;zt&&zt.document;var Noe=Vt(""),$4=Vt({}),Loe=Vt(function(){}),zoe=typeof HTMLElement>"u"?"undefined":Vt(HTMLElement),Qu=function(e){return e&&e.instanceString&&mt(e.instanceString)?e.instanceString():null},Pe=function(e){return e!=null&&Vt(e)==Noe},mt=function(e){return e!=null&&Vt(e)===Loe},ot=function(e){return!Nr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Qe=function(e){return e!=null&&Vt(e)===$4&&!ot(e)&&e.constructor===Object},joe=function(e){return e!=null&&Vt(e)===$4},ce=function(e){return e!=null&&Vt(e)===Vt(1)&&!isNaN(e)},Voe=function(e){return ce(e)&&Math.floor(e)===e},fc=function(e){if(zoe!=="undefined")return e!=null&&e instanceof HTMLElement},Nr=function(e){return Ju(e)||D4(e)},Ju=function(e){return Qu(e)==="collection"&&e._private.single},D4=function(e){return Qu(e)==="collection"&&!e._private.single},IT=function(e){return Qu(e)==="core"},A4=function(e){return Qu(e)==="stylesheet"},Woe=function(e){return Qu(e)==="event"},Oi=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},Hoe=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Goe=function(e){return Qe(e)&&ce(e.x1)&&ce(e.x2)&&ce(e.y1)&&ce(e.y2)},Uoe=function(e){return joe(e)&&mt(e.then)},Koe=function(){return q5&&q5.userAgent.match(/msie|trident|edge/i)},Mo=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);return a.join("$")});var n=function(){var a=this,o=arguments,s,u=t.apply(a,o),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(a,o)),s};return n.cache={},n},OT=Mo(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),sd=Mo(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),q4=Mo(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),k5=function(e){return Oi(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},pi=function(e,t){return e.slice(-1*t.length)===t},jt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Yoe="rgb[a]?\\(("+jt+"[%]?)\\s*,\\s*("+jt+"[%]?)\\s*,\\s*("+jt+"[%]?)(?:\\s*,\\s*("+jt+"))?\\)",Xoe="rgb[a]?\\((?:"+jt+"[%]?)\\s*,\\s*(?:"+jt+"[%]?)\\s*,\\s*(?:"+jt+"[%]?)(?:\\s*,\\s*(?:"+jt+"))?\\)",Zoe="hsl[a]?\\(("+jt+")\\s*,\\s*("+jt+"[%])\\s*,\\s*("+jt+"[%])(?:\\s*,\\s*("+jt+"))?\\)",Qoe="hsl[a]?\\((?:"+jt+")\\s*,\\s*(?:"+jt+"[%])\\s*,\\s*(?:"+jt+"[%])(?:\\s*,\\s*(?:"+jt+"))?\\)",Joe="\\#[0-9a-fA-F]{3}",ese="\\#[0-9a-fA-F]{6}",k4=function(e,t){return e<t?-1:e>t?1:0},tse=function(e,t){return-1*k4(e,t)},Re=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];r[o]=n[o]}}return r},rse=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,a,o=16;return t?(n=parseInt(e[1]+e[1],o),i=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),i=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[n,i,a]}},nse=function(e){var t,n,i,a,o,s,u,l;function c(v,p,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?v+(p-v)*6*y:y<1/2?p:y<2/3?v+(p-v)*(2/3-y)*6:v}var d=new RegExp("^"+Zoe+"$").exec(e);if(d){if(n=parseInt(d[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(d[2]),i<0||i>100||(i=i/100,a=parseFloat(d[3]),a<0||a>100)||(a=a/100,o=d[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(i===0)s=u=l=Math.round(a*255);else{var h=a<.5?a*(1+i):a+i-a*i,f=2*a-h;s=Math.round(255*c(f,h,n+1/3)),u=Math.round(255*c(f,h,n)),l=Math.round(255*c(f,h,n-1/3))}t=[s,u,l,o]}return t},ise=function(e){var t,n=new RegExp("^"+Yoe+"$").exec(e);if(n){t=[];for(var i=[],a=1;a<=3;a++){var o=n[a];if(o[o.length-1]==="%"&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},ase=function(e){return ose[e.toLowerCase()]},M4=function(e){return(ot(e)?e:null)||ase(e)||rse(e)||ise(e)||nse(e)},ose={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},B4=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(Qe(o))throw Error("Tried to set map with object key");a<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},F4=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(Qe(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},El=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function el(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var eE,M5;function tl(){if(M5)return eE;M5=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return eE=r,eE}var tE,B5;function sse(){if(B5)return tE;B5=1;var r=typeof El=="object"&&El&&El.Object===Object&&El;return tE=r,tE}var rE,F5;function ud(){if(F5)return rE;F5=1;var r=sse(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return rE=t,rE}var nE,N5;function use(){if(N5)return nE;N5=1;var r=ud(),e=function(){return r.Date.now()};return nE=e,nE}var iE,L5;function lse(){if(L5)return iE;L5=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return iE=e,iE}var aE,z5;function cse(){if(z5)return aE;z5=1;var r=lse(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return aE=t,aE}var oE,j5;function RT(){if(j5)return oE;j5=1;var r=ud(),e=r.Symbol;return oE=e,oE}var sE,V5;function dse(){if(V5)return sE;V5=1;var r=RT(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(o){var s=t.call(o,i),u=o[i];try{o[i]=void 0;var l=!0}catch{}var c=n.call(o);return l&&(s?o[i]=u:delete o[i]),c}return sE=a,sE}var uE,W5;function hse(){if(W5)return uE;W5=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return uE=t,uE}var lE,H5;function N4(){if(H5)return lE;H5=1;var r=RT(),e=dse(),t=hse(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function o(s){return s==null?s===void 0?i:n:a&&a in Object(s)?e(s):t(s)}return lE=o,lE}var cE,G5;function fse(){if(G5)return cE;G5=1;function r(e){return e!=null&&typeof e=="object"}return cE=r,cE}var dE,U5;function rl(){if(U5)return dE;U5=1;var r=N4(),e=fse(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return dE=n,dE}var hE,K5;function vse(){if(K5)return hE;K5=1;var r=cse(),e=tl(),t=rl(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var d=a.test(l);return d||o.test(l)?s(l.slice(2),d?2:8):i.test(l)?n:+l}return hE=u,hE}var fE,Y5;function pse(){if(Y5)return fE;Y5=1;var r=tl(),e=use(),t=vse(),n="Expected a function",i=Math.max,a=Math.min;function o(s,u,l){var c,d,h,f,v,p,y=0,g=!1,m=!1,b=!0;if(typeof s!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(g=!!l.leading,m="maxWait"in l,h=m?i(t(l.maxWait)||0,u):h,b="trailing"in l?!!l.trailing:b);function w(O){var $=c,D=d;return c=d=void 0,y=O,f=s.apply(D,$),f}function S(O){return y=O,v=setTimeout(E,u),g?w(O):f}function T(O){var $=O-p,D=O-y,q=u-$;return m?a(q,h-D):q}function _(O){var $=O-p,D=O-y;return p===void 0||$>=u||$<0||m&&D>=h}function E(){var O=e();if(_(O))return x(O);v=setTimeout(E,T(O))}function x(O){return v=void 0,b&&c?w(O):(c=d=void 0,f)}function P(){v!==void 0&&clearTimeout(v),y=0,c=p=d=v=void 0}function C(){return v===void 0?f:x(e())}function I(){var O=e(),$=_(O);if(c=arguments,d=this,p=O,$){if(v===void 0)return S(p);if(m)return clearTimeout(v),v=setTimeout(E,u),w(p)}return v===void 0&&(v=setTimeout(E,u)),f}return I.cancel=P,I.flush=C,I}return fE=o,fE}var gse=pse(),nl=el(gse),vE=zt?zt.performance:null,L4=vE&&vE.now?function(){return vE.now()}:function(){return Date.now()},yse=(function(){if(zt){if(zt.requestAnimationFrame)return function(r){zt.requestAnimationFrame(r)};if(zt.mozRequestAnimationFrame)return function(r){zt.mozRequestAnimationFrame(r)};if(zt.webkitRequestAnimationFrame)return function(r){zt.webkitRequestAnimationFrame(r)};if(zt.msRequestAnimationFrame)return function(r){zt.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(L4())},1e3/60)}})(),vc=function(e){return yse(e)},Zn=L4,ra=9261,z4=65599,uo=5381,j4=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ra,n=t,i;i=e.next(),!i.done;)n=n*z4+i.value|0;return n},su=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ra;return t*z4+e|0},uu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uo;return(t<<5)+t+e|0},mse=function(e,t){return e*2097152+t},ui=function(e){return e[0]*2097152+e[1]},Sl=function(e,t){return[su(e[0],t[0]),uu(e[1],t[1])]},X5=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return j4(o,t)},Ta=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return j4(o,t)},V4=function(){return bse(arguments)},bse=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=Ta(i):t=Ta(i,t)}return t};function wse(r,e,t,n,i){var a=i*Math.PI/180,o=Math.cos(a)*(r-t)-Math.sin(a)*(e-n)+t,s=Math.sin(a)*(r-t)+Math.cos(a)*(e-n)+n;return{x:o,y:s}}var Ese=function(e,t,n,i,a,o){return{x:(e-n)*a+n,y:(t-i)*o+i}};function Sse(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,i=(e.y1+e.y2)/2,a=e.w/e.h,o=1/a,s=wse(r.x,r.y,n,i,t),u=Ese(s.x,s.y,n,i,a,o);return{x:u.x,y:u.y}}var _se=!0,Tse=console.warn!=null,xse=console.trace!=null,$T=Number.MAX_SAFE_INTEGER||9007199254740991,W4=function(){return!0},pc=function(){return!1},Z5=function(){return 0},DT=function(){},gt=function(e){throw new Error(e)},Pse=function(e){return _se},et=function(e){Pse()&&(Tse?console.warn(e):(console.log(e),xse&&console.trace()))},Cse=function(e){return Re({},e)},Tn=function(e){return e==null?e:ot(e)?e.slice():Qe(e)?Cse(e):e},Ise=function(e){return e.slice()},H4=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},Ose={},G4=function(){return Ose},cr=function(e){var t=Object.keys(e);return function(n){for(var i={},a=0;a<t.length;a++){var o=t[a],s=n?.[o];i[o]=s===void 0?e[o]:s}return i}},Ri=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},AT=function(e){e.splice(0,e.length)},Rse=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},Rr=function(e,t,n){return n&&(t=q4(n,t)),e[t]},Fn=function(e,t,n,i){n&&(t=q4(n,t)),e[t]=i},$se=(function(){function r(){Wi(this,r),this._obj={}}return Hi(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])})(),zn=typeof Map<"u"?Map:$se,Dse="undefined",Ase=(function(){function r(e){if(Wi(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Hi(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])})(),hs=(typeof Set>"u"?"undefined":Vt(Set))!==Dse?Set:Ase,ld=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!IT(e)){gt("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){gt("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new hs,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),u=e.zoom();a.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];ot(t.classes)?l=t.classes:Pe(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,d=l.length;c<d;c++){var h=l[c];!h||h===""||a.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var f=t.style||t.css;f&&(et("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(f))},Q5=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var o;Qe(n)&&!Nr(n)&&(o=n,n=o.roots||o.root,i=o.visit,a=o.directed),a=arguments.length===2&&!mt(i)?i:a,i=mt(i)?i:function(){};for(var s=this._private.cy,u=n=Pe(n)?this.filter(n):n,l=[],c=[],d={},h={},f={},v=0,p,y=this.byGroup(),g=y.nodes,m=y.edges,b=0;b<u.length;b++){var w=u[b],S=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(f[S]=!0,c.push(w)),h[S]=0)}for(var T=function(){var O=e.bfs?l.shift():l.pop(),$=O.id();if(e.dfs){if(f[$])return 0;f[$]=!0,c.push(O)}var D=h[$],q=d[$],A=q!=null?q.source():null,k=q!=null?q.target():null,F=q==null?void 0:O.same(A)?k[0]:A[0],j;if(j=i(O,q,F,v++,D),j===!0)return p=O,1;if(j===!1)return 1;for(var M=O.connectedEdges().filter(function(Q){return(!a||Q.source().same(O))&&m.has(Q)}),L=0;L<M.length;L++){var U=M[L],K=U.connectedNodes().filter(function(Q){return!Q.same(O)&&g.has(Q)}),Z=K.id();K.length!==0&&!f[Z]&&(K=K[0],l.push(K),e.bfs&&(f[Z]=!0,c.push(K)),d[Z]=U,h[Z]=h[$]+1)}},_;l.length!==0&&(_=T(),!(_!==0&&_===1)););for(var E=s.collection(),x=0;x<c.length;x++){var P=c[x],C=d[P.id()];C!=null&&E.push(C),E.push(P)}return{path:s.collection(E),found:s.collection(p)}}},lu={breadthFirstSearch:Q5({bfs:!0}),depthFirstSearch:Q5({dfs:!0})};lu.bfs=lu.breadthFirstSearch;lu.dfs=lu.depthFirstSearch;var Fl={exports:{}},qse=Fl.exports,J5;function kse(){return J5||(J5=1,(function(r,e){(function(){var t,n,i,a,o,s,u,l,c,d,h,f,v,p,y;i=Math.floor,d=Math.min,n=function(g,m){return g<m?-1:g>m?1:0},c=function(g,m,b,w,S){var T;if(b==null&&(b=0),S==null&&(S=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);b<w;)T=i((b+w)/2),S(m,g[T])<0?w=T:b=T+1;return[].splice.apply(g,[b,b-b].concat(m)),m},s=function(g,m,b){return b==null&&(b=n),g.push(m),p(g,0,g.length-1,b)},o=function(g,m){var b,w;return m==null&&(m=n),b=g.pop(),g.length?(w=g[0],g[0]=b,y(g,0,m)):w=b,w},l=function(g,m,b){var w;return b==null&&(b=n),w=g[0],g[0]=m,y(g,0,b),w},u=function(g,m,b){var w;return b==null&&(b=n),g.length&&b(g[0],m)<0&&(w=[g[0],m],m=w[0],g[0]=w[1],y(g,0,b)),m},a=function(g,m){var b,w,S,T,_,E;for(m==null&&(m=n),T=(function(){E=[];for(var x=0,P=i(g.length/2);0<=P?x<P:x>P;0<=P?x++:x--)E.push(x);return E}).apply(this).reverse(),_=[],w=0,S=T.length;w<S;w++)b=T[w],_.push(y(g,b,m));return _},v=function(g,m,b){var w;if(b==null&&(b=n),w=g.indexOf(m),w!==-1)return p(g,0,w,b),y(g,w,b)},h=function(g,m,b){var w,S,T,_,E;if(b==null&&(b=n),S=g.slice(0,m),!S.length)return S;for(a(S,b),E=g.slice(m),T=0,_=E.length;T<_;T++)w=E[T],u(S,w,b);return S.sort(b).reverse()},f=function(g,m,b){var w,S,T,_,E,x,P,C,I;if(b==null&&(b=n),m*10<=g.length){if(T=g.slice(0,m).sort(b),!T.length)return T;for(S=T[T.length-1],P=g.slice(m),_=0,x=P.length;_<x;_++)w=P[_],b(w,S)<0&&(c(T,w,0,null,b),T.pop(),S=T[T.length-1]);return T}for(a(g,b),I=[],E=0,C=d(m,g.length);0<=C?E<C:E>C;0<=C?++E:--E)I.push(o(g,b));return I},p=function(g,m,b,w){var S,T,_;for(w==null&&(w=n),S=g[b];b>m;){if(_=b-1>>1,T=g[_],w(S,T)<0){g[b]=T,b=_;continue}break}return g[b]=S},y=function(g,m,b){var w,S,T,_,E;for(b==null&&(b=n),S=g.length,E=m,T=g[m],w=2*m+1;w<S;)_=w+1,_<S&&!(b(g[w],g[_])<0)&&(w=_),g[m]=g[w],m=w,w=2*m+1;return g[m]=T,p(g,E,m,b)},t=(function(){g.push=s,g.pop=o,g.replace=l,g.pushpop=u,g.heapify=a,g.updateItem=v,g.nlargest=h,g.nsmallest=f;function g(m){this.cmp=m??n,this.nodes=[]}return g.prototype.push=function(m){return s(this.nodes,m,this.cmp)},g.prototype.pop=function(){return o(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},g.prototype.replace=function(m){return l(this.nodes,m,this.cmp)},g.prototype.pushpop=function(m){return u(this.nodes,m,this.cmp)},g.prototype.heapify=function(){return a(this.nodes,this.cmp)},g.prototype.updateItem=function(m){return v(this.nodes,m,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var m;return m=new g,m.nodes=this.nodes.slice(0),m},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g})(),(function(g,m){return r.exports=m()})(this,function(){return t})}).call(qse)})(Fl)),Fl.exports}var pE,ej;function Mse(){return ej||(ej=1,pE=kse()),pE}var Bse=Mse(),il=el(Bse),Fse=cr({root:null,weight:function(e){return 1},directed:!1}),Nse={dijkstra:function(e){if(!Qe(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Fse(e),i=n.root,a=n.weight,o=n.directed,s=this,u=a,l=Pe(i)?this.filter(i)[0]:i[0],c={},d={},h={},f=this.byGroup(),v=f.nodes,p=f.edges;p.unmergeBy(function(D){return D.isLoop()});for(var y=function(q){return c[q.id()]},g=function(q,A){c[q.id()]=A,m.updateItem(q)},m=new il(function(D,q){return y(D)-y(q)}),b=0;b<v.length;b++){var w=v[b];c[w.id()]=w.same(l)?0:1/0,m.push(w)}for(var S=function(q,A){for(var k=(o?q.edgesTo(A):q.edgesWith(A)).intersect(p),F=1/0,j,M=0;M<k.length;M++){var L=k[M],U=u(L);(U<F||!j)&&(F=U,j=L)}return{edge:j,dist:F}};m.size()>0;){var T=m.pop(),_=y(T),E=T.id();if(h[E]=_,_!==1/0)for(var x=T.neighborhood().intersect(v),P=0;P<x.length;P++){var C=x[P],I=C.id(),O=S(T,C),$=_+O.dist;$<y(C)&&(g(C,$),d[I]={node:T,edge:O.edge})}}return{distanceTo:function(q){var A=Pe(q)?v.filter(q)[0]:q[0];return h[A.id()]},pathTo:function(q){var A=Pe(q)?v.filter(q)[0]:q[0],k=[],F=A,j=F.id();if(A.length>0)for(k.unshift(A);d[j];){var M=d[j];k.unshift(M.edge),k.unshift(M.node),F=M.node,j=F.id()}return s.spawn(k)}}}},Lse={kruskal:function(e){e=e||function(b){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,a=n.length,o=new Array(a),s=n,u=function(w){for(var S=0;S<o.length;S++){var T=o[S];if(T.has(w))return S}},l=0;l<a;l++)o[l]=this.spawn(n[l]);for(var c=i.sort(function(b,w){return e(b)-e(w)}),d=0;d<c.length;d++){var h=c[d],f=h.source()[0],v=h.target()[0],p=u(f),y=u(v),g=o[p],m=o[y];p!==y&&(s.merge(h),g.merge(m),o.splice(y,1))}return s}},zse=cr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),jse={aStar:function(e){var t=this.cy(),n=zse(e),i=n.root,a=n.goal,o=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],a=t.collection(a)[0];var l=i.id(),c=a.id(),d={},h={},f={},v=new il(function(j,M){return h[j.id()]-h[M.id()]}),p=new hs,y={},g={},m=function(M,L){v.push(M),p.add(L)},b,w,S=function(){b=v.pop(),w=b.id(),p.delete(w)},T=function(M){return p.has(M)};m(i,l),d[l]=0,h[l]=o(i);for(var _=0;v.size()>0;){if(S(),_++,w===c){for(var E=[],x=a,P=c,C=g[P];E.unshift(x),C!=null&&E.unshift(C),x=y[P],x!=null;)P=x.id(),C=g[P];return{found:!0,distance:d[w],path:this.spawn(E),steps:_}}f[w]=!0;for(var I=b._private.edges,O=0;O<I.length;O++){var $=I[O];if(this.hasElementWithId($.id())&&!(s&&$.data("source")!==w)){var D=$.source(),q=$.target(),A=D.id()!==w?D:q,k=A.id();if(this.hasElementWithId(k)&&!f[k]){var F=d[w]+u($);if(!T(k)){d[k]=F,h[k]=F+o(A),m(A,k),y[k]=b,g[k]=$;continue}F<d[k]&&(d[k]=F,h[k]=F+o(A),y[k]=b,g[k]=$)}}}}return{found:!1,distance:void 0,path:void 0,steps:_}}},Vse=cr({weight:function(e){return 1},directed:!1}),Wse={floydWarshall:function(e){for(var t=this.cy(),n=Vse(e),i=n.weight,a=n.directed,o=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,d=c*c,h=function(U){return u.indexOf(U)},f=function(U){return u[U]},v=new Array(d),p=0;p<d;p++){var y=p%c,g=(p-y)/c;g===y?v[p]=0:v[p]=1/0}for(var m=new Array(d),b=new Array(d),w=0;w<l.length;w++){var S=l[w],T=S.source()[0],_=S.target()[0];if(T!==_){var E=h(T),x=h(_),P=E*c+x,C=o(S);if(v[P]>C&&(v[P]=C,m[P]=x,b[P]=S),!a){var I=x*c+E;!a&&v[I]>C&&(v[I]=C,m[I]=E,b[I]=S)}}}for(var O=0;O<c;O++)for(var $=0;$<c;$++)for(var D=$*c+O,q=0;q<c;q++){var A=$*c+q,k=O*c+q;v[D]+v[k]<v[A]&&(v[A]=v[D]+v[k],m[A]=m[D])}var F=function(U){return(Pe(U)?t.filter(U):U)[0]},j=function(U){return h(F(U))},M={distance:function(U,K){var Z=j(U),Q=j(K);return v[Z*c+Q]},path:function(U,K){var Z=j(U),Q=j(K),te=f(Z);if(Z===Q)return te.collection();if(m[Z*c+Q]==null)return t.collection();var oe=t.collection(),re=Z,V;for(oe.merge(te);Z!==Q;)re=Z,Z=m[Z*c+Q],V=b[re*c+Z],oe.merge(V),oe.merge(f(Z));return oe}};return M}},Hse=cr({weight:function(e){return 1},directed:!1,root:null}),Gse={bellmanFord:function(e){var t=this,n=Hse(e),i=n.weight,a=n.directed,o=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),d=c.edges,h=c.nodes,f=h.length,v=new zn,p=!1,y=[];o=l.collection(o)[0],d.unmergeBy(function(fe){return fe.isLoop()});for(var g=d.length,m=function(ge){var Te=v.get(ge.id());return Te||(Te={},v.set(ge.id(),Te)),Te},b=function(ge){return(Pe(ge)?l.$(ge):ge)[0]},w=function(ge){return m(b(ge)).dist},S=function(ge){for(var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,le=b(ge),ye=[],pe=le;;){if(pe==null)return t.spawn();var Ce=m(pe),ve=Ce.edge,De=Ce.pred;if(ye.unshift(pe[0]),pe.same(Te)&&ye.length>0)break;ve!=null&&ye.unshift(ve),pe=De}return u.spawn(ye)},T=0;T<f;T++){var _=h[T],E=m(_);_.same(o)?E.dist=0:E.dist=1/0,E.pred=null,E.edge=null}for(var x=!1,P=function(ge,Te,le,ye,pe,Ce){var ve=ye.dist+Ce;ve<pe.dist&&!le.same(ye.edge)&&(pe.dist=ve,pe.pred=ge,pe.edge=le,x=!0)},C=1;C<f;C++){x=!1;for(var I=0;I<g;I++){var O=d[I],$=O.source(),D=O.target(),q=s(O),A=m($),k=m(D);P($,D,O,A,k,q),a||P(D,$,O,k,A,q)}if(!x)break}if(x)for(var F=[],j=0;j<g;j++){var M=d[j],L=M.source(),U=M.target(),K=s(M),Z=m(L).dist,Q=m(U).dist;if(Z+K<Q||!a&&Q+K<Z)if(p||(et("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var te=[];Z+K<Q&&te.push(L),!a&&Q+K<Z&&te.push(U);for(var oe=te.length,re=0;re<oe;re++){var V=te[re],W=[V];W.push(m(V).edge);for(var G=m(V).pred;W.indexOf(G)===-1;)W.push(G),W.push(m(G).edge),G=m(G).pred;W=W.slice(W.indexOf(G));for(var X=W[0].id(),se=0,be=2;be<W.length;be+=2)W[be].id()<X&&(X=W[be].id(),se=be);W=W.slice(se).concat(W.slice(0,se)),W.push(W[0]);var ke=W.map(function(fe){return fe.id()}).join(",");F.indexOf(ke)===-1&&(y.push(u.spawn(W)),F.push(ke))}}else break}return{distanceTo:w,pathTo:S,hasNegativeWeightCycle:p,negativeWeightCycles:y}}},Use=Math.sqrt(2),Kse=function(e,t,n){n.length===0&&gt("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],o=i[2],s=t[a],u=t[o],l=n,c=l.length-1;c>=0;c--){var d=l[c],h=d[1],f=d[2];(t[h]===s&&t[f]===u||t[h]===u&&t[f]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var p=l[v];p[1]===u?(l[v]=p.slice(),l[v][1]=s):p[2]===u&&(l[v]=p.slice(),l[v][2]=s)}for(var y=0;y<t.length;y++)t[y]===u&&(t[y]=s);return l},gE=function(e,t,n,i){for(;n>i;){var a=Math.floor(Math.random()*t.length);t=Kse(a,e,t),n--}return t},Yse={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(k){return k.isLoop()});var a=n.length,o=i.length,s=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/Use);if(a<2){gt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<o;c++){var d=i[c];l.push([c,n.indexOf(d.source()),n.indexOf(d.target())])}for(var h=1/0,f=[],v=new Array(a),p=new Array(a),y=new Array(a),g=function(F,j){for(var M=0;M<a;M++)j[M]=F[M]},m=0;m<=s;m++){for(var b=0;b<a;b++)p[b]=b;var w=gE(p,l.slice(),a,u),S=w.slice();g(p,y);var T=gE(p,w,u,2),_=gE(y,S,u,2);T.length<=_.length&&T.length<h?(h=T.length,f=T,g(p,v)):_.length<=T.length&&_.length<h&&(h=_.length,f=_,g(y,v))}for(var E=this.spawn(f.map(function(k){return i[k[0]]})),x=this.spawn(),P=this.spawn(),C=v[0],I=0;I<v.length;I++){var O=v[I],$=n[I];O===C?x.merge($):P.merge($)}var D=function(F){var j=e.spawn();return F.forEach(function(M){j.merge(M),M.connectedEdges().forEach(function(L){e.contains(L)&&!E.contains(L)&&j.merge(L)})}),j},q=[D(x),D(P)],A={cut:E,components:q,partition1:x,partition2:P};return A}},yE,Xse=function(e){return{x:e.x,y:e.y}},cd=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},U4=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},go=function(e){return{x:e[0],y:e[1]}},Zse=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.min(o,i))}return i},Qse=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.max(o,i))}return i},Jse=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(i+=s,a++)}return i/a},eue=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}a&&e.sort(function(h,f){return h-f});var c=e.length,d=Math.floor(c/2);return c%2!==0?e[d+1+s]:(e[d-1+s]+e[d+s])/2},tue=function(e){return Math.PI*e/180},_l=function(e,t){return Math.atan2(t,e)-Math.PI/2},qT=Math.log2||function(r){return Math.log(r)/Math.log(2)},kT=function(e){return e>0?1:e<0?-1:0},xa=function(e,t){return Math.sqrt(ea(e,t))},ea=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},rue=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},Kt=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},To=function(e,t,n,i){return{x:Kt(e.x,t.x,n.x,i),y:Kt(e.y,t.y,n.y,i)}},nue=function(e,t,n,i){var a={x:t.x-e.x,y:t.y-e.y},o=xa(e,t),s={x:a.x/o,y:a.y/o};return n=n??0,i=i??n*o,{x:e.x+s.x*i,y:e.y+s.y*i}},cu=function(e,t,n){return Math.max(e,Math.min(n,t))},Tr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},iue=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},aue=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},oue=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},K4=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Nl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ll=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,o;if(t.length===1)n=i=a=o=t[0];else if(t.length===2)n=a=t[0],o=i=t[1];else if(t.length===4){var s=$t(t,4);n=s[0],i=s[1],a=s[2],o=s[3]}return e.x1-=o,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},tj=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},MT=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},gi=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},rj=function(e,t){return gi(e,t.x,t.y)},Y4=function(e,t){return gi(e,t.x1,t.y1)&&gi(e,t.x2,t.y2)},sue=(yE=Math.hypot)!==null&&yE!==void 0?yE:function(r,e){return Math.sqrt(r*r+e*e)};function uue(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(E,x){return{x:E.x+x.x,y:E.y+x.y}},n=function(E,x){return{x:E.x-x.x,y:E.y-x.y}},i=function(E,x){return{x:E.x*x,y:E.y*x}},a=function(E,x){return E.x*x.y-E.y*x.x},o=function(E){var x=sue(E.x,E.y);return x===0?{x:0,y:0}:{x:E.x/x,y:E.y/x}},s=function(E){for(var x=0,P=0;P<E.length;P++){var C=E[P],I=E[(P+1)%E.length];x+=C.x*I.y-I.x*C.y}return x/2},u=function(E,x,P,C){var I=n(x,E),O=n(C,P),$=a(I,O);if(Math.abs($)<1e-9)return t(E,i(I,.5));var D=a(n(P,E),O)/$;return t(E,i(I,D))},l=r.map(function(_){return{x:_.x,y:_.y}});s(l)<0&&l.reverse();for(var c=l.length,d=[],h=0;h<c;h++){var f=l[h],v=l[(h+1)%c],p=n(v,f),y=o({x:p.y,y:-p.x});d.push(y)}for(var g=d.map(function(_,E){var x=t(l[E],i(_,e)),P=t(l[(E+1)%c],i(_,e));return{p1:x,p2:P}}),m=[],b=0;b<c;b++){var w=g[(b-1+c)%c],S=g[b],T=u(w.p1,w.p2,S.p1,S.p2);m.push(T)}return m}function lue(r,e,t,n,i,a){var o=mue(r,e,t,n,i),s=uue(o,a),u=Tr();return s.forEach(function(l){return K4(u,l.x,l.y)}),u}var X4=function(e,t,n,i,a,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?$i(a,o):u,c=a/2,d=o/2;l=Math.min(l,c,d);var h=l!==c,f=l!==d,v;if(h){var p=n-c+l-s,y=i-d-s,g=n+c-l+s,m=y;if(v=yi(e,t,n,i,p,y,g,m,!1),v.length>0)return v}if(f){var b=n+c+s,w=i-d+l-s,S=b,T=i+d-l+s;if(v=yi(e,t,n,i,b,w,S,T,!1),v.length>0)return v}if(h){var _=n-c+l-s,E=i+d+s,x=n+c-l+s,P=E;if(v=yi(e,t,n,i,_,E,x,P,!1),v.length>0)return v}if(f){var C=n-c-s,I=i-d+l-s,O=C,$=i+d-l+s;if(v=yi(e,t,n,i,C,I,O,$,!1),v.length>0)return v}var D;{var q=n-c+l,A=i-d+l;if(D=qs(e,t,n,i,q,A,l+s),D.length>0&&D[0]<=q&&D[1]<=A)return[D[0],D[1]]}{var k=n+c-l,F=i-d+l;if(D=qs(e,t,n,i,k,F,l+s),D.length>0&&D[0]>=k&&D[1]<=F)return[D[0],D[1]]}{var j=n+c-l,M=i+d-l;if(D=qs(e,t,n,i,j,M,l+s),D.length>0&&D[0]>=j&&D[1]>=M)return[D[0],D[1]]}{var L=n-c+l,U=i+d-l;if(D=qs(e,t,n,i,L,U,l+s),D.length>0&&D[0]<=L&&D[1]>=U)return[D[0],D[1]]}return[]},cue=function(e,t,n,i,a,o,s){var u=s,l=Math.min(n,a),c=Math.max(n,a),d=Math.min(i,o),h=Math.max(i,o);return l-u<=e&&e<=c+u&&d-u<=t&&t<=h+u},due=function(e,t,n,i,a,o,s,u,l){var c={x1:Math.min(n,s,a)-l,x2:Math.max(n,s,a)+l,y1:Math.min(i,u,o)-l,y2:Math.max(i,u,o)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},hue=function(e,t,n,i){n-=i;var a=t*t-4*e*n;if(a<0)return[];var o=Math.sqrt(a),s=2*e,u=(-t+o)/s,l=(-t-o)/s;return[u,l]},fue=function(e,t,n,i,a){var o=1e-5;e===0&&(e=o),t/=e,n/=e,i/=e;var s,u,l,c,d,h,f,v;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,a[1]=0,f=t/3,s>0){d=l+Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),h=l-Math.sqrt(s),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),a[0]=-f+d+h,f+=(d+h)/2,a[4]=a[2]=-f,f=Math.sqrt(3)*(-h+d)/2,a[3]=f,a[5]=-f;return}if(a[5]=a[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-f+2*v,a[4]=a[2]=-(v+f);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),a[0]=-f+v*Math.cos(c/3),a[2]=-f+v*Math.cos((c+2*Math.PI)/3),a[4]=-f+v*Math.cos((c+4*Math.PI)/3)},vue=function(e,t,n,i,a,o,s,u){var l=1*n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s+i*i-4*i*o+2*i*u+4*o*o-4*o*u+u*u,c=9*n*a-3*n*n-3*n*s-6*a*a+3*a*s+9*i*o-3*i*i-3*i*u-6*o*o+3*o*u,d=3*n*n-6*n*a+n*s-n*e+2*a*a+2*a*e-s*e+3*i*i-6*i*o+i*u-i*t+2*o*o+2*o*t-u*t,h=1*n*a-n*n+n*e-a*e+i*o-i*i+i*t-o*t,f=[];fue(l,c,d,h,f);for(var v=1e-7,p=[],y=0;y<6;y+=2)Math.abs(f[y+1])<v&&f[y]>=0&&f[y]<=1&&p.push(f[y]);p.push(1),p.push(0);for(var g=-1,m,b,w,S=0;S<p.length;S++)m=Math.pow(1-p[S],2)*n+2*(1-p[S])*p[S]*a+p[S]*p[S]*s,b=Math.pow(1-p[S],2)*i+2*(1-p[S])*p[S]*o+p[S]*p[S]*u,w=Math.pow(m-e,2)+Math.pow(b-t,2),g>=0?w<g&&(g=w):g=w;return g},pue=function(e,t,n,i,a,o){var s=[e-n,t-i],u=[a-n,o-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],d=s[0]*u[0]+s[1]*u[1],h=d*d/l;return d<0?c:h>l?(e-a)*(e-a)+(t-o)*(t-o):c-h},$r=function(e,t,n){for(var i,a,o,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],a=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&o==e))if(i>=e&&e>=o||i<=e&&e<=o)u=(e-i)/(o-i)*(s-a)+a,u>t&&l++;else continue;return l%2!==0},Qn=function(e,t,n,i,a,o,s,u,l){var c=new Array(n.length),d;u[0]!=null?(d=Math.atan(u[1]/u[0]),u[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=u;for(var h=Math.cos(-d),f=Math.sin(-d),v=0;v<c.length/2;v++)c[v*2]=o/2*(n[v*2]*h-n[v*2+1]*f),c[v*2+1]=s/2*(n[v*2+1]*h+n[v*2]*f),c[v*2]+=i,c[v*2+1]+=a;var p;if(l>0){var y=yc(c,-l);p=gc(y)}else p=c;return $r(e,t,p)},gue=function(e,t,n,i,a,o,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var d=u[c];l[c*4+0]=d.startX,l[c*4+1]=d.startY,l[c*4+2]=d.stopX,l[c*4+3]=d.stopY;var h=Math.pow(d.cx-e,2)+Math.pow(d.cy-t,2);if(h<=Math.pow(d.radius,2))return!0}return $r(e,t,l)},gc=function(e){for(var t=new Array(e.length/2),n,i,a,o,s,u,l,c,d=0;d<e.length/4;d++){n=e[d*4],i=e[d*4+1],a=e[d*4+2],o=e[d*4+3],d<e.length/4-1?(s=e[(d+1)*4],u=e[(d+1)*4+1],l=e[(d+1)*4+2],c=e[(d+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var h=yi(n,i,a,o,s,u,l,c,!0);t[d*2]=h[0],t[d*2+1]=h[1]}return t},yc=function(e,t){for(var n=new Array(e.length*2),i,a,o,s,u=0;u<e.length/2;u++){i=e[u*2],a=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-a,c=-(o-i),d=Math.sqrt(l*l+c*c),h=l/d,f=c/d;n[u*4]=i+h*t,n[u*4+1]=a+f*t,n[u*4+2]=o+h*t,n[u*4+3]=s+f*t}return n},yue=function(e,t,n,i,a,o){var s=n-e,u=i-t;s/=a,u/=o;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var d=c/l;return[(n-e)*d+e,(i-t)*d+t]},ua=function(e,t,n,i,a,o,s){return e-=a,t-=o,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},qs=function(e,t,n,i,a,o,s){var u=[n-e,i-t],l=[e-a,t-o],c=u[0]*u[0]+u[1]*u[1],d=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-s*s,f=d*d-4*c*h;if(f<0)return[];var v=(-d+Math.sqrt(f))/(2*c),p=(-d-Math.sqrt(f))/(2*c),y=Math.min(v,p),g=Math.max(v,p),m=[];if(y>=0&&y<=1&&m.push(y),g>=0&&g<=1&&m.push(g),m.length===0)return[];var b=m[0]*u[0]+e,w=m[0]*u[1]+t;if(m.length>1){if(m[0]==m[1])return[b,w];var S=m[1]*u[0]+e,T=m[1]*u[1]+t;return[b,w,S,T]}else return[b,w]},mE=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},yi=function(e,t,n,i,a,o,s,u,l){var c=e-a,d=n-e,h=s-a,f=t-o,v=i-t,p=u-o,y=h*f-p*c,g=d*f-v*c,m=p*d-h*v;if(m!==0){var b=y/m,w=g/m,S=.001,T=0-S,_=1+S;return T<=b&&b<=_&&T<=w&&w<=_?[e+b*d,t+b*v]:l?[e+b*d,t+b*v]:[]}else return y===0||g===0?mE(e,n,s)===s?[s,u]:mE(e,n,a)===a?[a,o]:mE(a,s,n)===n?[n,i]:[]:[]},mue=function(e,t,n,i,a){var o=[],s=i/2,u=a/2,l=t,c=n;o.push({x:l+s*e[0],y:c+u*e[1]});for(var d=1;d<e.length/2;d++)o.push({x:l+s*e[d*2],y:c+u*e[d*2+1]});return o},du=function(e,t,n,i,a,o,s,u){var l=[],c,d=new Array(n.length),h=!0;o==null&&(h=!1);var f;if(h){for(var v=0;v<d.length/2;v++)d[v*2]=n[v*2]*o+i,d[v*2+1]=n[v*2+1]*s+a;if(u>0){var p=yc(d,-u);f=gc(p)}else f=d}else f=n;for(var y,g,m,b,w=0;w<f.length/2;w++)y=f[w*2],g=f[w*2+1],w<f.length/2-1?(m=f[(w+1)*2],b=f[(w+1)*2+1]):(m=f[0],b=f[1]),c=yi(e,t,i,a,y,g,m,b),c.length!==0&&l.push(c[0],c[1]);return l},bue=function(e,t,n,i,a,o,s,u,l){var c=[],d,h=new Array(n.length*2);l.forEach(function(m,b){b===0?(h[h.length-2]=m.startX,h[h.length-1]=m.startY):(h[b*4-2]=m.startX,h[b*4-1]=m.startY),h[b*4]=m.stopX,h[b*4+1]=m.stopY,d=qs(e,t,i,a,m.cx,m.cy,m.radius),d.length!==0&&c.push(d[0],d[1])});for(var f=0;f<h.length/4;f++)d=yi(e,t,i,a,h[f*4],h[f*4+1],h[f*4+2],h[f*4+3],!1),d.length!==0&&c.push(d[0],d[1]);if(c.length>2){for(var v=[c[0],c[1]],p=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),y=1;y<c.length/2;y++){var g=Math.pow(c[y*2]-e,2)+Math.pow(c[y*2+1]-t,2);g<=p&&(v[0]=c[y*2],v[1]=c[y*2+1],p=g)}return v}return c},Tl=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(a-n)/a;return o<0&&(o=1e-5),[t[0]+o*i[0],t[1]+o*i[1]]},yr=function(e,t){var n=XS(e,t);return n=Z4(n),n},Z4=function(e){for(var t,n,i=e.length/2,a=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-a),d=2/(u-o),h=0;h<i;h++)t=e[2*h]=e[2*h]*c,n=e[2*h+1]=e[2*h+1]*d,a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var f=0;f<i;f++)n=e[2*f+1]=e[2*f+1]+(-1-o);return e},XS=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a=new Array(e*2),o,s=0;s<e;s++)o=s*n+i,a[2*s]=Math.cos(o),a[2*s+1]=Math.sin(-o);return a},$i=function(e,t){return Math.min(e/4,t/4,8)},Q4=function(e,t){return Math.min(e/10,t/10,8)},BT=function(){return 8},wue=function(e,t,n){return[e-2*t+n,2*(t-e),e]},ZS=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function bE(r,e){function t(d){for(var h=[],f=0;f<d.length;f++){var v=d[f],p=d[(f+1)%d.length],y={x:p.x-v.x,y:p.y-v.y},g={x:-y.y,y:y.x},m=Math.sqrt(g.x*g.x+g.y*g.y);h.push({x:g.x/m,y:g.y/m})}return h}function n(d,h){var f=1/0,v=-1/0,p=Ar(d),y;try{for(p.s();!(y=p.n()).done;){var g=y.value,m=g.x*h.x+g.y*h.y;f=Math.min(f,m),v=Math.max(v,m)}}catch(b){p.e(b)}finally{p.f()}return{min:f,max:v}}function i(d,h){return!(d.max<h.min||h.max<d.min)}var a=[].concat(hc(t(r)),hc(t(e))),o=Ar(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,l=n(r,u),c=n(e,u);if(!i(l,c))return!1}}catch(d){o.e(d)}finally{o.f()}return!0}var Eue=cr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),Sue={pageRank:function(e){for(var t=Eue(e),n=t.dampingFactor,i=t.precision,a=t.iterations,o=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,d=l.length,h=d*d,f=c.length,v=new Array(h),p=new Array(d),y=(1-n)/d,g=0;g<d;g++){for(var m=0;m<d;m++){var b=g*d+m;v[b]=0}p[g]=0}for(var w=0;w<f;w++){var S=c[w],T=S.data("source"),_=S.data("target");if(T!==_){var E=l.indexOfId(T),x=l.indexOfId(_),P=o(S),C=x*d+E;v[C]+=P,p[E]+=P}}for(var I=1/d+y,O=0;O<d;O++)if(p[O]===0)for(var $=0;$<d;$++){var D=$*d+O;v[D]=I}else for(var q=0;q<d;q++){var A=q*d+O;v[A]=v[A]/p[O]+y}for(var k=new Array(d),F=new Array(d),j,M=0;M<d;M++)k[M]=1;for(var L=0;L<a;L++){for(var U=0;U<d;U++)F[U]=0;for(var K=0;K<d;K++)for(var Z=0;Z<d;Z++){var Q=K*d+Z;F[K]+=v[Q]*k[Z]}rue(F),j=k,k=F,F=j;for(var te=0,oe=0;oe<d;oe++){var re=j[oe]-k[oe];te+=re*re}if(te<i)break}var V={rank:function(G){return G=s.collection(G)[0],k[l.indexOf(G)]}};return V}},nj=cr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),xo={degreeCentralityNormalized:function(e){e=nj(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},d={},h=0,f=0,v=0;v<i;v++){var p=n[v],y=p.id();e.root=p;var g=this.degreeCentrality(e);h<g.indegree&&(h=g.indegree),f<g.outdegree&&(f=g.outdegree),c[y]=g.indegree,d[y]=g.outdegree}return{indegree:function(b){return h==0?0:(Pe(b)&&(b=t.filter(b)),c[b.id()]/h)},outdegree:function(b){return f===0?0:(Pe(b)&&(b=t.filter(b)),d[b.id()]/f)}}}else{for(var a={},o=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),a[u.id()]=l.degree}return{degree:function(b){return o===0?0:(Pe(b)&&(b=t.filter(b)),a[b.id()]/o)}}}},degreeCentrality:function(e){e=nj(e);var t=this.cy(),n=this,i=e,a=i.root,o=i.weight,s=i.directed,u=i.alpha;if(a=t.collection(a)[0],s){for(var f=a.connectedEdges(),v=f.filter(function(T){return T.target().same(a)&&n.has(T)}),p=f.filter(function(T){return T.source().same(a)&&n.has(T)}),y=v.length,g=p.length,m=0,b=0,w=0;w<v.length;w++)m+=o(v[w]);for(var S=0;S<p.length;S++)b+=o(p[S]);return{indegree:Math.pow(y,1-u)*Math.pow(m,u),outdegree:Math.pow(g,1-u)*Math.pow(b,u)}}else{for(var l=a.connectedEdges().intersection(n),c=l.length,d=0,h=0;h<l.length;h++)d+=o(l[h]);return{degree:Math.pow(c,1-u)*Math.pow(d,u)}}}};xo.dc=xo.degreeCentrality;xo.dcn=xo.degreeCentralityNormalised=xo.degreeCentralityNormalized;var ij=cr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Po={closenessCentralityNormalized:function(e){for(var t=ij(e),n=t.harmonic,i=t.weight,a=t.directed,o=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:a}),d=0;d<l.length;d++){for(var h=0,f=l[d],v=0;v<l.length;v++)if(d!==v){var p=c.distance(f,l[v]);n?h+=1/p:h+=p}n||(h=1/h),u<h&&(u=h),s[f.id()]=h}return{closeness:function(g){return u==0?0:(Pe(g)?g=o.filter(g)[0].id():g=g.id(),s[g]/u)}}},closenessCentrality:function(e){var t=ij(e),n=t.root,i=t.weight,a=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:a}),u=0,l=this.nodes(),c=0;c<l.length;c++){var d=l[c];if(!d.same(n)){var h=s.distanceTo(d);o?u+=1/h:u+=h}}return o?u:1/u}};Po.cc=Po.closenessCentrality;Po.ccn=Po.closenessCentralityNormalised=Po.closenessCentralityNormalized;var _ue=cr({weight:null,directed:!1}),QS={betweennessCentrality:function(e){for(var t=_ue(e),n=t.directed,i=t.weight,a=i!=null,o=this.cy(),s=this.nodes(),u={},l={},c=0,d={set:function(b,w){l[b]=w,w>c&&(c=w)},get:function(b){return l[b]}},h=0;h<s.length;h++){var f=s[h],v=f.id();n?u[v]=f.outgoers().nodes():u[v]=f.openNeighborhood().nodes(),d.set(v,0)}for(var p=function(){for(var b=s[y].id(),w=[],S={},T={},_={},E=new il(function(K,Z){return _[K]-_[Z]}),x=0;x<s.length;x++){var P=s[x].id();S[P]=[],T[P]=0,_[P]=1/0}for(T[b]=1,_[b]=0,E.push(b);!E.empty();){var C=E.pop();if(w.push(C),a)for(var I=0;I<u[C].length;I++){var O=u[C][I],$=o.getElementById(C),D=void 0;$.edgesTo(O).length>0?D=$.edgesTo(O)[0]:D=O.edgesTo($)[0];var q=i(D);O=O.id(),_[O]>_[C]+q&&(_[O]=_[C]+q,E.nodes.indexOf(O)<0?E.push(O):E.updateItem(O),T[O]=0,S[O]=[]),_[O]==_[C]+q&&(T[O]=T[O]+T[C],S[O].push(C))}else for(var A=0;A<u[C].length;A++){var k=u[C][A].id();_[k]==1/0&&(E.push(k),_[k]=_[C]+1),_[k]==_[C]+1&&(T[k]=T[k]+T[C],S[k].push(C))}}for(var F={},j=0;j<s.length;j++)F[s[j].id()]=0;for(;w.length>0;){for(var M=w.pop(),L=0;L<S[M].length;L++){var U=S[M][L];F[U]=F[U]+T[U]/T[M]*(1+F[M])}M!=s[y].id()&&d.set(M,d.get(M)+F[M])}},y=0;y<s.length;y++)p();var g={betweenness:function(b){var w=o.collection(b).id();return d.get(w)},betweennessNormalized:function(b){if(c==0)return 0;var w=o.collection(b).id();return d.get(w)/c}};return g.betweennessNormalised=g.betweennessNormalized,g}};QS.bc=QS.betweennessCentrality;var Tue=cr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),xue=function(e){return Tue(e)},Pue=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},Cue=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},J4=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var a=0;a<t;a++)n+=e[a*t+i];for(var o=0;o<t;o++)e[o*t+i]=e[o*t+i]/n}},Iue=function(e,t,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var o=0;o<n;o++)i[a*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+s]*t[s*n+u]}return i},Oue=function(e,t,n){for(var i=e.slice(0),a=1;a<n;a++)e=Iue(e,i,t);return e},Rue=function(e,t,n){for(var i=new Array(t*t),a=0;a<t*t;a++)i[a]=Math.pow(e[a],n);return J4(i,t),i},$ue=function(e,t,n,i){for(var a=0;a<n;a++){var o=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i);if(o!==s)return!1}return!0},Due=function(e,t,n,i){for(var a=[],o=0;o<t;o++){for(var s=[],u=0;u<t;u++)Math.round(e[o*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&a.push(i.collection(s))}return a},Aue=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},que=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&Aue(e[t],e[n])&&e.splice(n,1);return e},aj=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),a=xue(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),d,h=0;h<l;h++)c[h]=0;for(var f=0;f<n.length;f++){var v=n[f],p=o[v.source().id()],y=o[v.target().id()],g=Pue(v,a.attributes);c[p*u+y]+=g,c[y*u+p]+=g}Cue(c,u,a.multFactor),J4(c,u);for(var m=!0,b=0;m&&b<a.maxIterations;)m=!1,d=Oue(c,u,a.expandFactor),c=Rue(d,u,a.inflateFactor),$ue(c,d,l,4)||(m=!0),b++;var w=Due(c,u,t,i);return w=que(w),w},kue={markovClustering:aj,mcl:aj},Mue=function(e){return e},eG=function(e,t){return Math.abs(t-e)},oj=function(e,t,n){return e+eG(t,n)},sj=function(e,t,n){return e+Math.pow(n-t,2)},Bue=function(e){return Math.sqrt(e)},Fue=function(e,t,n){return Math.max(e,eG(t,n))},xs=function(e,t,n,i,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Mue,s=i,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=a(s,u,l);return o(s)},Bo={euclidean:function(e,t,n){return e>=2?xs(e,t,n,0,sj,Bue):xs(e,t,n,0,oj)},squaredEuclidean:function(e,t,n){return xs(e,t,n,0,sj)},manhattan:function(e,t,n){return xs(e,t,n,0,oj)},max:function(e,t,n){return xs(e,t,n,-1/0,Fue)}};Bo["squared-euclidean"]=Bo.squaredEuclidean;Bo.squaredeuclidean=Bo.squaredEuclidean;function dd(r,e,t,n,i,a){var o;return mt(r)?o=r:o=Bo[r]||Bo.euclidean,e===0&&mt(r)?o(i,a):o(e,t,n,i,a)}var Nue=cr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),FT=function(e){return Nue(e)},mc=function(e,t,n,i,a){var o=a!=="kMedoids",s=o?function(d){return n[d]}:function(d){return i[d](n)},u=function(h){return i[h](t)},l=n,c=t;return dd(e,i.length,s,u,l,c)},wE=function(e,t,n){for(var i=n.length,a=new Array(i),o=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)a[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var d=0;d<i;d++)u[d]=Math.random()*(o[d]-a[d])+a[d];s[c]=u}return s},tG=function(e,t,n,i,a){for(var o=1/0,s=0,u=0;u<t.length;u++){var l=mc(n,e,t[u],i,a);l<o&&(o=l,s=u)}return s},rG=function(e,t,n){for(var i=[],a=null,o=0;o<t.length;o++)a=t[o],n[a.id()]===e&&i.push(a);return i},Lue=function(e,t,n){return Math.abs(t-e)<=n},zue=function(e,t,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var o=Math.abs(e[i][a]-t[i][a]);if(o>n)return!1}return!0},jue=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},uj=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var a=e[Math.floor(Math.random()*e.length)];jue(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},lj=function(e,t,n){for(var i=0,a=0;a<t.length;a++)i+=mc("manhattan",t[a],e,n,"kMedoids");return i},Vue=function(e){var t=this.cy(),n=this.nodes(),i=null,a=FT(e),o=new Array(a.k),s={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=wE(n,a.k,a.attributes)):Vt(a.testCentroids)==="object"?u=a.testCentroids:u=wE(n,a.k,a.attributes):u=wE(n,a.k,a.attributes);for(var l=!0,c=0;l&&c<a.maxIterations;){for(var d=0;d<n.length;d++)i=n[d],s[i.id()]=tG(i,u,a.distance,a.attributes,"kMeans");l=!1;for(var h=0;h<a.k;h++){var f=rG(h,n,s);if(f.length!==0){for(var v=a.attributes.length,p=u[h],y=new Array(v),g=new Array(v),m=0;m<v;m++){g[m]=0;for(var b=0;b<f.length;b++)i=f[b],g[m]+=a.attributes[m](i);y[m]=g[m]/f.length,Lue(y[m],p[m],a.sensitivityThreshold)||(l=!0)}u[h]=y,o[h]=t.collection(f)}}c++}return o},Wue=function(e){var t=this.cy(),n=this.nodes(),i=null,a=FT(e),o=new Array(a.k),s,u={},l,c=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(Vt(a.testCentroids)==="object"?s=a.testCentroids:s=uj(n,a.k)):s=uj(n,a.k);for(var d=!0,h=0;d&&h<a.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],u[i.id()]=tG(i,s,a.distance,a.attributes,"kMedoids");d=!1;for(var v=0;v<s.length;v++){var p=rG(v,n,u);if(p.length!==0){c[v]=lj(s[v],p,a.attributes);for(var y=0;y<p.length;y++)l=lj(p[y],p,a.attributes),l<c[v]&&(c[v]=l,s[v]=p[y],d=!0);o[v]=t.collection(p)}}h++}return o},Hue=function(e,t,n,i,a){for(var o,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],a.m);for(var c=0;c<e.length;c++)for(var d=0;d<a.attributes.length;d++){o=0,s=0;for(var h=0;h<t.length;h++)o+=i[h][c]*a.attributes[d](t[h]),s+=i[h][c];e[c][d]=o/s}},Gue=function(e,t,n,i,a){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,u,l,c=2/(a.m-1),d=0;d<n.length;d++)for(var h=0;h<i.length;h++){s=0;for(var f=0;f<n.length;f++)u=mc(a.distance,i[h],n[d],a.attributes,"cmeans"),l=mc(a.distance,i[h],n[f],a.attributes,"cmeans"),s+=Math.pow(u/l,c);e[h][d]=1/s}},Uue=function(e,t,n,i){for(var a=new Array(n.k),o=0;o<a.length;o++)a[o]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);a[u].push(e[l])}for(var d=0;d<a.length;d++)a[d]=i.collection(a[d]);return a},cj=function(e){var t=this.cy(),n=this.nodes(),i=FT(e),a,o,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var d=0;d<n.length;d++)s[d]=new Array(i.k);for(var h=0;h<n.length;h++){for(var f=0,v=0;v<i.k;v++)s[h][v]=Math.random(),f+=s[h][v];for(var p=0;p<i.k;p++)s[h][p]=s[h][p]/f}o=new Array(i.k);for(var y=0;y<i.k;y++)o[y]=new Array(i.attributes.length);l=new Array(n.length);for(var g=0;g<n.length;g++)l[g]=new Array(i.k);for(var m=!0,b=0;m&&b<i.maxIterations;)m=!1,Hue(o,n,s,l,i),Gue(s,u,o,n,i),zue(s,u,i.sensitivityThreshold)||(m=!0),b++;return a=Uue(n,s,i,t),{clusters:a,degreeOfMembership:s}},Kue={kMeans:Vue,kMedoids:Wue,fuzzyCMeans:cj,fcm:cj},Yue=cr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Xue={single:"min",complete:"max"},Zue=function(e){var t=Yue(e),n=Xue[t.linkage];return n!=null&&(t.linkage=n),t},dj=function(e,t,n,i,a){for(var o=0,s=1/0,u,l=a.attributes,c=function(x,P){return dd(a.distance,l.length,function(C){return l[C](x)},function(C){return l[C](P)},x,P)},d=0;d<e.length;d++){var h=e[d].key,f=n[h][i[h]];f<s&&(o=h,s=f)}if(a.mode==="threshold"&&s>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var v=t[o],p=t[i[o]],y;a.mode==="dendrogram"?y={left:v,right:p,key:v.key}:y={value:v.value.concat(p.value),key:v.key},e[v.index]=y,e.splice(p.index,1),t[v.key]=y;for(var g=0;g<e.length;g++){var m=e[g];v.key===m.key?u=1/0:a.linkage==="min"?(u=n[v.key][m.key],n[v.key][m.key]>n[p.key][m.key]&&(u=n[p.key][m.key])):a.linkage==="max"?(u=n[v.key][m.key],n[v.key][m.key]<n[p.key][m.key]&&(u=n[p.key][m.key])):a.linkage==="mean"?u=(n[v.key][m.key]*v.size+n[p.key][m.key]*p.size)/(v.size+p.size):a.mode==="dendrogram"?u=c(m.value,v.value):u=c(m.value[0],v.value[0]),n[v.key][m.key]=n[m.key][v.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(i[w]===v.key||i[w]===p.key){for(var S=w,T=0;T<e.length;T++){var _=e[T].key;n[w][_]<n[w][S]&&(S=_)}i[w]=S}e[b].index=b}return v.key=p.key=v.index=p.index=null,!0},yo=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&yo(e.left,t),e.right&&yo(e.right,t)))},JS=function(e,t){if(!e)return"";if(e.left&&e.right){var n=JS(e.left,t),i=JS(e.right,t),a=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:a.id()}}),t.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},e_=function(e,t,n){if(!e)return[];var i=[],a=[],o=[];return t===0?(e.left&&yo(e.left,i),e.right&&yo(e.right,a),o=i.concat(a),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&yo(e.left,i),e.right&&yo(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=e_(e.left,t-1,n)),e.right&&(a=e_(e.right,t-1,n)),i.concat(a))},hj=function(e){for(var t=this.cy(),n=this.nodes(),i=Zue(e),a=i.attributes,o=function(b,w){return dd(i.distance,a.length,function(S){return a[S](b)},function(S){return a[S](w)},b,w)},s=[],u=[],l=[],c=[],d=0;d<n.length;d++){var h={value:i.mode==="dendrogram"?n[d]:[n[d]],key:d,index:d};s[d]=h,c[d]=h,u[d]=[],l[d]=0}for(var f=0;f<s.length;f++)for(var v=0;v<=f;v++){var p=void 0;i.mode==="dendrogram"?p=f===v?1/0:o(s[f].value,s[v].value):p=f===v?1/0:o(s[f].value[0],s[v].value[0]),u[f][v]=p,u[v][f]=p,p<u[f][l[f]]&&(l[f]=v)}for(var y=dj(s,c,u,l,i);y;)y=dj(s,c,u,l,i);var g;return i.mode==="dendrogram"?(g=e_(s[0],i.dendrogramDepth,t),i.addDendrogram&&JS(s[0],t)):(g=new Array(s.length),s.forEach(function(m,b){m.key=m.index=null,g[b]=t.collection(m.value)})),g},Que={hierarchicalClustering:hj,hca:hj},Jue=cr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ele=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||gt("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||ce(n)||gt("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Jue(e)},tle=function(e,t,n,i){var a=function(s,u){return i[u](s)};return-dd(e,i.length,function(o){return a(t,o)},function(o){return a(n,o)},t,n)},rle=function(e,t){var n=null;return t==="median"?n=eue(e):t==="mean"?n=Jse(e):t==="min"?n=Zse(e):t==="max"?n=Qse(e):n=t,n},nle=function(e,t,n){for(var i=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&i.push(a);return i},fj=function(e,t,n){for(var i=[],a=0;a<e;a++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[a*e+l]>s&&(o=l,s=t[a*e+l])}o>0&&i.push(o)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},ile=function(e,t,n){for(var i=fj(e,t,n),a=0;a<n.length;a++){for(var o=[],s=0;s<i.length;s++)i[s]===n[a]&&o.push(s);for(var u=-1,l=-1/0,c=0;c<o.length;c++){for(var d=0,h=0;h<o.length;h++)d+=t[o[h]*e+o[c]];d>l&&(u=c,l=d)}n[a]=o[u]}return i=fj(e,t,n),i},vj=function(e){for(var t=this.cy(),n=this.nodes(),i=ele(e),a={},o=0;o<n.length;o++)a[n[o].id()]=o;var s,u,l,c,d,h;s=n.length,u=s*s,l=new Array(u);for(var f=0;f<u;f++)l[f]=-1/0;for(var v=0;v<s;v++)for(var p=0;p<s;p++)v!==p&&(l[v*s+p]=tle(i.distance,n[v],n[p],i.attributes));c=rle(l,i.preference);for(var y=0;y<s;y++)l[y*s+y]=c;d=new Array(u);for(var g=0;g<u;g++)d[g]=0;h=new Array(u);for(var m=0;m<u;m++)h[m]=0;for(var b=new Array(s),w=new Array(s),S=new Array(s),T=0;T<s;T++)b[T]=0,w[T]=0,S[T]=0;for(var _=new Array(s*i.minIterations),E=0;E<_.length;E++)_[E]=0;var x;for(x=0;x<i.maxIterations;x++){for(var P=0;P<s;P++){for(var C=-1/0,I=-1/0,O=-1,$=0,D=0;D<s;D++)b[D]=d[P*s+D],$=h[P*s+D]+l[P*s+D],$>=C?(I=C,C=$,O=D):$>I&&(I=$);for(var q=0;q<s;q++)d[P*s+q]=(1-i.damping)*(l[P*s+q]-C)+i.damping*b[q];d[P*s+O]=(1-i.damping)*(l[P*s+O]-I)+i.damping*b[O]}for(var A=0;A<s;A++){for(var k=0,F=0;F<s;F++)b[F]=h[F*s+A],w[F]=Math.max(0,d[F*s+A]),k+=w[F];k-=w[A],w[A]=d[A*s+A],k+=w[A];for(var j=0;j<s;j++)h[j*s+A]=(1-i.damping)*Math.min(0,k-w[j])+i.damping*b[j];h[A*s+A]=(1-i.damping)*(k-w[A])+i.damping*b[A]}for(var M=0,L=0;L<s;L++){var U=h[L*s+L]+d[L*s+L]>0?1:0;_[x%i.minIterations*s+L]=U,M+=U}if(M>0&&(x>=i.minIterations-1||x==i.maxIterations-1)){for(var K=0,Z=0;Z<s;Z++){S[Z]=0;for(var Q=0;Q<i.minIterations;Q++)S[Z]+=_[Q*s+Z];(S[Z]===0||S[Z]===i.minIterations)&&K++}if(K===s)break}}for(var te=nle(s,d,h),oe=ile(s,l,te),re={},V=0;V<te.length;V++)re[te[V]]=[];for(var W=0;W<n.length;W++){var G=a[n[W].id()],X=oe[G];X!=null&&re[X].push(n[W])}for(var se=new Array(te.length),be=0;be<te.length;be++)se[be]=t.collection(re[te[be]]);return se},ale={affinityPropagation:vj,ap:vj},ole=cr({root:void 0,directed:!1}),sle={hierholzer:function(e){if(!Qe(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=ole(e),i=n.root,a=n.directed,o=this,s=!1,u,l,c;i&&(c=Pe(i)?this.filter(i)[0].id():i[0].id());var d={},h={};a?o.forEach(function(m){var b=m.id();if(m.isNode()){var w=m.indegree(!0),S=m.outdegree(!0),T=w-S,_=S-w;T==1?u?s=!0:u=b:_==1?l?s=!0:l=b:(_>1||T>1)&&(s=!0),d[b]=[],m.outgoers().forEach(function(E){E.isEdge()&&d[b].push(E.id())})}else h[b]=[void 0,m.target().id()]}):o.forEach(function(m){var b=m.id();if(m.isNode()){var w=m.degree(!0);w%2&&(u?l?s=!0:l=b:u=b),d[b]=[],m.connectedEdges().forEach(function(S){return d[b].push(S.id())})}else h[b]=[m.source().id(),m.target().id()]});var f={found:!1,trail:void 0};if(s)return f;if(l&&u)if(a){if(c&&l!=c)return f;c=l}else{if(c&&l!=c&&u!=c)return f;c||(c=l)}else c||(c=o[0].id());var v=function(b){for(var w=b,S=[b],T,_,E;d[w].length;)T=d[w].shift(),_=h[T][0],E=h[T][1],w!=E?(d[E]=d[E].filter(function(x){return x!=T}),w=E):!a&&w!=_&&(d[_]=d[_].filter(function(x){return x!=T}),w=_),S.unshift(T),S.unshift(w);return S},p=[],y=[];for(y=v(c);y.length!=1;)d[y[0]].length==0?(p.unshift(o.getElementById(y.shift())),p.unshift(o.getElementById(y.shift()))):y=v(y.shift()).concat(y);p.unshift(o.getElementById(y.shift()));for(var g in d)if(d[g].length)return f;return f.found=!0,f.trail=this.spawn(p,!0),f}},xl=function(){var e=this,t={},n=0,i=0,a=[],o=[],s={},u=function(h,f){for(var v=o.length-1,p=[],y=e.spawn();o[v].x!=h||o[v].y!=f;)p.push(o.pop().edge),v--;p.push(o.pop().edge),p.forEach(function(g){var m=g.connectedNodes().intersection(e);y.merge(g),m.forEach(function(b){var w=b.id(),S=b.connectedEdges().intersection(e);y.merge(b),t[w].cutVertex?y.merge(S.filter(function(T){return T.isLoop()})):y.merge(S)})}),a.push(y)},l=function(h,f,v){h===v&&(i+=1),t[f]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(f).connectedEdges().intersection(e);if(p.size()===0)a.push(e.spawn(e.getElementById(f)));else{var y,g,m,b;p.forEach(function(w){y=w.source().id(),g=w.target().id(),m=y===f?g:y,m!==v&&(b=w.id(),s[b]||(s[b]=!0,o.push({x:f,y:m,edge:w})),m in t?t[f].low=Math.min(t[f].low,t[m].id):(l(h,m,f),t[f].low=Math.min(t[f].low,t[m].low),t[f].id<=t[m].low&&(t[f].cutVertex=!0,u(f,m))))})}};e.forEach(function(d){if(d.isNode()){var h=d.id();h in t||(i=0,l(h,h),t[h].cutVertex=i>1)}});var c=Object.keys(t).filter(function(d){return t[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(c),components:a}},ule={hopcroftTarjanBiconnected:xl,htbc:xl,htb:xl,hopcroftTarjanBiconnectedComponents:xl},Pl=function(){var e=this,t={},n=0,i=[],a=[],o=e.spawn(e),s=function(l){a.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(p){var y=p.target().id();y!==l&&(y in t||s(y),t[y].explored||(t[l].low=Math.min(t[l].low,t[y].low)))}),t[l].index===t[l].low){for(var d=e.spawn();;){var h=a.pop();if(d.merge(e.getElementById(h)),t[h].low=t[l].index,t[h].explored=!0,h===l)break}var f=d.edgesWith(d),v=d.merge(f);i.push(v),o=o.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:o,components:i}},lle={tarjanStronglyConnected:Pl,tsc:Pl,tscc:Pl,tarjanStronglyConnectedComponents:Pl},nG={};[lu,Nse,Lse,jse,Wse,Gse,Yse,Sue,xo,Po,QS,kue,Kue,Que,ale,sle,ule,lle].forEach(function(r){Re(nG,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var iG=0,aG=1,oG=2,fn=function(e){if(!(this instanceof fn))return new fn(e);this.id="Thenable/1.0.7",this.state=iG,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};fn.prototype={fulfill:function(e){return pj(this,aG,"fulfillValue",e)},reject:function(e){return pj(this,oG,"rejectReason",e)},then:function(e,t){var n=this,i=new fn;return n.onFulfilled.push(yj(e,i,"fulfill")),n.onRejected.push(yj(t,i,"reject")),sG(n),i.proxy}};var pj=function(e,t,n,i){return e.state===iG&&(e.state=t,e[n]=i,sG(e)),e},sG=function(e){e.state===aG?gj(e,"onFulfilled",e.fulfillValue):e.state===oG&&gj(e,"onRejected",e.rejectReason)},gj=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var a=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},yj=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var a;try{a=e(i)}catch(o){t.reject(o);return}uG(t,a)}}},uG=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Vt(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(a){i||(i=!0,a===t?e.reject(new TypeError("circular thenable chain")):uG(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(t)};fn.all=function(r){return new fn(function(e,t){for(var n=new Array(r.length),i=0,a=function(u,l){n[u]=l,i++,i===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(d){a(s,d)},function(d){t(d)});else{var c=u;a(s,c)}})(o)})};fn.resolve=function(r){return new fn(function(e,t){e(r)})};fn.reject=function(r){return new fn(function(e,t){t(r)})};var fs=typeof Promise<"u"?Promise:fn,t_=function(e,t,n){var i=IT(e),a=!i,o=this._private=Re({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&mt(o.complete)&&o.completes.push(o.complete),a){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(i){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Pa=t_.prototype;Re(Pa,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Nr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var d=e[l];d!=null&&(e[l]=e[c],e[c]=d)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=a,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new fs(function(i,a){n.push(function(){i()})})}});Pa.complete=Pa.completed;Pa.run=Pa.play;Pa.running=Pa.playing;var cle={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return!1;var o=i[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){var s=i[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this,u=!a,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=Re({},t,n);var d=Object.keys(t).length===0;if(d)return new t_(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var h=t.renderedPosition,f=s.pan(),v=s.zoom();t.position=U4(h,v,f)}if(u&&t.panBy!=null){var p=t.panBy,y=s.pan();t.pan={x:y.x+p.x,y:y.y+p.y}}var g=t.center||t.centre;if(u&&g!=null){var m=s.getCenterPan(g.eles,t.zoom);m!=null&&(t.pan=m)}if(u&&t.fit!=null){var b=t.fit,w=s.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(t.pan=w.pan,t.zoom=w.zoom)}if(u&&Qe(t.zoom)){var S=s.getZoomedViewport(t.zoom);S!=null?(S.zoomed&&(t.zoom=S.zoom),S.panned&&(t.pan=S.pan)):t.zoom=null}return new t_(o[0],t)}},animate:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=Re({},t,n));for(var u=0;u<o.length;u++){var l=o[u],c=l.animated()&&(t.queue===void 0||t.queue),d=l.animation(t,c?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],c=l._private,d=c.animation.current,h=0;h<d.length;h++){var f=d[h],v=f._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},EE,mj;function hd(){if(mj)return EE;mj=1;var r=Array.isArray;return EE=r,EE}var SE,bj;function dle(){if(bj)return SE;bj=1;var r=hd(),e=rl(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(r(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:n.test(a)||!t.test(a)||o!=null&&a in Object(o)}return SE=i,SE}var _E,wj;function hle(){if(wj)return _E;wj=1;var r=N4(),e=tl(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==a}return _E=o,_E}var TE,Ej;function fle(){if(Ej)return TE;Ej=1;var r=ud(),e=r["__core-js_shared__"];return TE=e,TE}var xE,Sj;function vle(){if(Sj)return xE;Sj=1;var r=fle(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return xE=t,xE}var PE,_j;function ple(){if(_j)return PE;_j=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return PE=t,PE}var CE,Tj;function gle(){if(Tj)return CE;Tj=1;var r=hle(),e=vle(),t=tl(),n=ple(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!t(h)||e(h))return!1;var f=r(h)?c:a;return f.test(n(h))}return CE=d,CE}var IE,xj;function yle(){if(xj)return IE;xj=1;function r(e,t){return e?.[t]}return IE=r,IE}var OE,Pj;function NT(){if(Pj)return OE;Pj=1;var r=gle(),e=yle();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return OE=t,OE}var RE,Cj;function fd(){if(Cj)return RE;Cj=1;var r=NT(),e=r(Object,"create");return RE=e,RE}var $E,Ij;function mle(){if(Ij)return $E;Ij=1;var r=fd();function e(){this.__data__=r?r(null):{},this.size=0}return $E=e,$E}var DE,Oj;function ble(){if(Oj)return DE;Oj=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return DE=r,DE}var AE,Rj;function wle(){if(Rj)return AE;Rj=1;var r=fd(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var o=this.__data__;if(r){var s=o[a];return s===e?void 0:s}return n.call(o,a)?o[a]:void 0}return AE=i,AE}var qE,$j;function Ele(){if($j)return qE;$j=1;var r=fd(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return qE=n,qE}var kE,Dj;function Sle(){if(Dj)return kE;Dj=1;var r=fd(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return kE=t,kE}var ME,Aj;function _le(){if(Aj)return ME;Aj=1;var r=mle(),e=ble(),t=wle(),n=Ele(),i=Sle();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,ME=a,ME}var BE,qj;function Tle(){if(qj)return BE;qj=1;function r(){this.__data__=[],this.size=0}return BE=r,BE}var FE,kj;function lG(){if(kj)return FE;kj=1;function r(e,t){return e===t||e!==e&&t!==t}return FE=r,FE}var NE,Mj;function vd(){if(Mj)return NE;Mj=1;var r=lG();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return NE=e,NE}var LE,Bj;function xle(){if(Bj)return LE;Bj=1;var r=vd(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,o=r(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return LE=n,LE}var zE,Fj;function Ple(){if(Fj)return zE;Fj=1;var r=vd();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return zE=e,zE}var jE,Nj;function Cle(){if(Nj)return jE;Nj=1;var r=vd();function e(t){return r(this.__data__,t)>-1}return jE=e,jE}var VE,Lj;function Ile(){if(Lj)return VE;Lj=1;var r=vd();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return VE=e,VE}var WE,zj;function Ole(){if(zj)return WE;zj=1;var r=Tle(),e=xle(),t=Ple(),n=Cle(),i=Ile();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,WE=a,WE}var HE,jj;function Rle(){if(jj)return HE;jj=1;var r=NT(),e=ud(),t=r(e,"Map");return HE=t,HE}var GE,Vj;function $le(){if(Vj)return GE;Vj=1;var r=_le(),e=Ole(),t=Rle();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return GE=n,GE}var UE,Wj;function Dle(){if(Wj)return UE;Wj=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return UE=r,UE}var KE,Hj;function pd(){if(Hj)return KE;Hj=1;var r=Dle();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return KE=e,KE}var YE,Gj;function Ale(){if(Gj)return YE;Gj=1;var r=pd();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return YE=e,YE}var XE,Uj;function qle(){if(Uj)return XE;Uj=1;var r=pd();function e(t){return r(this,t).get(t)}return XE=e,XE}var ZE,Kj;function kle(){if(Kj)return ZE;Kj=1;var r=pd();function e(t){return r(this,t).has(t)}return ZE=e,ZE}var QE,Yj;function Mle(){if(Yj)return QE;Yj=1;var r=pd();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return QE=e,QE}var JE,Xj;function Ble(){if(Xj)return JE;Xj=1;var r=$le(),e=Ale(),t=qle(),n=kle(),i=Mle();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,JE=a,JE}var eS,Zj;function Fle(){if(Zj)return eS;Zj=1;var r=Ble(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],u=a.cache;if(u.has(s))return u.get(s);var l=n.apply(this,o);return a.cache=u.set(s,l)||u,l};return a.cache=new(t.Cache||r),a}return t.Cache=r,eS=t,eS}var tS,Qj;function Nle(){if(Qj)return tS;Qj=1;var r=Fle(),e=500;function t(n){var i=r(n,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return tS=t,tS}var rS,Jj;function cG(){if(Jj)return rS;Jj=1;var r=Nle(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,u,l){a.push(u?l.replace(t,"$1"):s||o)}),a});return rS=n,rS}var nS,e3;function dG(){if(e3)return nS;e3=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}return nS=r,nS}var iS,t3;function Lle(){if(t3)return iS;t3=1;var r=RT(),e=dG(),t=hd(),n=rl(),i=r?r.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return e(s,o)+"";if(n(s))return a?a.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return iS=o,iS}var aS,r3;function hG(){if(r3)return aS;r3=1;var r=Lle();function e(t){return t==null?"":r(t)}return aS=e,aS}var oS,n3;function fG(){if(n3)return oS;n3=1;var r=hd(),e=dle(),t=cG(),n=hG();function i(a,o){return r(a)?a:e(a,o)?[a]:t(n(a))}return oS=i,oS}var sS,i3;function LT(){if(i3)return sS;i3=1;var r=rl();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return sS=e,sS}var uS,a3;function zle(){if(a3)return uS;a3=1;var r=fG(),e=LT();function t(n,i){i=r(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[e(i[a++])];return a&&a==o?n:void 0}return uS=t,uS}var lS,o3;function jle(){if(o3)return lS;o3=1;var r=zle();function e(t,n,i){var a=t==null?void 0:r(t,n);return a===void 0?i:a}return lS=e,lS}var Vle=jle(),Wle=el(Vle),cS,s3;function Hle(){if(s3)return cS;s3=1;var r=NT(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return cS=e,cS}var dS,u3;function Gle(){if(u3)return dS;u3=1;var r=Hle();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return dS=e,dS}var hS,l3;function Ule(){if(l3)return hS;l3=1;var r=Gle(),e=lG(),t=Object.prototype,n=t.hasOwnProperty;function i(a,o,s){var u=a[o];(!(n.call(a,o)&&e(u,s))||s===void 0&&!(o in a))&&r(a,o,s)}return hS=i,hS}var fS,c3;function Kle(){if(c3)return fS;c3=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return fS=t,fS}var vS,d3;function Yle(){if(d3)return vS;d3=1;var r=Ule(),e=fG(),t=Kle(),n=tl(),i=LT();function a(o,s,u,l){if(!n(o))return o;s=e(s,o);for(var c=-1,d=s.length,h=d-1,f=o;f!=null&&++c<d;){var v=i(s[c]),p=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(c!=h){var y=f[v];p=l?l(y,v,f):void 0,p===void 0&&(p=n(y)?y:t(s[c+1])?[]:{})}r(f,v,p),f=f[v]}return o}return vS=a,vS}var pS,h3;function Xle(){if(h3)return pS;h3=1;var r=Yle();function e(t,n,i){return t==null?t:r(t,n,i)}return pS=e,pS}var Zle=Xle(),Qle=el(Zle),gS,f3;function Jle(){if(f3)return gS;f3=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return gS=r,gS}var yS,v3;function ece(){if(v3)return yS;v3=1;var r=dG(),e=Jle(),t=hd(),n=rl(),i=cG(),a=LT(),o=hG();function s(u){return t(u)?r(u,a):n(u)?[u]:e(i(o(u)))}return yS=s,yS}var tce=ece(),rce=el(tce),nce={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=Re({},t,e),function(i,a){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(Pe(i)){var d=i.indexOf(".")!==-1,h=d&&rce(i);if(o.allowGetting&&a===void 0){var f;return c&&(o.beforeGet(c),h&&c._private[o.field][i]===void 0?f=Wle(c._private[o.field],h):f=c._private[o.field][i]),f}else if(o.allowSetting&&a!==void 0){var v=!o.immutableKeys[i];if(v){var p=O4({},i,a);o.beforeSet(s,p);for(var y=0,g=l.length;y<g;y++){var m=l[y];o.canSet(m)&&(h&&c._private[o.field][i]===void 0?Qle(m._private[o.field],h,a):m._private[o.field][i]=a)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Qe(i)){var b=i,w,S,T=Object.keys(b);o.beforeSet(s,b);for(var _=0;_<T.length;_++){w=T[_],S=b[w];var E=!o.immutableKeys[w];if(E)for(var x=0;x<l.length;x++){var P=l[x];o.canSet(P)&&(P._private[o.field][w]=S)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&mt(i)){var C=i;s.on(o.bindingEvent,C)}else if(o.allowGetting&&i===void 0){var I;return c&&(o.beforeGet(c),I=c._private[o.field]),I}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=Re({},t,e),function(i){var a=e,o=this,s=o.length!==void 0,u=s?o:[o];if(Pe(i)){for(var l=i.split(/\s+/),c=l.length,d=0;d<c;d++){var h=l[d];if(!Oi(h)){var f=!a.immutableKeys[h];if(f)for(var v=0,p=u.length;v<p;v++)u[v]._private[a.field][h]=void 0}}a.triggerEvent&&o[a.triggerFnName](a.event)}else if(i===void 0){for(var y=0,g=u.length;y<g;y++)for(var m=u[y]._private[a.field],b=Object.keys(m),w=0;w<b.length;w++){var S=b[w],T=!a.immutableKeys[S];T&&(m[S]=void 0)}a.triggerEvent&&o[a.triggerFnName](a.event)}return o}}},ice={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var a=this,o=Array.prototype.slice.call(arguments,0);return new fs(function(s,u){var l=function(f){a.off.apply(a,d),s(f)},c=o.concat([l]),d=c.concat([]);a.on.apply(a,c)})}}},Je={};[cle,nce,ice].forEach(function(r){Re(Je,r)});var ace={animate:Je.animate(),animation:Je.animation(),animated:Je.animated(),clearQueue:Je.clearQueue(),delay:Je.delay(),delayAnimation:Je.delayAnimation(),stop:Je.stop()},zl={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else ot(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new hs(e),o=0;o<t.length;o++){for(var s=t[o],u=s._private,l=u.classes,c=!1,d=0;d<e.length;d++){var h=e[d],f=l.has(h);if(!f){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=a,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){ot(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,a=[],o=0,s=n.length;o<s;o++)for(var u=n[o],l=u._private.classes,c=!1,d=0;d<e.length;d++){var h=e[d],f=l.has(h),v=!1;t||i&&!f?(l.add(h),v=!0):(!t||i&&f)&&(l.delete(h),v=!0),!c&&v&&(a.push(u),c=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};zl.className=zl.classNames=zl.classes;var Xe={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:jt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Xe.variable="(?:[\\w-.]|(?:\\\\"+Xe.metaChar+"))+";Xe.className="(?:[\\w-]|(?:\\\\"+Xe.metaChar+"))+";Xe.value=Xe.string+"|"+Xe.number;Xe.id=Xe.variable;(function(){var r,e,t;for(r=Xe.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Xe.comparatorOp+="|@"+e;for(r=Xe.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Xe.comparatorOp+="|\\!"+e)})();var it=function(){return{checks:[]}},he={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},r_=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return tse(r.selector,e.selector)}),oce=(function(){for(var r={},e,t=0;t<r_.length;t++)e=r_[t],r[e.selector]=e.matches;return r})(),sce=function(e,t){return oce[e](t)},uce="("+r_.map(function(r){return r.selector}).join("|")+")",eo=function(e){return e.replace(new RegExp("\\\\("+Xe.metaChar+")","g"),function(t,n){return n})},li=function(e,t,n){e[e.length-1]=n},n_=[{name:"group",query:!0,regex:"("+Xe.group+")",populate:function(e,t,n){var i=$t(n,1),a=i[0];t.checks.push({type:he.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:uce,populate:function(e,t,n){var i=$t(n,1),a=i[0];t.checks.push({type:he.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+Xe.id+")",populate:function(e,t,n){var i=$t(n,1),a=i[0];t.checks.push({type:he.ID,value:eo(a)})}},{name:"className",query:!0,regex:"\\.("+Xe.className+")",populate:function(e,t,n){var i=$t(n,1),a=i[0];t.checks.push({type:he.CLASS,value:eo(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Xe.variable+")\\s*\\]",populate:function(e,t,n){var i=$t(n,1),a=i[0];t.checks.push({type:he.DATA_EXIST,field:eo(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Xe.variable+")\\s*("+Xe.comparatorOp+")\\s*("+Xe.value+")\\s*\\]",populate:function(e,t,n){var i=$t(n,3),a=i[0],o=i[1],s=i[2],u=new RegExp("^"+Xe.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:he.DATA_COMPARE,field:eo(a),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Xe.boolOp+")\\s*("+Xe.variable+")\\s*\\]",populate:function(e,t,n){var i=$t(n,2),a=i[0],o=i[1];t.checks.push({type:he.DATA_BOOL,field:eo(o),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Xe.meta+")\\s*("+Xe.comparatorOp+")\\s*("+Xe.number+")\\s*\\]\\]",populate:function(e,t,n){var i=$t(n,3),a=i[0],o=i[1],s=i[2];t.checks.push({type:he.META_COMPARE,field:eo(a),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Xe.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=i,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=it();return s}},{name:"directedEdge",separator:!0,regex:Xe.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=it(),i=t,a=it();return n.checks.push({type:he.DIRECTED_EDGE,source:i,target:a}),li(e,t,n),e.edgeCount++,a}else{var o=it(),s=t,u=it();return o.checks.push({type:he.NODE_SOURCE,source:s,target:u}),li(e,t,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Xe.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=it(),i=t,a=it();return n.checks.push({type:he.UNDIRECTED_EDGE,nodes:[i,a]}),li(e,t,n),e.edgeCount++,a}else{var o=it(),s=t,u=it();return o.checks.push({type:he.NODE_NEIGHBOR,node:s,neighbor:u}),li(e,t,o),u}}},{name:"child",separator:!0,regex:Xe.child,populate:function(e,t){if(e.currentSubject==null){var n=it(),i=it(),a=e[e.length-1];return n.checks.push({type:he.CHILD,parent:a,child:i}),li(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=it(),s=e[e.length-1],u=it(),l=it(),c=it(),d=it();return o.checks.push({type:he.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:he.TRUE}],d.checks.push({type:he.TRUE}),u.checks.push({type:he.PARENT,parent:d,child:c}),li(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var h=it(),f=it(),v=[{type:he.PARENT,parent:h,child:f}];return h.checks=t.checks,t.checks=v,e.compoundCount++,f}}},{name:"descendant",separator:!0,regex:Xe.descendant,populate:function(e,t){if(e.currentSubject==null){var n=it(),i=it(),a=e[e.length-1];return n.checks.push({type:he.DESCENDANT,ancestor:a,descendant:i}),li(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=it(),s=e[e.length-1],u=it(),l=it(),c=it(),d=it();return o.checks.push({type:he.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:he.TRUE}],d.checks.push({type:he.TRUE}),u.checks.push({type:he.ANCESTOR,ancestor:d,descendant:c}),li(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var h=it(),f=it(),v=[{type:he.ANCESTOR,ancestor:h,descendant:f}];return h.checks=t.checks,t.checks=v,e.compoundCount++,f}}},{name:"subject",modifier:!0,regex:Xe.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return et("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===he.DIRECTED_EDGE?i.type=he.NODE_TARGET:a===he.UNDIRECTED_EDGE&&(i.type=he.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];n_.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var lce=function(e){for(var t,n,i,a=0;a<n_.length;a++){var o=n_[a],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,t=o,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},cce=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},dce=function(e){var t=this,n=t.inputText=e,i=t[0]=it();for(t.length=1,n=cce(n);;){var a=lce(n);if(a.expr==null)return et("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),s=a.expr.populate(t,i,o);if(s===!1)return!1;if(s!=null&&(i=s),n=a.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return et("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return et("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&et("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},hce=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return Pe(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,d){var h=c.type,f=c.value;switch(h){case he.GROUP:{var v=e(f);return v.substring(0,v.length-1)}case he.DATA_COMPARE:{var p=c.field,y=c.operator;return"["+p+n(e(y))+t(f)+"]"}case he.DATA_BOOL:{var g=c.operator,m=c.field;return"["+e(g)+m+"]"}case he.DATA_EXIST:{var b=c.field;return"["+b+"]"}case he.META_COMPARE:{var w=c.operator,S=c.field;return"[["+S+n(e(w))+t(f)+"]]"}case he.STATE:return f;case he.ID:return"#"+f;case he.CLASS:return"."+f;case he.PARENT:case he.CHILD:return a(c.parent,d)+n(">")+a(c.child,d);case he.ANCESTOR:case he.DESCENDANT:return a(c.ancestor,d)+" "+a(c.descendant,d);case he.COMPOUND_SPLIT:{var T=a(c.left,d),_=a(c.subject,d),E=a(c.right,d);return T+(T.length>0?" ":"")+_+E}case he.TRUE:return""}},a=function(c,d){return c.checks.reduce(function(h,f,v){return h+(d===c&&v===0?"$":"")+i(f,d)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=a(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},fce={parse:dce,toString:hce},vG=function(e,t,n){var i,a=Pe(e),o=ce(e),s=Pe(n),u,l,c=!1,d=!1,h=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),d=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(a||s||c)&&(u=!a&&!o?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":h=!0,i=e>n;break;case">=":h=!0,i=e>=n;break;case"<":h=!0,i=e<n;break;case"<=":h=!0,i=e<=n;break;default:i=!1;break}return d&&(e!=null||!h)&&(i=!i),i},vce=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},pce=function(e){return e!==void 0},zT=function(e,t){return e.data(t)},gce=function(e,t){return e[t]()},xt=[],vt=function(e,t){return e.checks.every(function(n){return xt[n.type](n,t)})};xt[he.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};xt[he.STATE]=function(r,e){var t=r.value;return sce(t,e)};xt[he.ID]=function(r,e){var t=r.value;return e.id()===t};xt[he.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};xt[he.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return vG(gce(e,t),n,i)};xt[he.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return vG(zT(e,t),n,i)};xt[he.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return vce(zT(e,t),n)};xt[he.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,pce(zT(e,t))};xt[he.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),a=e.target();return vt(t,i)&&vt(n,a)||vt(n,i)&&vt(t,a)};xt[he.NODE_NEIGHBOR]=function(r,e){return vt(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&vt(r.neighbor,t)})};xt[he.DIRECTED_EDGE]=function(r,e){return vt(r.source,e.source())&&vt(r.target,e.target())};xt[he.NODE_SOURCE]=function(r,e){return vt(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&vt(r.target,t)})};xt[he.NODE_TARGET]=function(r,e){return vt(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&vt(r.source,t)})};xt[he.CHILD]=function(r,e){return vt(r.child,e)&&vt(r.parent,e.parent())};xt[he.PARENT]=function(r,e){return vt(r.parent,e)&&e.children().some(function(t){return vt(r.child,t)})};xt[he.DESCENDANT]=function(r,e){return vt(r.descendant,e)&&e.ancestors().some(function(t){return vt(r.ancestor,t)})};xt[he.ANCESTOR]=function(r,e){return vt(r.ancestor,e)&&e.descendants().some(function(t){return vt(r.descendant,t)})};xt[he.COMPOUND_SPLIT]=function(r,e){return vt(r.subject,e)&&vt(r.left,e)&&vt(r.right,e)};xt[he.TRUE]=function(){return!0};xt[he.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};xt[he.FILTER]=function(r,e){var t=r.value;return t(e)};var yce=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===he.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(a){for(var o=0;o<t.length;o++){var s=t[o];if(vt(s,a))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},mce=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(vt(i,e))return!0}return!1},bce={matches:mce,filter:yce},Di=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Pe(e)&&e.match(/^\s*$/)||(Nr(e)?this.addQuery({checks:[{type:he.COLLECTION,value:e.collection()}]}):mt(e)?this.addQuery({checks:[{type:he.FILTER,value:e}]}):Pe(e)?this.parse(e)||(this.invalid=!0):gt("A selector must be created from a string; found "))},Ai=Di.prototype;[fce,bce].forEach(function(r){return Re(Ai,r)});Ai.text=function(){return this.inputText};Ai.size=function(){return this.length};Ai.eq=function(r){return this[r]};Ai.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};Ai.addQuery=function(r){this[this.length++]=r};Ai.selector=Ai.toString;var Ti={allAre:function(e){var t=new Di(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new Di(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Ti.allAreNeighbours=Ti.allAreNeighbors;Ti.has=Ti.contains;Ti.equal=Ti.equals=Ti.same;var Kr=function(e,t){return function(i,a,o,s){var u=i,l=this,c;if(u==null?c="":Nr(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var d=l[0]._private,h=d.traversalCache=d.traversalCache||{},f=h[t]=h[t]||[],v=Ta(c),p=f[v];return p||(f[v]=e.call(l,i,a,o,s))}else return e.call(l,i,a,o,s)}},Fo={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],o=a._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],a=i.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:Kr(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var a=0;a<i.length;a++){var o=i[a];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function jT(r,e,t,n){for(var i=[],a=new hs,o=r.cy(),s=o.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,a,l)}for(;i.length>0;){var c=i.shift();e(c),a.add(c.id()),s&&n(i,a,c)}return r}function pG(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||r.push(a)}}Fo.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return jT(this,r,e,pG)};function gG(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Fo.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return jT(this,r,e,gG)};function wce(r,e,t){gG(r,e,t),pG(r,e,t)}Fo.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return jT(this,r,e,wce)};Fo.ancestors=Fo.parents;var hu,yG;hu=yG={data:Je.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Je.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Je.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Je.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Je.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Je.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};hu.attr=hu.data;hu.removeAttr=hu.removeData;var Ece=yG,gd={};function mS(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}Re(gd,{degree:mS(function(r,e){return e.source().same(e.target())?2:1}),indegree:mS(function(r,e){return e.target().same(r)?1:0}),outdegree:mS(function(r,e){return e.source().same(r)?1:0})});function to(r,e){return function(t){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}Re(gd,{minDegree:to("degree",function(r,e){return r<e}),maxDegree:to("degree",function(r,e){return r>e}),minIndegree:to("indegree",function(r,e){return r<e}),maxIndegree:to("indegree",function(r,e){return r>e}),minOutdegree:to("outdegree",function(r,e){return r<e}),maxOutdegree:to("outdegree",function(r,e){return r>e})});Re(gd,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var cn,mG,bG=function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var o=a._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};a.isParent()&&!(s.x===0&&s.y===0)&&a.children().shift(s,n),a.dirtyBoundingBoxCache()}}},p3={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){bG(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};cn=mG={position:Je.data(p3),silentPosition:Je.data(Re({},p3,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){bG(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Qe(e))t?this.silentPosition(e):this.position(e);else if(mt(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=void 0;(s=n(o,a))&&(t?o.silentPosition(s):o.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(Qe(e)?(i={x:ce(e.x)?e.x:0,y:ce(e.y)?e.y:0},n=t):Pe(e)&&ce(t)&&(i={x:0,y:0},i[e]=t),i!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(a.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}a.endBatch()}return this},silentShift:function(e,t){return Qe(e)?this.shift(e,!0):Pe(e)&&ce(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=Qe(e)?e:void 0,u=s!==void 0||t!==void 0&&Pe(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-o[e])/a):s!==void 0&&c.position(U4(s,a,o))}else{var d=n.position();return s=cd(d,a,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),a=Qe(e)?e:void 0,o=a!==void 0||t!==void 0&&Pe(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,d=c&&c.length>0,h=d;d&&(c=c[0]);var f=h?c.position():{x:0,y:0};t!==void 0?l.position(e,t+f[e]):a!==void 0&&l.position({x:a.x+f.x,y:a.y+f.y})}else{var v=n.position(),p=s?n.parent():null,y=p&&p.length>0,g=y;y&&(p=p[0]);var m=g?p.position():{x:0,y:0};return a={x:v.x-m.x,y:v.y-m.y},e===void 0?a:a[e]}else if(!o)return;return this}};cn.modelPosition=cn.point=cn.position;cn.modelPositions=cn.points=cn.positions;cn.renderedPoint=cn.renderedPosition;cn.relativePoint=cn.relativePosition;var Sce=mG,Co,Gi;Co=Gi={};Gi.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),a=e.x1*n+i.x,o=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}};Gi.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};Gi.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},d=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=s.position;(d.w===0||d.h===0)&&(d={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},d.x1=h.x-d.w/2,d.x2=h.x+d.w/2,d.y1=h.y-d.h/2,d.y2=h.y+d.h/2);function f(x,P,C){var I=0,O=0,$=P+C;return x>0&&$>0&&(I=P/$*x,O=C/$*x),{biasDiff:I,biasComplementDiff:O}}function v(x,P,C,I){if(C.units==="%")switch(I){case"width":return x>0?C.pfValue*x:0;case"height":return P>0?C.pfValue*P:0;case"average":return x>0&&P>0?C.pfValue*(x+P)/2:0;case"min":return x>0&&P>0?x>P?C.pfValue*P:C.pfValue*x:0;case"max":return x>0&&P>0?x>P?C.pfValue*x:C.pfValue*P:0;default:return 0}else return C.units==="px"?C.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var y=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(y=y*100/c.width.val);var g=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(g=g*100/c.height.val);var m=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var b=f(c.width.val-d.w,p,y),w=b.biasDiff,S=b.biasComplementDiff,T=f(c.height.val-d.h,g,m),_=T.biasDiff,E=T.biasComplementDiff;s.autoPadding=v(d.w,d.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(d.w,c.width.val),h.x=(-w+d.x1+d.x2+S)/2,s.autoHeight=Math.max(d.h,c.height.val),h.y=(-_+d.y1+d.y2+E)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||r)&&(t(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var Gr=function(e){return e===1/0||e===-1/0?0:e},sn=function(e,t,n,i,a){i-t===0||a-n===0||t==null||n==null||i==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},hi=function(e,t){return t==null?e:sn(e,t.x1,t.y1,t.x2,t.y2)},Ps=function(e,t,n){return Rr(e,t,n)},Cl=function(e,t,n){if(!t.cy().headless()){var i=t._private,a=i.rstyle,o=a.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=a.srcX,l=a.srcY):n==="target"?(u=a.tgtX,l=a.tgtY):(u=a.midX,l=a.midY);var c=i.arrowBounds=i.arrowBounds||{},d=c[n]=c[n]||{};d.x1=u-o,d.y1=l-o,d.x2=u+o,d.y2=l+o,d.w=d.x2-d.x1,d.h=d.y2-d.y1,Nl(d,1),sn(e,d.x1,d.y1,d.x2,d.y2)}}},bS=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var a=t._private,o=a.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=Ps(o,"labelWidth",n),d=Ps(o,"labelHeight",n),h=Ps(o,"labelX",n),f=Ps(o,"labelY",n),v=t.pstyle(i+"text-margin-x").pfValue,p=t.pstyle(i+"text-margin-y").pfValue,y=t.isEdge(),g=t.pstyle(i+"text-rotation"),m=t.pstyle("text-outline-width").pfValue,b=t.pstyle("text-border-width").pfValue,w=b/2,S=t.pstyle("text-background-padding").pfValue,T=2,_=d,E=c,x=E/2,P=_/2,C,I,O,$;if(y)C=h-x,I=h+x,O=f-P,$=f+P;else{switch(u.value){case"left":C=h-E,I=h;break;case"center":C=h-x,I=h+x;break;case"right":C=h,I=h+E;break}switch(l.value){case"top":O=f-_,$=f;break;case"center":O=f-P,$=f+P;break;case"bottom":O=f,$=f+_;break}}var D=v-Math.max(m,w)-S-T,q=v+Math.max(m,w)+S+T,A=p-Math.max(m,w)-S-T,k=p+Math.max(m,w)+S+T;C+=D,I+=q,O+=A,$+=k;var F=n||"main",j=a.labelBounds,M=j[F]=j[F]||{};M.x1=C,M.y1=O,M.x2=I,M.y2=$,M.w=I-C,M.h=$-O,M.leftPad=D,M.rightPad=q,M.topPad=A,M.botPad=k;var L=y&&g.strValue==="autorotate",U=g.pfValue!=null&&g.pfValue!==0;if(L||U){var K=L?Ps(a.rstyle,"labelAngle",n):g.pfValue,Z=Math.cos(K),Q=Math.sin(K),te=(C+I)/2,oe=(O+$)/2;if(!y){switch(u.value){case"left":te=I;break;case"right":te=C;break}switch(l.value){case"top":oe=$;break;case"bottom":oe=O;break}}var re=function(fe,ge){return fe=fe-te,ge=ge-oe,{x:fe*Z-ge*Q+te,y:fe*Q+ge*Z+oe}},V=re(C,O),W=re(C,$),G=re(I,O),X=re(I,$);C=Math.min(V.x,W.x,G.x,X.x),I=Math.max(V.x,W.x,G.x,X.x),O=Math.min(V.y,W.y,G.y,X.y),$=Math.max(V.y,W.y,G.y,X.y)}var se=F+"Rot",be=j[se]=j[se]||{};be.x1=C,be.y1=O,be.x2=I,be.y2=$,be.w=I-C,be.h=$-O,sn(e,C,O,I,$),sn(a.labelBounds.all,C,O,I,$)}return e}},g3=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value,a=t.pstyle("outline-offset").value,o=i+a;wG(e,t,n,o,"outside",o/2)}},wG=function(e,t,n,i,a,o){if(!(n===0||i<=0||a==="inside")){var s=t.cy(),u=t.pstyle("shape").value,l=s.renderer().nodeShapes[u],c=t.position(),d=c.x,h=c.y,f=t.width(),v=t.height();if(l.hasMiterBounds){a==="center"&&(i/=2);var p=l.miterBounds(d,h,f,v,i);hi(e,p)}else o!=null&&o>0&&Ll(e,[o,o,o,o])}},_ce=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,i=t.pstyle("border-width").pfValue,a=t.pstyle("border-position").value;wG(e,t,n,i,a)}},Tce=function(e,t){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),o=Tr(),s=e._private,u=e.isNode(),l=e.isEdge(),c,d,h,f,v,p,y=s.rstyle,g=u&&i?e.pstyle("bounds-expansion").pfValue:[0],m=function(ke){return ke.pstyle("display").value!=="none"},b=!i||m(e)&&(!l||m(e.source())&&m(e.target()));if(b){var w=0,S=0;i&&t.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(S=e.pstyle("overlay-padding").value));var T=0,_=0;i&&t.includeUnderlays&&(T=e.pstyle("underlay-opacity").value,T!==0&&(_=e.pstyle("underlay-padding").value));var E=Math.max(S,_),x=0,P=0;if(i&&(x=e.pstyle("width").pfValue,P=x/2),u&&t.includeNodes){var C=e.position();v=C.x,p=C.y;var I=e.outerWidth(),O=I/2,$=e.outerHeight(),D=$/2;c=v-O,d=v+O,h=p-D,f=p+D,sn(o,c,h,d,f),i&&g3(o,e),i&&t.includeOutlines&&!a&&g3(o,e),i&&_ce(o,e)}else if(l&&t.includeEdges)if(i&&!a){var q=e.pstyle("curve-style").strValue;if(c=Math.min(y.srcX,y.midX,y.tgtX),d=Math.max(y.srcX,y.midX,y.tgtX),h=Math.min(y.srcY,y.midY,y.tgtY),f=Math.max(y.srcY,y.midY,y.tgtY),c-=P,d+=P,h-=P,f+=P,sn(o,c,h,d,f),q==="haystack"){var A=y.haystackPts;if(A&&A.length===2){if(c=A[0].x,h=A[0].y,d=A[1].x,f=A[1].y,c>d){var k=c;c=d,d=k}if(h>f){var F=h;h=f,f=F}sn(o,c-P,h-P,d+P,f+P)}}else if(q==="bezier"||q==="unbundled-bezier"||pi(q,"segments")||pi(q,"taxi")){var j;switch(q){case"bezier":case"unbundled-bezier":j=y.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":j=y.linePts;break}if(j!=null)for(var M=0;M<j.length;M++){var L=j[M];c=L.x-P,d=L.x+P,h=L.y-P,f=L.y+P,sn(o,c,h,d,f)}}}else{var U=e.source(),K=U.position(),Z=e.target(),Q=Z.position();if(c=K.x,d=Q.x,h=K.y,f=Q.y,c>d){var te=c;c=d,d=te}if(h>f){var oe=h;h=f,f=oe}c-=P,d+=P,h-=P,f+=P,sn(o,c,h,d,f)}if(i&&t.includeEdges&&l&&(Cl(o,e,"mid-source"),Cl(o,e,"mid-target"),Cl(o,e,"source"),Cl(o,e,"target")),i){var re=e.pstyle("ghost").value==="yes";if(re){var V=e.pstyle("ghost-offset-x").pfValue,W=e.pstyle("ghost-offset-y").pfValue;sn(o,o.x1+V,o.y1+W,o.x2+V,o.y2+W)}}var G=s.bodyBounds=s.bodyBounds||{};tj(G,o),Ll(G,g),Nl(G,1),i&&(c=o.x1,d=o.x2,h=o.y1,f=o.y2,sn(o,c-E,h-E,d+E,f+E));var X=s.overlayBounds=s.overlayBounds||{};tj(X,o),Ll(X,g),Nl(X,1);var se=s.labelBounds=s.labelBounds||{};se.all!=null?aue(se.all):se.all=Tr(),i&&t.includeLabels&&(t.includeMainLabels&&bS(o,e,null),l&&(t.includeSourceLabels&&bS(o,e,"source"),t.includeTargetLabels&&bS(o,e,"target")))}return o.x1=Gr(o.x1),o.y1=Gr(o.y1),o.x2=Gr(o.x2),o.y2=Gr(o.y2),o.w=Gr(o.x2-o.x1),o.h=Gr(o.y2-o.y1),o.w>0&&o.h>0&&b&&(Ll(o,g),Nl(o,1)),o},EG=function(e){var t=0,n=function(o){return(o?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},SG=function(e){var t=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return X5([t(n.x),t(n.y),t(i.x),t(i.y)])}else{var a=e.position();return X5([t(a.x),t(a.y)])}},y3=function(e,t){var n=e._private,i,a=e.isEdge(),o=t==null?m3:EG(t),s=o===m3;if(n.bbCache==null?(i=Tce(e,fu),n.bbCache=i,n.bbCachePosKey=SG(e)):i=n.bbCache,!s){var u=e.isNode();i=Tr(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?hi(i,n.overlayBounds):hi(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?hi(i,n.labelBounds.all):(t.includeMainLabels&&hi(i,n.labelBounds.mainRot),t.includeSourceLabels&&hi(i,n.labelBounds.sourceRot),t.includeTargetLabels&&hi(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},fu={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},m3=EG(fu),b3=cr(fu);Gi.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=Mo(function(c){var d=c._private;return d.bbCache==null||d.styleDirty||d.bbCachePosKey!==SG(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=fu:r=b3(r),e=y3(this[0],r);else{e=Tr(),r=r||fu;var i=b3(r),a=this,o=a.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<a.length;u++){var l=a[u];n(l)&&l.dirtyBoundingBoxCache(),hi(e,y3(l,i))}}return e.x1=Gr(e.x1),e.y1=Gr(e.y1),e.x2=Gr(e.x2),e.y2=Gr(e.y2),e.w=Gr(e.x2-e.x1),e.h=Gr(e.y2-e.y1),e};Gi.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Gi.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),Qe(r)){var a=r;r=function(){return a}}var o=function(c,d){return c._private.bbAtOldPos=r(c,d)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=iue(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};Co.boundingbox=Co.bb=Co.boundingBox;Co.renderedBoundingbox=Co.renderedBoundingBox;var xce=Gi,ks,al;ks=al={};var _G=function(e){e.uppercaseName=k5(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=k5(e.outerName),ks[e.name]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},ks["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return s+l+c}else return 1},ks["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},ks["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};_G({name:"width"});_G({name:"height"});al.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};al.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};al.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var Pce=al,Cce=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},Ice=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return cd(t(e),n.zoom(),n.pan())}},Oce=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),a=n.zoom();return t(e).map(function(o){return cd(o,a,i)})}},Rce=function(e){return e.renderer().getControlPoints(e)},$ce=function(e){return e.renderer().getSegmentPoints(e)},Dce=function(e){return e.renderer().getSourceEndpoint(e)},Ace=function(e){return e.renderer().getTargetEndpoint(e)},qce=function(e){return e.renderer().getEdgeMidpoint(e)},w3={controlPoints:{get:Rce,mult:!0},segmentPoints:{get:$ce,mult:!0},sourceEndpoint:{get:Dce},targetEndpoint:{get:Ace},midpoint:{get:qce}},kce=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},Mce=Object.keys(w3).reduce(function(r,e){var t=w3[e],n=kce(e);return r[e]=function(){return Cce(this,t.get)},t.mult?r[n]=function(){return Oce(this,t.get)}:r[n]=function(){return Ice(this,t.get)},r},{}),Bce=Re({},Sce,xce,Pce,Mce);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var TG=function(e,t){this.recycle(e,t)};function Cs(){return!1}function Il(){return!0}TG.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Cs,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Il:Cs):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Il;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Il;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Il,this.stopPropagation()},isDefaultPrevented:Cs,isPropagationStopped:Cs,isImmediatePropagationStopped:Cs};var xG=/^([^.]+)(\.(?:[^.]+))?$/,Fce=".*",PG={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},E3=Object.keys(PG),Nce={};function yd(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nce,e=arguments.length>1?arguments[1]:void 0,t=0;t<E3.length;t++){var n=E3[t];this[n]=r[n]||PG[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var qi=yd.prototype,CG=function(e,t,n,i,a,o,s){mt(i)&&(a=i,i=null),s&&(o==null?o=s:o=Re({},o,s));for(var u=ot(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!Oi(c)){var d=c.match(xG);if(d){var h=d[1],f=d[2]?d[2]:null,v=t(e,c,h,f,i,a,o);if(v===!1)break}}}},S3=function(e,t){return e.addEventFields(e.context,t),new TG(t.type,t)},Lce=function(e,t,n){if(Woe(n)){t(e,n);return}else if(Qe(n)){t(e,S3(e,n));return}for(var i=ot(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var o=i[a];if(!Oi(o)){var s=o.match(xG);if(s){var u=s[1],l=s[2]?s[2]:null,c=S3(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};qi.on=qi.addListener=function(r,e,t,n,i){return CG(this,function(a,o,s,u,l,c,d){mt(c)&&a.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:l,conf:d})},r,e,t,n,i),this};qi.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};qi.removeListener=qi.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=Ise(this.listeners));for(var a=this.listeners,o=function(l){var c=a[l];CG(i,function(d,h,f,v,p,y){if((c.type===f||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!p||d.qualifierCompare(c.qualifier,p))&&(!y||c.callback===y))return a.splice(l,1),!1},r,e,t,n)},s=a.length-1;s>=0;s--)o(s);return this};qi.removeAllListeners=function(){return this.removeListener("*")};qi.emit=qi.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,ot(e)||(e=[e]),Lce(this,function(a,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],i=n.length);for(var s=function(){var c=n[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===Fce)&&a.eventMatches(a.context,c,o)){var d=[o];e!=null&&Rse(d,e),a.beforeEmit(a.context,c,o),c.conf&&c.conf.one&&(a.listeners=a.listeners.filter(function(v){return v!==c}));var h=a.callbackContext(a.context,c,o),f=c.callback.apply(h,d);a.afterEmit(a.context,c,o),f===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<i;u++)s();a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},r),this.emitting--,this};var zce={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Ju(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ol=function(e){return Pe(e)?new Di(e):e},IG={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new yd(zce,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=Ol(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=Ol(t),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=Ol(t),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=Ol(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Je.eventAliasesOn(IG);var OG={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Pe(e)||Nr(e))return new Di(e).filter(this);if(mt(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Pe(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Pe(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,a=e,o=this.length<e.length,s=o?i:a,u=o?a:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;Pe(e)&&(e=t.$(e));var n=this.spawn(),i=this,a=e,o=function(u,l){for(var c=0;c<u.length;c++){var d=u[c],h=d._private.data.id,f=l.hasElementWithId(h);f||n.push(d)}};return o(i,a),o(a,i),n},diff:function(e){var t=this._private.cy;Pe(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),o=this,s=e,u=function(c,d,h){for(var f=0;f<c.length;f++){var v=c[f],p=v._private.data.id,y=d.hasElementWithId(p);y?a.merge(v):h.push(v)}};return u(o,s,n),u(s,o,i),{left:n,right:i,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(Pe(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],s=!this.has(o);s&&i.push(o)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Pe(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=t.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!a.has(u);if(l){var c=this.length++;this[c]=s,a.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,a.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,a=i.get(n);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Pe(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,t){for(var n=-1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Ze=OG;Ze.u=Ze["|"]=Ze["+"]=Ze.union=Ze.or=Ze.add;Ze["\\"]=Ze["!"]=Ze["-"]=Ze.difference=Ze.relativeComplement=Ze.subtract=Ze.not;Ze.n=Ze["&"]=Ze["."]=Ze.and=Ze.intersection=Ze.intersect;Ze["^"]=Ze["(+)"]=Ze["(-)"]=Ze.symmetricDifference=Ze.symdiff=Ze.xor;Ze.fnFilter=Ze.filterFn=Ze.stdFilter=Ze.filter;Ze.complement=Ze.abscomp=Ze.absoluteComplement;var jce={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},RG=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function a(c){var d=c.pstyle("z-compound-depth");return d.value==="auto"?i?c.zDepth():0:d.value==="bottom"?-1:d.value==="top"?$T:0}var o=a(e)-a(t);if(o!==0)return o;function s(c){var d=c.pstyle("z-index-compare");return d.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},bc={forEach:function(e,t){if(mt(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var a=e;a>=0&&a<t&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!mt(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(RG)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:$T-1}else{var a=t.source,o=t.target,s=a.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};bc.each=bc.forEach;var Vce=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Vt(Symbol))!=e&&Vt(Symbol.iterator)!=e;t&&(bc[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,o=this.length;return O4({next:function(){return a<o?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};Vce();var Wce=cr({nodeDimensionsIncludeLabels:!1}),jl={layoutDimensions:function(e){e=Wce(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(S){return!S.isParent()}),a=this.cy(),o=t.eles,s=function(T){return T.id()},u=Mo(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(T,_,E){var x={x:_.x1+_.w/2,y:_.y1+_.h/2},P={x:(E.x-x.x)*T,y:(E.y-x.y)*T};return{x:x.x+P.x,y:x.y+P.y}},c=t.spacingFactor&&t.spacingFactor!==1,d=function(){if(!c)return null;for(var T=Tr(),_=0;_<i.length;_++){var E=i[_],x=u(E,_);K4(T,x.x,x.y)}return T},h=d(),f=Mo(function(S,T){var _=u(S,T);if(c){var E=Math.abs(t.spacingFactor);_=l(E,h,_)}return t.transform!=null&&(_=t.transform(S,_)),_},s);if(t.animate){for(var v=0;v<i.length;v++){var p=i[v],y=f(p,v),g=t.animateFilter==null||t.animateFilter(p,v);if(g){var m=p.animation({position:y,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else p.position(y)}if(t.fit){var b=a.animation({fit:{boundingBox:o.boundingBoxAt(f),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}else if(t.zoom!==void 0&&t.pan!==void 0){var w=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w)}e.animations.forEach(function(S){return S.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),fs.all(e.animations.map(function(S){return S.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(f),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(Re({},e,{eles:this}))}};jl.createLayout=jl.makeLayout=jl.layout;function $G(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],a;return(a=i[r])!=null||(a=i[r]=e(t)),a}function md(r,e){return r=Ta(r),function(n){return $G(r,e,n)}}function bd(r,e){r=Ta(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return $G(r,t,i)}}var or={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var a=n._private.style[e];return a??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(Qe(e)){var o=e;a.applyBypass(this,o,i),this.emitAndNotify("style")}else if(Pe(e))if(t===void 0){var s=this[0];return s?a.getStylePropertyValue(s,e):void 0}else a.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var s=a[o];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var l=a[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!t)return a;var o=i.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;a=l*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function wS(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function VT(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var s=a._private;if(!e(a))return!1;if(a.isNode())return!o||wS(a,n);var u=s.source,l=s.target;return t(u)&&(!o||wS(u,t))&&(u===l||t(l)&&(!o||wS(l,t)))}}}var vs=md("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});or.takesUpSpace=bd("takesUpSpace",VT({ok:vs}));var Hce=md("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&vs(r)}),Gce=md("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&vs(r)});or.interactive=bd("interactive",VT({ok:Hce,parentOk:Gce,edgeOkViaNode:vs}));or.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var Uce=md("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&vs(r)}),Kce=vs;or.visible=bd("visible",VT({ok:Uce,edgeOkViaNode:Kce}));or.hidden=function(){var r=this[0];if(r)return!r.visible()};or.isBundledBezier=bd("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});or.bypass=or.css=or.style;or.renderedCss=or.renderedStyle;or.removeBypass=or.removeCss=or.removeStyle;or.pstyle=or.parsedStyle;var xi={};function _3(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&mt(e[0])){var a=e[0];this.on(r.event,a)}else if(e.length===0||e.length===1&&ot(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var d=r.overrideAble(u);if(d!==void 0&&(l=d,!d))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var h=this.spawn(t);h.updateStyle(),h.emit(r.event),o&&h.emit(o)}return this}}function ps(r){xi[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},xi[r.on]=_3({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),xi[r.off]=_3({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}ps({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ps({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ps({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ps({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});xi.deselect=xi.unselect;xi.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};ps({field:"active",on:"activate",off:"unactivate"});ps({field:"pannable",on:"panify",off:"unpanify"});xi.inactive=function(){var r=this[0];if(r)return!r._private.active};var fr={},T3=function(e){return function(n){for(var i=this,a=[],o=0;o<i.length;o++){var s=i[o];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var d=l[c],h=d.source(),f=d.target();if(e.noIncomingEdges&&f===s&&h!==s||e.noOutgoingEdges&&h===s&&f!==s){u=!0;break}}u||a.push(s)}}return this.spawn(a,!0).filter(n)}},x3=function(e){return function(t){for(var n=this,i=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),d=l.target();e.outgoing&&c===o?(i.push(l),i.push(d)):e.incoming&&d===o&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(t)}},P3=function(e){return function(t){for(var n=this,i=[],a={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],c=l.id();a[c]||(a[c]=!0,i.push(l),s=!0)}if(!s)break;n=o}return this.spawn(i,!0).filter(t)}};fr.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};Re(fr,{roots:T3({noIncomingEdges:!0}),leaves:T3({noOutgoingEdges:!0}),outgoers:Kr(x3({outgoing:!0}),"outgoers"),successors:P3({outgoing:!0}),incomers:Kr(x3({incoming:!0}),"incomers"),predecessors:P3({})});Re(fr,{neighborhood:Kr(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});fr.neighbourhood=fr.neighborhood;fr.closedNeighbourhood=fr.closedNeighborhood;fr.openNeighbourhood=fr.openNeighborhood;Re(fr,{source:Kr(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:Kr(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:C3({attr:"source"}),targets:C3({attr:"target"})});function C3(r){return function(t){for(var n=[],i=0;i<this.length;i++){var a=this[i],o=a._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}Re(fr,{edgesWith:Kr(I3(),"edgesWith"),edgesTo:Kr(I3({thisIsSrc:!0}),"edgesTo")});function I3(r){return function(t){var n=[],i=this._private.cy,a=r||{};Pe(t)&&(t=i.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,d=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),h=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),f=d||h;f&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!d||a.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}Re(fr,{connectedEdges:Kr(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:Kr(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:Kr(O3(),"parallelEdges"),codirectedEdges:Kr(O3({codirected:!0}),"codirectedEdges")});function O3(r){var e={codirected:!1};return r=Re({},e,r),function(n){for(var i=[],a=this.edges(),o=r,s=0;s<a.length;s++)for(var u=a[s],l=u._private,c=l.source,d=c._private.data.id,h=l.data.target,f=c._private.edges,v=0;v<f.length;v++){var p=f[v],y=p._private.data,g=y.target,m=y.source,b=g===h&&m===d,w=d===g&&h===m;(o.codirected&&b||!o.codirected&&(b||w))&&i.push(p)}return this.spawn(i,!0).filter(n)}}Re(fr,{components:function(e){var t=this,n=t.cy(),i=n.collection(),a=e==null?t.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var s=function(c,d){i.merge(c),a.unmerge(c),d.merge(c)};if(a.empty())return t.spawn();var u=function(){var c=n.collection();o.push(c);var d=a[0];s(d,c),t.bfs({directed:!1,roots:d,visit:function(f){return s(f,c)}}),c.forEach(function(h){h.connectedEdges().forEach(function(f){t.has(f)&&c.has(f.source())&&c.has(f.target())&&c.merge(f)})})};do u();while(a.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});fr.componentsOf=fr.components;var sr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){gt("A collection must have a reference to the core");return}var a=new zn,o=!1;if(!t)t=[];else if(t.length>0&&Qe(t[0])&&!Ju(t[0])){o=!0;for(var s=[],u=new hs,l=0,c=t.length;l<c;l++){var d=t[l];d.data==null&&(d.data={});var h=d.data;if(h.id==null)h.id=H4();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var f=new ld(e,d,!1);s.push(f),u.add(h.id)}t=s}this.length=0;for(var v=0,p=t.length;v<p;v++){var y=t[v][0];if(y!=null){var g=y._private.data.id;(!n||!a.has(g))&&(n&&a.set(g,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var b=this.lazyMap=new zn,w=this.eles,S=0;S<w.length;S++){var T=w[S];b.set(T.id(),{index:S,ele:T})}}},n&&(this._private.map=a),o&&!i&&this.restore()},ft=ld.prototype=sr.prototype=Object.create(Array.prototype);ft.instanceString=function(){return"collection"};ft.spawn=function(r,e){return new sr(this.cy(),r,e)};ft.spawnSelf=function(){return this.spawn(this)};ft.cy=function(){return this._private.cy};ft.renderer=function(){return this._private.cy.renderer()};ft.element=function(){return this[0]};ft.collection=function(){return D4(this)?this:new sr(this._private.cy,[this])};ft.unique=function(){return new sr(this._private.cy,this,!0)};ft.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};ft.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new sr(e)};ft.$id=ft.getElementById;ft.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};ft.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};ft.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};ft.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(Qe(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var a=!1,o={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(o.source=""+s,a=!0),u!=null&&u!=i.target&&(o.target=""+u,a=!0),a&&(e=e.move(o))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var d=function(p,y,g){var m=r[p];m!=null&&m!==n[p]&&(m?e[y]():e[g]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var h={data:Tn(n.data),position:Tn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var f=0;return n.classes.forEach(function(v){return h.classes+=f++===0?v:" "+v}),h}}};ft.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};ft.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),a=new ld(r,i,!1);e.push(a)}return new sr(r,e)};ft.copy=ft.clone;ft.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,a=[],o=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?a.push(c):o.push(c))}s=a.concat(o);var d,h=function(){s.splice(d,1),d--};for(d=0;d<s.length;d++){var f=s[d],v=f._private,p=v.data;if(f.clearTraversalCache(),!(!e&&!v.removed)){if(p.id===void 0)p.id=H4();else if(ce(p.id))p.id=""+p.id;else if(Oi(p.id)||!Pe(p.id)){gt("Can not create element with invalid string ID `"+p.id+"`"),h();continue}else if(n.hasElementWithId(p.id)){gt("Can not create second element with ID `"+p.id+"`"),h();continue}}var y=p.id;if(f.isNode()){var g=v.position;g.x==null&&(g.x=0),g.y==null&&(g.y=0)}if(f.isEdge()){for(var m=f,b=["source","target"],w=b.length,S=!1,T=0;T<w;T++){var _=b[T],E=p[_];ce(E)&&(E=p[_]=""+p[_]),E==null||E===""?(gt("Can not create edge `"+y+"` with unspecified "+_),S=!0):n.hasElementWithId(E)||(gt("Can not create edge `"+y+"` with nonexistant "+_+" `"+E+"`"),S=!0)}if(S){h();continue}var x=n.getElementById(p.source),P=n.getElementById(p.target);x.same(P)?x._private.edges.push(m):(x._private.edges.push(m),P._private.edges.push(m)),m._private.source=x,m._private.target=P}v.map=new zn,v.map.set(y,{ele:f,index:0}),v.removed=!1,e&&n.addToPool(f)}for(var C=0;C<a.length;C++){var I=a[C],O=I._private.data;ce(O.parent)&&(O.parent=""+O.parent);var $=O.parent,D=$!=null;if(D||I._private.parent){var q=I._private.parent?n.collection().merge(I._private.parent):n.getElementById($);if(q.empty())O.parent=void 0;else if(q[0].removed())et("Node added with missing parent, reference to parent removed"),O.parent=void 0,I._private.parent=null;else{for(var A=!1,k=q;!k.empty();){if(I.same(k)){A=!0,O.parent=void 0;break}k=k.parent()}A||(q[0]._private.children.push(I),I._private.parent=q[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var F=s.length===t.length?t:new sr(n,s),j=0;j<F.length;j++){var M=F[j];M.isNode()||(M.parallelEdges().clearTraversalCache(),M.source().clearTraversalCache(),M.target().clearTraversalCache())}var L;i.hasCompoundNodes?L=n.collection().merge(F).merge(F.connectedNodes()).merge(F.parent()):L=F,L.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?F.emitAndNotify("add"):e&&F.emit("add")}return t};ft.removed=function(){var r=this[0];return r&&r._private.removed};ft.inside=function(){var r=this[0];return r&&!r._private.removed};ft.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},a=t._private.cy;function o($){for(var D=$._private.edges,q=0;q<D.length;q++)u(D[q])}function s($){for(var D=$._private.children,q=0;q<D.length;q++)u(D[q])}function u($){var D=i[$.id()];e&&$.removed()||D||(i[$.id()]=!0,$.isNode()?(n.push($),o($),s($)):n.unshift($))}for(var l=0,c=t.length;l<c;l++){var d=t[l];u(d)}function h($,D){var q=$._private.edges;Ri(q,D),$.clearTraversalCache()}function f($){$.clearTraversalCache()}var v=[];v.ids={};function p($,D){D=D[0],$=$[0];var q=$._private.children,A=$.id();Ri(q,D),D._private.parent=null,v.ids[A]||(v.ids[A]=!0,v.push($))}t.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var y=0;y<n.length;y++){var g=n[y];if(g.isEdge()){var m=g.source()[0],b=g.target()[0];h(m,g),h(b,g);for(var w=g.parallelEdges(),S=0;S<w.length;S++){var T=w[S];f(T),T.isBundledBezier()&&T.dirtyBoundingBoxCache()}}else{var _=g.parent();_.length!==0&&p(_,g)}e&&(g._private.removed=!0)}var E=a._private.elements;a._private.hasCompoundNodes=!1;for(var x=0;x<E.length;x++){var P=E[x];if(P.isParent()){a._private.hasCompoundNodes=!0;break}}var C=new sr(this.cy(),n);C.size()>0&&(r?C.emitAndNotify("remove"):e&&C.emit("remove"));for(var I=0;I<v.length;I++){var O=v[I];(!e||!O.removed())&&O.updateStyle()}return C};ft.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,a=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var o=a(r.source),s=a(r.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var f=0;f<t.length;f++){var v=t[f],p=v._private.data;v.isEdge()&&(u&&(p.source=o),l&&(p.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=a(r.parent),d=c===null||e.hasElementWithId(c);if(d){var h=c===null?void 0:c;e.batch(function(){var f=t.remove(n,i);f.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var p=t[v],y=p._private.data;p.isNode()&&(y.parent=h)}f.restore(n,i)}),t.emitAndNotify("move")}}return this};[nG,ace,zl,Ti,Fo,Ece,gd,Bce,IG,OG,jce,bc,jl,or,xi,fr].forEach(function(r){Re(ft,r)});var Yce={add:function(e){var t,n=this;if(Nr(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}t=new sr(n,a)}}else if(ot(e)){var u=e;t=new sr(n,u)}else if(Qe(e)&&(ot(e.nodes)||ot(e.edges))){for(var l=e,c=[],d=["nodes","edges"],h=0,f=d.length;h<f;h++){var v=d[h],p=l[v];if(ot(p))for(var y=0,g=p.length;y<g;y++){var m=Re({group:v},p[y]);c.push(m)}}t=new sr(n,c)}else{var b=e;t=new ld(n,b).collection()}return t},remove:function(e){if(!Nr(e)){if(Pe(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Xce(r,e,t,n){var i=4,a=.001,o=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var h=c?new Float32Array(u):new Array(u);function f(P,C){return 1-3*C+3*P}function v(P,C){return 3*C-6*P}function p(P){return 3*P}function y(P,C,I){return((f(C,I)*P+v(C,I))*P+p(C))*P}function g(P,C,I){return 3*f(C,I)*P*P+2*v(C,I)*P+p(C)}function m(P,C){for(var I=0;I<i;++I){var O=g(C,r,t);if(O===0)return C;var $=y(C,r,t)-P;C-=$/O}return C}function b(){for(var P=0;P<u;++P)h[P]=y(P*l,r,t)}function w(P,C,I){var O,$,D=0;do $=C+(I-C)/2,O=y($,r,t)-P,O>0?I=$:C=$;while(Math.abs(O)>o&&++D<s);return $}function S(P){for(var C=0,I=1,O=u-1;I!==O&&h[I]<=P;++I)C+=l;--I;var $=(P-h[I])/(h[I+1]-h[I]),D=C+$*l,q=g(D,r,t);return q>=a?m(P,D):q===0?D:w(P,C,C+l)}var T=!1;function _(){T=!0,(r!==e||t!==n)&&b()}var E=function(C){return T||_(),r===e&&t===n?C:C===0?0:C===1?1:y(S(C),e,n)};E.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var x="generateBezier("+[r,e,t,n]+")";return E.toString=function(){return x},E}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Zce=(function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var o={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,i){var a={dx:n.v,dv:r(n)},o=e(n,i*.5,a),s=e(n,i*.5,o),u=e(n,i,s),l=1/6*(a.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(a.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,a,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,d=16/1e3,h,f,v;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,s.tension=i,s.friction=a,h=o!==null,h?(l=n(i,a),f=l/o*d):f=d;v=t(v||s,f),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return h?function(p){return u[p*(u.length-1)|0]}:l}})(),ut=function(e,t,n,i){var a=Xce(e,t,n,i);return function(o,s,u){return o+(s-o)*a(u)}},Vl={linear:function(e,t,n){return e+(t-e)*n},ease:ut(.25,.1,.25,1),"ease-in":ut(.42,0,1,1),"ease-out":ut(0,0,.58,1),"ease-in-out":ut(.42,0,.58,1),"ease-in-sine":ut(.47,0,.745,.715),"ease-out-sine":ut(.39,.575,.565,1),"ease-in-out-sine":ut(.445,.05,.55,.95),"ease-in-quad":ut(.55,.085,.68,.53),"ease-out-quad":ut(.25,.46,.45,.94),"ease-in-out-quad":ut(.455,.03,.515,.955),"ease-in-cubic":ut(.55,.055,.675,.19),"ease-out-cubic":ut(.215,.61,.355,1),"ease-in-out-cubic":ut(.645,.045,.355,1),"ease-in-quart":ut(.895,.03,.685,.22),"ease-out-quart":ut(.165,.84,.44,1),"ease-in-out-quart":ut(.77,0,.175,1),"ease-in-quint":ut(.755,.05,.855,.06),"ease-out-quint":ut(.23,1,.32,1),"ease-in-out-quint":ut(.86,0,.07,1),"ease-in-expo":ut(.95,.05,.795,.035),"ease-out-expo":ut(.19,1,.22,1),"ease-in-out-expo":ut(1,0,0,1),"ease-in-circ":ut(.6,.04,.98,.335),"ease-out-circ":ut(.075,.82,.165,1),"ease-in-out-circ":ut(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return Vl.linear;var i=Zce(e,t,n);return function(a,o,s){return a+(o-a)*i(s)}},"cubic-bezier":ut};function R3(r,e,t,n,i){if(n===1||e===t)return t;var a=i(e,t,n);return r==null||((r.roundValue||r.color)&&(a=Math.round(a)),r.min!==void 0&&(a=Math.max(a,r.min)),r.max!==void 0&&(a=Math.min(a,r.max))),a}function $3(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function ro(r,e,t,n,i){var a=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var o=$3(r,i),s=$3(e,i);if(ce(o)&&ce(s))return R3(a,o,s,t,n);if(ot(o)&&ot(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],d=s[l];if(c!=null&&d!=null){var h=R3(a,c,d,t,n);u.push(h)}else u.push(d)}return u}}function Qce(r,e,t,n){var i=!n,a=r._private,o=e._private,s=o.easing,u=o.startTime,l=n?r:r.cy(),c=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=Vl.linear;else{var d;if(Pe(s)){var h=c.parse("transition-timing-function",s);d=h.value}else d=s;var f,v;Pe(d)?(f=d,v=[]):(f=d[1],v=d.slice(2).map(function(F){return+F})),v.length>0?(f==="spring"&&v.push(o.duration),o.easingImpl=Vl[f].apply(null,v)):o.easingImpl=Vl[f]}var p=o.easingImpl,y;if(o.duration===0?y=1:y=(t-u)/o.duration,o.applying&&(y=o.progress),y<0?y=0:y>1&&(y=1),o.delay==null){var g=o.startPosition,m=o.position;if(m&&i&&!r.locked()){var b={};Is(g.x,m.x)&&(b.x=ro(g.x,m.x,y,p)),Is(g.y,m.y)&&(b.y=ro(g.y,m.y,y,p)),r.position(b)}var w=o.startPan,S=o.pan,T=a.pan,_=S!=null&&n;_&&(Is(w.x,S.x)&&(T.x=ro(w.x,S.x,y,p)),Is(w.y,S.y)&&(T.y=ro(w.y,S.y,y,p)),r.emit("pan"));var E=o.startZoom,x=o.zoom,P=x!=null&&n;P&&(Is(E,x)&&(a.zoom=cu(a.minZoom,ro(E,x,y,p),a.maxZoom)),r.emit("zoom")),(_||P)&&r.emit("viewport");var C=o.style;if(C&&C.length>0&&i){for(var I=0;I<C.length;I++){var O=C[I],$=O.name,D=O,q=o.startStyle[$],A=c.properties[q.name],k=ro(q,D,y,p,A);c.overrideBypass(r,$,k)}r.emit("style")}}return o.progress=y,y}function Is(r,e){return r==null||e==null?!1:ce(r)&&ce(e)?!0:!!(r&&e)}function Jce(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function D3(r,e){var t=e._private.aniEles,n=[];function i(c,d){var h=c._private,f=h.animation.current,v=h.animation.queue,p=!1;if(f.length===0){var y=v.shift();y&&f.push(y)}for(var g=function(T){for(var _=T.length-1;_>=0;_--){var E=T[_];E()}T.splice(0,T.length)},m=f.length-1;m>=0;m--){var b=f[m],w=b._private;if(w.stopped){f.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||Jce(c,b,r),Qce(c,b,r,d),w.applying&&(w.applying=!1),g(w.frames),w.step!=null&&w.step(r),b.completed()&&(f.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.completes)),p=!0)}return!d&&f.length===0&&v.length===0&&n.push(c),p}for(var a=!1,o=0;o<t.length;o++){var s=t[o],u=i(s);a=a||u}var l=i(e,!0);(a||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var ede={animate:Je.animate(),animation:Je.animation(),animated:Je.animated(),clearQueue:Je.clearQueue(),delay:Je.delay(),delayAnimation:Je.delayAnimation(),stop:Je.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&vc(function(a){D3(a,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,o){D3(o,e)},n.beforeRenderPriorities.animations):t()}},tde={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Ju(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Rl=function(e){return Pe(e)?new Di(e):e},DG={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new yd(tde,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Rl(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Rl(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Rl(t),n),this},once:function(e,t,n){return this.emitter().one(e,Rl(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Je.eventAliasesOn(DG);var i_={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};i_.jpeg=i_.jpg;var Wl={layout:function(e){var t=this;if(e==null){gt("Layout options must be specified to make a layout");return}if(e.name==null){gt("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){gt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;Pe(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var o=new i(Re({},e,{cy:t,eles:a}));return o}};Wl.createLayout=Wl.makeLayout=Wl.layout;var rde={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a],s=t.getElementById(a);s.data(o)}})}},nde=cr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),a_={renderTo:function(e,t,n,i){var a=this._private.renderer;return a.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){gt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&et("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=nde(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};a_.invalidateDimensions=a_.resize;var Hl={collection:function(e,t){return Pe(e)?this.$(e):Nr(e)?e.collection():ot(e)?(t||(t={}),new sr(this,e,t.unique,t.removed)):new sr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Hl.elements=Hl.filter=Hl.$;var rr={},Ws="t",ide="f";rr.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),a=0;a<r.length;a++){var o=r[a],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&i.push(o)}}return i};rr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,a=n[i];if(a)return a;for(var o=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===Ws,d=e[u]===Ws,h=c!==d,f=l.mappedProperties.length>0;if(h||d&&f){var v=void 0;h&&f||h?v=l.properties:f&&(v=l.mappedProperties);for(var p=0;p<v.length;p++){for(var y=v[p],g=y.name,m=!1,b=u+1;b<t.length;b++){var w=t[b],S=e[b]===Ws;if(S&&(m=w.properties[y.name]!=null,m))break}!s[g]&&!m&&(s[g]=!0,o.push(g))}}}return n[i]=o,o};rr.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",a=0;a<e.length;a++){var o=e[a],s=o.selector&&o.selector.matches(r);s?t+=Ws:t+=ide}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};rr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<t.length;a++){var o=t[a],s=e[a]===Ws;if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];i[l.name]=l}}return n[e]=i,i};rr.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,a={},o=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var d=c.mapping,h=d.fnValue=l.value(t);if(h===d.prevFnValue)continue}var f=a[u]={prev:c};n.applyParsedProperty(t,l),f.next=t.pstyle(u),f.next&&f.next.bypass&&(f.next=f.next.bypassed)}}return{diffProps:a}};rr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,a=function(G,X,se){return t.getPropertiesHash(G,X,se)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[ra,uo]}for(var d=function(G,X){return e.styleKeys[X][0]=su(G,e.styleKeys[X][0])},h=function(G,X){return e.styleKeys[X][1]=uu(G,e.styleKeys[X][1])},f=function(G,X){d(G,X),h(G,X)},v=function(G,X){for(var se=0;se<G.length;se++){var be=G.charCodeAt(se);d(be,X),h(be,X)}},p=2e9,y=function(G){return-128<G&&G<128&&Math.floor(G)!==G?p-(G*1024|0):G},g=0;g<n.length;g++){var m=n[g],b=u[m];if(b!=null){var w=this.properties[m],S=w.type,T=w.groupKey,_=void 0;w.hashOverride!=null?_=w.hashOverride(r,b):b.pfValue!=null&&(_=b.pfValue);var E=w.enums==null?b.value:null,x=_!=null,P=E!=null,C=x||P,I=b.units;if(S.number&&C&&!S.multiple){var O=x?_:E;f(y(O),T),!x&&I!=null&&v(I,T)}else v(b.strValue,T)}}for(var $=[ra,uo],D=0;D<i.length;D++){var q=i[D],A=e.styleKeys[q];$[0]=su(A[0],$[0]),$[1]=uu(A[1],$[1])}e.styleKey=mse($[0],$[1]);var k=e.styleKeys;e.labelDimsKey=ui(k.labelDimensions);var F=a(r,["label"],k.labelDimensions);if(e.labelKey=ui(F),e.labelStyleKey=ui(Sl(k.commonLabel,F)),!s){var j=a(r,["source-label"],k.labelDimensions);e.sourceLabelKey=ui(j),e.sourceLabelStyleKey=ui(Sl(k.commonLabel,j));var M=a(r,["target-label"],k.labelDimensions);e.targetLabelKey=ui(M),e.targetLabelStyleKey=ui(Sl(k.commonLabel,M))}if(s){var L=e.styleKeys,U=L.nodeBody,K=L.nodeBorder,Z=L.nodeOutline,Q=L.backgroundImage,te=L.compound,oe=L.pie,re=L.stripe,V=[U,K,Z,Q,te,oe,re].filter(function(W){return W!=null}).reduce(Sl,[ra,uo]);e.nodeKey=ui(V),e.hasPie=oe!=null&&oe[0]!==ra&&oe[1]!==uo,e.hasStripe=re!=null&&re[0]!==ra&&re[1]!==uo}return o!==e.styleKey};rr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};rr.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,a,o=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,d=r._private,h="mapping",f=function(U){return U==null?null:U.pfValue!=null?U.pfValue:U.value},v=function(){var U=f(l),K=f(n);t.checkTriggers(r,n.name,U,K)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var p=function(){et("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var y=n.field.split("."),g=d.data,m=0;m<y.length&&g;m++){var b=y[m];g=g[b]}if(g==null)return p(),!1;var w;if(ce(g)){var S=n.fieldMax-n.fieldMin;S===0?w=0:w=(g-n.fieldMin)/S}else return et("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+g+"` for `"+r.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),s.color){var T=n.valueMin[0],_=n.valueMax[0],E=n.valueMin[1],x=n.valueMax[1],P=n.valueMin[2],C=n.valueMax[2],I=n.valueMin[3]==null?1:n.valueMin[3],O=n.valueMax[3]==null?1:n.valueMax[3],$=[Math.round(T+(_-T)*w),Math.round(E+(x-E)*w),Math.round(P+(C-P)*w),Math.round(I+(O-I)*w)];a={bypass:n.bypass,name:n.name,value:$,strValue:"rgb("+$[0]+", "+$[1]+", "+$[2]+")"}}else if(s.number){var D=n.valueMin+(n.valueMax-n.valueMin)*w;a=this.parse(n.name,D,n.bypass,h)}else return!1;if(!a)return p(),!1;a.mapping=n,n=a;break}case o.data:{for(var q=n.field.split("."),A=d.data,k=0;k<q.length&&A;k++){var F=q[k];A=A[F]}if(A!=null&&(a=this.parse(n.name,A,n.bypass,h)),!a)return p(),!1;a.mapping=n,n=a;break}case o.fn:{var j=n.value,M=n.fnValue!=null?n.fnValue:j(r);if(n.prevFnValue=M,M==null)return et("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(a=this.parse(n.name,M,n.bypass,h),!a)return et("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;a.mapping=Tn(n),n=a;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};rr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};rr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};rr.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,a=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],d=r.pstyle(c),h=e[c];if(h){var f=h.prev,v=f,p=h.next!=null?h.next:d,y=!1,g=void 0,m=1e-6;v&&(ce(v.pfValue)&&ce(p.pfValue)?(y=p.pfValue-v.pfValue,g=v.pfValue+m*y):ce(v.value)&&ce(p.value)?(y=p.value-v.value,g=v.value+m*y):ot(v.value)&&ot(p.value)&&(y=v.value[0]!==p.value[0]||v.value[1]!==p.value[1]||v.value[2]!==p.value[2],g=v.strValue),y&&(s[c]=p.strValue,this.applyBypass(r,c,g),u=!0))}}if(!u)return;n.transitioning=!0,new fs(function(b){o>0?r.delayAnimation(o).play().promise().then(b):b()}).then(function(){return r.animation({style:s,duration:a,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};rr.checkTrigger=function(r,e,t,n,i,a){var o=this.properties[e],s=i(o);r.removed()||s!=null&&s(t,n,r)&&a(o)};rr.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};rr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};rr.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){r.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};rr.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){r.parallelEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};rr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var ol={};ol.applyBypass=function(r,e,t,n){var i=this,a=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,t,!0);c&&a.push(c)}}else if(Pe(e)){var d=this.parse(e,t,!0);d&&a.push(d)}else if(Qe(e)){var h=e;n=t;for(var f=Object.keys(h),v=0;v<f.length;v++){var p=f[v],y=h[p];if(y===void 0&&(y=h[sd(p)]),y!==void 0){var g=this.parse(p,y,!0);g&&a.push(g)}}}else return!1;if(a.length===0)return!1;for(var m=!1,b=0;b<r.length;b++){for(var w=r[b],S={},T=void 0,_=0;_<a.length;_++){var E=a[_];if(n){var x=w.pstyle(E.name);T=S[E.name]={prev:x}}m=this.applyParsedProperty(w,Tn(E))||m,n&&(T.next=w.pstyle(E.name))}m&&this.updateStyleHints(w),n&&this.updateTransitions(w,S,o)}return m};ol.overrideBypass=function(r,e,t){e=OT(e);for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,t):(a.value=t,a.pfValue!=null&&(a.pfValue=t),s?a.strValue="rgb("+t.join(",")+")":u?a.strValue=t.join(" "):a.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};ol.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};ol.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var a=r[i],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=a.pstyle(l.name);if(!(!c||!c.bypass)){var d="",h=this.parse(u,d,!0),f=o[l.name]={prev:c};this.applyParsedProperty(a,h),f.next=a.pstyle(l.name)}}this.updateStyleHints(a),t&&this.updateTransitions(a,o,n)}};var WT={};WT.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};WT.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var In={};In.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};In.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var a=t.properties[i],o=t.getStylePropertyValue(r,a.name,e);o!=null&&(n[a.name]=o,n[sd(a.name)]=o)}return n}};In.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};In.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,o=r.pstyle(i.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(t&&a.number&&s!=null&&ce(s)){var c=r.cy().zoom(),d=function(y){return y*c},h=function(y,g){return d(y)+g},f=ot(s),v=f?u.every(function(p){return p!=null}):u!=null;return v?f?s.map(function(p,y){return h(p,u[y])}).join(" "):h(s,u):f?s.map(function(p){return Pe(p)?p:""+d(p)}).join(" "):""+d(s)}else if(l!=null)return l}return null}};In.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=i.name,o=r.pstyle(a);o!==void 0&&(Qe(o)?o=this.parse(a,o.strValue):o=this.parse(a,o)),o&&(t[a]=o)}return t};In.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s],l=i[s]||i[OT(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};In.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,a,o,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],a=r.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=su(s,n[0]),n[1]=uu(s,n[1]);else for(o=a.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),n[0]=su(s,n[0]),n[1]=uu(s,n[1]);return n};In.getPropertiesHash=In.getNonDefaultPropertiesHash;var wd={};wd.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,a=n.style||n.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var u=o[s],l=a[u];e.css(u,l)}}return e};wd.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};wd.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:a})}return r};var HT={};HT.appendFromString=function(r){var e=this,t=this,n=""+r,i,a,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){a.length>o.length?a=a.substr(o.length):a=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){et("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var d=c[1];if(d!=="core"){var h=new Di(d);if(h.invalid){et("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),s();continue}}var f=c[2],v=!1;a=f;for(var p=[];;){var y=a.match(/^\s*$/);if(y)break;var g=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!g){et("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+f),v=!0;break}o=g[0];var m=g[1],b=g[2],w=e.properties[m];if(!w){et("Skipping property: Invalid property name in: "+o),u();continue}var S=t.parse(m,b);if(!S){et("Skipping property: Invalid property definition in: "+o),u();continue}p.push({name:m,val:b}),u()}if(v){s();break}t.selector(d);for(var T=0;T<p.length;T++){var _=p[T];t.css(_.name,_.val)}s()}return t};HT.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Rt={};(function(){var r=jt,e=Xoe,t=Qoe,n=Joe,i=ese,a=function(W){return"^"+W+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(W){var G=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+W+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+G+")\\s*\\,\\s*("+G+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Rt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(W,G){switch(W.length){case 2:return G[0]!=="deg"&&G[0]!=="rad"&&G[1]!=="deg"&&G[1]!=="rad";case 1:return Pe(W[0])||G[0]==="deg"||G[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(W){var G=W.length;return G===1||G===2||G===4}}};var u={zeroNonZero:function(W,G){return(W==null||G==null)&&W!==G||W==0&&G!=0?!0:W!=0&&G==0},any:function(W,G){return W!=G},emptyNonEmpty:function(W,G){var X=Oi(W),se=Oi(G);return X&&!se||!X&&se}},l=Rt.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],d=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],f=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],p=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],y=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(W,G,X){return W===G?!1:X.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],g=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],m=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(W,G){return G.value==="label"?-W.poolIndex():G.pfValue},S=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],T=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],_=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],E=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],x=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],P=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(W,G){return W===G?!1:W==="bezier"||G==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],C=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],I=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],O=[];Rt.pieBackgroundN=16,O.push({name:"pie-size",type:l.sizeMaybePercent}),O.push({name:"pie-hole",type:l.sizeMaybePercent}),O.push({name:"pie-start-angle",type:l.angle});for(var $=1;$<=Rt.pieBackgroundN;$++)O.push({name:"pie-"+$+"-background-color",type:l.color}),O.push({name:"pie-"+$+"-background-size",type:l.percent}),O.push({name:"pie-"+$+"-background-opacity",type:l.zeroOneNumber});var D=[];Rt.stripeBackgroundN=16,D.push({name:"stripe-size",type:l.sizeMaybePercent}),D.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var q=1;q<=Rt.stripeBackgroundN;q++)D.push({name:"stripe-"+q+"-background-color",type:l.color}),D.push({name:"stripe-"+q+"-background-size",type:l.percent}),D.push({name:"stripe-"+q+"-background-opacity",type:l.zeroOneNumber});var A=[],k=Rt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(V){k.forEach(function(W){var G=W+"-"+V.name,X=V.type,se=V.triggersBounds;A.push({name:G,type:X,triggersBounds:se})})},{});var F=Rt.properties=[].concat(p,b,y,g,m,C,v,f,c,d,h,S,T,_,E,O,D,x,P,A,I),j=Rt.propertyGroups={behavior:p,transition:b,visibility:y,overlay:g,underlay:m,ghost:C,commonLabel:v,labelDimensions:f,mainLabel:c,sourceLabel:d,targetLabel:h,nodeBody:S,nodeBorder:T,nodeOutline:_,backgroundImage:E,pie:O,stripe:D,compound:x,edgeLine:P,edgeArrow:A,core:I},M=Rt.propertyGroupNames={},L=Rt.propertyGroupKeys=Object.keys(j);L.forEach(function(V){M[V]=j[V].map(function(W){return W.name}),j[V].forEach(function(W){return W.groupKey=V})});var U=Rt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Rt.propertyNames=F.map(function(V){return V.name});for(var K=0;K<F.length;K++){var Z=F[K];F[Z.name]=Z}for(var Q=0;Q<U.length;Q++){var te=U[Q],oe=F[te.pointsTo],re={name:te.name,alias:!0,pointsTo:oe};F.push(re),F[te.name]=re}})();Rt.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Rt.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=Re({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Rt.pieBackgroundN;c++){var d=l.name.replace("{{i}}",c),h=l.value;u[d]=h}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Rt.stripeBackgroundN;c++){var d=l.name.replace("{{i}}",c),h=l.value;u[d]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Rt.arrowPrefixes.forEach(function(c){var d=c+"-"+l.name,h=l.value;u[d]=h}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);t[a]=s}}return r.defaultProperties=t,r.defaultProperties};Rt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Ed={};Ed.parse=function(r,e,t,n){var i=this;if(mt(e))return i.parseImplWarn(r,e,t,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,u=V4(r,s,o,a),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=Tn(c),c&&(c.value=Tn(c.value))),c};Ed.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&et("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&et("The style value of `label` is deprecated for `"+i.name+"`"),i};Ed.parseImpl=function(r,e,t,n){var i=this;r=OT(r);var a=i.properties[r],o=e,s=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,r=a.name);var u=Pe(e);u&&(e=e.trim());var l=a.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(mt(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,d;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var h=s.data;return{name:r,value:c,strValue:""+e,mapped:h,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(d=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var f=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,d[4]);if(!v||v.mapped)return!1;var p=this.parse(r,d[5]);if(!p||p.mapped)return!1;if(v.pfValue===p.pfValue||v.strValue===p.strValue)return et("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var y=v.value,g=p.value,m=y[0]===g[0]&&y[1]===g[1]&&y[2]===g[2]&&(y[3]===g[3]||(y[3]==null||y[3]===1)&&(g[3]==null||g[3]===1));if(m)return!1}return{name:r,value:d,strValue:""+e,mapped:f,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:v.value,valueMax:p.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var b;if(u?b=e.split(/\s+/):ot(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],S=[],T=[],_="",E=!1,x=0;x<b.length;x++){var P=i.parse(r,b[x],t,"multiple");E=E||Pe(P.value),w.push(P.value),T.push(P.pfValue!=null?P.pfValue:P.value),S.push(P.units),_+=(x>0?" ":"")+P.strValue}return l.validate&&!l.validate(w,S)?null:l.singleEnum&&E?w.length===1&&Pe(w[0])?{name:r,value:w[0],strValue:w[0],bypass:t}:null:{name:r,value:w,pfValue:T,strValue:_,bypass:t,units:S}}var C=function(){for(var re=0;re<l.enums.length;re++){var V=l.enums[re];if(V===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var I,O="px";if(l.units&&(I=l.units),l.implicitUnits&&(O=l.implicitUnits),!l.unitless)if(u){var $="px|em"+(l.allowPercent?"|\\%":"");I&&($=I);var D=e.match("^("+jt+")("+$+")?$");D&&(e=D[1],I=D[2]||O)}else(!I||l.implicitUnits)&&(I=O);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,C();if(l.integer&&!Voe(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var q={name:r,value:e,strValue:""+e+(I||""),units:I,bypass:t};return l.unitless||I!=="px"&&I!=="em"?q.pfValue=e:q.pfValue=I==="px"||!I?e:this.getEmSizeInPixels()*e,(I==="ms"||I==="s")&&(q.pfValue=I==="ms"?e:1e3*e),(I==="deg"||I==="rad")&&(q.pfValue=I==="rad"?e:tue(e)),I==="%"&&(q.pfValue=e/100),q}else if(l.propList){var A=[],k=""+e;if(k!=="none"){for(var F=k.split(/\s*,\s*|\s+/),j=0;j<F.length;j++){var M=F[j].trim();i.properties[M]?A.push(M):et("`"+M+"` is not a valid property name")}if(A.length===0)return null}return{name:r,value:A,strValue:A.length===0?"none":A.join(" "),bypass:t}}else if(l.color){var L=M4(e);return L?{name:r,value:L,pfValue:L,strValue:"rgb("+L[0]+","+L[1]+","+L[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var U=C();if(U)return U}for(var K=l.regexes?l.regexes:[l.regex],Z=0;Z<K.length;Z++){var Q=new RegExp(K[Z]),te=Q.exec(e);if(te)return{name:r,value:l.singleRegexMatchValue?te[1]:te,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?C():null};var Yt=function(e){if(!(this instanceof Yt))return new Yt(e);if(!IT(e)){gt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},vr=Yt.prototype;vr.instanceString=function(){return"style"};vr.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};vr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};vr.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};vr.selector=function(r){var e=r==="core"?null:new Di(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};vr.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],a=t[i.name];a===void 0&&(a=t[sd(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};vr.style=vr.css;vr.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};vr.append=function(r){return A4(r)?r.appendToStyle(this):ot(r)?this.appendFromJson(r):Pe(r)&&this.appendFromString(r),this};Yt.fromJson=function(r,e){var t=new Yt(r);return t.fromJson(e),t};Yt.fromString=function(r,e){return new Yt(r).fromString(e)};[rr,ol,WT,In,wd,HT,Rt,Ed].forEach(function(r){Re(vr,r)});Yt.types=vr.types;Yt.properties=vr.properties;Yt.propertyGroups=vr.propertyGroups;Yt.propertyGroupNames=vr.propertyGroupNames;Yt.propertyGroupKeys=vr.propertyGroupKeys;var ade={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return A4(e)?t.style=e.generateStyle(this):ot(e)?t.style=Yt.fromJson(this,e):Pe(e)?t.style=Yt.fromString(this,e):t.style=Yt(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},ode="single",Ca={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=ode),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,a,o,s;switch(e.length){case 0:return t;case 1:if(Pe(e[0]))return n=e[0],t[n];if(Qe(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,s=a.y,ce(o)&&(t.x=o),ce(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&ce(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,a,o,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Qe(e)&&(s=n[0],u=s.x,l=s.y,ce(u)&&(i.x+=u),ce(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:a=e,o=t,(a==="x"||a==="y")&&ce(o)&&(i[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(ce(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Pe(e)){var i=e;e=this.$(i)}else if(Goe(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Nr(e)||(e=this.mutableElements());if(!(Nr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(t=ce(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return ce(e)&&ce(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):ce(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:ce(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a,o,s=!1;if(t.zoomingEnabled||(s=!0),ce(e)?o=e:Qe(e)&&(o=e.level,e.position!=null?a=cd(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!ce(o)||o===i||a!=null&&(!ce(a.x)||!ce(a.y)))return null;if(a!=null){var u=n,l=i,c=o,d={x:-c/l*(a.x-u.x)+a.x,y:-c/l*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:c,pan:d}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(ce(e.zoom)||(n=!1),Qe(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=u,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;ce(l.x)&&(t.pan.x=l.x,s=!1),ce(l.y)&&(t.pan.y=l.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Pe(e)){var n=e;e=this.mutableElements().filter(n)}else Nr(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(a-t*(i.x1+i.x2))/2,y:(o-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?(function(){var i=n.window().getComputedStyle(t),a=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Ca.centre=Ca.center;Ca.autolockNodes=Ca.autolock;Ca.autoungrabifyNodes=Ca.autoungrabify;var vu={data:Je.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Je.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Je.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Je.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};vu.attr=vu.data;vu.removeAttr=vu.removeData;var wc=function(e){var t=this;e=Re({},e);var n=e.container;n&&!fc(n)&&fc(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var o=zt!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=Re({name:o?"grid":"null"},s.layout),s.renderer=Re({name:o?"canvas":"null"},s.renderer);var u=function(v,p,y){return p!==void 0?p:y!==void 0?y:v},l=this._private={container:n,ready:!1,options:s,elements:new sr(this),listeners:[],aniEles:new sr(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:ce(s.zoom)?s.zoom:1,pan:{x:Qe(s.pan)&&ce(s.pan.x)?s.pan.x:0,y:Qe(s.pan)&&ce(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,p){var y=v.some(Uoe);if(y)return fs.all(v).then(p);p(v)};l.styleEnabled&&t.setStyle([]);var d=Re({},s,s.renderer);t.initRenderer(d);var h=function(v,p,y){t.notifications(!1);var g=t.mutableElements();g.length>0&&g.remove(),v!=null&&(Qe(v)||ot(v))&&t.add(v),t.one("layoutready",function(b){t.notifications(!0),t.emit(b),t.one("load",p),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",y),t.emit("done")});var m=Re({},t._private.options.layout);m.eles=t.elements(),t.layout(m).run()};c([s.style,s.elements],function(f){var v=f[0],p=f[1];l.styleEnabled&&t.style().append(v),h(p,function(){t.startAnimationLoop(),l.ready=!0,mt(s.ready)&&t.on("ready",s.ready);for(var y=0;y<a.length;y++){var g=a[y];t.on("ready",g)}i&&(i.readies=[]),t.emit("ready")},s.done)})},Ec=wc.prototype;Re(Ec,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return zt;var t=this._private.container.ownerDocument;return t===void 0||t==null?zt:t.defaultView||zt},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!fc(e)&&fc(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(Re({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Tn(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),a=function(w){return t.getElementById(w.id())};if(Qe(e)){if(t.startBatch(),e.elements){var o={},s=function(w,S){for(var T=[],_=[],E=0;E<w.length;E++){var x=w[E];if(!x.data.id){et("cy.json() cannot handle elements without an ID attribute");continue}var P=""+x.data.id,C=t.getElementById(P);o[P]=!0,C.length!==0?_.push({ele:C,json:x}):(S&&(x.group=S),T.push(x))}t.add(T);for(var I=0;I<_.length;I++){var O=_[I],$=O.ele,D=O.json;$.json(D)}};if(ot(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],d=e.elements[c];ot(d)&&s(d,c)}var h=t.collection();i.filter(function(b){return!o[b.id()]}).forEach(function(b){b.isParent()?h.merge(b):b.remove()}),h.forEach(function(b){return b.children().move({parent:null})}),h.forEach(function(b){return a(b).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<f.length;v++){var p=f[v];e[p]!=null&&t[p](e[p])}return t.endBatch(),this}else{var y=!!e,g={};y?g.elements=this.elements().map(function(b){return b.json()}):(g.elements={},i.forEach(function(b){var w=b.group();g.elements[w]||(g.elements[w]=[]),g.elements[w].push(b.json())})),this._private.styleEnabled&&(g.style=t.style().json()),g.data=Tn(t.data());var m=n.options;return g.zoomingEnabled=n.zoomingEnabled,g.userZoomingEnabled=n.userZoomingEnabled,g.zoom=n.zoom,g.minZoom=n.minZoom,g.maxZoom=n.maxZoom,g.panningEnabled=n.panningEnabled,g.userPanningEnabled=n.userPanningEnabled,g.pan=Tn(n.pan),g.boxSelectionEnabled=n.boxSelectionEnabled,g.renderer=Tn(m.renderer),g.hideEdgesOnViewport=m.hideEdgesOnViewport,g.textureOnViewport=m.textureOnViewport,g.wheelSensitivity=m.wheelSensitivity,g.motionBlur=m.motionBlur,g.multiClickDebounceTime=m.multiClickDebounceTime,g}}});Ec.$id=Ec.getElementById;[Yce,ede,DG,i_,Wl,rde,a_,Hl,ade,Ca,vu].forEach(function(r){Re(Ec,r)});var sde={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},ude={maximal:!1,acyclic:!1},no=function(e){return e.scratch("breadthfirst")},A3=function(e,t){return e.scratch("breadthfirst",t)};function AG(r){this.options=Re({},sde,ude,r)}AG.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(Te){return Te.isChildless()}),i=t,a=r.directed,o=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,u=Tr(s?r.boundingBox:structuredClone(e.extent())),l;if(Nr(r.roots))l=r.roots;else if(ot(r.roots)){for(var c=[],d=0;d<r.roots.length;d++){var h=r.roots[d],f=e.getElementById(h);c.push(f)}l=e.collection(c)}else if(Pe(r.roots))l=e.$(r.roots);else if(a)l=n.roots();else{var v=t.components();l=e.collection();for(var p=function(){var le=v[y],ye=le.maxDegree(!1),pe=le.filter(function(Ce){return Ce.degree(!1)===ye});l=l.add(pe)},y=0;y<v.length;y++)p()}var g=[],m={},b=function(le,ye){g[ye]==null&&(g[ye]=[]);var pe=g[ye].length;g[ye].push(le),A3(le,{index:pe,depth:ye})},w=function(le,ye){var pe=no(le),Ce=pe.depth,ve=pe.index;g[Ce][ve]=null,le.isChildless()&&b(le,ye)};i.bfs({roots:l,directed:r.directed,visit:function(le,ye,pe,Ce,ve){var De=le[0],Ne=De.id();De.isChildless()&&b(De,ve),m[Ne]=!0}});for(var S=[],T=0;T<n.length;T++){var _=n[T];m[_.id()]||S.push(_)}var E=function(le){for(var ye=g[le],pe=0;pe<ye.length;pe++){var Ce=ye[pe];if(Ce==null){ye.splice(pe,1),pe--;continue}A3(Ce,{depth:le,index:pe})}},x=function(le,ye){for(var pe=no(le),Ce=le.incomers().filter(function(Ie){return Ie.isNode()&&t.has(Ie)}),ve=-1,De=le.id(),Ne=0;Ne<Ce.length;Ne++){var Le=Ce[Ne],He=no(Le);ve=Math.max(ve,He.depth)}if(pe.depth<=ve){if(!r.acyclic&&ye[De])return null;var Ge=ve+1;return w(le,Ge),ye[De]=Ge,!0}return!1};if(a&&o){var P=[],C={},I=function(le){return P.push(le)},O=function(){return P.shift()};for(n.forEach(function(Te){return P.push(Te)});P.length>0;){var $=O(),D=x($,C);if(D)$.outgoers().filter(function(Te){return Te.isNode()&&t.has(Te)}).forEach(I);else if(D===null){et("Detected double maximal shift for node `"+$.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var q=0;if(r.avoidOverlap)for(var A=0;A<n.length;A++){var k=n[A],F=k.layoutDimensions(r),j=F.w,M=F.h;q=Math.max(q,j,M)}var L={},U=function(le){if(L[le.id()])return L[le.id()];for(var ye=no(le).depth,pe=le.neighborhood(),Ce=0,ve=0,De=0;De<pe.length;De++){var Ne=pe[De];if(!(Ne.isEdge()||Ne.isParent()||!n.has(Ne))){var Le=no(Ne);if(Le!=null){var He=Le.index,Ge=Le.depth;if(!(He==null||Ge==null)){var Ie=g[Ge].length;Ge<ye&&(Ce+=He/Ie,ve++)}}}}return ve=Math.max(1,ve),Ce=Ce/ve,ve===0&&(Ce=0),L[le.id()]=Ce,Ce},K=function(le,ye){var pe=U(le),Ce=U(ye),ve=pe-Ce;return ve===0?k4(le.id(),ye.id()):ve};r.depthSort!==void 0&&(K=r.depthSort);for(var Z=g.length,Q=0;Q<Z;Q++)g[Q].sort(K),E(Q);for(var te=[],oe=0;oe<S.length;oe++)te.push(S[oe]);var re=function(){for(var le=0;le<Z;le++)E(le)};te.length&&(g.unshift(te),Z=g.length,re());for(var V=0,W=0;W<Z;W++)V=Math.max(g[W].length,V);var G={x:u.x1+u.w/2,y:u.y1+u.h/2},X=n.reduce(function(Te,le){return(function(ye){return{w:Te.w===-1?ye.w:(Te.w+ye.w)/2,h:Te.h===-1?ye.h:(Te.h+ye.h)/2}})(le.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),se=Math.max(Z===1?0:s?(u.h-r.padding*2-X.h)/(Z-1):(u.h-r.padding*2-X.h)/(Z+1),q),be=g.reduce(function(Te,le){return Math.max(Te,le.length)},0),ke=function(le){var ye=no(le),pe=ye.depth,Ce=ye.index;if(r.circle){var ve=Math.min(u.w/2/Z,u.h/2/Z);ve=Math.max(ve,q);var De=ve*pe+ve-(Z>0&&g[0].length<=3?ve/2:0),Ne=2*Math.PI/g[pe].length*Ce;return pe===0&&g[0].length===1&&(De=1),{x:G.x+De*Math.cos(Ne),y:G.y+De*Math.sin(Ne)}}else{var Le=g[pe].length,He=Math.max(Le===1?0:s?(u.w-r.padding*2-X.w)/((r.grid?be:Le)-1):(u.w-r.padding*2-X.w)/((r.grid?be:Le)+1),q),Ge={x:G.x+(Ce+1-(Le+1)/2)*He,y:G.y+(pe+1-(Z+1)/2)*se};return Ge}},fe={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(fe).indexOf(r.direction)===-1&&gt("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(fe).join(", ")));var ge=function(le){return Sse(ke(le),u,fe[r.direction])};return t.nodes().layoutPositions(this,r,ge),this};var lde={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function qG(r){this.options=Re({},lde,r)}qG.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o=Tr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,l=u/Math.max(1,a.length-1),c,d=0,h=0;h<a.length;h++){var f=a[h],v=f.layoutDimensions(e),p=v.w,y=v.h;d=Math.max(d,p,y)}if(ce(e.radius)?c=e.radius:a.length<=1?c=0:c=Math.min(o.h,o.w)/2-d,a.length>1&&e.avoidOverlap){d*=1.75;var g=Math.cos(l)-Math.cos(0),m=Math.sin(l)-Math.sin(0),b=Math.sqrt(d*d/(g*g+m*m));c=Math.max(b,c)}var w=function(T,_){var E=e.startAngle+_*l*(i?1:-1),x=c*Math.cos(E),P=c*Math.sin(E),C={x:s.x+x,y:s.y+P};return C};return n.nodes().layoutPositions(this,e,w),this};var cde={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function kG(r){this.options=Re({},cde,r)}kG.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,a=i.nodes().not(":parent"),o=Tr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,c=0;c<a.length;c++){var d=a[c],h=void 0;h=e.concentric(d),u.push({value:h,node:d}),d._private.scratch.concentric=h}a.updateStyle();for(var f=0;f<a.length;f++){var v=a[f],p=v.layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort(function(se,be){return be.value-se.value});for(var y=e.levelWidth(a),g=[[]],m=g[0],b=0;b<u.length;b++){var w=u[b];if(m.length>0){var S=Math.abs(m[0].value-w.value);S>=y&&(m=[],g.push(m))}m.push(w)}var T=l+e.minNodeSpacing;if(!e.avoidOverlap){var _=g.length>0&&g[0].length>1,E=Math.min(o.w,o.h)/2-T,x=E/(g.length+_?1:0);T=Math.min(T,x)}for(var P=0,C=0;C<g.length;C++){var I=g[C],O=e.sweep===void 0?2*Math.PI-2*Math.PI/I.length:e.sweep,$=I.dTheta=O/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var D=Math.cos($)-Math.cos(0),q=Math.sin($)-Math.sin(0),A=Math.sqrt(T*T/(D*D+q*q));P=Math.max(A,P)}I.r=P,P+=T}if(e.equidistant){for(var k=0,F=0,j=0;j<g.length;j++){var M=g[j],L=M.r-F;k=Math.max(k,L)}F=0;for(var U=0;U<g.length;U++){var K=g[U];U===0&&(F=K.r),K.r=F,F+=k}}for(var Z={},Q=0;Q<g.length;Q++)for(var te=g[Q],oe=te.dTheta,re=te.r,V=0;V<te.length;V++){var W=te[V],G=e.startAngle+(t?1:-1)*oe*V,X={x:s.x+re*Math.cos(G),y:s.y+re*Math.sin(G)};Z[W.node.id()]=X}return i.nodes().layoutPositions(this,e,function(se){var be=se.id();return Z[be]}),this};var ES,dde={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Sd(r){this.options=Re({},dde,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var a=i.source().data("id"),o=i.target().data("id"),s=e.some(function(l){return l.data("id")===a}),u=e.some(function(l){return l.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(n)}Sd.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?ES=!0:ES=!1;var n=hde(e,t,r);ES&&vde(n),r.randomize&&pde(n);var i=Zn(),a=function(){gde(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(h){return!(t.stopped||h>=r.numIter||(yde(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)a(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var h=r.eles.nodes(),f=BG(n,r,h);h.layoutPositions(t,r,f)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var h=0;l&&h<r.refresh;)l=o(u),u++,h++;if(!l)k3(n,r),s();else{var f=Zn();f-i>=r.animationThreshold&&a(),vc(c)}};c()}else{for(;l;)l=o(u),u++;k3(n,r),s()}return this};Sd.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Sd.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var hde=function(e,t,n){for(var i=n.eles.edges(),a=n.eles.nodes(),o=Tr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var d=u[c],h=0;h<d.length;h++){var f=d[h];l[f.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=a[c],p=v.layoutDimensions(n),y={};y.isLocked=v.locked(),y.id=v.data("id"),y.parentId=v.data("parent"),y.cmptId=l[v.id()],y.children=[],y.positionX=v.position("x"),y.positionY=v.position("y"),y.offsetX=0,y.offsetY=0,y.height=p.w,y.width=p.h,y.maxX=y.positionX+y.width/2,y.minX=y.positionX-y.width/2,y.maxY=y.positionY+y.height/2,y.minY=y.positionY-y.height/2,y.padLeft=parseFloat(v.style("padding")),y.padRight=parseFloat(v.style("padding")),y.padTop=parseFloat(v.style("padding")),y.padBottom=parseFloat(v.style("padding")),y.nodeRepulsion=mt(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(y),s.idToIndex[y.id]=c}for(var g=[],m=0,b=-1,w=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],S=v.parentId;S!=null?s.layoutNodes[s.idToIndex[S]].children.push(v.id):(g[++b]=v.id,w.push(v.id))}for(s.graphSet.push(w);m<=b;){var T=g[m++],_=s.idToIndex[T],f=s.layoutNodes[_],E=f.children;if(E.length>0){s.graphSet.push(E);for(var c=0;c<E.length;c++)g[++b]=E[c]}}for(var c=0;c<s.graphSet.length;c++)for(var x=s.graphSet[c],h=0;h<x.length;h++){var P=s.idToIndex[x[h]];s.indexToGraph[P]=c}for(var c=0;c<s.edgeSize;c++){var C=i[c],I={};I.id=C.data("id"),I.sourceId=C.data("source"),I.targetId=C.data("target");var O=mt(n.idealEdgeLength)?n.idealEdgeLength(C):n.idealEdgeLength,$=mt(n.edgeElasticity)?n.edgeElasticity(C):n.edgeElasticity,D=s.idToIndex[I.sourceId],q=s.idToIndex[I.targetId],A=s.indexToGraph[D],k=s.indexToGraph[q];if(A!=k){for(var F=fde(I.sourceId,I.targetId,s),j=s.graphSet[F],M=0,y=s.layoutNodes[D];j.indexOf(y.id)===-1;)y=s.layoutNodes[s.idToIndex[y.parentId]],M++;for(y=s.layoutNodes[q];j.indexOf(y.id)===-1;)y=s.layoutNodes[s.idToIndex[y.parentId]],M++;O*=M*n.nestingFactor}I.idealLength=O,I.elasticity=$,s.layoutEdges.push(I)}return s},fde=function(e,t,n){var i=MG(e,t,0,n);return 2>i.count?0:i.graph},MG=function(e,t,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var u=a[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var d=i.indexToGraph[i.idToIndex[c[0]]],h=MG(e,t,d,i);if(h.count!==0)if(h.count===1){if(o++,o===2)break}else return h}}return{count:o,graph:n}},vde,pde=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*i)}},BG=function(e,t,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,s.positionX),a.x2=Math.max(a.x2,s.positionX),a.y1=Math.min(a.y1,s.positionY),a.y2=Math.max(a.y2,s.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var l=a.w===0?.5:(u.positionX-a.x1)/a.w,c=a.h===0?.5:(u.positionY-a.y1)/a.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},gde=function(e,t,n){var i=n.layout,a=n.eles.nodes(),o=BG(e,n,a);a.positions(o),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},yde=function(e,t,n){mde(e,t),Ede(e),Sde(e,t),_de(e),Tde(e)},mde=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,o=0;o<a;o++)for(var s=e.layoutNodes[e.idToIndex[i[o]]],u=o+1;u<a;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];bde(s,l,e,t)}},q3=function(e){return-1+2*e*Math.random()},bde=function(e,t,n,i){var a=e.cmptId,o=t.cmptId;if(!(a!==o&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=q3(l),u=q3(l));var c=wde(e,t,s,u);if(c>0)var d=i.nodeOverlap*c,h=Math.sqrt(s*s+u*u),f=d*s/h,v=d*u/h;else var p=Sc(e,s,u),y=Sc(t,-1*s,-1*u),g=y.x-p.x,m=y.y-p.y,b=g*g+m*m,h=Math.sqrt(b),d=(e.nodeRepulsion+t.nodeRepulsion)/b,f=d*g/h,v=d*m/h;e.isLocked||(e.offsetX-=f,e.offsetY-=v),t.isLocked||(t.offsetX+=f,t.offsetY+=v)}},wde=function(e,t,n,i){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(i>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},Sc=function(e,t,n){var i=e.positionX,a=e.positionY,o=e.height||1,s=e.width||1,u=n/t,l=o/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=a+o/2,c):0<t&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=a+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=a-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+o*t/2/n,c.y=a+o/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-o*t/2/n,c.y=a-o/2),c)},Ede=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(l===0&&c===0)){var d=Sc(o,l,c),h=Sc(u,-1*l,-1*c),f=h.x-d.x,v=h.y-d.y,p=Math.sqrt(f*f+v*v),y=Math.pow(i.idealLength-p,2)/i.elasticity;if(p!==0)var g=y*f/p,m=y*v/p;else var g=0,m=0;o.isLocked||(o.offsetX+=g,o.offsetY+=m),u.isLocked||(u.offsetX-=g,u.offsetY-=m)}}},Sde=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var d=0;d<o;d++){var h=e.layoutNodes[e.idToIndex[a[d]]];if(!h.isLocked){var f=s-h.positionX,v=u-h.positionY,p=Math.sqrt(f*f+v*v);if(p>n){var y=t.gravity*f/p,g=t.gravity*v/p;h.offsetX+=y,h.offsetY+=g}}}}},_de=function(e,t){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var o=n[i++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,d=u.offsetY,h=0;h<l.length;h++){var f=e.layoutNodes[e.idToIndex[l[h]]];f.offsetX+=c,f.offsetY+=d,n[++a]=l[h]}u.offsetX=0,u.offsetY=0}}},Tde=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=xde(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,FG(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},xde=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else var a={x:e,y:t};return a},FG=function(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return FG(i,t)}},k3=function(e,t){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var o=n[a],s=o.cmptId,u=i[s]=i[s]||[];u.push(o)}for(var l=0,a=0;a<i.length;a++){var c=i[a];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var d=0;d<c.length;d++){var h=c[d];c.x1=Math.min(c.x1,h.positionX-h.width/2),c.x2=Math.max(c.x2,h.positionX+h.width/2),c.y1=Math.min(c.y1,h.positionY-h.height/2),c.y2=Math.max(c.y2,h.positionY+h.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(m,b){return b.w*b.h-m.w*m.h});for(var f=0,v=0,p=0,y=0,g=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var c=i[a];if(c){for(var d=0;d<c.length;d++){var h=c[d];h.isLocked||(h.positionX+=f-c.x1,h.positionY+=v-c.y1)}f+=c.w+t.componentSpacing,p+=c.w+t.componentSpacing,y=Math.max(y,c.h),p>g&&(v+=y+t.componentSpacing,f=0,p=0,y=0)}}},Pde={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function NG(r){this.options=Re({},Pde,r)}NG.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=Tr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(U){return{x:a.x1,y:a.y1}});else{var o=i.size(),s=Math.sqrt(o*a.h/a.w),u=Math.round(s),l=Math.round(a.w/a.h*s),c=function(K){if(K==null)return Math.min(u,l);var Z=Math.min(u,l);Z==u?u=K:l=K},d=function(K){if(K==null)return Math.max(u,l);var Z=Math.max(u,l);Z==u?u=K:l=K},h=e.rows,f=e.cols!=null?e.cols:e.columns;if(h!=null&&f!=null)u=h,l=f;else if(h!=null&&f==null)u=h,l=Math.ceil(o/u);else if(h==null&&f!=null)l=f,u=Math.ceil(o/l);else if(l*u>o){var v=c(),p=d();(v-1)*p>=o?c(v-1):(p-1)*v>=o&&d(p-1)}else for(;l*u<o;){var y=c(),g=d();(g+1)*y>=o?d(g+1):c(y+1)}var m=a.w/l,b=a.h/u;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var w=0;w<i.length;w++){var S=i[w],T=S._private.position;(T.x==null||T.y==null)&&(T.x=0,T.y=0);var _=S.layoutDimensions(e),E=e.avoidOverlapPadding,x=_.w+E,P=_.h+E;m=Math.max(m,x),b=Math.max(b,P)}for(var C={},I=function(K,Z){return!!C["c-"+K+"-"+Z]},O=function(K,Z){C["c-"+K+"-"+Z]=!0},$=0,D=0,q=function(){D++,D>=l&&(D=0,$++)},A={},k=0;k<i.length;k++){var F=i[k],j=e.position(F);if(j&&(j.row!==void 0||j.col!==void 0)){var M={row:j.row,col:j.col};if(M.col===void 0)for(M.col=0;I(M.row,M.col);)M.col++;else if(M.row===void 0)for(M.row=0;I(M.row,M.col);)M.row++;A[F.id()]=M,O(M.row,M.col)}}var L=function(K,Z){var Q,te;if(K.locked()||K.isParent())return!1;var oe=A[K.id()];if(oe)Q=oe.col*m+m/2+a.x1,te=oe.row*b+b/2+a.y1;else{for(;I($,D);)q();Q=D*m+m/2+a.x1,te=$*b+b/2+a.y1,O($,D),q()}return{x:Q,y:te}};i.layoutPositions(this,e,L)}return this};var Cde={ready:function(){},stop:function(){}};function GT(r){this.options=Re({},Cde,r)}GT.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};GT.prototype.stop=function(){return this};var Ide={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function LG(r){this.options=Re({},Ide,r)}LG.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=mt(r.positions);function i(a){if(r.positions==null)return Xse(a.position());if(n)return r.positions(a);var o=r.positions[a._private.data.id];return o??null}return t.layoutPositions(this,r,function(a,o){var s=i(a);return a.locked()||s==null?!1:s}),this};var Ode={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function zG(r){this.options=Re({},Ode,r)}zG.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Tr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var Rde=[{name:"breadthfirst",impl:AG},{name:"circle",impl:qG},{name:"concentric",impl:kG},{name:"cose",impl:Sd},{name:"grid",impl:NG},{name:"null",impl:GT},{name:"preset",impl:LG},{name:"random",impl:zG}];function jG(r){this.options=r,this.notifications=0}var M3=function(){},B3=function(){throw new Error("A headless instance can not render images")};jG.prototype={recalculateRenderedStyle:M3,notify:function(){this.notifications++},init:M3,isHeadless:function(){return!0},png:B3,jpg:B3};var UT={};UT.arrowShapeWidth=.3;UT.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,d,h,f,v,p){var y=f.x-d/2-p,g=f.x+d/2+p,m=f.y-d/2-p,b=f.y+d/2+p,w=y<=l&&l<=g&&m<=c&&c<=b;return w},n=function(l,c,d,h,f){var v=l*Math.cos(h)-c*Math.sin(h),p=l*Math.sin(h)+c*Math.cos(h),y=v*d,g=p*d,m=y+f.x,b=g+f.y;return{x:m,y:b}},i=function(l,c,d,h){for(var f=[],v=0;v<l.length;v+=2){var p=l[v],y=l[v+1];f.push(n(p,y,c,d,h))}return f},a=function(l){for(var c=[],d=0;d<l.length;d++){var h=l[d];c.push(h.x,h.y)}return c},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){Pe(c)&&(c=r[c]),r[l]=Re({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,f,v,p,y,g){var m=a(i(this.points,v+2*g,p,y)),b=$r(h,f,m);return b},roughCollide:t,draw:function(h,f,v,p){var y=i(this.points,f,v,p);e.arrowShapeImpl("polygon")(h,y)},spacing:function(h){return 0},gap:o},c)};s("none",{collide:pc,roughCollide:pc,draw:DT,spacing:Z5,gap:Z5}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,d,h,f){var v=i(this.points,c,d,h),p=this.controlPoint,y=n(p[0],p[1],c,d,h);e.arrowShapeImpl(this.name)(l,v,y)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,d,h,f,v,p){var y=a(i(this.points,d+2*p,h,f)),g=a(i(this.pointsTee,d+2*p,h,f)),m=$r(l,c,y)||$r(l,c,g);return m},draw:function(l,c,d,h,f){var v=i(this.points,c,d,h),p=i(this.pointsTee,c,d,h);e.arrowShapeImpl(this.name)(l,v,p)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,d,h,f,v,p){var y=f,g=Math.pow(y.x-l,2)+Math.pow(y.y-c,2)<=Math.pow((d+2*p)*this.radius,2),m=a(i(this.points,d+2*p,h,f));return $r(l,c,m)||g},draw:function(l,c,d,h,f){var v=i(this.pointsTr,c,d,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var d=this.baseCrossLinePts.slice(),h=c/l,f=3,v=5;return d[f]=d[f]-h,d[v]=d[v]-h,d},collide:function(l,c,d,h,f,v,p){var y=a(i(this.points,d+2*p,h,f)),g=a(i(this.crossLinePts(d,v),d+2*p,h,f)),m=$r(l,c,y)||$r(l,c,g);return m},draw:function(l,c,d,h,f){var v=i(this.points,c,d,h),p=i(this.crossLinePts(c,f),c,d,h);e.arrowShapeImpl(this.name)(l,v,p)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,d,h,f,v,p){var y=f,g=Math.pow(y.x-l,2)+Math.pow(y.y-c,2)<=Math.pow((d+2*p)*this.radius,2);return g},draw:function(l,c,d,h,f){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Ka={};Ka.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/o-s.x)/u,c=((e-a)/o-s.y)/u;return[l,c]};Ka.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(g){return parseFloat(t.getPropertyValue(g))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=a.left+a.right,d=e.width/(o+c),h=o-u,f=s-l,v=e.left+i.left+a.left,p=e.top+i.top+a.top;return this.containerBB=[v,p,h,f,d]};Ka.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ka.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Ka.findNearestElements=function(r,e,t,n){var i=this,a=this,o=a.getCachedZSortedEles(),s=[],u=a.cy.zoom(),l=a.cy.hasCompoundNodes(),c=(n?24:8)/u,d=(n?8:2)/u,h=(n?8:2)/u,f=1/0,v,p;t&&(o=o.interactive);function y(_,E){if(_.isNode()){if(p)return;p=_,s.push(_)}if(_.isEdge()&&(E==null||E<f))if(v){if(v.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===_.pstyle("z-compound-depth").value){for(var x=0;x<s.length;x++)if(s[x].isEdge()){s[x]=_,v=_,f=E??f;break}}}else s.push(_),v=_,f=E??f}function g(_){var E=_.outerWidth()+2*d,x=_.outerHeight()+2*d,P=E/2,C=x/2,I=_.position(),O=_.pstyle("corner-radius").value==="auto"?"auto":_.pstyle("corner-radius").pfValue,$=_._private.rscratch;if(I.x-P<=r&&r<=I.x+P&&I.y-C<=e&&e<=I.y+C){var D=a.nodeShapes[i.getNodeShape(_)];if(D.checkPoint(r,e,0,E,x,I.x,I.y,O,$))return y(_,0),!0}}function m(_){var E=_._private,x=E.rscratch,P=_.pstyle("width").pfValue,C=_.pstyle("arrow-scale").value,I=P/2+c,O=I*I,$=I*2,k=E.source,F=E.target,D;if(x.edgeType==="segments"||x.edgeType==="straight"||x.edgeType==="haystack"){for(var q=x.allpts,A=0;A+3<q.length;A+=2)if(cue(r,e,q[A],q[A+1],q[A+2],q[A+3],$)&&O>(D=pue(r,e,q[A],q[A+1],q[A+2],q[A+3])))return y(_,D),!0}else if(x.edgeType==="bezier"||x.edgeType==="multibezier"||x.edgeType==="self"||x.edgeType==="compound"){for(var q=x.allpts,A=0;A+5<x.allpts.length;A+=4)if(due(r,e,q[A],q[A+1],q[A+2],q[A+3],q[A+4],q[A+5],$)&&O>(D=vue(r,e,q[A],q[A+1],q[A+2],q[A+3],q[A+4],q[A+5])))return y(_,D),!0}for(var k=k||E.source,F=F||E.target,j=i.getArrowWidth(P,C),M=[{name:"source",x:x.arrowStartX,y:x.arrowStartY,angle:x.srcArrowAngle},{name:"target",x:x.arrowEndX,y:x.arrowEndY,angle:x.tgtArrowAngle},{name:"mid-source",x:x.midX,y:x.midY,angle:x.midsrcArrowAngle},{name:"mid-target",x:x.midX,y:x.midY,angle:x.midtgtArrowAngle}],A=0;A<M.length;A++){var L=M[A],U=a.arrowShapes[_.pstyle(L.name+"-arrow-shape").value],K=_.pstyle("width").pfValue;if(U.roughCollide(r,e,j,L.angle,{x:L.x,y:L.y},K,c)&&U.collide(r,e,j,L.angle,{x:L.x,y:L.y},K,c))return y(_),!0}l&&s.length>0&&(g(k),g(F))}function b(_,E,x){return Rr(_,E,x)}function w(_,E){var x=_._private,P=h,C;E?C=E+"-":C="",_.boundingBox();var I=x.labelBounds[E||"main"],O=_.pstyle(C+"label").value,$=_.pstyle("text-events").strValue==="yes";if(!(!$||!O)){var D=b(x.rscratch,"labelX",E),q=b(x.rscratch,"labelY",E),A=b(x.rscratch,"labelAngle",E),k=_.pstyle(C+"text-margin-x").pfValue,F=_.pstyle(C+"text-margin-y").pfValue,j=I.x1-P-k,M=I.x2+P-k,L=I.y1-P-F,U=I.y2+P-F;if(A){var K=Math.cos(A),Z=Math.sin(A),Q=function(X,se){return X=X-D,se=se-q,{x:X*K-se*Z+D,y:X*Z+se*K+q}},te=Q(j,L),oe=Q(j,U),re=Q(M,L),V=Q(M,U),W=[te.x+k,te.y+F,re.x+k,re.y+F,V.x+k,V.y+F,oe.x+k,oe.y+F];if($r(r,e,W))return y(_),!0}else if(gi(I,r,e))return y(_),!0}}for(var S=o.length-1;S>=0;S--){var T=o[S];T.isNode()?g(T)||w(T):m(T)||w(T)||w(T,"source")||w(T,"target")}return s};Ka.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,a=this.cy.zoom(),o=2/a,s=[],u=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),d=Math.max(e,n);r=u,t=l,e=c,n=d;var h=Tr({x1:r,y1:e,x2:t,y2:n}),f=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}],v=[[f[0],f[1]],[f[1],f[2]],[f[2],f[3]],[f[3],f[0]]];function p(X,se,be){return Rr(X,se,be)}function y(X,se){var be=X._private,ke=o,fe="";X.boundingBox();var ge=be.labelBounds.main;if(!ge)return null;var Te=p(be.rscratch,"labelX",se),le=p(be.rscratch,"labelY",se),ye=p(be.rscratch,"labelAngle",se),pe=X.pstyle(fe+"text-margin-x").pfValue,Ce=X.pstyle(fe+"text-margin-y").pfValue,ve=ge.x1-ke-pe,De=ge.x2+ke-pe,Ne=ge.y1-ke-Ce,Le=ge.y2+ke-Ce;if(ye){var He=Math.cos(ye),Ge=Math.sin(ye),Ie=function(N,R){return N=N-Te,R=R-le,{x:N*He-R*Ge+Te,y:N*Ge+R*He+le}};return[Ie(ve,Ne),Ie(De,Ne),Ie(De,Le),Ie(ve,Le)]}else return[{x:ve,y:Ne},{x:De,y:Ne},{x:De,y:Le},{x:ve,y:Le}]}function g(X,se,be,ke){function fe(ge,Te,le){return(le.y-ge.y)*(Te.x-ge.x)>(Te.y-ge.y)*(le.x-ge.x)}return fe(X,be,ke)!==fe(se,be,ke)&&fe(X,se,be)!==fe(X,se,ke)}for(var m=0;m<i.length;m++){var b=i[m];if(b.isNode()){var w=b,S=w.pstyle("text-events").strValue==="yes",T=w.pstyle("box-selection").strValue,_=w.pstyle("box-select-labels").strValue==="yes";if(T==="none")continue;var E=(T==="overlap"||_)&&S,x=w.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:E});if(T==="contain"){var P=!1;if(_&&S){var C=y(w);C&&bE(C,f)&&(s.push(w),P=!0)}!P&&Y4(h,x)&&s.push(w)}else if(T==="overlap"&&MT(h,x)){var I=w.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),O=[{x:I.x1,y:I.y1},{x:I.x2,y:I.y1},{x:I.x2,y:I.y2},{x:I.x1,y:I.y2}];if(bE(O,f))s.push(w);else{var $=y(w);$&&bE($,f)&&s.push(w)}}}else{var D=b,q=D._private,A=q.rscratch,k=D.pstyle("box-selection").strValue;if(k==="none")continue;if(k==="contain"){if(A.startX!=null&&A.startY!=null&&!gi(h,A.startX,A.startY)||A.endX!=null&&A.endY!=null&&!gi(h,A.endX,A.endY))continue;if(A.edgeType==="bezier"||A.edgeType==="multibezier"||A.edgeType==="self"||A.edgeType==="compound"||A.edgeType==="segments"||A.edgeType==="haystack"){for(var F=q.rstyle.bezierPts||q.rstyle.linePts||q.rstyle.haystackPts,j=!0,M=0;M<F.length;M++)if(!rj(h,F[M])){j=!1;break}j&&s.push(D)}else A.edgeType==="straight"&&s.push(D)}else if(k==="overlap"){var L=!1;if(A.startX!=null&&A.startY!=null&&A.endX!=null&&A.endY!=null&&(gi(h,A.startX,A.startY)||gi(h,A.endX,A.endY)))s.push(D),L=!0;else if(!L&&A.edgeType==="haystack"){for(var U=q.rstyle.haystackPts,K=0;K<U.length;K++)if(rj(h,U[K])){s.push(D),L=!0;break}}if(!L){var Z=q.rstyle.bezierPts||q.rstyle.linePts||q.rstyle.haystackPts;if((!Z||Z.length<2)&&A.edgeType==="straight"&&A.startX!=null&&A.startY!=null&&A.endX!=null&&A.endY!=null&&(Z=[{x:A.startX,y:A.startY},{x:A.endX,y:A.endY}]),!Z||Z.length<2)continue;for(var Q=0;Q<Z.length-1;Q++){for(var te=Z[Q],oe=Z[Q+1],re=0;re<v.length;re++){var V=$t(v[re],2),W=V[0],G=V[1];if(g(te,oe,W,G)){s.push(D),L=!0;break}}if(L)break}}}}}return s};var _c={};_c.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,d,h,f,g,m;if(t?(c=e.haystackPts[0],d=e.haystackPts[1],h=e.haystackPts[2],f=e.haystackPts[3]):(c=e.arrowStartX,d=e.arrowStartY,h=e.arrowEndX,f=e.arrowEndY),g=e.midX,m=e.midY,a)u=c-e.segpts[0],l=d-e.segpts[1];else if(i||o||s||n){var v=e.allpts,p=Kt(v[0],v[2],v[4],.1),y=Kt(v[1],v[3],v[5],.1);u=c-p,l=d-y}else u=c-g,l=d-m;e.srcArrowAngle=_l(u,l);var g=e.midX,m=e.midY;if(t&&(g=(c+h)/2,m=(d+f)/2),u=h-c,l=f-d,a){var v=e.allpts;if(v.length/2%2===0){var b=v.length/2,w=b-2;u=v[b]-v[w],l=v[b+1]-v[w+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=v.length/2-1,w=b-2;u=v[b]-v[w],l=v[b+1]-v[w+1]}}else if(i||o||s){var v=e.allpts,S=e.ctrlpts,T,_,E,x;if(S.length/2%2===0){var P=v.length/2-1,C=P+2,I=C+2;T=Kt(v[P],v[C],v[I],0),_=Kt(v[P+1],v[C+1],v[I+1],0),E=Kt(v[P],v[C],v[I],1e-4),x=Kt(v[P+1],v[C+1],v[I+1],1e-4)}else{var C=v.length/2-1,P=C-2,I=C+2;T=Kt(v[P],v[C],v[I],.4999),_=Kt(v[P+1],v[C+1],v[I+1],.4999),E=Kt(v[P],v[C],v[I],.5),x=Kt(v[P+1],v[C+1],v[I+1],.5)}u=E-T,l=x-_}if(e.midtgtArrowAngle=_l(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,a){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var b=v.length/2-1,O=b+2;u=-(v[O]-v[b]),l=-(v[O+1]-v[b+1])}}}if(e.midsrcArrowAngle=_l(u,l),a)u=h-e.segpts[e.segpts.length-2],l=f-e.segpts[e.segpts.length-1];else if(i||o||s||n){var v=e.allpts,$=v.length,p=Kt(v[$-6],v[$-4],v[$-2],.9),y=Kt(v[$-5],v[$-3],v[$-1],.9);u=h-p,l=f-y}else u=h-g,l=f-m;e.tgtArrowAngle=_l(u,l)};_c.getArrowWidth=_c.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var o_,s_,mn={},Wr={},F3,N3,na,Gl,Bn,Qi,ta,gn,io,$l,VG,WG,u_,l_,L3,z3=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},$de=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},Dde=function(e,t,n,i,a){if(e!==L3?z3(t,e,mn):$de(Wr,mn),z3(t,n,Wr),F3=mn.nx*Wr.ny-mn.ny*Wr.nx,N3=mn.nx*Wr.nx-mn.ny*-Wr.ny,Bn=Math.asin(Math.max(-1,Math.min(1,F3))),Math.abs(Bn)<1e-6){o_=t.x,s_=t.y,ta=io=0;return}na=1,Gl=!1,N3<0?Bn<0?Bn=Math.PI+Bn:(Bn=Math.PI-Bn,na=-1,Gl=!0):Bn>0&&(na=-1,Gl=!0),t.radius!==void 0?io=t.radius:io=i,Qi=Bn/2,$l=Math.min(mn.len/2,Wr.len/2),a?(gn=Math.abs(Math.cos(Qi)*io/Math.sin(Qi)),gn>$l?(gn=$l,ta=Math.abs(gn*Math.sin(Qi)/Math.cos(Qi))):ta=io):(gn=Math.min($l,io),ta=Math.abs(gn*Math.sin(Qi)/Math.cos(Qi))),u_=t.x+Wr.nx*gn,l_=t.y+Wr.ny*gn,o_=u_-Wr.ny*ta*na,s_=l_+Wr.nx*ta*na,VG=t.x+mn.nx*gn,WG=t.y+mn.ny*gn,L3=t};function HG(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function KT(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(Dde(r,e,t,n,i),{cx:o_,cy:s_,radius:ta,startX:VG,startY:WG,stopX:u_,stopY:l_,startAngle:mn.ang+Math.PI/2*na,endAngle:Wr.ang-Math.PI/2*na,counterClockwise:Gl})}var pu=.01,Ade=Math.sqrt(2*pu),pr={};pr.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,a,o=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,l=function(S,T,_,E){var x=E-T,P=_-S,C=Math.sqrt(P*P+x*x);return{x:-x/C,y:P/C}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":a=t;break;case"intersection":a=n;break;case"endpoints":{if(u){var d=this.manualEndptToPx(r.source()[0],o),h=$t(d,2),f=h[0],v=h[1],p=this.manualEndptToPx(r.target()[0],s),y=$t(p,2),g=y[0],m=y[1],b={x1:f,y1:v,x2:g,y2:m};i=l(f,v,g,m),a=b}else et("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};pr.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,u=o.position(),l=s.position(),c=o.width(),d=s.width(),h=o.height(),f=s.height(),v=t.pstyle("haystack-radius").value,p=v/2;i.haystackPts=i.allpts=[i.source.x*c*p+u.x,i.source.y*h*p+u.y,i.target.x*d*p+l.x,i.target.y*f*p+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};pr.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),a=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=a.pfValue[a.pfValue.length-1],l=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var d=n.pfValue[c],h=i.pfValue[c],f=1-d,v=d,p=this.findMidptPtsEtc(r,e),y=p.midptPts,g=p.vectorNormInverse,m={x:y.x1*f+y.x2*v,y:y.y1*f+y.y2*v};t.segpts.push(m.x+g.x*h,m.y+g.y*h),t.radii.push(a.pfValue[c]!==void 0?a.pfValue[c]:u),t.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:l)==="arc-radius")}};pr.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,a=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,d=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=t,f=d;n&&(h=0,f=u);var v=l-Math.PI/2,p=v-c/2,y=v+c/2,g=l+"_"+c;h=a[g]===void 0?a[g]=0:++a[g],i.ctrlpts=[o.x+Math.cos(p)*1.4*f*(h/3+1),o.y+Math.sin(p)*1.4*f*(h/3+1),o.x+Math.cos(y)*1.4*f*(h/3+1),o.y+Math.sin(y)*1.4*f*(h/3+1)]};pr.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,d=r.pstyle("control-point-step-size").pfValue,h=r.pstyle("control-point-distances"),f=h?h.pfValue[0]:void 0,v=t,p=d;n&&(v=0,p=f);var y=50,g={x:a.x-s/2,y:a.y-u/2},m={x:o.x-l/2,y:o.y-c/2},b={x:Math.min(g.x,m.x),y:Math.min(g.y,m.y)},w=.5,S=Math.max(w,Math.log(s*pu)),T=Math.max(w,Math.log(l*pu));i.ctrlpts=[b.x,b.y-(1+Math.pow(y,1.12)/100)*p*(v/3+1)*S,b.x-(1+Math.pow(y,1.12)/100)*p*(v/3+1)*T,b.y]};pr.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};pr.findBezierPoints=function(r,e,t,n,i){var a=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,d=u.value[0],h=n;a.edgeType=h?"multibezier":"bezier",a.ctrlpts=[];for(var f=0;f<l;f++){var v=(.5-e.eles.length/2+t)*o*(i?-1:1),p=void 0,y=kT(v);h&&(c=s?s.pfValue[f]:o,d=u.value[f]),n?p=c:p=c!==void 0?y*c:void 0;var g=p!==void 0?p:v,m=1-d,b=d,w=this.findMidptPtsEtc(r,e),S=w.midptPts,T=w.vectorNormInverse,_={x:S.x1*m+S.x2*b,y:S.y1*m+S.y2*b};a.ctrlpts.push(_.x+T.x*g,_.y+T.y*g)}};pr.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",s="downward",u="upward",l="auto",c=e.posPts,d=e.srcW,h=e.srcH,f=e.tgtW,v=e.tgtH,p=r.pstyle("edge-distances").value,y=p!=="node-position",g=r.pstyle("taxi-direction").value,m=g,b=r.pstyle("taxi-turn"),w=b.units==="%",S=b.pfValue,T=S<0,_=r.pstyle("taxi-turn-min-distance").pfValue,E=y?(d+f)/2:0,x=y?(h+v)/2:0,P=c.x2-c.x1,C=c.y2-c.y1,I=function(R,B){return R>0?Math.max(R-B,0):Math.min(R+B,0)},O=I(P,E),$=I(C,x),D=!1;m===l?g=Math.abs(O)>Math.abs($)?i:n:m===u||m===s?(g=n,D=!0):(m===a||m===o)&&(g=i,D=!0);var q=g===n,A=q?$:O,k=q?C:P,F=kT(k),j=!1;!(D&&(w||T))&&(m===s&&k<0||m===u&&k>0||m===a&&k>0||m===o&&k<0)&&(F*=-1,A=F*Math.abs(A),j=!0);var M;if(w){var L=S<0?1+S:S;M=L*A}else{var U=S<0?A:0;M=U+S*F}var K=function(R){return Math.abs(R)<_||Math.abs(R)>=Math.abs(A)},Z=K(M),Q=K(Math.abs(A)-Math.abs(M)),te=Z||Q;if(te&&!j)if(q){var oe=Math.abs(k)<=h/2,re=Math.abs(P)<=f/2;if(oe){var V=(c.x1+c.x2)/2,W=c.y1,G=c.y2;t.segpts=[V,W,V,G]}else if(re){var X=(c.y1+c.y2)/2,se=c.x1,be=c.x2;t.segpts=[se,X,be,X]}else t.segpts=[c.x1,c.y2]}else{var ke=Math.abs(k)<=d/2,fe=Math.abs(C)<=v/2;if(ke){var ge=(c.y1+c.y2)/2,Te=c.x1,le=c.x2;t.segpts=[Te,ge,le,ge]}else if(fe){var ye=(c.x1+c.x2)/2,pe=c.y1,Ce=c.y2;t.segpts=[ye,pe,ye,Ce]}else t.segpts=[c.x2,c.y1]}else if(q){var ve=c.y1+M+(y?h/2*F:0),De=c.x1,Ne=c.x2;t.segpts=[De,ve,Ne,ve]}else{var Le=c.x1+M+(y?d/2*F:0),He=c.y1,Ge=c.y2;t.segpts=[Le,He,Le,Ge]}if(t.isRound){var Ie=r.pstyle("taxi-radius").value,ee=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(Ie),t.isArcRadius=new Array(t.segpts.length/2).fill(ee)}};pr.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,d=e.srcCornerRadius,h=e.tgtCornerRadius,f=e.srcRs,v=e.tgtRs,p=!ce(t.startX)||!ce(t.startY),y=!ce(t.arrowStartX)||!ce(t.arrowStartY),g=!ce(t.endX)||!ce(t.endY),m=!ce(t.arrowEndX)||!ce(t.arrowEndY),b=3,w=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,S=b*w,T=xa({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),_=T<S,E=xa({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),x=E<S,P=!1;if(p||y||_){P=!0;var C={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},I=Math.sqrt(C.x*C.x+C.y*C.y),O={x:C.x/I,y:C.y/I},$=Math.max(a,o),D={x:t.ctrlpts[0]+O.x*2*$,y:t.ctrlpts[1]+O.y*2*$},q=l.intersectLine(n.x,n.y,a,o,D.x,D.y,0,d,f);_?(t.ctrlpts[0]=t.ctrlpts[0]+O.x*(S-T),t.ctrlpts[1]=t.ctrlpts[1]+O.y*(S-T)):(t.ctrlpts[0]=q[0]+O.x*S,t.ctrlpts[1]=q[1]+O.y*S)}if(g||m||x){P=!0;var A={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},k=Math.sqrt(A.x*A.x+A.y*A.y),F={x:A.x/k,y:A.y/k},j=Math.max(a,o),M={x:t.ctrlpts[0]+F.x*2*j,y:t.ctrlpts[1]+F.y*2*j},L=c.intersectLine(i.x,i.y,s,u,M.x,M.y,0,h,v);x?(t.ctrlpts[0]=t.ctrlpts[0]+F.x*(S-E),t.ctrlpts[1]=t.ctrlpts[1]+F.y*(S-E)):(t.ctrlpts[0]=L[0]+F.x*S,t.ctrlpts[1]=L[1]+F.y*S)}P&&this.findEndpoints(r)}};pr.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=Kt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=Kt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var a=2;a+3<e.allpts.length;a+=2){var o=e.radii[a/2-1],s=e.isArcRadius[a/2-1];e.roundCorners.push(KT({x:e.allpts[a-2],y:e.allpts[a-1]},{x:e.allpts[a],y:e.allpts[a+1],radius:o},{x:e.allpts[a+2],y:e.allpts[a+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var d={x:e.segpts[c],y:e.segpts[c+1]},h=e.roundCorners[c/2];if(h.radius===0){var f={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=d.x,e.midY=d.y,e.midVector=[d.y-f.y,f.x-d.x]}else{var v=[d.x-h.cx,d.y-h.cy],p=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(y){return y*p}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};pr.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||ce(e.startX)&&ce(e.startY)&&ce(e.endX)&&ce(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,et("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};pr.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),a=new zn,o=function(x,P){return[].concat(hc(x),[P?1:0]).join("-")},s=[],u=[],l=0;l<r.length;l++){var c=r[l],d=c._private,h=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(h==="haystack"){u.push(c);continue}var f=h==="unbundled-bezier"||pi(h,"segments")||h==="straight"||h==="straight-triangle"||pi(h,"taxi"),v=h==="unbundled-bezier"||h==="bezier",p=d.source,y=d.target,g=p.poolIndex(),m=y.poolIndex(),b=[g,m].sort(),w=o(b,f),S=a.get(w);S==null&&(S={eles:[]},s.push({pairId:b,edgeIsUnbundled:f}),a.set(w,S)),S.eles.push(c),f&&(S.hasUnbundled=!0),v&&(S.hasBezier=!0)}}for(var T=function(){var x=s[_],P=x.pairId,C=x.edgeIsUnbundled,I=o(P,C),O=a.get(I),$;if(!O.hasUnbundled){var D=O.eles[0].parallelEdges().filter(function(ee){return ee.isBundledBezier()});AT(O.eles),D.forEach(function(ee){return O.eles.push(ee)}),O.eles.sort(function(ee,N){return ee.poolIndex()-N.poolIndex()})}var q=O.eles[0],A=q.source(),k=q.target();if(A.poolIndex()>k.poolIndex()){var F=A;A=k,k=F}var j=O.srcPos=A.position(),M=O.tgtPos=k.position(),L=O.srcW=A.outerWidth(),U=O.srcH=A.outerHeight(),K=O.tgtW=k.outerWidth(),Z=O.tgtH=k.outerHeight(),Q=O.srcShape=t.nodeShapes[e.getNodeShape(A)],te=O.tgtShape=t.nodeShapes[e.getNodeShape(k)],oe=O.srcCornerRadius=A.pstyle("corner-radius").value==="auto"?"auto":A.pstyle("corner-radius").pfValue,re=O.tgtCornerRadius=k.pstyle("corner-radius").value==="auto"?"auto":k.pstyle("corner-radius").pfValue,V=O.tgtRs=k._private.rscratch,W=O.srcRs=A._private.rscratch;O.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var G=0;G<O.eles.length;G++){var X=O.eles[G],se=X[0]._private.rscratch,be=X.pstyle("curve-style").value,ke=be==="unbundled-bezier"||pi(be,"segments")||pi(be,"taxi"),fe=!A.same(X.source());if(!O.calculatedIntersection&&A!==k&&(O.hasBezier||O.hasUnbundled)){O.calculatedIntersection=!0;var ge=Q.intersectLine(j.x,j.y,L,U,M.x,M.y,0,oe,W),Te=O.srcIntn=ge,le=te.intersectLine(M.x,M.y,K,Z,j.x,j.y,0,re,V),ye=O.tgtIntn=le,pe=O.intersectionPts={x1:ge[0],x2:le[0],y1:ge[1],y2:le[1]},Ce=O.posPts={x1:j.x,x2:M.x,y1:j.y,y2:M.y},ve=le[1]-ge[1],De=le[0]-ge[0],Ne=Math.sqrt(De*De+ve*ve);ce(Ne)&&Ne>=Ade||(Ne=Math.sqrt(Math.max(De*De,pu)+Math.max(ve*ve,pu)));var Le=O.vector={x:De,y:ve},He=O.vectorNorm={x:Le.x/Ne,y:Le.y/Ne},Ge={x:-He.y,y:He.x};O.nodesOverlap=!ce(Ne)||te.checkPoint(ge[0],ge[1],0,K,Z,M.x,M.y,re,V)||Q.checkPoint(le[0],le[1],0,L,U,j.x,j.y,oe,W),O.vectorNormInverse=Ge,$={nodesOverlap:O.nodesOverlap,dirCounts:O.dirCounts,calculatedIntersection:!0,hasBezier:O.hasBezier,hasUnbundled:O.hasUnbundled,eles:O.eles,srcPos:M,srcRs:V,tgtPos:j,tgtRs:W,srcW:K,srcH:Z,tgtW:L,tgtH:U,srcIntn:ye,tgtIntn:Te,srcShape:te,tgtShape:Q,posPts:{x1:Ce.x2,y1:Ce.y2,x2:Ce.x1,y2:Ce.y1},intersectionPts:{x1:pe.x2,y1:pe.y2,x2:pe.x1,y2:pe.y1},vector:{x:-Le.x,y:-Le.y},vectorNorm:{x:-He.x,y:-He.y},vectorNormInverse:{x:-Ge.x,y:-Ge.y}}}var Ie=fe?$:O;se.nodesOverlap=Ie.nodesOverlap,se.srcIntn=Ie.srcIntn,se.tgtIntn=Ie.tgtIntn,se.isRound=be.startsWith("round"),i&&(A.isParent()||A.isChild()||k.isParent()||k.isChild())&&(A.parents().anySame(k)||k.parents().anySame(A)||A.same(k)&&A.isParent())?e.findCompoundLoopPoints(X,Ie,G,ke):A===k?e.findLoopPoints(X,Ie,G,ke):be.endsWith("segments")?e.findSegmentsPoints(X,Ie):be.endsWith("taxi")?e.findTaxiPoints(X,Ie):be==="straight"||!ke&&O.eles.length%2===1&&G===Math.floor(O.eles.length/2)?e.findStraightEdgePoints(X):e.findBezierPoints(X,Ie,G,ke,fe),e.findEndpoints(X),e.tryToCorrectInvalidPoints(X,Ie),e.checkForInvalidEdgeWarning(X),e.storeAllpts(X),e.storeEdgeProjections(X),e.calculateArrowAngles(X),e.recalculateEdgeLabelProjections(X),e.calculateLabelAngles(X)}},_=0;_<s.length;_++)T();this.findHaystackPoints(u)}};function GG(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}pr.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return GG(e.segpts)};pr.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return GG(e.ctrlpts)};pr.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var sl={};sl.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),a=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,a),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,a,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};sl.findEndpoints=function(r){var e,t,n,i,a=this,o,s=r.source()[0],u=r.target()[0],l=s.position(),c=u.position(),d=r.pstyle("target-arrow-shape").value,h=r.pstyle("source-arrow-shape").value,f=r.pstyle("target-distance-from-node").pfValue,v=r.pstyle("source-distance-from-node").pfValue,p=s._private.rscratch,y=u._private.rscratch,g=r.pstyle("curve-style").value,m=r._private.rscratch,b=m.edgeType,w=pi(g,"taxi"),S=b==="self"||b==="compound",T=b==="bezier"||b==="multibezier"||S,_=b!=="bezier",E=b==="straight"||b==="segments",x=b==="segments",P=T||_||E,C=S||w,I=r.pstyle("source-endpoint"),O=C?"outside-to-node":I.value,$=s.pstyle("corner-radius").value==="auto"?"auto":s.pstyle("corner-radius").pfValue,D=r.pstyle("target-endpoint"),q=C?"outside-to-node":D.value,A=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;m.srcManEndpt=I,m.tgtManEndpt=D;var k,F,j,M,L=(e=(D==null||(t=D.pfValue)===null||t===void 0?void 0:t.length)===2?D.pfValue:null)!==null&&e!==void 0?e:[0,0],U=(n=(I==null||(i=I.pfValue)===null||i===void 0?void 0:i.length)===2?I.pfValue:null)!==null&&n!==void 0?n:[0,0];if(T){var K=[m.ctrlpts[0],m.ctrlpts[1]],Z=_?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:K;k=Z,F=K}else if(E){var Q=x?m.segpts.slice(0,2):[c.x+L[0],c.y+L[1]],te=x?m.segpts.slice(m.segpts.length-2):[l.x+U[0],l.y+U[1]];k=te,F=Q}if(q==="inside-to-node")o=[c.x,c.y];else if(D.units)o=this.manualEndptToPx(u,D);else if(q==="outside-to-line")o=m.tgtIntn;else if(q==="outside-to-node"||q==="outside-to-node-or-label"?j=k:(q==="outside-to-line"||q==="outside-to-line-or-label")&&(j=[l.x,l.y]),o=a.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),j[0],j[1],0,A,y),q==="outside-to-node-or-label"||q==="outside-to-line-or-label"){var oe=u._private.rscratch,re=oe.labelWidth,V=oe.labelHeight,W=oe.labelX,G=oe.labelY,X=re/2,se=V/2,be=u.pstyle("text-valign").value;be==="top"?G-=se:be==="bottom"&&(G+=se);var ke=u.pstyle("text-halign").value;ke==="left"?W-=X:ke==="right"&&(W+=X);var fe=du(j[0],j[1],[W-X,G-se,W+X,G-se,W+X,G+se,W-X,G+se],c.x,c.y);if(fe.length>0){var ge=l,Te=ea(ge,go(o)),le=ea(ge,go(fe)),ye=Te;if(le<Te&&(o=fe,ye=le),fe.length>2){var pe=ea(ge,{x:fe[2],y:fe[3]});pe<ye&&(o=[fe[2],fe[3]])}}}var Ce=Tl(o,k,a.arrowShapes[d].spacing(r)+f),ve=Tl(o,k,a.arrowShapes[d].gap(r)+f);if(m.endX=ve[0],m.endY=ve[1],m.arrowEndX=Ce[0],m.arrowEndY=Ce[1],O==="inside-to-node")o=[l.x,l.y];else if(I.units)o=this.manualEndptToPx(s,I);else if(O==="outside-to-line")o=m.srcIntn;else if(O==="outside-to-node"||O==="outside-to-node-or-label"?M=F:(O==="outside-to-line"||O==="outside-to-line-or-label")&&(M=[c.x,c.y]),o=a.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),M[0],M[1],0,$,p),O==="outside-to-node-or-label"||O==="outside-to-line-or-label"){var De=s._private.rscratch,Ne=De.labelWidth,Le=De.labelHeight,He=De.labelX,Ge=De.labelY,Ie=Ne/2,ee=Le/2,N=s.pstyle("text-valign").value;N==="top"?Ge-=ee:N==="bottom"&&(Ge+=ee);var R=s.pstyle("text-halign").value;R==="left"?He-=Ie:R==="right"&&(He+=Ie);var B=du(M[0],M[1],[He-Ie,Ge-ee,He+Ie,Ge-ee,He+Ie,Ge+ee,He-Ie,Ge+ee],l.x,l.y);if(B.length>0){var z=c,H=ea(z,go(o)),J=ea(z,go(B)),de=H;if(J<H&&(o=[B[0],B[1]],de=J),B.length>2){var ne=ea(z,{x:B[2],y:B[3]});ne<de&&(o=[B[2],B[3]])}}}var Ee=Tl(o,F,a.arrowShapes[h].spacing(r)+v),me=Tl(o,F,a.arrowShapes[h].gap(r)+v);m.startX=me[0],m.startY=me[1],m.arrowStartX=Ee[0],m.arrowStartY=Ee[1],P&&(!ce(m.startX)||!ce(m.startY)||!ce(m.endX)||!ce(m.endY)?m.badLine=!0:m.badLine=!1)};sl.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};sl.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var YT={};function qde(r,e,t){for(var n=function(l,c,d,h){return Kt(l,c,d,h)},i=e._private,a=i.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];a.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}YT.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)qde(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)a.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};YT.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var An={};An.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Oi(e)){var t,n,i=r._private,a=r.width(),o=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,d=i.rscratch,h=i.rstyle;switch(l){case"left":t=u.x-a/2-s;break;case"right":t=u.x+a/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}d.labelX=t,d.labelY=n,h.labelX=t,h.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var UG=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},KG=function(e,t){var n=t.x-e.x,i=t.y-e.y;return UG(n,i)},kde=function(e,t,n,i){var a=cu(0,i-.001,1),o=cu(0,i+.001,1),s=To(e,t,n,a),u=To(e,t,n,o);return KG(s,u)};An.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,a={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var o=function(d,h,f){Fn(t.rscratch,d,h,f),Fn(t.rstyle,d,h,f)};o("labelX",null,e.x),o("labelY",null,e.y);var s=UG(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var d=[],h=0;h+5<n.allpts.length;h+=4){var f={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},p={x:n.allpts[h+4],y:n.allpts[h+5]};d.push({p0:f,p1:v,p2:p,startDist:0,length:0,segments:[]})}var y=t.rstyle.bezierPts,g=i.bezierProjPcts.length;function m(_,E,x,P,C){var I=xa(E,x),O=_.segments[_.segments.length-1],$={p0:E,p1:x,t0:P,t1:C,startDist:O?O.startDist+O.length:0,length:I};_.segments.push($),_.length+=I}for(var b=0;b<d.length;b++){var w=d[b],S=d[b-1];S&&(w.startDist=S.startDist+S.length),m(w,w.p0,y[b*g],0,i.bezierProjPcts[0]);for(var T=0;T<g-1;T++)m(w,y[b*g+T],y[b*g+T+1],i.bezierProjPcts[T],i.bezierProjPcts[T+1]);m(w,y[b*g+g-1],w.p2,i.bezierProjPcts[g-1],1)}return u.cache=d},l=function(d){var h,f=d==="source";if(a[d]){var v=r.pstyle(d+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=u(),y,g=0,m=0,b=0;b<p.length;b++){for(var w=p[f?b:p.length-1-b],S=0;S<w.segments.length;S++){var T=w.segments[f?S:w.segments.length-1-S],_=b===p.length-1&&S===w.segments.length-1;if(g=m,m+=T.length,m>=v||_){y={cp:w,segment:T};break}}if(y)break}var E=y.cp,x=y.segment,P=(v-g)/x.length,C=x.t1-x.t0,I=f?x.t0+C*P:x.t1-C*P;I=cu(0,I,1),e=To(E.p0,E.p1,E.p2,I),h=kde(E.p0,E.p1,E.p2,I);break}case"straight":case"segments":case"haystack":{for(var O=0,$,D,q,A,k=n.allpts.length,F=0;F+3<k&&(f?(q={x:n.allpts[F],y:n.allpts[F+1]},A={x:n.allpts[F+2],y:n.allpts[F+3]}):(q={x:n.allpts[k-2-F],y:n.allpts[k-1-F]},A={x:n.allpts[k-4-F],y:n.allpts[k-3-F]}),$=xa(q,A),D=O,O+=$,!(O>=v));F+=2);var j=v-D,M=j/$;M=cu(0,M,1),e=nue(q,A,M),h=KG(q,A);break}}o("labelX",d,e.x),o("labelY",d,e.y),o("labelAutoAngle",d,h)}};l("source"),l("target"),this.applyLabelDimensions(r)}};An.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};An.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=Ta(n,r._private.labelDimsKey);if(Rr(t.rscratch,"prefixedLabelDimsKey",e)!==i){Fn(t.rscratch,"prefixedLabelDimsKey",e,i);var a=this.calculateLabelDimensions(r,n),o=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,u=Rr(t.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=a.height/l,d=c*o,h=a.width,f=a.height+(l-1)*(o-1)*c;Fn(t.rstyle,"labelWidth",e,h),Fn(t.rscratch,"labelWidth",e,h),Fn(t.rstyle,"labelHeight",e,f),Fn(t.rscratch,"labelHeight",e,f),Fn(t.rscratch,"labelLineHeight",e,d)}};An.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,a=r.pstyle("text-transform").value,o=function(U,K){return K?(Fn(t.rscratch,U,e,K),K):Rr(t.rscratch,U,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="â",c=i.split(`
`),d=r.pstyle("text-max-width").pfValue,h=r.pstyle("text-overflow-wrap").value,f=h==="anywhere",v=[],p=/[\s\u200b]+|$/g,y=0;y<c.length;y++){var g=c[y],m=this.calculateLabelDimensions(r,g),b=m.width;if(f){var w=g.split("").join(l);g=w}if(b>d){var S=g.matchAll(p),T="",_=0,E=Ar(S),x;try{for(E.s();!(x=E.n()).done;){var P=x.value,C=P[0],I=g.substring(_,P.index);_=P.index+C.length;var O=T.length===0?I:T+I+C,$=this.calculateLabelDimensions(r,O),D=$.width;D<=d?T+=I+C:(T&&v.push(T),T=I+C)}}catch(L){E.e(L)}finally{E.f()}T.match(/^[\s\u200b]+$/)||v.push(T)}else v.push(g)}o("labelWrapCachedLines",v),i=o("labelWrapCachedText",v.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var q=r.pstyle("text-max-width").pfValue,A="",k="â¦",F=!1;if(this.calculateLabelDimensions(r,i).width<q)return i;for(var j=0;j<i.length;j++){var M=this.calculateLabelDimensions(r,A+i[j]+k).width;if(M>q)break;A+=i[j],j===i.length-1&&(F=!0)}return F||(A+=k),A}return i};An.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};An.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,a=0,o=r.pstyle("font-style").strValue,s=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),d=this.labelCalcCanvasContext=c.getContext("2d");var h=c.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}d.font="".concat(o," ").concat(l," ").concat(s,"px ").concat(u);for(var f=0,v=0,p=e.split(`
`),y=0;y<p.length;y++){var g=p[y],m=d.measureText(g),b=Math.ceil(m.width),w=s;f=Math.max(b,f),v+=w}return f+=a,v+=a,{width:f,height:v}};An.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),a=e?e+"-":"",o=r.pstyle(a+"text-rotation"),s=o.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};An.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var YG={},j3=28,V3=!1;YG.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<j3||r.height()<j3))return V3||(et("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),V3=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var _d={};_d.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],c=l._private,d=c.rstyle;d.clean=!1,d.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var i=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var d=0;d<s.length;d++){var h=s[d];h(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};_d.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};_d.recalculateRenderedStyle=function(r,e){var t=function(w){return w._private.rstyle.cleanConnected};if(r.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<r.length;a++){var o=r[a],s=o._private,u=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(o):n.push(o),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],d=c._private,h=d.rstyle,f=c.position();this.recalculateNodeLabelProjection(c),h.nodeX=f.x,h.nodeY=f.y,h.nodeW=c.pstyle("width").pfValue,h.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var p=n[v],y=p._private,g=y.rstyle,m=y.rscratch;g.srcX=m.arrowStartX,g.srcY=m.arrowStartY,g.tgtX=m.arrowEndX,g.tgtY=m.arrowEndY,g.midX=m.midX,g.midY=m.midY,g.labelAngle=m.labelAngle,g.sourceLabelAngle=m.sourceLabelAngle,g.targetLabelAngle=m.targetLabelAngle}}}};var Td={};Td.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};Td.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Td.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(RG),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var XG={};[Ka,_c,pr,sl,YT,An,YG,_d,Td].forEach(function(r){Re(XG,r)});var ZG={};ZG.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},a=i[r];if(a)return a.image.complete||a.image.addEventListener("load",t),a.image;a=i[r]=i[r]||{};var o=a.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var gs={};gs.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var a=[],o=0;o<r.length;o++){var s=r[o];if(s!==void 0){var u=this.binder(s);a.push(u.on.apply(u,i))}}return a}var u=this.binder(r);return u.on.apply(u,i)};gs.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||Hoe(r);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var o=function(u,l,c){var d=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(d[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:d}),(r.addEventListener||r.on).apply(r,d),this};return{on:o,addEventListener:o,addListener:o,bind:o}};gs.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};gs.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};gs.load=function(){var r=this,e=r.cy.window(),t=function(R){return R.selected()},n=function(R){var B=R.getRootNode();if(B&&B.nodeType===11&&B.host!==void 0)return B},i=function(R,B,z,H){R==null&&(R=r.cy);for(var J=0;J<B.length;J++){var de=B[J];R.emit({originalEvent:z,type:de,position:H})}},a=function(R){return R.shiftKey||R.metaKey||R.ctrlKey},o=function(R,B){var z=!0;if(r.cy.hasCompoundNodes()&&R&&R.pannable())for(var H=0;B&&H<B.length;H++){var R=B[H];if(R.isNode()&&R.isParent()&&!R.pannable()){z=!1;break}}else z=!0;return z},s=function(R){R[0]._private.grabbed=!0},u=function(R){R[0]._private.grabbed=!1},l=function(R){R[0]._private.rscratch.inDragLayer=!0},c=function(R){R[0]._private.rscratch.inDragLayer=!1},d=function(R){R[0]._private.rscratch.isGrabTarget=!0},h=function(R){R[0]._private.rscratch.isGrabTarget=!1},f=function(R,B){var z=B.addToList,H=z.has(R);!H&&R.grabbable()&&!R.locked()&&(z.merge(R),s(R))},v=function(R,B){if(R.cy().hasCompoundNodes()&&!(B.inDragLayer==null&&B.addToList==null)){var z=R.descendants();B.inDragLayer&&(z.forEach(l),z.connectedEdges().forEach(l)),B.addToList&&f(z,B)}},p=function(R,B){B=B||{};var z=R.cy().hasCompoundNodes();B.inDragLayer&&(R.forEach(l),R.neighborhood().stdFilter(function(H){return!z||H.isEdge()}).forEach(l)),B.addToList&&R.forEach(function(H){f(H,B)}),v(R,B),m(R,{inDragLayer:B.inDragLayer}),r.updateCachedGrabbedEles()},y=p,g=function(R){R&&(r.getCachedZSortedEles().forEach(function(B){u(B),c(B),h(B)}),r.updateCachedGrabbedEles())},m=function(R,B){if(!(B.inDragLayer==null&&B.addToList==null)&&R.cy().hasCompoundNodes()){var z=R.ancestors().orphans();if(!z.same(R)){var H=z.descendants().spawnSelf().merge(z).unmerge(R).unmerge(R.descendants()),J=H.connectedEdges();B.inDragLayer&&(J.forEach(l),H.forEach(l)),B.addToList&&H.forEach(function(de){f(de,B)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",S=typeof ResizeObserver<"u";w?(r.removeObserver=new MutationObserver(function(N){for(var R=0;R<N.length;R++){var B=N[R],z=B.removedNodes;if(z)for(var H=0;H<z.length;H++){var J=z[H];if(J===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(N){r.destroy()});var T=nl(function(){r.cy.resize()},100);w&&(r.styleObserver=new MutationObserver(T),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",T),S&&(r.resizeObserver=new ResizeObserver(T),r.resizeObserver.observe(r.container));var _=function(R,B){for(;R!=null;)B(R),R=R.parentNode},E=function(){r.invalidateContainerClientCoordsCache()};_(r.container,function(N){r.registerBinding(N,"transitionend",E),r.registerBinding(N,"animationend",E),r.registerBinding(N,"scroll",E)}),r.registerBinding(r.container,"contextmenu",function(N){N.preventDefault()});var x=function(){return r.selection[4]!==0},P=function(R){for(var B=r.findContainerClientCoords(),z=B[0],H=B[1],J=B[2],de=B[3],ne=R.touches?R.touches:[R],Ee=!1,me=0;me<ne.length;me++){var Oe=ne[me];if(z<=Oe.clientX&&Oe.clientX<=z+J&&H<=Oe.clientY&&Oe.clientY<=H+de){Ee=!0;break}}if(!Ee)return!1;for(var ze=r.container,Me=R.target,Se=Me.parentNode,We=!1;Se;){if(Se===ze){We=!0;break}Se=Se.parentNode}return!!We};r.registerBinding(r.container,"mousedown",function(R){if(P(R)&&!(r.hoverData.which===1&&R.which!==1)){R.preventDefault(),b(),r.hoverData.capture=!0,r.hoverData.which=R.which;var B=r.cy,z=[R.clientX,R.clientY],H=r.projectIntoViewport(z[0],z[1]),J=r.selection,de=r.findNearestElements(H[0],H[1],!0,!1),ne=de[0],Ee=r.dragData.possibleDragElements;r.hoverData.mdownPos=H,r.hoverData.mdownGPos=z;var me=function(je){return{originalEvent:R,type:je,position:{x:H[0],y:H[1]}}},Oe=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var je=r.hoverData.down;je?je.emit(me("taphold")):B.emit(me("taphold"))}},r.tapholdDuration)};if(R.which==3){r.hoverData.cxtStarted=!0;var ze={originalEvent:R,type:"cxttapstart",position:{x:H[0],y:H[1]}};ne?(ne.activate(),ne.emit(ze),r.hoverData.down=ne):B.emit(ze),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(R.which==1){ne&&ne.activate();{if(ne!=null&&r.nodeIsGrabbable(ne)){var Me=function(je){je.emit(me("grab"))};if(d(ne),!ne.selected())Ee=r.dragData.possibleDragElements=B.collection(),y(ne,{addToList:Ee}),ne.emit(me("grabon")).emit(me("grab"));else{Ee=r.dragData.possibleDragElements=B.collection();var Se=B.$(function(We){return We.isNode()&&We.selected()&&r.nodeIsGrabbable(We)});p(Se,{addToList:Ee}),ne.emit(me("grabon")),Se.forEach(Me)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=ne,r.hoverData.downs=de,r.hoverData.downTime=new Date().getTime()}i(ne,["mousedown","tapstart","vmousedown"],R,{x:H[0],y:H[1]}),ne==null?(J[4]=1,r.data.bgActivePosistion={x:H[0],y:H[1]},r.redrawHint("select",!0),r.redraw()):ne.pannable()&&(J[4]=1),Oe()}J[0]=J[2]=H[0],J[1]=J[3]=H[1]}},!1);var C=n(r.container);r.registerBinding([e,C],"mousemove",function(R){var B=r.hoverData.capture;if(!(!B&&!P(R))){var z=!1,H=r.cy,J=H.zoom(),de=[R.clientX,R.clientY],ne=r.projectIntoViewport(de[0],de[1]),Ee=r.hoverData.mdownPos,me=r.hoverData.mdownGPos,Oe=r.selection,ze=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(ze=r.findNearestElement(ne[0],ne[1],!0,!1));var Me=r.hoverData.last,Se=r.hoverData.down,We=[ne[0]-Oe[2],ne[1]-Oe[3]],je=r.dragData.possibleDragElements,Nt;if(me){var Et=de[0]-me[0],gr=Et*Et,It=de[1]-me[1],Gt=It*It,Lt=gr+Gt;r.hoverData.isOverThresholdDrag=Nt=Lt>=r.desktopTapThreshold2}var nr=a(R);Nt&&(r.hoverData.tapholdCancelled=!0);var si=function(){var Vr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Vr.length===0?(Vr.push(We[0]),Vr.push(We[1])):(Vr[0]+=We[0],Vr[1]+=We[1])};z=!0,i(ze,["mousemove","vmousemove","tapdrag"],R,{x:ne[0],y:ne[1]});var Ot=function(Vr){return{originalEvent:R,type:Vr,position:{x:ne[0],y:ne[1]}}},kn=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||H.emit(Ot("boxstart")),Oe[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Nt){var Mn=Ot("cxtdrag");Se?Se.emit(Mn):H.emit(Mn),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||ze!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(Ot("cxtdragout")),r.hoverData.cxtOver=ze,ze&&ze.emit(Ot("cxtdragover")))}}else if(r.hoverData.dragging){if(z=!0,H.panningEnabled()&&H.userPanningEnabled()){var Xa;if(r.hoverData.justStartedPan){var cl=r.hoverData.mdownPos;Xa={x:(ne[0]-cl[0])*J,y:(ne[1]-cl[1])*J},r.hoverData.justStartedPan=!1}else Xa={x:We[0]*J,y:We[1]*J};H.panBy(Xa),H.emit(Ot("dragpan")),r.hoverData.dragged=!0}ne=r.projectIntoViewport(R.clientX,R.clientY)}else if(Oe[4]==1&&(Se==null||Se.pannable())){if(Nt){if(!r.hoverData.dragging&&H.boxSelectionEnabled()&&(nr||!H.panningEnabled()||!H.userPanningEnabled()))kn();else if(!r.hoverData.selecting&&H.panningEnabled()&&H.userPanningEnabled()){var Yi=o(Se,r.hoverData.downs);Yi&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,Oe[4]=0,r.data.bgActivePosistion=go(Ee),r.redrawHint("select",!0),r.redraw())}Se&&Se.pannable()&&Se.active()&&Se.unactivate()}}else{if(Se&&Se.pannable()&&Se.active()&&Se.unactivate(),(!Se||!Se.grabbed())&&ze!=Me&&(Me&&i(Me,["mouseout","tapdragout"],R,{x:ne[0],y:ne[1]}),ze&&i(ze,["mouseover","tapdragover"],R,{x:ne[0],y:ne[1]}),r.hoverData.last=ze),Se)if(Nt){if(H.boxSelectionEnabled()&&nr)Se&&Se.grabbed()&&(g(je),Se.emit(Ot("freeon")),je.emit(Ot("free")),r.dragData.didDrag&&(Se.emit(Ot("dragfreeon")),je.emit(Ot("dragfree")))),kn();else if(Se&&Se.grabbed()&&r.nodeIsDraggable(Se)){var Cr=!r.dragData.didDrag;Cr&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||p(je,{inDragLayer:!0});var hr={x:0,y:0};if(ce(We[0])&&ce(We[1])&&(hr.x+=We[0],hr.y+=We[1],Cr)){var Ir=r.hoverData.dragDelta;Ir&&ce(Ir[0])&&ce(Ir[1])&&(hr.x+=Ir[0],hr.y+=Ir[1])}r.hoverData.draggingEles=!0,je.silentShift(hr).emit(Ot("position")).emit(Ot("drag")),r.redrawHint("drag",!0),r.redraw()}}else si();z=!0}if(Oe[2]=ne[0],Oe[3]=ne[1],z)return R.stopPropagation&&R.stopPropagation(),R.preventDefault&&R.preventDefault(),!1}},!1);var I,O,$;r.registerBinding(e,"mouseup",function(R){if(!(r.hoverData.which===1&&R.which!==1&&r.hoverData.capture)){var B=r.hoverData.capture;if(B){r.hoverData.capture=!1;var z=r.cy,H=r.projectIntoViewport(R.clientX,R.clientY),J=r.selection,de=r.findNearestElement(H[0],H[1],!0,!1),ne=r.dragData.possibleDragElements,Ee=r.hoverData.down,me=a(R);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Ee&&Ee.unactivate();var Oe=function(Et){return{originalEvent:R,type:Et,position:{x:H[0],y:H[1]}}};if(r.hoverData.which===3){var ze=Oe("cxttapend");if(Ee?Ee.emit(ze):z.emit(ze),!r.hoverData.cxtDragged){var Me=Oe("cxttap");Ee?Ee.emit(Me):z.emit(Me)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(de,["mouseup","tapend","vmouseup"],R,{x:H[0],y:H[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(Ee,["click","tap","vclick"],R,{x:H[0],y:H[1]}),O=!1,R.timeStamp-$<=z.multiClickDebounceTime()?(I&&clearTimeout(I),O=!0,$=null,i(Ee,["dblclick","dbltap","vdblclick"],R,{x:H[0],y:H[1]})):(I=setTimeout(function(){O||i(Ee,["oneclick","onetap","voneclick"],R,{x:H[0],y:H[1]})},z.multiClickDebounceTime()),$=R.timeStamp)),Ee==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!a(R)&&(z.$(t).unselect(["tapunselect"]),ne.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=ne=z.collection()),de==Ee&&!r.dragData.didDrag&&!r.hoverData.selecting&&de!=null&&de._private.selectable&&(r.hoverData.dragging||(z.selectionType()==="additive"||me?de.selected()?de.unselect(["tapunselect"]):de.select(["tapselect"]):me||(z.$(t).unmerge(de).unselect(["tapunselect"]),de.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Se=z.collection(r.getAllInBox(J[0],J[1],J[2],J[3]));r.redrawHint("select",!0),Se.length>0&&r.redrawHint("eles",!0),z.emit(Oe("boxend"));var We=function(Et){return Et.selectable()&&!Et.selected()};z.selectionType()==="additive"||me||z.$(t).unmerge(Se).unselect(),Se.emit(Oe("box")).stdFilter(We).select().emit(Oe("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!J[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var je=Ee&&Ee.grabbed();g(ne),je&&(Ee.emit(Oe("freeon")),ne.emit(Oe("free")),r.dragData.didDrag&&(Ee.emit(Oe("dragfreeon")),ne.emit(Oe("dragfree"))))}}J[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var D=[],q=4,A,k=1e5,F=function(R,B){for(var z=0;z<R.length;z++)if(R[z]%B!==0)return!1;return!0},j=function(R){for(var B=Math.abs(R[0]),z=1;z<R.length;z++)if(Math.abs(R[z])!==B)return!1;return!0},M=function(R){var B=!1,z=R.deltaY;if(z==null&&(R.wheelDeltaY!=null?z=R.wheelDeltaY/4:R.wheelDelta!=null&&(z=R.wheelDelta/4)),z!==0){if(A==null)if(D.length>=q){var H=D;if(A=F(H,5),!A){var J=Math.abs(H[0]);A=j(H)&&J>5}if(A)for(var de=0;de<H.length;de++)k=Math.min(Math.abs(H[de]),k)}else D.push(z),B=!0;else A&&(k=Math.min(Math.abs(z),k));if(!r.scrollingPage){var ne=r.cy,Ee=ne.zoom(),me=ne.pan(),Oe=r.projectIntoViewport(R.clientX,R.clientY),ze=[Oe[0]*Ee+me.x,Oe[1]*Ee+me.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||x()){R.preventDefault();return}if(ne.panningEnabled()&&ne.userPanningEnabled()&&ne.zoomingEnabled()&&ne.userZoomingEnabled()){R.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var Me;B&&Math.abs(z)>5&&(z=kT(z)*5),Me=z/-250,A&&(Me/=k,Me*=3),Me=Me*r.wheelSensitivity;var Se=R.deltaMode===1;Se&&(Me*=33);var We=ne.zoom()*Math.pow(10,Me);R.type==="gesturechange"&&(We=r.gestureStartZoom*R.scale),ne.zoom({level:We,renderedPosition:{x:ze[0],y:ze[1]}}),ne.emit({type:R.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:R,position:{x:Oe[0],y:Oe[1]}})}}}};r.registerBinding(r.container,"wheel",M,!0),r.registerBinding(e,"scroll",function(R){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(R){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||R.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(N){r.hasTouchStarted||M(N)},!0),r.registerBinding(r.container,"mouseout",function(R){var B=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseout",position:{x:B[0],y:B[1]}})},!1),r.registerBinding(r.container,"mouseover",function(R){var B=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseover",position:{x:B[0],y:B[1]}})},!1);var L,U,K,Z,Q,te,oe,re,V,W,G,X,se,be=function(R,B,z,H){return Math.sqrt((z-R)*(z-R)+(H-B)*(H-B))},ke=function(R,B,z,H){return(z-R)*(z-R)+(H-B)*(H-B)},fe;r.registerBinding(r.container,"touchstart",fe=function(R){if(r.hasTouchStarted=!0,!!P(R)){b(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var B=r.cy,z=r.touchData.now,H=r.touchData.earlier;if(R.touches[0]){var J=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);z[0]=J[0],z[1]=J[1]}if(R.touches[1]){var J=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);z[2]=J[0],z[3]=J[1]}if(R.touches[2]){var J=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);z[4]=J[0],z[5]=J[1]}var de=function(nr){return{originalEvent:R,type:nr,position:{x:z[0],y:z[1]}}};if(R.touches[1]){r.touchData.singleTouchMoved=!0,g(r.dragData.touchDragEles);var ne=r.findContainerClientCoords();V=ne[0],W=ne[1],G=ne[2],X=ne[3],L=R.touches[0].clientX-V,U=R.touches[0].clientY-W,K=R.touches[1].clientX-V,Z=R.touches[1].clientY-W,se=0<=L&&L<=G&&0<=K&&K<=G&&0<=U&&U<=X&&0<=Z&&Z<=X;var Ee=B.pan(),me=B.zoom();Q=be(L,U,K,Z),te=ke(L,U,K,Z),oe=[(L+K)/2,(U+Z)/2],re=[(oe[0]-Ee.x)/me,(oe[1]-Ee.y)/me];var Oe=200,ze=Oe*Oe;if(te<ze&&!R.touches[2]){var Me=r.findNearestElement(z[0],z[1],!0,!0),Se=r.findNearestElement(z[2],z[3],!0,!0);Me&&Me.isNode()?(Me.activate().emit(de("cxttapstart")),r.touchData.start=Me):Se&&Se.isNode()?(Se.activate().emit(de("cxttapstart")),r.touchData.start=Se):B.emit(de("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(R.touches[2])B.boxSelectionEnabled()&&R.preventDefault();else if(!R.touches[1]){if(R.touches[0]){var We=r.findNearestElements(z[0],z[1],!0,!0),je=We[0];if(je!=null&&(je.activate(),r.touchData.start=je,r.touchData.starts=We,r.nodeIsGrabbable(je))){var Nt=r.dragData.touchDragEles=B.collection(),Et=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),je.selected()?(Et=B.$(function(Lt){return Lt.selected()&&r.nodeIsGrabbable(Lt)}),p(Et,{addToList:Nt})):y(je,{addToList:Nt}),d(je),je.emit(de("grabon")),Et?Et.forEach(function(Lt){Lt.emit(de("grab"))}):je.emit(de("grab"))}i(je,["touchstart","tapstart","vmousedown"],R,{x:z[0],y:z[1]}),je==null&&(r.data.bgActivePosistion={x:J[0],y:J[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],R,{x:z[0],y:z[1]})},r.tapholdDuration)}}if(R.touches.length>=1){for(var gr=r.touchData.startPosition=[null,null,null,null,null,null],It=0;It<z.length;It++)gr[It]=H[It]=z[It];var Gt=R.touches[0];r.touchData.startGPosition=[Gt.clientX,Gt.clientY]}}},!1);var ge;r.registerBinding(e,"touchmove",ge=function(R){var B=r.touchData.capture;if(!(!B&&!P(R))){var z=r.selection,H=r.cy,J=r.touchData.now,de=r.touchData.earlier,ne=H.zoom();if(R.touches[0]){var Ee=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);J[0]=Ee[0],J[1]=Ee[1]}if(R.touches[1]){var Ee=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);J[2]=Ee[0],J[3]=Ee[1]}if(R.touches[2]){var Ee=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);J[4]=Ee[0],J[5]=Ee[1]}var me=function(IU){return{originalEvent:R,type:IU,position:{x:J[0],y:J[1]}}},Oe=r.touchData.startGPosition,ze;if(B&&R.touches[0]&&Oe){for(var Me=[],Se=0;Se<J.length;Se++)Me[Se]=J[Se]-de[Se];var We=R.touches[0].clientX-Oe[0],je=We*We,Nt=R.touches[0].clientY-Oe[1],Et=Nt*Nt,gr=je+Et;ze=gr>=r.touchTapThreshold2}if(B&&r.touchData.cxt){R.preventDefault();var It=R.touches[0].clientX-V,Gt=R.touches[0].clientY-W,Lt=R.touches[1].clientX-V,nr=R.touches[1].clientY-W,si=ke(It,Gt,Lt,nr),Ot=si/te,kn=150,Mn=kn*kn,Xa=1.5,cl=Xa*Xa;if(Ot>=cl||si>=Mn){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Yi=me("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(Yi),r.touchData.start=null):H.emit(Yi)}}if(B&&r.touchData.cxt){var Yi=me("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Yi):H.emit(Yi),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Cr=r.findNearestElement(J[0],J[1],!0,!0);(!r.touchData.cxtOver||Cr!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit(me("cxtdragout")),r.touchData.cxtOver=Cr,Cr&&Cr.emit(me("cxtdragover")))}else if(B&&R.touches[2]&&H.boxSelectionEnabled())R.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||H.emit(me("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,z[4]=1,!z||z.length===0||z[0]===void 0?(z[0]=(J[0]+J[2]+J[4])/3,z[1]=(J[1]+J[3]+J[5])/3,z[2]=(J[0]+J[2]+J[4])/3+1,z[3]=(J[1]+J[3]+J[5])/3+1):(z[2]=(J[0]+J[2]+J[4])/3,z[3]=(J[1]+J[3]+J[5])/3),r.redrawHint("select",!0),r.redraw();else if(B&&R.touches[1]&&!r.touchData.didSelect&&H.zoomingEnabled()&&H.panningEnabled()&&H.userZoomingEnabled()&&H.userPanningEnabled()){R.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var hr=r.dragData.touchDragEles;if(hr){r.redrawHint("drag",!0);for(var Ir=0;Ir<hr.length;Ir++){var ms=hr[Ir]._private;ms.grabbed=!1,ms.rscratch.inDragLayer=!1}}var Vr=r.touchData.start,It=R.touches[0].clientX-V,Gt=R.touches[0].clientY-W,Lt=R.touches[1].clientX-V,nr=R.touches[1].clientY-W,QT=be(It,Gt,Lt,nr),bU=QT/Q;if(se){var wU=It-L,EU=Gt-U,SU=Lt-K,_U=nr-Z,TU=(wU+SU)/2,xU=(EU+_U)/2,bs=H.zoom(),xd=bs*bU,dl=H.pan(),JT=re[0]*bs+dl.x,ex=re[1]*bs+dl.y,PU={x:-xd/bs*(JT-dl.x-TU)+JT,y:-xd/bs*(ex-dl.y-xU)+ex};if(Vr&&Vr.active()){var hr=r.dragData.touchDragEles;g(hr),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Vr.unactivate().emit(me("freeon")),hr.emit(me("free")),r.dragData.didDrag&&(Vr.emit(me("dragfreeon")),hr.emit(me("dragfree")))}H.viewport({zoom:xd,pan:PU,cancelOnFailedZoom:!0}),H.emit(me("pinchzoom")),Q=QT,L=It,U=Gt,K=Lt,Z=nr,r.pinching=!0}if(R.touches[0]){var Ee=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);J[0]=Ee[0],J[1]=Ee[1]}if(R.touches[1]){var Ee=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);J[2]=Ee[0],J[3]=Ee[1]}if(R.touches[2]){var Ee=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);J[4]=Ee[0],J[5]=Ee[1]}}else if(R.touches[0]&&!r.touchData.didSelect){var nn=r.touchData.start,Pd=r.touchData.last,Cr;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Cr=r.findNearestElement(J[0],J[1],!0,!0)),B&&nn!=null&&R.preventDefault(),B&&nn!=null&&r.nodeIsDraggable(nn))if(ze){var hr=r.dragData.touchDragEles,tx=!r.dragData.didDrag;tx&&p(hr,{inDragLayer:!0}),r.dragData.didDrag=!0;var ws={x:0,y:0};if(ce(Me[0])&&ce(Me[1])&&(ws.x+=Me[0],ws.y+=Me[1],tx)){r.redrawHint("eles",!0);var an=r.touchData.dragDelta;an&&ce(an[0])&&ce(an[1])&&(ws.x+=an[0],ws.y+=an[1])}r.hoverData.draggingEles=!0,hr.silentShift(ws).emit(me("position")).emit(me("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==de[0]&&r.touchData.startPosition[1]==de[1]&&r.redrawHint("eles",!0),r.redraw()}else{var an=r.touchData.dragDelta=r.touchData.dragDelta||[];an.length===0?(an.push(Me[0]),an.push(Me[1])):(an[0]+=Me[0],an[1]+=Me[1])}if(i(nn||Cr,["touchmove","tapdrag","vmousemove"],R,{x:J[0],y:J[1]}),(!nn||!nn.grabbed())&&Cr!=Pd&&(Pd&&Pd.emit(me("tapdragout")),Cr&&Cr.emit(me("tapdragover"))),r.touchData.last=Cr,B)for(var Ir=0;Ir<J.length;Ir++)J[Ir]&&r.touchData.startPosition[Ir]&&ze&&(r.touchData.singleTouchMoved=!0);if(B&&(nn==null||nn.pannable())&&H.panningEnabled()&&H.userPanningEnabled()){var CU=o(nn,r.touchData.starts);CU&&(R.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=go(r.touchData.startPosition)),r.swipePanning?(H.panBy({x:Me[0]*ne,y:Me[1]*ne}),H.emit(me("dragpan"))):ze&&(r.swipePanning=!0,H.panBy({x:We*ne,y:Nt*ne}),H.emit(me("dragpan")),nn&&(nn.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Ee=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);J[0]=Ee[0],J[1]=Ee[1]}}for(var Se=0;Se<J.length;Se++)de[Se]=J[Se];B&&R.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var Te;r.registerBinding(e,"touchcancel",Te=function(R){var B=r.touchData.start;r.touchData.capture=!1,B&&B.unactivate()});var le,ye,pe,Ce;if(r.registerBinding(e,"touchend",le=function(R){var B=r.touchData.start,z=r.touchData.capture;if(z)R.touches.length===0&&(r.touchData.capture=!1),R.preventDefault();else return;var H=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var J=r.cy,de=J.zoom(),ne=r.touchData.now,Ee=r.touchData.earlier;if(R.touches[0]){var me=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ne[0]=me[0],ne[1]=me[1]}if(R.touches[1]){var me=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);ne[2]=me[0],ne[3]=me[1]}if(R.touches[2]){var me=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);ne[4]=me[0],ne[5]=me[1]}var Oe=function(Mn){return{originalEvent:R,type:Mn,position:{x:ne[0],y:ne[1]}}};B&&B.unactivate();var ze;if(r.touchData.cxt){if(ze=Oe("cxttapend"),B?B.emit(ze):J.emit(ze),!r.touchData.cxtDragged){var Me=Oe("cxttap");B?B.emit(Me):J.emit(Me)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!R.touches[2]&&J.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Se=J.collection(r.getAllInBox(H[0],H[1],H[2],H[3]));H[0]=void 0,H[1]=void 0,H[2]=void 0,H[3]=void 0,H[4]=0,r.redrawHint("select",!0),J.emit(Oe("boxend"));var We=function(Mn){return Mn.selectable()&&!Mn.selected()};Se.emit(Oe("box")).stdFilter(We).select().emit(Oe("boxselect")),Se.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(B?.unactivate(),R.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!R.touches[1]){if(!R.touches[0]){if(!R.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var je=r.dragData.touchDragEles;if(B!=null){var Nt=B._private.grabbed;g(je),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Nt&&(B.emit(Oe("freeon")),je.emit(Oe("free")),r.dragData.didDrag&&(B.emit(Oe("dragfreeon")),je.emit(Oe("dragfree")))),i(B,["touchend","tapend","vmouseup","tapdragout"],R,{x:ne[0],y:ne[1]}),B.unactivate(),r.touchData.start=null}else{var Et=r.findNearestElement(ne[0],ne[1],!0,!0);i(Et,["touchend","tapend","vmouseup","tapdragout"],R,{x:ne[0],y:ne[1]})}var gr=r.touchData.startPosition[0]-ne[0],It=gr*gr,Gt=r.touchData.startPosition[1]-ne[1],Lt=Gt*Gt,nr=It+Lt,si=nr*de*de;r.touchData.singleTouchMoved||(B||J.$(":selected").unselect(["tapunselect"]),i(B,["tap","vclick"],R,{x:ne[0],y:ne[1]}),ye=!1,R.timeStamp-Ce<=J.multiClickDebounceTime()?(pe&&clearTimeout(pe),ye=!0,Ce=null,i(B,["dbltap","vdblclick"],R,{x:ne[0],y:ne[1]})):(pe=setTimeout(function(){ye||i(B,["onetap","voneclick"],R,{x:ne[0],y:ne[1]})},J.multiClickDebounceTime()),Ce=R.timeStamp)),B!=null&&!r.dragData.didDrag&&B._private.selectable&&si<r.touchTapThreshold2&&!r.pinching&&(J.selectionType()==="single"?(J.$(t).unmerge(B).unselect(["tapunselect"]),B.select(["tapselect"])):B.selected()?B.unselect(["tapunselect"]):B.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Ot=0;Ot<ne.length;Ot++)Ee[Ot]=ne[Ot];r.dragData.didDrag=!1,R.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),R.touches.length<2&&(R.touches.length===1&&(r.touchData.startGPosition=[R.touches[0].clientX,R.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var ve=[],De=function(R){return{clientX:R.clientX,clientY:R.clientY,force:1,identifier:R.pointerId,pageX:R.pageX,pageY:R.pageY,radiusX:R.width/2,radiusY:R.height/2,screenX:R.screenX,screenY:R.screenY,target:R.target}},Ne=function(R){return{event:R,touch:De(R)}},Le=function(R){ve.push(Ne(R))},He=function(R){for(var B=0;B<ve.length;B++){var z=ve[B];if(z.event.pointerId===R.pointerId){ve.splice(B,1);return}}},Ge=function(R){var B=ve.filter(function(z){return z.event.pointerId===R.pointerId})[0];B.event=R,B.touch=De(R)},Ie=function(R){R.touches=ve.map(function(B){return B.touch})},ee=function(R){return R.pointerType==="mouse"||R.pointerType===4};r.registerBinding(r.container,"pointerdown",function(N){ee(N)||(N.preventDefault(),Le(N),Ie(N),fe(N))}),r.registerBinding(r.container,"pointerup",function(N){ee(N)||(He(N),Ie(N),le(N))}),r.registerBinding(r.container,"pointercancel",function(N){ee(N)||(He(N),Ie(N),Te(N))}),r.registerBinding(r.container,"pointermove",function(N){ee(N)||(N.preventDefault(),Ge(N),Ie(N),ge(N))})}};var ai={};ai.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,a,o,s,u){this.renderer.nodeShapeImpl("polygon",n,i,a,o,s,this.points)},intersectLine:function(n,i,a,o,s,u,l,c){return du(s,u,this.points,n,i,a/2,o/2,l)},checkPoint:function(n,i,a,o,s,u,l,c){return Qn(n,i,this.points,u,l,o,s,[0,-1],a)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,i,a,o,s,u){return lue(this.points,n,i,a,o,s)}}};ai.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,u){return yue(a,o,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,a,o,s,u){return ua(e,t,i,a,o,s,n)}}};ai.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,a,o,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=a/2,d=o/2;s=s==="auto"?Q4(a,o):s;for(var h=new Array(e.length/2),f=0;f<e.length/2;f++)h[f]={x:n+c*e[f*2],y:i+d*e[f*2+1]};var v,p,y,g,m=h.length;for(p=h[m-1],v=0;v<m;v++)y=h[v%m],g=h[(v+1)%m],u[l][v]=KT(p,y,g,s),p=y,y=g;return u[l]},draw:function(n,i,a,o,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,a,o,s,this.points,this.getOrCreateCorners(i,a,o,s,u,l,"drawCorners"))},intersectLine:function(n,i,a,o,s,u,l,c,d){return bue(s,u,this.points,n,i,a,o,l,this.getOrCreateCorners(n,i,a,o,c,d,"corners"))},checkPoint:function(n,i,a,o,s,u,l,c,d){return gue(n,i,this.points,u,l,o,s,this.getOrCreateCorners(u,l,o,s,c,d,"corners"))}}};ai.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:yr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,u){return X4(a,o,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,a,o,s,u){var l=i/2,c=a/2;u=u==="auto"?$i(i,a):u,u=Math.min(l,c,u);var d=u*2;return!!(Qn(e,t,this.points,o,s,i,a-d,[0,-1],n)||Qn(e,t,this.points,o,s,i-d,a,[0,-1],n)||ua(e,t,d,d,o-l+u,s-c+u,n)||ua(e,t,d,d,o+l-u,s-c+u,n)||ua(e,t,d,d,o+l-u,s+c-u,n)||ua(e,t,d,d,o-l+u,s+c-u,n))}}};ai.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:BT(),points:yr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,null,o)},generateCutTrianglePts:function(e,t,n,i,a){var o=a==="auto"?this.cornerLength:a,s=t/2,u=e/2,l=n-u,c=n+u,d=i-s,h=i+s;return{topLeft:[l,d+o,l+o,d,l+o,d+o],topRight:[c-o,d,c,d+o,c-o,d+o],bottomRight:[c,h-o,c-o,h,c-o,h-o],bottomLeft:[l+o,h,l,h-o,l+o,h-o]}},intersectLine:function(e,t,n,i,a,o,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return du(a,o,c,e,t)},checkPoint:function(e,t,n,i,a,o,s,u){var l=u==="auto"?this.cornerLength:u;if(Qn(e,t,this.points,o,s,i,a-2*l,[0,-1],n)||Qn(e,t,this.points,o,s,i-2*l,a,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,a,o,s);return $r(e,t,c.topLeft)||$r(e,t,c.topRight)||$r(e,t,c.bottomRight)||$r(e,t,c.bottomLeft)}}};ai.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:yr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,u){var l=.15,c=.5,d=.85,h=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),f=function(y){var g=To({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},l),m=To({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},c),b=To({x:y[0],y:y[1]},{x:y[2],y:y[3]},{x:y[4],y:y[5]},d);return[y[0],y[1],g.x,g.y,m.x,m.y,b.x,b.y,y[4],y[5]]},v=[].concat(f(h.topLeft),f(h.topRight),f(h.bottomRight),f(h.bottomLeft));return du(a,o,v,e,t)},generateBarrelBezierPts:function(e,t,n,i){var a=t/2,o=e/2,s=n-o,u=n+o,l=i-a,c=i+a,d=ZS(e,t),h=d.heightOffset,f=d.widthOffset,v=d.ctrlPtOffsetPct*e,p={topLeft:[s,l+h,s+v,l,s+f,l],topRight:[u-f,l,u-v,l,u,l+h],bottomRight:[u,c-h,u-v,c,u-f,c],bottomLeft:[s+f,c,s+v,c,s,c-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,i,a,o,s,u){var l=ZS(i,a),c=l.heightOffset,d=l.widthOffset;if(Qn(e,t,this.points,o,s,i,a-2*c,[0,-1],n)||Qn(e,t,this.points,o,s,i-2*d,a,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(i,a,o,s),f=function(E,x,P){var C=P[4],I=P[2],O=P[0],$=P[5],D=P[1],q=Math.min(C,O),A=Math.max(C,O),k=Math.min($,D),F=Math.max($,D);if(q<=E&&E<=A&&k<=x&&x<=F){var j=wue(C,I,O),M=hue(j[0],j[1],j[2],E),L=M.filter(function(U){return 0<=U&&U<=1});if(L.length>0)return L[0]}return null},v=Object.keys(h),p=0;p<v.length;p++){var y=v[p],g=h[y],m=f(e,t,g);if(m!=null){var b=g[5],w=g[3],S=g[1],T=Kt(b,w,S,m);if(g.isTop&&T<=t||g.isBottom&&t<=T)return!0}}return!1}}};ai.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:yr(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,u){var l=e-(n/2+s),c=t-(i/2+s),d=c,h=e+(n/2+s),f=yi(a,o,e,t,l,c,h,d,!1);return f.length>0?f:X4(a,o,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,a,o,s,u){u=u==="auto"?$i(i,a):u;var l=2*u;if(Qn(e,t,this.points,o,s,i,a-l,[0,-1],n)||Qn(e,t,this.points,o,s,i-l,a,[0,-1],n))return!0;var c=i/2+2*n,d=a/2+2*n,h=[o-c,s-d,o-c,s,o+c,s,o+c,s-d];return!!($r(e,t,h)||ua(e,t,l,l,o+i/2-u,s+a/2-u,n)||ua(e,t,l,l,o-i/2+u,s+a/2-u,n))}}};ai.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",yr(3,0)),this.generateRoundPolygon("round-triangle",yr(3,0)),this.generatePolygon("rectangle",yr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",yr(5,0)),this.generateRoundPolygon("round-pentagon",yr(5,0)),this.generatePolygon("hexagon",yr(6,0)),this.generateRoundPolygon("round-hexagon",yr(6,0)),this.generatePolygon("heptagon",yr(7,0)),this.generateRoundPolygon("round-heptagon",yr(7,0)),this.generatePolygon("octagon",yr(8,0)),this.generateRoundPolygon("round-octagon",yr(8,0));var n=new Array(20);{var i=XS(5,0),a=XS(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[s*2]*=o,a[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=a[s*2],n[s*4+3]=a[s*2+1]}n=Z4(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),d="polygon-"+c,h;return(h=this[d])?h:e.generatePolygon(d,l)}};var ul={};ul.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};ul.redraw=function(r){r=r||G4();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};ul.beforeRender=function(r,e){if(!this.destroyed){e==null&&gt("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var W3=function(e,t,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(t,n)};ul.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){W3(r,!0,i);var a=Zn();r.render(r.renderOptions);var o=r.lastDrawTime=Zn();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-a),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-a;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else W3(r,!1,i);r.skipFrame=!1,vc(t)}};vc(t)}};var Mde=function(e){this.init(e)},QG=Mde,ys=QG.prototype;ys.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];ys.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(o)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=i.createElement("style");l.id=o,l.textContent="."+s+" { position: relative; }",a.insertBefore(l,a.children[0])}var c=n.getComputedStyle(t),d=c.getPropertyValue("position");d==="static"&&et("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=ce(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};ys.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};ys.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};ys.isHeadless=function(){return!1};[UT,XG,ZG,gs,ai,ul].forEach(function(r){Re(ys,r)});var SS=1e3/60,JG={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=nl(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),o=function(l,c){var d=Zn(),h=i.averageRedrawTime,f=i.lastRedrawTime,v=[],p=i.cy.extent(),y=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var g=Zn(),m=g-d,b=g-c;if(f<SS){var w=SS-(l?h:0);if(b>=e.deqFastCost*w)break}else if(l){if(m>=e.deqCost*f||m>=e.deqAvgCost*h)break}else if(b>=e.deqNoDrawCost*SS)break;var S=e.deq(n,y,p);if(S.length>0)for(var T=0;T<S.length;T++)v.push(S[T]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,y,p)&&a())},s=e.priority||DT;i.beforeRender(o,s(n))}}}},Bde=(function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pc;Wi(this,r),this.idsByKey=new zn,this.keyForId=new zn,this.cachesByLvl=new zn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Hi(r,[{key:"getIdsFor",value:function(t){t==null&&gt("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new hs,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);return i!==a}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,a=n.get(t);return a||(a=new zn,n.set(t,a),i.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var a=this.getKey(t);this.setCache(a,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}])})(),H3=25,Dl=50,Ul=-4,c_=3,eU=7.99,Fde=8,Nde=1024,Lde=1024,zde=1024,jde=.2,Vde=.8,Wde=10,Hde=.15,Gde=.1,Ude=.9,Kde=.9,Yde=100,Xde=1,mo={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Zde=cr({getKey:null,doesEleInvalidateKey:pc,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:W4,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ms=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=Zde(t);Re(n,i),n.lookup=new Bde(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},Ht=Ms.prototype;Ht.reasons=mo;Ht.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};Ht.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};Ht.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new il(function(t,n){return n.reqs-t.reqs});return e};Ht.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};Ht.getElement=function(r,e,t,n,i){var a=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!a.allowEdgeTxrCaching&&r.isEdge()||!a.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(qT(s*t))),n<Ul)n=Ul;else if(s>=eU||n>c_)return null;var l=Math.pow(2,n),c=e.h*l,d=e.w*l,h=o.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,h))return null;var f=u.get(r,n);if(f&&f.invalidated&&(f.invalidated=!1,f.texture.invalidatedWidth-=f.width),f)return f;var v;if(c<=H3?v=H3:c<=Dl?v=Dl:v=Math.ceil(c/Dl)*Dl,c>zde||d>Lde)return null;var p=a.getTextureQueue(v),y=p[p.length-2],g=function(){return a.recycleTexture(v,d)||a.addTexture(v,d)};y||(y=p[p.length-1]),y||(y=g()),y.width-y.usedWidth<d&&(y=g());for(var m=function(q){return q&&q.scaledLabelShown===h},b=i&&i===mo.dequeue,w=i&&i===mo.highQuality,S=i&&i===mo.downscale,T,_=n+1;_<=c_;_++){var E=u.get(r,_);if(E){T=E;break}}var x=T&&T.level===n+1?T:null,P=function(){y.context.drawImage(x.texture.canvas,x.x,0,x.width,x.height,y.usedWidth,0,d,c)};if(y.context.setTransform(1,0,0,1,0,0),y.context.clearRect(y.usedWidth,0,d,v),m(x))P();else if(m(T))if(w){for(var C=T.level;C>n;C--)x=a.getElement(r,e,t,C,mo.downscale);P()}else return a.queueElement(r,T.level-1),T;else{var I;if(!b&&!w&&!S)for(var O=n-1;O>=Ul;O--){var $=u.get(r,O);if($){I=$;break}}if(m(I))return a.queueElement(r,n),I;y.context.translate(y.usedWidth,0),y.context.scale(l,l),this.drawElement(y.context,r,e,h,!1),y.context.scale(1/l,1/l),y.context.translate(-y.usedWidth,0)}return f={x:y.usedWidth,texture:y,level:n,scale:l,width:d,height:c,scaledLabelShown:h},y.usedWidth+=Math.ceil(d+Fde),y.eleCaches.push(f),u.set(r,n,f),a.checkTextureFullness(y),f};Ht.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};Ht.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var a=Ul;a<=c_;a++){var o=t.getForCachedKey(r,a);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};Ht.checkTextureUtility=function(r){r.invalidatedWidth>=jde*r.width&&this.retireTexture(r)};Ht.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>Vde&&r.fullnessChecks>=Wde?Ri(t,r):r.fullnessChecks++};Ht.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;Ri(n,r),r.retired=!0;for(var a=r.eleCaches,o=0;o<a.length;o++){var s=a[o];i.deleteCache(s.key,s.level)}AT(a);var u=e.getRetiredTextureQueue(t);u.push(r)};Ht.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(Nde,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Ht.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),a=0;a<i.length;a++){var o=i[a];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,AT(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Ri(i,o),n.push(o),o}};Ht.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),a=this.getKey(r),o=i[a];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:a};n.push(s),i[a]=s}};Ht.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<Xde&&t.size()>0;o++){var s=t.pop(),u=s.key,l=s.eles[0],c=a.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var d=e.getBoundingBox(l);e.getElement(l,d,r,s.level,mo.dequeue)}return i};Ht.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=$T,t.updateItem(a),t.pop(),n[i]=null):a.eles.unmerge(r))};Ht.onDequeue=function(r){this.onDequeues.push(r)};Ht.offDequeue=function(r){Ri(this.onDequeues,r)};Ht.setupDequeueing=JG.setupDequeueing({deqRedrawThreshold:Yde,deqCost:Hde,deqAvgCost:Gde,deqNoDrawCost:Ude,deqFastCost:Kde,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var a=0;a<t.length;a++)for(var o=t[a].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(MT(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Qde=1,Hs=-4,Tc=2,Jde=3.99,ehe=50,the=50,rhe=.15,nhe=.1,ihe=.9,ahe=.9,ohe=1,G3=250,she=4e3*4e3,U3=32767,uhe=!0,tU=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Zn()-2*G3,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=nl(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},the),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=G3?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(s,u){return u.reqs-s.reqs};t.layersQueue=new il(a),t.setupDequeueing()},dr=tU.prototype,K3=0,lhe=Math.pow(2,53)-1;dr.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),a=this.renderer.makeOffscreenCanvas(n,i),o={id:K3=++K3%lhe,bb:r,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(t,t),s.translate(u,l),o};dr.getLayers=function(r,e,t){var n=this,i=n.renderer,a=i.cy,o=a.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(qT(o*e)),t<Hs)t=Hs;else if(o>=Jde||t>Tc)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],d,h=n.levelIsComplete(t,r),f,v=function(){var P=function(D){if(n.validateLayersElesOrdering(D,r),n.levelIsComplete(D,r))return f=u[D],!0},C=function(D){if(!f)for(var q=t+D;Hs<=q&&q<=Tc&&!P(q);q+=D);};C(1),C(-1);for(var I=c.length-1;I>=0;I--){var O=c[I];O.invalid&&Ri(c,O)}};if(!h)v();else return c;var p=function(){if(!d){d=Tr();for(var P=0;P<r.length;P++)oue(d,r[P].boundingBox())}return d},y=function(P){P=P||{};var C=P.after;p();var I=Math.ceil(d.w*l),O=Math.ceil(d.h*l);if(I>U3||O>U3)return null;var $=I*O;if($>she)return null;var D=n.makeLayer(d,t);if(C!=null){var q=c.indexOf(C)+1;c.splice(q,0,D)}else(P.insert===void 0||P.insert)&&c.unshift(D);return D};if(n.skipping&&!s)return null;for(var g=null,m=r.length/Qde,b=!s,w=0;w<r.length;w++){var S=r[w],T=S._private.rscratch,_=T.imgLayerCaches=T.imgLayerCaches||{},E=_[t];if(E){g=E;continue}if((!g||g.eles.length>=m||!Y4(g.bb,S.boundingBox()))&&(g=y({insert:!0,after:g}),!g))return null;f||b?n.queueLayer(g,S):n.drawEleInLayer(g,S,t,e),g.eles.push(S),_[t]=g}return f||(b?null:c)};dr.getEleLevelForLayerLevel=function(r,e){return r};dr.drawEleInLayer=function(r,e,t,n){var i=this,a=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),a.setImgSmoothing(o,!1),a.drawCachedElement(o,e,null,null,t,uhe),a.setImgSmoothing(o,!0))};dr.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var o=n[a];if(o.reqs>0||o.invalid)return!1;i+=o.eles.length}return i===e.length};dr.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}};dr.updateElementsInLayers=function(r,e){for(var t=this,n=Ju(r[0]),i=0;i<r.length;i++)for(var a=n?null:r[i],o=n?r[i]:r[i].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Hs;l<=Tc;l++){var c=u[l];c&&(a&&t.getEleLevelForLayerLevel(c.level)!==a.level||e(c,o,a))}};dr.haveLayers=function(){for(var r=this,e=!1,t=Hs;t<=Tc;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};dr.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Zn(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,a){e.invalidateLayer(n)}))};dr.invalidateLayer=function(r){if(this.lastInvalidationTime=Zn(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];Ri(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var a=t[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};dr.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,a){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};dr.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};dr.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,a=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};dr.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<ohe&&t.size()!==0;){var a=t.peek();if(a.replacement){t.pop();continue}if(a.replaces&&a!==a.replaces.replacement){t.pop();continue}if(a.invalid){t.pop();continue}var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,r),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(t.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};dr.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var a=0;a<r.eles.length;a++){var o=r.eles[a]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};dr.requestRedraw=nl(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);dr.setupDequeueing=JG.setupDequeueing({deqRedrawThreshold:ehe,deqCost:rhe,deqAvgCost:nhe,deqNoDrawCost:ihe,deqFastCost:ahe,deq:function(e,t){return e.dequeue(t)},onDeqd:DT,shouldRedraw:W4,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var rU={},Y3;function che(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function dhe(r,e,t){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),r.lineTo(a.x,a.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function X3(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];r.lineTo(a.x,a.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<o.length;i++){var a=o[i];r.lineTo(a.x,a.y)}r.closePath&&r.closePath()}function hhe(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var a=e,o=a[0];r.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var u=a[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function fhe(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}rU.arrowShapeImpl=function(r){return(Y3||(Y3={polygon:che,"triangle-backcurve":dhe,"triangle-tee":X3,"circle-triangle":hhe,"triangle-cross":X3,circle:fhe}))[r]};var qn={};qn.drawElement=function(r,e,t,n,i,a){var o=this;e.isNode()?o.drawNode(r,e,t,n,i,a):o.drawEdge(r,e,t,n,i,a)};qn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};qn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};qn.drawCachedElementPortion=function(r,e,t,n,i,a,o,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,i,a);if(c!=null){var d=s(u,e);if(d===0)return;var h=o(u,e),f=l.x1,v=l.y1,p=l.w,y=l.h,g,m,b,w,S;if(h!==0){var T=t.getRotationPoint(e);b=T.x,w=T.y,r.translate(b,w),r.rotate(h),S=u.getImgSmoothing(r),S||u.setImgSmoothing(r,!0);var _=t.getRotationOffset(e);g=_.x,m=_.y}else g=f,m=v;var E;d!==1&&(E=r.globalAlpha,r.globalAlpha=E*d),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,g,m,p,y),d!==1&&(r.globalAlpha=E),h!==0&&(r.rotate(-h),r.translate(-b,-w),S||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var vhe=function(){return 0},phe=function(e,t){return e.getTextAngle(t,null)},ghe=function(e,t){return e.getTextAngle(t,"source")},yhe=function(e,t){return e.getTextAngle(t,"target")},mhe=function(e,t){return t.effectiveOpacity()},_S=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};qn.drawCachedElement=function(r,e,t,n,i,a){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,d=s.tlbTxrCache,h=e.boundingBox(),f=a===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||MT(h,n))){var v=e.isEdge(),p=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,u,t,i,f,vhe,mhe),(!v||!p)&&o.drawCachedElementPortion(r,e,l,t,i,f,phe,_S),v&&!p&&(o.drawCachedElementPortion(r,e,c,t,i,f,ghe,_S),o.drawCachedElementPortion(r,e,d,t,i,f,yhe,_S)),o.drawElementOverlay(r,e)}};qn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};qn.drawCachedElements=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];i.drawCachedElement(r,o,t,n)}};qn.drawCachedNodes=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];o.isNode()&&i.drawCachedElement(r,o,t,n)}};qn.drawLayeredElements=function(r,e,t,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,t);if(a)for(var o=0;o<a.length;o++){var s=a[o],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var oi={};oi.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(a&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=a?e.pstyle("opacity").value:1,c=a?e.pstyle("line-opacity").value:1,d=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,f=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,y=e.pstyle("line-outline-color").value,g=l*c,m=l*c,b=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;d==="straight-triangle"?(o.eleStrokeStyle(r,e,D),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=f,r.lineCap=v,o.eleStrokeStyle(r,e,D),o.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},w=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;if(r.lineWidth=f+p,r.lineCap=v,p>0)o.colorStrokeStyle(r,y[0],y[1],y[2],D);else{r.lineCap="butt";return}d==="straight-triangle"?o.drawEdgeTrianglePath(e,r,s.allpts):(o.drawEdgePath(e,r,s.allpts,h),r.lineCap="butt")},S=function(){i&&o.drawEdgeOverlay(r,e)},T=function(){i&&o.drawEdgeUnderlay(r,e)},_=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;o.drawArrowheads(r,e,D)},E=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var x=e.pstyle("ghost").value==="yes";if(x){var P=e.pstyle("ghost-offset-x").pfValue,C=e.pstyle("ghost-offset-y").pfValue,I=e.pstyle("ghost-opacity").value,O=g*I;r.translate(P,C),b(O),_(O),r.translate(-P,-C)}else w();T(),b(),_(),S(),E(),t&&r.translate(u.x1,u.y1)}};var nU=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,o=a.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,c[0],c[1],c[2],i),a.drawEdgePath(n,t,s.allpts,"solid")}}}};oi.drawEdgeOverlay=nU("overlay");oi.drawEdgeUnderlay=nU("underlay");oi.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,a=e,o,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var d=t.join("$"),h=i.pathCacheKey&&i.pathCacheKey===d;h?(o=e=i.pathCache,s=!0):(o=e=new Path2D,i.pathCacheKey=d,i.pathCache=o)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var f=2;f+3<t.length;f+=4)e.quadraticCurveTo(t[f],t[f+1],t[f+2],t[f+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(i.isRound){var p=Ar(i.roundCorners),y;try{for(p.s();!(y=p.n()).done;){var g=y.value;HG(e,g)}}catch(b){p.e(b)}finally{p.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var m=2;m+1<t.length;m+=2)e.lineTo(t[m],t[m+1]);break}e=a,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};oi.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var a=[t[i+2]-t[i],t[i+3]-t[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};oi.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};oi.drawArrowhead=function(r,e,t,n,i,a,o){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,d=e.pstyle("width").pfValue,h=e.pstyle(t+"-arrow-width"),f=h.value==="match-line"?d:h.pfValue;h.units==="%"&&(f*=d);var v=e.pstyle("opacity").value;o===void 0&&(o=v);var p=r.globalCompositeOperation;(o!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,d,u,f,n,i,a),r.globalCompositeOperation=p);var y=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,y[0],y[1],y[2],o),s.colorStrokeStyle(r,y[0],y[1],y[2],o),s.drawArrowShape(e,r,c,d,u,f,n,i,a)}}};oi.drawArrowShape=function(r,e,t,n,i,a,o,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",d=!1,h,f=e,v={x:o,y:s},p=r.pstyle("arrow-scale").value,y=this.getArrowWidth(n,p),g=l.arrowShapes[i];if(c){var m=l.arrowPathCache=l.arrowPathCache||[],b=Ta(i),w=m[b];w!=null?(h=e=w,d=!0):(h=e=new Path2D,m[b]=h)}d||(e.beginPath&&e.beginPath(),c?g.draw(e,1,0,{x:0,y:0},1):g.draw(e,y,u,v,n),e.closePath&&e.closePath()),e=f,c&&(e.translate(o,s),e.rotate(u),e.scale(y,y)),(t==="filled"||t==="both")&&(c?e.fill(h):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=a/(c?y:1),e.lineJoin="miter",c?e.stroke(h):e.stroke()),c&&(e.scale(1/y,1/y),e.rotate(-u),e.translate(-o,-s))};var XT={};XT.safeDrawImage=function(r,e,t,n,i,a,o,s,u,l){if(!(i<=0||a<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,a,o,s,u,l)}catch(c){et(c)}};XT.drawInscribedImage=function(r,e,t,n,i){var a=this,o=t.position(),s=o.x,u=o.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),d=c(t,"background-fit","value",n),h=c(t,"background-repeat","value",n),f=t.width(),v=t.height(),p=t.padding()*2,y=f+(c(t,"background-width-relative-to","value",n)==="inner"?0:p),g=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:p),m=t._private.rscratch,b=c(t,"background-clip","value",n),w=b==="node",S=c(t,"background-image-opacity","value",n)*i,T=c(t,"background-image-smoothing","value",n),_=t.pstyle("corner-radius").value;_!=="auto"&&(_=t.pstyle("corner-radius").pfValue);var E=e.width||e.cachedW,x=e.height||e.cachedH;(E==null||x==null)&&(document.body.appendChild(e),E=e.cachedW=e.width||e.offsetWidth,x=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var P=E,C=x;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?P=c(t,"background-width","pfValue",n)*y:P=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?C=c(t,"background-height","pfValue",n)*g:C=c(t,"background-height","pfValue",n)),!(P===0||C===0)){if(d==="contain"){var I=Math.min(y/P,g/C);P*=I,C*=I}else if(d==="cover"){var I=Math.max(y/P,g/C);P*=I,C*=I}var O=s-y/2,$=c(t,"background-position-x","units",n),D=c(t,"background-position-x","pfValue",n);$==="%"?O+=(y-P)*D:O+=D;var q=c(t,"background-offset-x","units",n),A=c(t,"background-offset-x","pfValue",n);q==="%"?O+=(y-P)*A:O+=A;var k=u-g/2,F=c(t,"background-position-y","units",n),j=c(t,"background-position-y","pfValue",n);F==="%"?k+=(g-C)*j:k+=j;var M=c(t,"background-offset-y","units",n),L=c(t,"background-offset-y","pfValue",n);M==="%"?k+=(g-C)*L:k+=L,m.pathCache&&(O-=s,k-=u,s=0,u=0);var U=r.globalAlpha;r.globalAlpha=S;var K=a.getImgSmoothing(r),Z=!1;if(T==="no"&&K?(a.setImgSmoothing(r,!1),Z=!0):T==="yes"&&!K&&(a.setImgSmoothing(r,!0),Z=!0),h==="no-repeat")w&&(r.save(),m.pathCache?r.clip(m.pathCache):(a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,y,g,_,m),r.clip())),a.safeDrawImage(r,e,0,0,E,x,O,k,P,C),w&&r.restore();else{var Q=r.createPattern(e,h);r.fillStyle=Q,a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,y,g,_,m),r.translate(O,k),r.fill(),r.translate(-O,-k)}r.globalAlpha=U,Z&&a.setImgSmoothing(r,K)}};var Ya={};Ya.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(qT(t*n));e=Math.pow(2,i)}var a=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(a<o)};Ya.drawElementText=function(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(a&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),d=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!c||!c.value)&&(!d||!d.value)&&(!h||!h.value))return;r.textAlign="center",r.textBaseline="bottom"}var f=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),i==null?(o.drawText(r,e,null,f,a),e.isEdge()&&(o.drawText(r,e,"source",f,a),o.drawText(r,e,"target",f,a))):o.drawText(r,e,i,f,a),t&&r.translate(v.x1,v.y1)};Ya.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};Ya.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+i+" "+a,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function bhe(r,e,t,n,i){var a=Math.min(n,i),o=a/2,s=e+n/2,u=t+i/2;r.beginPath(),r.arc(s,u,o,0,Math.PI*2),r.closePath()}function Z3(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=Math.min(a,n/2,i/2);r.beginPath(),r.moveTo(e+o,t),r.lineTo(e+n-o,t),r.quadraticCurveTo(e+n,t,e+n,t+o),r.lineTo(e+n,t+i-o),r.quadraticCurveTo(e+n,t+i,e+n-o,t+i),r.lineTo(e+o,t+i),r.quadraticCurveTo(e,t+i,e,t+i-o),r.lineTo(e,t+o),r.quadraticCurveTo(e,t,e+o,t),r.closePath()}Ya.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,a=e?e+"-":"",o=r.pstyle(a+"text-rotation");if(o.strValue==="autorotate"){var s=Rr(i,"labelAngle",e);t=r.isEdge()?s:0}else o.strValue==="none"?t=0:t=o.pfValue;return t};Ya.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,o=a.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=Rr(o,"labelX",t),l=Rr(o,"labelY",t),c,d,h=this.getLabelText(e,t);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var f=t?t+"-":"",v=Rr(o,"labelWidth",t),p=Rr(o,"labelHeight",t),y=e.pstyle(f+"text-margin-x").pfValue,g=e.pstyle(f+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;m&&(b="center",w="center"),u+=y,l+=g;var S;switch(n?S=this.getTextAngle(e,t):S=0,S!==0&&(c=u,d=l,r.translate(c,d),r.rotate(S),u=0,l=0),w){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var T=e.pstyle("text-background-opacity").value,_=e.pstyle("text-border-opacity").value,E=e.pstyle("text-border-width").pfValue,x=e.pstyle("text-background-padding").pfValue,P=e.pstyle("text-background-shape").strValue,C=P==="round-rectangle"||P==="roundrectangle",I=P==="circle",O=2;if(T>0||E>0&&_>0){var $=r.fillStyle,D=r.strokeStyle,q=r.lineWidth,A=e.pstyle("text-background-color").value,k=e.pstyle("text-border-color").value,F=e.pstyle("text-border-style").value,j=T>0,M=E>0&&_>0,L=u-x;switch(b){case"left":L-=v;break;case"center":L-=v/2;break}var U=l-p-x,K=v+2*x,Z=p+2*x;if(j&&(r.fillStyle="rgba(".concat(A[0],",").concat(A[1],",").concat(A[2],",").concat(T*s,")")),M&&(r.strokeStyle="rgba(".concat(k[0],",").concat(k[1],",").concat(k[2],",").concat(_*s,")"),r.lineWidth=E,r.setLineDash))switch(F){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=E/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(C?(r.beginPath(),Z3(r,L,U,K,Z,O)):I?(r.beginPath(),bhe(r,L,U,K,Z)):(r.beginPath(),r.rect(L,U,K,Z)),j&&r.fill(),M&&r.stroke(),M&&F==="double"){var Q=E/2;r.beginPath(),C?Z3(r,L+Q,U+Q,K-2*Q,Z-2*Q,O):r.rect(L+Q,U+Q,K-2*Q,Z-2*Q),r.stroke()}r.fillStyle=$,r.strokeStyle=D,r.lineWidth=q,r.setLineDash&&r.setLineDash([])}var te=2*e.pstyle("text-outline-width").pfValue;if(te>0&&(r.lineWidth=te),e.pstyle("text-wrap").value==="wrap"){var oe=Rr(o,"labelWrapCachedLines",t),re=Rr(o,"labelLineHeight",t),V=v/2,W=this.getLabelJustification(e);switch(W==="auto"||(b==="left"?W==="left"?u+=-v:W==="center"&&(u+=-V):b==="center"?W==="left"?u+=-V:W==="right"&&(u+=V):b==="right"&&(W==="center"?u+=V:W==="right"&&(u+=v))),w){case"top":l-=(oe.length-1)*re;break;case"center":case"bottom":l-=(oe.length-1)*re;break}for(var G=0;G<oe.length;G++)te>0&&r.strokeText(oe[G],u,l),r.fillText(oe[G],u,l),l+=re}else te>0&&r.strokeText(h,u,l),r.fillText(h,u,l);S!==0&&(r.rotate(-S),r.translate(-c,-d))}}};var Ui={};Ui.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,c=l.rscratch,d=e.position();if(!(!ce(d.x)||!ce(d.y))&&!(a&&!e.visible())){var h=a?e.effectiveOpacity():1,f=o.usePaths(),v,p=!1,y=e.padding();s=e.width()+2*y,u=e.height()+2*y;var g;t&&(g=t,r.translate(-g.x1,-g.y1));for(var m=e.pstyle("background-image"),b=m.value,w=new Array(b.length),S=new Array(b.length),T=0,_=0;_<b.length;_++){var E=b[_],x=w[_]=E!=null&&E!=="none";if(x){var P=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",_);T++,S[_]=o.getCachedImage(E,P,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var C=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,O=e.pstyle("background-opacity").value*h,$=e.pstyle("border-color").value,D=e.pstyle("border-style").value,q=e.pstyle("border-join").value,A=e.pstyle("border-cap").value,k=e.pstyle("border-position").value,F=e.pstyle("border-dash-pattern").pfValue,j=e.pstyle("border-dash-offset").pfValue,M=e.pstyle("border-opacity").value*h,L=e.pstyle("outline-width").pfValue,U=e.pstyle("outline-color").value,K=e.pstyle("outline-style").value,Z=e.pstyle("outline-opacity").value*h,Q=e.pstyle("outline-offset").value,te=e.pstyle("corner-radius").value;te!=="auto"&&(te=e.pstyle("corner-radius").pfValue);var oe=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:O;o.eleFillStyle(r,e,ee)},re=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;o.colorStrokeStyle(r,$[0],$[1],$[2],ee)},V=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z;o.colorStrokeStyle(r,U[0],U[1],U[2],ee)},W=function(ee,N,R,B){var z=o.nodePathCache=o.nodePathCache||[],H=V4(R==="polygon"?R+","+B.join(","):R,""+N,""+ee,""+te),J=z[H],de,ne=!1;return J!=null?(de=J,ne=!0,c.pathCache=de):(de=new Path2D,z[H]=c.pathCache=de),{path:de,cacheHit:ne}},G=e.pstyle("shape").strValue,X=e.pstyle("shape-polygon-points").pfValue;if(f){r.translate(d.x,d.y);var se=W(s,u,G,X);v=se.path,p=se.cacheHit}var be=function(){if(!p){var ee=d;f&&(ee={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(v||r,ee.x,ee.y,s,u,te,c)}f?r.fill(v):r.fill()},ke=function(){for(var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=l.backgrounding,B=0,z=0;z<S.length;z++){var H=e.cy().style().getIndexedStyle(e,"background-image-containment","value",z);if(N&&H==="over"||!N&&H==="inside"){B++;continue}w[z]&&S[z].complete&&!S[z].error&&(B++,o.drawInscribedImage(r,S[z],e,z,ee))}l.backgrounding=B!==T,R!==l.backgrounding&&e.updateStyle(!1)},fe=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;o.hasPie(e)&&(o.drawPie(r,e,N),ee&&(f||o.nodeShapes[o.getNodeShape(e)].draw(r,d.x,d.y,s,u,te,c)))},ge=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;o.hasStripe(e)&&(r.save(),f?r.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(r,d.x,d.y,s,u,te,c),r.clip()),o.drawStripe(r,e,N),r.restore(),ee&&(f||o.nodeShapes[o.getNodeShape(e)].draw(r,d.x,d.y,s,u,te,c)))},Te=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,N=(C>0?C:-C)*ee,R=C>0?0:255;C!==0&&(o.colorFillStyle(r,R,R,R,N),f?r.fill(v):r.fill())},le=function(){if(I>0){if(r.lineWidth=I,r.lineCap=A,r.lineJoin=q,r.setLineDash)switch(D){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(F),r.lineDashOffset=j;break;case"solid":case"double":r.setLineDash([]);break}if(k!=="center"){if(r.save(),r.lineWidth*=2,k==="inside")f?r.clip(v):r.clip();else{var ee=new Path2D;ee.rect(-s/2-I,-u/2-I,s+2*I,u+2*I),ee.addPath(v),r.clip(ee,"evenodd")}f?r.stroke(v):r.stroke(),r.restore()}else f?r.stroke(v):r.stroke();if(D==="double"){r.lineWidth=I/3;var N=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",f?r.stroke(v):r.stroke(),r.globalCompositeOperation=N}r.setLineDash&&r.setLineDash([])}},ye=function(){if(L>0){if(r.lineWidth=L,r.lineCap="butt",r.setLineDash)switch(K){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ee=d;f&&(ee={x:0,y:0});var N=o.getNodeShape(e),R=I;k==="inside"&&(R=0),k==="outside"&&(R*=2);var B=(s+R+(L+Q))/s,z=(u+R+(L+Q))/u,H=s*B,J=u*z,de=o.nodeShapes[N].points,ne;if(f){var Ee=W(H,J,N,de);ne=Ee.path}if(N==="ellipse")o.drawEllipsePath(ne||r,ee.x,ee.y,H,J);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(N)){var me=0,Oe=0,ze=0;N==="round-diamond"?me=(R+Q+L)*1.4:N==="round-heptagon"?(me=(R+Q+L)*1.075,ze=-(R/2+Q+L)/35):N==="round-hexagon"?me=(R+Q+L)*1.12:N==="round-pentagon"?(me=(R+Q+L)*1.13,ze=-(R/2+Q+L)/15):N==="round-tag"?(me=(R+Q+L)*1.12,Oe=(R/2+L+Q)*.07):N==="round-triangle"&&(me=(R+Q+L)*(Math.PI/2),ze=-(R+Q/2+L)/Math.PI),me!==0&&(B=(s+me)/s,H=s*B,["round-hexagon","round-tag"].includes(N)||(z=(u+me)/u,J=u*z)),te=te==="auto"?Q4(H,J):te;for(var Me=H/2,Se=J/2,We=te+(R+L+Q)/2,je=new Array(de.length/2),Nt=new Array(de.length/2),Et=0;Et<de.length/2;Et++)je[Et]={x:ee.x+Oe+Me*de[Et*2],y:ee.y+ze+Se*de[Et*2+1]};var gr,It,Gt,Lt,nr=je.length;for(It=je[nr-1],gr=0;gr<nr;gr++)Gt=je[gr%nr],Lt=je[(gr+1)%nr],Nt[gr]=KT(It,Gt,Lt,We),It=Gt,Gt=Lt;o.drawRoundPolygonPath(ne||r,ee.x+Oe,ee.y+ze,s*B,u*z,de,Nt)}else if(["roundrectangle","round-rectangle"].includes(N))te=te==="auto"?$i(H,J):te,o.drawRoundRectanglePath(ne||r,ee.x,ee.y,H,J,te+(R+L+Q)/2);else if(["cutrectangle","cut-rectangle"].includes(N))te=te==="auto"?BT():te,o.drawCutRectanglePath(ne||r,ee.x,ee.y,H,J,null,te+(R+L+Q)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(N))te=te==="auto"?$i(H,J):te,o.drawBottomRoundRectanglePath(ne||r,ee.x,ee.y,H,J,te+(R+L+Q)/2);else if(N==="barrel")o.drawBarrelPath(ne||r,ee.x,ee.y,H,J);else if(N.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(N)){var si=(R+L+Q)/s;de=gc(yc(de,si)),o.drawPolygonPath(ne||r,ee.x,ee.y,s,u,de)}else{var Ot=(R+L+Q)/s;de=gc(yc(de,-Ot)),o.drawPolygonPath(ne||r,ee.x,ee.y,s,u,de)}if(f?r.stroke(ne):r.stroke(),K==="double"){r.lineWidth=R/3;var kn=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",f?r.stroke(ne):r.stroke(),r.globalCompositeOperation=kn}r.setLineDash&&r.setLineDash([])}},pe=function(){i&&o.drawNodeOverlay(r,e,d,s,u)},Ce=function(){i&&o.drawNodeUnderlay(r,e,d,s,u)},ve=function(){o.drawElementText(r,e,null,n)},De=e.pstyle("ghost").value==="yes";if(De){var Ne=e.pstyle("ghost-offset-x").pfValue,Le=e.pstyle("ghost-offset-y").pfValue,He=e.pstyle("ghost-opacity").value,Ge=He*h;r.translate(Ne,Le),V(),ye(),oe(He*O),be(),ke(Ge,!0),re(He*M),le(),fe(C!==0||I!==0),ge(C!==0||I!==0),ke(Ge,!1),Te(Ge),r.translate(-Ne,-Le)}f&&r.translate(-d.x,-d.y),Ce(),f&&r.translate(d.x,d.y),V(),ye(),oe(),be(),ke(h,!0),re(),le(),fe(C!==0||I!==0),ge(C!==0||I!==0),ke(h,!1),Te(),f&&r.translate(-d.x,-d.y),ve(),pe(),t&&r.translate(g.x1,g.y1)}};var iU=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,a,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,d=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),a==null||o==null){var f=n.padding();a=n.width()+2*f,o=n.height()+2*f}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[d].draw(t,i.x,i.y,a+u*2,o+u*2,h),t.fill()}}}};Ui.drawNodeOverlay=iU("overlay");Ui.drawNodeUnderlay=iU("underlay");Ui.hasPie=function(r){return r=r[0],r._private.hasPie};Ui.hasStripe=function(r){return r=r[0],r._private.hasStripe};Ui.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),d=e.height(),h=Math.min(c,d)/2,f,v=0,p=this.usePaths();if(p&&(u=0,l=0),a.units==="%"?h=h*a.pfValue:a.pfValue!==void 0&&(h=a.pfValue/2),o.units==="%"?f=h*o.pfValue:o.pfValue!==void 0&&(f=o.pfValue/2),!(f>=h))for(var y=1;y<=i.pieBackgroundN;y++){var g=e.pstyle("pie-"+y+"-background-size").value,m=e.pstyle("pie-"+y+"-background-color").value,b=e.pstyle("pie-"+y+"-background-opacity").value*t,w=g/100;w+v>1&&(w=1-v);var S=1.5*Math.PI+2*Math.PI*v;S+=s;var T=2*Math.PI*w,_=S+T;g===0||v>=1||v+w>1||(f===0?(r.beginPath(),r.moveTo(u,l),r.arc(u,l,h,S,_),r.closePath()):(r.beginPath(),r.arc(u,l,h,S,_),r.arc(u,l,f,_,S,!0),r.closePath()),this.colorFillStyle(r,m[0],m[1],m[2],b),r.fill(),v+=w)}};Ui.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=n.x,o=n.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();r.save();var d=e.pstyle("stripe-direction").value,h=e.pstyle("stripe-size");switch(d){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var f=s,v=u;h.units==="%"?(f=f*h.pfValue,v=v*h.pfValue):h.pfValue!==void 0&&(f=h.pfValue,v=h.pfValue),c&&(a=0,o=0),o-=f/2,a-=v/2;for(var p=1;p<=i.stripeBackgroundN;p++){var y=e.pstyle("stripe-"+p+"-background-size").value,g=e.pstyle("stripe-"+p+"-background-color").value,m=e.pstyle("stripe-"+p+"-background-opacity").value*t,b=y/100;b+l>1&&(b=1-l),!(y===0||l>=1||l+b>1)&&(r.beginPath(),r.rect(a,o+v*l,f,v*b),r.closePath(),this.colorFillStyle(r,g[0],g[1],g[2],m),r.fill(),l+=b)}r.restore()};var Pr={},whe=100;Pr.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};Pr.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Pr.createGradientStyleFor=function(r,e,t,n,i){var a,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),d=t.midpoint(),h=xa(l,d),f=xa(c,d);a=r.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(h,f))}else{var v=o?{x:0,y:0}:t.position(),p=t.paddedWidth(),y=t.paddedHeight();a=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(p,y))}else if(t.isEdge()){var g=t.sourceEndpoint(),m=t.targetEndpoint();a=r.createLinearGradient(g.x,g.y,m.x,m.y)}else{var b=o?{x:0,y:0}:t.position(),w=t.paddedWidth(),S=t.paddedHeight(),T=w/2,_=S/2,E=t.pstyle("background-gradient-direction").value;switch(E){case"to-bottom":a=r.createLinearGradient(b.x,b.y-_,b.x,b.y+_);break;case"to-top":a=r.createLinearGradient(b.x,b.y+_,b.x,b.y-_);break;case"to-left":a=r.createLinearGradient(b.x+T,b.y,b.x-T,b.y);break;case"to-right":a=r.createLinearGradient(b.x-T,b.y,b.x+T,b.y);break;case"to-bottom-right":case"to-right-bottom":a=r.createLinearGradient(b.x-T,b.y-_,b.x+T,b.y+_);break;case"to-top-right":case"to-right-top":a=r.createLinearGradient(b.x-T,b.y+_,b.x+T,b.y-_);break;case"to-bottom-left":case"to-left-bottom":a=r.createLinearGradient(b.x+T,b.y-_,b.x-T,b.y+_);break;case"to-top-left":case"to-left-top":a=r.createLinearGradient(b.x+T,b.y+_,b.x-T,b.y-_);break}}if(!a)return null;for(var x=u.length===s.length,P=s.length,C=0;C<P;C++)a.addColorStop(x?u[C]:C/(P-1),"rgba("+s[C][0]+","+s[C][1]+","+s[C][2]+","+i+")");return a};Pr.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};Pr.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};Pr.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};Pr.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};Pr.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};Pr.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};Pr.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=i*o,l=a*o,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var d=t.canvasContainer;d.style.width=i+"px",d.style.height=a+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)c=t.canvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";for(var h=0;h<e.BUFFER_COUNT;h++)c=t.bufferCanvases[h],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";e.textureMult=1,o<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=o}};Pr.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Pr.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};Pr.render=function(r){var e=this;r=r||G4();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,a=r.drawOnlyNodeLayer,o=r.forcedZoom,s=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,d=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,f=e.motionBlurPxRatio,v=t.hasCompoundNodes(),p=e.hoverData.draggingEles,y=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!y;var g=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(g=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!d&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var m=t.style(),b=t.zoom(),w=o!==void 0?o:b,S=t.pan(),T={x:S.x,y:S.y},_={zoom:b,pan:{x:S.x,y:S.y}},E=e.prevViewport,x=E===void 0||_.zoom!==E.zoom||_.pan.x!==E.pan.x||_.pan.y!==E.pan.y;!x&&!(p&&!v)&&(e.motionBlurPxRatio=1),s&&(T=s),w*=u,T.x*=u,T.y*=u;var P=e.getCachedZSortedEles();function C(re,V,W,G,X){var se=re.globalCompositeOperation;re.globalCompositeOperation="destination-out",e.colorFillStyle(re,255,255,255,e.motionBlurTransparency),re.fillRect(V,W,G,X),re.globalCompositeOperation=se}function I(re,V){var W,G,X,se;!e.clearingMotionBlur&&(re===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||re===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(W={x:S.x*f,y:S.y*f},G=b*f,X=e.canvasWidth*f,se=e.canvasHeight*f):(W=T,G=w,X=e.canvasWidth,se=e.canvasHeight),re.setTransform(1,0,0,1,0,0),V==="motionBlur"?C(re,0,0,X,se):!n&&(V===void 0||V)&&re.clearRect(0,0,X,se),i||(re.translate(W.x,W.y),re.scale(G,G)),s&&re.translate(s.x,s.y),o&&re.scale(o,o)}if(d||(e.textureDrawLastFrame=!1),d){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var O=e.data.bufferContexts[e.TEXTURE_BUFFER];O.setTransform(1,0,0,1,0,0),O.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:O,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var _=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};_.mpan={x:(0-_.pan.x)/_.zoom,y:(0-_.pan.y)/_.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var $=l.contexts[e.NODE],D=e.textureCache.texture,_=e.textureCache.viewport;$.setTransform(1,0,0,1,0,0),h?C($,0,0,_.width,_.height):$.clearRect(0,0,_.width,_.height);var q=m.core("outside-texture-bg-color").value,A=m.core("outside-texture-bg-opacity").value;e.colorFillStyle($,q[0],q[1],q[2],A),$.fillRect(0,0,_.width,_.height);var b=t.zoom();I($,!1),$.clearRect(_.mpan.x,_.mpan.y,_.width/_.zoom/u,_.height/_.zoom/u),$.drawImage(D,_.mpan.x,_.mpan.y,_.width/_.zoom/u,_.height/_.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var k=t.extent(),F=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),j=e.hideEdgesOnViewport&&F,M=[];if(M[e.NODE]=!c[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,M[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),M[e.DRAG]=!c[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,M[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||a||M[e.NODE]){var L=h&&!M[e.NODE]&&f!==1,$=n||(L?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),U=h&&!L?"motionBlur":void 0;I($,U),j?e.drawCachedNodes($,P.nondrag,u,k):e.drawLayeredElements($,P.nondrag,u,k),e.debug&&e.drawDebugPoints($,P.nondrag),!i&&!h&&(c[e.NODE]=!1)}if(!a&&(c[e.DRAG]||i||M[e.DRAG])){var L=h&&!M[e.DRAG]&&f!==1,$=n||(L?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);I($,h&&!L?"motionBlur":void 0),j?e.drawCachedNodes($,P.drag,u,k):e.drawCachedElements($,P.drag,u,k),e.debug&&e.drawDebugPoints($,P.drag),!i&&!h&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,I),h&&f!==1){var K=l.contexts[e.NODE],Z=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Q=l.contexts[e.DRAG],te=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],oe=function(V,W,G){V.setTransform(1,0,0,1,0,0),G||!g?V.clearRect(0,0,e.canvasWidth,e.canvasHeight):C(V,0,0,e.canvasWidth,e.canvasHeight);var X=f;V.drawImage(W,0,0,e.canvasWidth*X,e.canvasHeight*X,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||M[e.NODE])&&(oe(K,Z,M[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||M[e.DRAG])&&(oe(Q,te,M[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=_,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!d,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},whe)),n||t.emit("render")};var Os;Pr.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,a=n.style(),o=r.drawOnlyNodeLayer,s=r.drawAllLayers,u=i.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!o&&u[t.SELECT_BOX]&&!s){var c=l||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var d=t.cy.zoom(),h=a.core("selection-box-border-width").value/d;c.lineWidth=h,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),h>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var d=t.cy.zoom(),f=i.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(f.x,f.y,a.core("active-bg-size").pfValue/d,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var p=Math.round(1e3/v),y="1 frame = "+v+" ms = "+p+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Os){var g=c.measureText(y);Os=g.actualBoundingBoxAscent}c.fillText(y,0,Os);var m=60;c.strokeRect(0,Os+10,250,20),c.fillRect(0,Os+10,250*Math.min(p/m,1),20)}s||(u[t.SELECT_BOX]=!1)}};function Q3(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function Ehe(r,e,t){var n=Q3(r,r.VERTEX_SHADER,e),i=Q3(r,r.FRAGMENT_SHADER,t),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,i),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function She(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function ZT(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function _he(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function The(r,e,t,n,i){var a=n*t+e.x,o=i*t+e.y;return o=Math.round(r.canvasHeight-o),[a,o]}function xhe(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function Phe(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Ji(r,e,t){var n=r[0]/255,i=r[1]/255,a=r[2]/255,o=e,s=t||new Array(4);return s[0]=n*o,s[1]=i*o,s[2]=a*o,s[3]=o,s}function ao(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function Che(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function Ihe(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function aU(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function oU(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function Ohe(r,e,t,n,i,a){switch(e){case r.FLOAT:return new Float32Array(t.buffer,a*n,i);case r.INT:return new Int32Array(t.buffer,a*n,i)}}function Rhe(r,e,t,n){var i=aU(r,e),a=$t(i,2),o=a[0],s=a[1],u=oU(r,s,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,o,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,o,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function yn(r,e,t,n){var i=aU(r,t),a=$t(i,3),o=a[0],s=a[1],u=a[2],l=oU(r,s,e*o),c=o*u,d=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,d),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,o,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,o,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var h=new Array(e),f=0;f<e;f++)h[f]=Ohe(r,s,l,c,o,f);return d.dataArray=l,d.stride=c,d.size=o,d.getView=function(v){return h[v]},d.setPoint=function(v,p,y){var g=h[v];g[0]=p,g[1]=y},d.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,d),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*o):r.bufferSubData(r.ARRAY_BUFFER,0,l)},d}function $he(r,e,t){for(var n=9,i=new Float32Array(e*n),a=new Array(e),o=0;o<e;o++){var s=o*n*4;a[o]=new Float32Array(i.buffer,s,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,i.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,36,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(d){return a[d]},u.setData=function(d,h){a[h].set(d,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,i)},u}function Dhe(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var J3=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function TS(){var r=new J3(9);return J3!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function eV(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Ahe(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],h=t[0],f=t[1],v=t[2],p=t[3],y=t[4],g=t[5],m=t[6],b=t[7],w=t[8];return r[0]=h*n+f*o+v*l,r[1]=h*i+f*s+v*c,r[2]=h*a+f*u+v*d,r[3]=p*n+y*o+g*l,r[4]=p*i+y*s+g*c,r[5]=p*a+y*u+g*d,r[6]=m*n+b*o+w*l,r[7]=m*i+b*s+w*c,r[8]=m*a+b*u+w*d,r}function Kl(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],h=t[0],f=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=u,r[6]=h*n+f*o+l,r[7]=h*i+f*s+c,r[8]=h*a+f*u+d,r}function tV(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],h=Math.sin(t),f=Math.cos(t);return r[0]=f*n+h*o,r[1]=f*i+h*s,r[2]=f*a+h*u,r[3]=f*o-h*n,r[4]=f*s-h*i,r[5]=f*u-h*a,r[6]=l,r[7]=c,r[8]=d,r}function d_(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function qhe(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var khe=(function(){function r(e,t,n,i){Wi(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")}return Hi(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,a=this.texHeight,o=this.texSize,s=a/i,u=n*s,l=i*s;return u>o&&(s=o/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(t,n,i){var a=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,d=l.texW,h=l.texH,f=function(b,w){if(i&&w){var S=w.context,T=b.x,_=b.row,E=T,x=u*_;S.save(),S.translate(E,x),S.scale(c,c),i(S,n),S.restore()}},v=[null,null],p=function(){f(a.freePointer,a.canvas),v[0]={x:a.freePointer.x,y:a.freePointer.row*u,w:d,h},v[1]={x:a.freePointer.x+d,y:a.freePointer.row*u,w:0,h},a.freePointer.x+=d,a.freePointer.x==o&&(a.freePointer.x=0,a.freePointer.row++)},y=function(){var b=a.scratch,w=a.canvas;b.clear(),f({x:0,row:0},b);var S=o-a.freePointer.x,T=d-S,_=u;{var E=a.freePointer.x,x=a.freePointer.row*u,P=S;w.context.drawImage(b,0,0,P,_,E,x,P,_),v[0]={x:E,y:x,w:P,h}}{var C=S,I=(a.freePointer.row+1)*u,O=T;w&&w.context.drawImage(b,C,0,O,_,0,I,O,_),v[1]={x:0,y:I,w:O,h}}a.freePointer.x=T,a.freePointer.row++},g=function(){a.freePointer.x=0,a.freePointer.row++};if(this.freePointer.x+d<=o)p();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(g(),p()):this.enableWrapping?y():(g(),p())}return this.keyToLocation.set(t,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,i=this.texRows,a=this.getScale(t),o=a.texW;return this.freePointer.x+o>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=Ihe(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),Mhe=(function(){function r(e,t,n,i){Wi(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Hi(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas;return new khe(t,n,i,a)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas,o=Math.floor(n/i);this.scratch=a(t,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i){var a=this.styleKeyToAtlas.get(t);return a||(a=this.atlases[this.atlases.length-1],(!a||!a.canFit(n))&&(a&&a.lock(),a=this._createAtlas(),this.atlases.push(a)),a.draw(t,n,i),this.styleKeyToAtlas.set(t,a)),a}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var i=[],a=new Map,o=null,s=Ar(this.atlases),u;try{var l=function(){var d=u.value,h=d.getKeys(),f=Bhe(n,h);if(f.size===0)return i.push(d),h.forEach(function(S){return a.set(S,d)}),1;o||(o=t._createAtlas(),i.push(o));var v=Ar(h),p;try{for(v.s();!(p=v.n()).done;){var y=p.value;if(!f.has(y)){var g=d.getOffsets(y),m=$t(g,2),b=m[0],w=m[1];o.canFit({w:b.w+w.w,h:b.h})||(o.lock(),o=t._createAtlas(),i.push(o)),d.canvas&&(t._copyTextureToNewAtlas(y,d,o),a.set(y,o))}}}catch(S){v.e(S)}finally{v.f()}d.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=a,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var a=n.getOffsets(t),o=$t(a,2),s=o[0],u=o[1];if(u.w===0)i.draw(t,s,function(h){h.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,d=s.h;i.draw(t,{w:c,h:d},function(h){h.drawImage(l,0,0,c,d,0,0,c,d)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function Bhe(r,e){return r.intersection?r.intersection(e):new Set(hc(r).filter(function(t){return e.has(t)}))}var Fhe=(function(){function r(e,t){Wi(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Hi(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var i=this.globalOptions,a=i.webglTexSize,o=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(o),l=new Mhe(this.r,a,s,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var a=this.collections.get(i),o=Re({type:t,atlasCollection:a},n);this.renderTypes.set(t,o)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,a=null;return function(o,s,u,l){return l?((!a||s!=n||u!=i)&&(n=s,i=u,a=t(o,s,u)),a):t(o,s,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.forceRedraw,o=a===void 0?!1:a,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,d=!1,h=!1,f=Ar(t),v;try{for(f.s();!(v=f.n()).done;){var p=v.value;if(u(p)){var y=Ar(this.renderTypes.values()),g;try{var m=function(){var w=g.value,S=w.type;if(c(S)){var T=n.collections.get(w.collection),_=w.getKey(p),E=Array.isArray(_)?_:[_];if(o)E.forEach(function(I){return T.markKeyForGC(I)}),h=!0;else{var x=w.getID?w.getID(p):p.id(),P=n._key(S,x),C=n.typeAndIdToKey.get(P);C!==void 0&&!Phe(E,C)&&(d=!0,n.typeAndIdToKey.delete(P),C.forEach(function(I){return T.markKeyForGC(I)}))}}};for(y.s();!(g=y.n()).done;)m()}catch(b){y.e(b)}finally{y.f()}}}}catch(b){f.e(b)}finally{f.f()}return h&&(this.gc(),d=!1),d}},{key:"gc",value:function(){var t=Ar(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.gc()}}catch(a){t.e(a)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,i,a){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),u=!1,l=s.draw(a,i,function(h){o.drawClipped?(h.save(),h.beginPath(),h.rect(0,0,i.w,i.h),h.clip(),o.drawElement(h,t,i,!0,!0),h.restore()):o.drawElement(h,t,i,!0,!0),u=!0});if(u){var c=o.getID?o.getID(t):t.id(),d=this._key(n,c);this.typeAndIdToKey.has(d)?this.typeAndIdToKey.get(d).push(a):this.typeAndIdToKey.set(d,[a])}return l}},{key:"getAtlasInfo",value:function(t,n){var i=this,a=this.renderTypes.get(n),o=a.getKey(t),s=Array.isArray(o)?o:[o];return s.map(function(u){var l=a.getBoundingBox(t,u),c=i.getOrCreateAtlas(t,n,l,u),d=c.getOffsets(u),h=$t(d,2),f=h[0],v=h[1];return{atlas:c,tex:f,tex1:f,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var t=[],n=Ar(this.collections),i;try{for(n.s();!(i=n.n()).done;){var a=$t(i.value,2),o=a[0],s=a[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:o,keyCount:l,atlasCount:c})}}catch(d){n.e(d)}finally{n.f()}return t}}])})(),Nhe=(function(){function r(e){Wi(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Hi(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])})(),Lhe=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,zhe=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,jhe=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,Vhe=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Gs={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},xc={IGNORE:1,USE_BB:2},xS=0,rV=1,nV=2,PS=3,oo=4,Al=5,Rs=6,$s=7,Whe=(function(){function r(e,t,n){Wi(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=She,this.atlasManager=new Fhe(e,n),this.batchManager=new Nhe(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Gs.SCREEN),this.pickingProgram=this._createShaderProgram(Gs.PICKING),this.vao=this._createVAO()}return Hi(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,a=this.atlasManager;return i?a.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):a.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(xS,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(oo," || aVertType == ").concat($s,` 
             || aVertType == `).concat(Al," || aVertType == ").concat(Rs,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(rV,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(nV,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(PS,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),a=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(a.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(Lhe,`
      `).concat(zhe,`
      `).concat(jhe,`
      `).concat(Vhe,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(xS,`) {
          // look up the texel from the texture unit
          `).concat(a.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(PS,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(oo,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(oo," || vVertType == ").concat($s,` 
          || vVertType == `).concat(Al," || vVertType == ").concat(Rs,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(oo,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat($s,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat($s,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=Ehe(n,i,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,i=this.gl,a=this.program,o=i.createVertexArray();return i.bindVertexArray(o),Rhe(i,"vec2",a.aPosition,t),this.transformBuffer=$he(i,n,a.aTransform),this.indexBuffer=yn(i,n,"vec4",a.aIndex),this.vertTypeBuffer=yn(i,n,"int",a.aVertType),this.atlasIdBuffer=yn(i,n,"int",a.aAtlasId),this.texBuffer=yn(i,n,"vec4",a.aTex),this.pointAPointBBuffer=yn(i,n,"vec4",a.aPointAPointB),this.pointCPointDBuffer=yn(i,n,"vec4",a.aPointCPointD),this.lineWidthBuffer=yn(i,n,"vec2",a.aLineWidth),this.colorBuffer=yn(i,n,"vec4",a.aColor),this.cornerRadiusBuffer=yn(i,n,"vec4",a.aCornerRadius),this.borderColorBuffer=yn(i,n,"vec4",a.aBorderColor),i.bindVertexArray(null),o}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return pi(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gs.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,i){var a=this.atlasManager,o=this.batchManager,s=a.getRenderTypeOpts(i);if(this._isVisible(t,s)&&!(t.isEdge()&&!this._isValidEdge(t))){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(t);if(u===xc.IGNORE)return;if(u==xc.USE_BB){this.drawPickingRectangle(t,n,i);return}}var l=a.getAtlasInfo(t,i),c=Ar(l),d;try{for(c.s();!(d=c.n()).done;){var h=d.value,f=h.atlas,v=h.tex1,p=h.tex2;o.canAddToCurrentBatch(f)||this.endBatch();for(var y=o.getAtlasIndexForBatch(f),g=0,m=[[v,!0],[p,!1]];g<m.length;g++){var b=$t(m[g],2),w=b[0],S=b[1];if(w.w!=0){var T=this.instanceCount;this.vertTypeBuffer.getView(T)[0]=xS;var _=this.indexBuffer.getView(T);ao(n,_);var E=this.atlasIdBuffer.getView(T);E[0]=y;var x=this.texBuffer.getView(T);x[0]=w.x,x[1]=w.y,x[2]=w.w,x[3]=w.h;var P=this.transformBuffer.getMatrixView(T);this.setTransformMatrix(t,P,s,h,S),this.instanceCount++,S||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(C){c.e(C)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(t,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=t.pstyle(i.shapeProps.padding).pfValue),a){var u=a.bb,l=a.tex1,c=a.tex2,d=l.w/(l.w+c.w);o||(d=1-d);var h=this._getAdjustedBB(u,s,o,d);this._applyTransformMatrix(n,h,i,t)}else{var f=i.getBoundingBox(t),v=this._getAdjustedBB(f,s,!0,1);this._applyTransformMatrix(n,v,i,t)}}},{key:"_applyTransformMatrix",value:function(t,n,i,a){var o,s;eV(t);var u=i.getRotation?i.getRotation(a):0;if(u!==0){var l=i.getRotationPoint(a),c=l.x,d=l.y;Kl(t,t,[c,d]),tV(t,t,u);var h=i.getRotationOffset(a);o=h.x+(n.xOffset||0),s=h.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Kl(t,t,[o,s]),d_(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,i,a){var o=t.x1,s=t.y1,u=t.w,l=t.h,c=t.yOffset;n&&(o-=n,s-=n,u+=2*n,l+=2*n);var d=0,h=u*a;return i&&a<1?u=h:!i&&a<1&&(d=u-h,o+=d,u=h),{x1:o,y1:s,w:u,h:l,xOffset:d,yOffset:c}}},{key:"drawPickingRectangle",value:function(t,n,i){var a=this.atlasManager.getRenderTypeOpts(i),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=oo;var s=this.indexBuffer.getView(o);ao(n,s);var u=this.colorBuffer.getView(o);Ji([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(t,l,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,i){var a=this.simpleShapeOptions.get(i);if(this._isVisible(t,a)){var o=a.shapeProps,s=this._getVertTypeForShape(t,o.shape);if(s===void 0||a.isSimple&&!a.isSimple(t)){this.drawTexture(t,n,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===Al||s===Rs){var l=a.getBoundingBox(t),c=this._getCornerRadius(t,o.radius,l),d=this.cornerRadiusBuffer.getView(u);d[0]=c,d[1]=c,d[2]=c,d[3]=c,s===Rs&&(d[0]=0,d[2]=0)}var h=this.indexBuffer.getView(u);ao(n,h);var f=t.pstyle(o.color).value,v=t.pstyle(o.opacity).value,p=this.colorBuffer.getView(u);Ji(f,v,p);var y=this.lineWidthBuffer.getView(u);if(y[0]=0,y[1]=0,o.border){var g=t.pstyle("border-width").value;if(g>0){var m=t.pstyle("border-color").value,b=t.pstyle("border-opacity").value,w=this.borderColorBuffer.getView(u);Ji(m,b,w);var S=t.pstyle("border-position").value;if(S==="inside")y[0]=0,y[1]=-g;else if(S==="outside")y[0]=g,y[1]=0;else{var T=g/2;y[0]=T,y[1]=-T}}}var _=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(t,_,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var i=t.pstyle(n).value;switch(i){case"rectangle":return oo;case"ellipse":return $s;case"roundrectangle":case"round-rectangle":return Al;case"bottom-round-rectangle":return Rs;default:return}}},{key:"_getCornerRadius",value:function(t,n,i){var a=i.w,o=i.h;if(t.pstyle(n).value==="auto")return $i(a,o);var s=t.pstyle(n).pfValue,u=a/2,l=o/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(t,n,i){if(t.visible()){var a=t._private.rscratch,o,s,u;if(i==="source"?(o=a.arrowStartX,s=a.arrowStartY,u=a.srcArrowAngle):(o=a.arrowEndX,s=a.arrowEndY,u=a.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=t.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(i+"-arrow-color").value,d=t.pstyle("opacity").value,h=t.pstyle("line-opacity").value,f=d*h,v=t.pstyle("width").pfValue,p=t.pstyle("arrow-scale").value,y=this.r.getArrowWidth(v,p),g=this.instanceCount,m=this.transformBuffer.getMatrixView(g);eV(m),Kl(m,m,[o,s]),d_(m,m,[y,y]),tV(m,m,u),this.vertTypeBuffer.getView(g)[0]=PS;var b=this.indexBuffer.getView(g);ao(n,b);var w=this.colorBuffer.getView(g);Ji(c,f,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var i=this._getEdgePoints(t);if(i){var a=t.pstyle("opacity").value,o=t.pstyle("line-opacity").value,s=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=a*o;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=rV;var d=this.indexBuffer.getView(c);ao(n,d);var h=this.colorBuffer.getView(c);Ji(u,l,h);var f=this.lineWidthBuffer.getView(c);f[0]=s;var v=this.pointAPointBBuffer.getView(c);v[0]=i[0],v[1]=i[1],v[2]=i[2],v[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<i.length-2;p+=2){var y=this.instanceCount;this.vertTypeBuffer.getView(y)[0]=nV;var g=this.indexBuffer.getView(y);ao(n,g);var m=this.colorBuffer.getView(y);Ji(u,l,m);var b=this.lineWidthBuffer.getView(y);b[0]=s;var w=i[p-2],S=i[p-1],T=i[p],_=i[p+1],E=i[p+2],x=i[p+3],P=i[p+4],C=i[p+5];p==0&&(w=2*T-E+.001,S=2*_-x+.001),p==i.length-4&&(P=2*E-T+.001,C=2*x-_+.001);var I=this.pointAPointBBuffer.getView(y);I[0]=w,I[1]=S,I[2]=T,I[3]=_;var O=this.pointCPointDBuffer.getView(y);O[0]=E,O[1]=x,O[2]=P,O[3]=C,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(t){var n=t._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(this._isValidEdge(t)){var i=n.allpts;if(i.length==4)return i;var a=this._getNumSegments(t);return this._getCurveSegmentPoints(i,a)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),a=0;a<=n;a++)if(a==0)i[0]=t[0],i[1]=t[1];else if(a==n)i[a*2]=t[t.length-2],i[a*2+1]=t[t.length-1];else{var o=a/n;this._setCurvePoint(t,o,i,a*2)}return i}},{key:"_setCurvePoint",value:function(t,n,i,a){if(t.length<=2)i[a]=t[0],i[a+1]=t[1];else{for(var o=Array(t.length-2),s=0;s<o.length;s+=2){var u=(1-n)*t[s]+n*t[s+2],l=(1-n)*t[s+1]+n*t[s+3];o[s]=u,o[s+1]=l}return this._setCurvePoint(o,n,i,a)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,a=this.instanceCount;if(a!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(o),t.bindVertexArray(n);var s=Ar(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(a)}}catch(v){s.e(v)}finally{s.f()}for(var c=this.batchManager.getAtlases(),d=0;d<c.length;d++)c[d].bufferIfNeeded(t);for(var h=0;h<c.length;h++)t.activeTexture(t.TEXTURE0+h),t.bindTexture(t.TEXTURE_2D,c[h].texture),t.uniform1i(o.uTextures[h],h);t.uniform1f(o.uZoom,_he(this.r)),t.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var f=Ji(this.bgColor,1);t.uniform4fv(o.uBGColor,f),t.drawArraysInstanced(t.TRIANGLES,0,i,a),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:a,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(o,s){return o+s.atlasCount},0),i=this.batchDebugInfo,a=i.reduce(function(o,s){return o+s.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:a}}}])})(),sU={};sU.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=Hhe(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=Dhe(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new Whe(t,n,r);var i=function(d){return function(h){return t.getTextAngle(h,d)}},a=function(d){return function(h){var f=h.pstyle(d);return f&&f.value}},o=function(d){return function(h){return h.pstyle("".concat(d,"-opacity")).value>0}},s=function(d){var h=d.pstyle("text-events").strValue==="yes";return h?xc.USE_BB:xc.IGNORE},u=function(d){var h=d.position(),f=h.x,v=h.y,p=d.outerWidth(),y=d.outerHeight();return{w:p,h:y,x1:f-p/2,y1:v-y/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:xhe,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:CS(e.getLabelKey,null),getBoundingBox:IS(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:a("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:CS(e.getSourceLabelKey,"source"),getBoundingBox:IS(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:a("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:CS(e.getTargetLabelKey,"target"),getBoundingBox:IS(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:a("target-label")});var l=nl(function(){console.log("garbage collect flag set"),t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(c,d){var h=!1;d&&d.length>0&&(h|=t.drawing.invalidate(d)),h&&l()}),Ghe(t)};function Hhe(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return M4(t)}function uU(r,e){var t=r._private.rscratch;return Rr(t,"labelWrapCachedLines",e)||[]}var CS=function(e,t){return function(n){var i=e(n),a=uU(n,t);return a.length>1?a.map(function(o,s){return"".concat(i,"_").concat(s)}):i}},IS=function(e,t){return function(n,i){var a=e(n);if(typeof i=="string"){var o=i.indexOf("_");if(o>0){var s=Number(i.substring(o+1)),u=uU(n,t),l=a.h/u.length,c=l*s,d=a.y1+c;return{x1:a.x1,w:a.w,y1:d,h:l,yOffset:c}}}return a}};function Ghe(r){{var e=r.render;r.render=function(a){a=a||{};var o=r.cy;r.webgl&&(o.zoom()>eU?(Uhe(r),e.call(r,a)):(Khe(r),cU(r,a,Gs.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(a){t.call(r,a),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(a,o,s,u){return efe(r,a,o)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(a,o){i.call(r,a,o),a==="viewport"||a==="bounds"?r.pickingFrameBuffer.needsDraw=!0:a==="background"&&r.drawing.invalidate(o,{type:"node-body"})}}}function Uhe(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function Khe(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function Yhe(r){var e=r.canvasWidth,t=r.canvasHeight,n=ZT(r),i=n.pan,a=n.zoom,o=TS();Kl(o,o,[i.x,i.y]),d_(o,o,[a,a]);var s=TS();qhe(s,e,t);var u=TS();return Ahe(u,s,o),u}function lU(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=ZT(r),a=i.pan,o=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(a.x,a.y),e.scale(o,o)}function Xhe(r,e){r.drawSelectionRectangle(e,function(t){return lU(r,t)})}function Zhe(r){var e=r.data.contexts[r.NODE];e.save(),lU(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function Qhe(r){var e=function(i,a,o){for(var s=i.atlasManager.getAtlasCollection(a),u=r.data.contexts[r.NODE],l=s.atlases,c=0;c<l.length;c++){var d=l[c],h=d.canvas;if(h){var f=h.width,v=h.height,p=f*c,y=h.height*o,g=.4;u.save(),u.scale(g,g),u.drawImage(h,p,y),u.strokeStyle="black",u.rect(p,y,f,v),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function Jhe(r,e,t,n,i){var a,o,s,u,l=ZT(r),c=l.pan,d=l.zoom;{var h=The(r,c,d,e,t),f=$t(h,2),v=f[0],p=f[1],y=6;a=v-y/2,o=p-y/2,s=y,u=y}if(s===0||u===0)return[];var g=r.data.contexts[r.WEBGL];g.bindFramebuffer(g.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(g.viewport(0,0,g.canvas.width,g.canvas.height),cU(r,null,Gs.PICKING),r.pickingFrameBuffer.needsDraw=!1);var m=s*u,b=new Uint8Array(m*4);g.readPixels(a,o,s,u,g.RGBA,g.UNSIGNED_BYTE,b),g.bindFramebuffer(g.FRAMEBUFFER,null);for(var w=new Set,S=0;S<m;S++){var T=b.slice(S*4,S*4+4),_=Che(T)-1;_>=0&&w.add(_)}return w}function efe(r,e,t){var n=Jhe(r,e,t),i=r.getCachedZSortedEles(),a,o,s=Ar(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!a&&c.isNode()&&(a=c),!o&&c.isEdge()&&(o=c),a&&o)break}}catch(d){s.e(d)}finally{s.f()}return[a,o].filter(Boolean)}function OS(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function cU(r,e,t){var n;r.webglDebug&&(n=performance.now());var i=r.drawing,a=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&Xhe(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var o=r.data.contexts[r.WEBGL];t.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=Yhe(r),u=r.getCachedZSortedEles();if(a=u.length,i.startFrame(s,t),t.screen){for(var l=0;l<u.nondrag.length;l++)OS(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)OS(r,c,u.drag[c])}else if(t.picking)for(var d=0;d<u.length;d++)OS(r,d,u[d]);i.endFrame(),t.screen&&r.webglDebugShowAtlases&&(Zhe(r),Qhe(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var h=performance.now(),f=!1,v=Math.ceil(h-n),p=i.getDebugInfo(),y=["".concat(a," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(f)console.log("WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(y));else{console.log("WebGL (".concat(t.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(y)),console.log("Texture Atlases Used:");var g=p.atlasInfo,m=Ar(g),b;try{for(m.s();!(b=m.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(S){m.e(S)}finally{m.f()}console.log("")}}r.data.gc&&(console.log("Garbage Collect!"),r.data.gc=!1,i.gc())}var Ki={};Ki.drawPolygonPath=function(r,e,t,n,i,a){var o=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*a[0],t+s*a[1]);for(var u=1;u<a.length/2;u++)r.lineTo(e+o*a[u*2],t+s*a[u*2+1]);r.closePath()};Ki.drawRoundPolygonPath=function(r,e,t,n,i,a,o){o.forEach(function(s){return HG(r,s)}),r.closePath()};Ki.drawRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,u=a==="auto"?$i(n,i):Math.min(a,s,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+o,t-s,e+o,t,u),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.arcTo(e-o,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};Ki.drawBottomRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,u=a==="auto"?$i(n,i):a;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+o,t-s),r.lineTo(e+o,t),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.lineTo(e-o,t-s),r.lineTo(e,t-s),r.closePath()};Ki.drawCutRectanglePath=function(r,e,t,n,i,a,o){var s=n/2,u=i/2,l=o==="auto"?BT():o;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};Ki.drawBarrelPath=function(r,e,t,n,i){var a=n/2,o=i/2,s=e-a,u=e+a,l=t-o,c=t+o,d=ZS(n,i),h=d.widthOffset,f=d.heightOffset,v=d.ctrlPtOffsetPct*h;r.beginPath&&r.beginPath(),r.moveTo(s,l+f),r.lineTo(s,c-f),r.quadraticCurveTo(s+v,c,s+h,c),r.lineTo(u-h,c),r.quadraticCurveTo(u-v,c,u,c-f),r.lineTo(u,l+f),r.quadraticCurveTo(u-v,l,u-h,l),r.lineTo(s+h,l),r.quadraticCurveTo(s+v,l,s,l+f),r.closePath()};var iV=Math.sin(0),aV=Math.cos(0),h_={},f_={},dU=Math.PI/40;for(var so=0*Math.PI;so<2*Math.PI;so+=dU)h_[so]=Math.sin(so),f_[so]=Math.cos(so);Ki.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=dU)a=e-s*h_[l]*iV+s*f_[l]*aV,o=t+u*f_[l]*iV+u*h_[l]*aV,l===0?r.moveTo(a,o):r.lineTo(a,o);r.closePath()};var ll={};ll.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};ll.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),a=r.full?Math.ceil(n.w):i[2],o=r.full?Math.ceil(n.h):i[3],s=ce(r.maxWidth)||ce(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)a*=r.scale,o*=r.scale,l=r.scale;else if(s){var c=1/0,d=1/0;ce(r.maxWidth)&&(c=l*r.maxWidth/a),ce(r.maxHeight)&&(d=l*r.maxHeight/o),l=Math.min(c,d),a*=l,o*=l}s||(a*=u,o*=u,l*=u);var h=document.createElement("canvas");h.width=a,h.height=o,h.style.width=a+"px",h.style.height=o+"px";var f=h.getContext("2d");if(a>0&&o>0){f.clearRect(0,0,a,o),f.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)f.translate(-n.x1*l,-n.y1*l),f.scale(l,l),this.drawElements(f,v),f.scale(1/l,1/l),f.translate(n.x1*l,n.y1*l);else{var p=e.pan(),y={x:p.x*l,y:p.y*l};l*=e.zoom(),f.translate(y.x,y.y),f.scale(l,l),this.drawElements(f,v),f.scale(1/l,1/l),f.translate(-y.x,-y.y)}r.bg&&(f.globalCompositeOperation="destination-over",f.fillStyle=r.bg,f.rect(0,0,a,o),f.fill())}return h};function tfe(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([n],{type:e})}function oV(r){var e=r.indexOf(",");return r.substr(e+1)}function hU(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new fs(function(i,a){try{e.toBlob(function(o){o!=null?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){a(o)}});case"blob":return tfe(oV(n()),t);case"base64":return oV(n());case"base64uri":default:return n()}}ll.png=function(r){return hU(r,this.bufferCanvasImage(r),"image/png")};ll.jpg=function(r){return hU(r,this.bufferCanvasImage(r),"image/jpeg")};var fU={};fU.nodeShapeImpl=function(r,e,t,n,i,a,o,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,a);case"polygon":return this.drawPolygonPath(e,t,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,a,s);case"barrel":return this.drawBarrelPath(e,t,n,i,a)}};var rfe=vU,Fe=vU.prototype;Fe.CANVAS_LAYERS=3;Fe.SELECT_BOX=0;Fe.DRAG=1;Fe.NODE=2;Fe.WEBGL=3;Fe.CANVAS_TYPES=["2d","2d","2d","webgl2"];Fe.BUFFER_COUNT=3;Fe.TEXTURE_BUFFER=0;Fe.MOTIONBLUR_BUFFER_NODE=1;Fe.MOTIONBLUR_BUFFER_DRAG=2;function vU(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(Fe.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Fe.CANVAS_LAYERS),contexts:new Array(Fe.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Fe.CANVAS_LAYERS),bufferCanvases:new Array(Fe.BUFFER_COUNT),bufferContexts:new Array(Fe.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=a,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=a;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Koe()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Fe.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),d=Fe.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(d),e.data.contexts[l]||gt("Could not create canvas of type "+d),Object.keys(u).forEach(function(re){c.style[re]=u[re]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(Fe.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Fe.NODE].setAttribute("data-id","layer"+Fe.NODE+"-node"),e.data.canvases[Fe.SELECT_BOX].setAttribute("data-id","layer"+Fe.SELECT_BOX+"-selectbox"),e.data.canvases[Fe.DRAG].setAttribute("data-id","layer"+Fe.DRAG+"-drag"),e.data.canvases[Fe.WEBGL]&&e.data.canvases[Fe.WEBGL].setAttribute("data-id","layer"+Fe.WEBGL+"-webgl");for(var l=0;l<Fe.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=Tr(),f=function(V){return{x:(V.x1+V.x2)/2,y:(V.y1+V.y2)/2}},v=function(V){return{x:-V.w/2,y:-V.h/2}},p=function(V){var W=V[0]._private,G=W.oldBackgroundTimestamp===W.backgroundTimestamp;return!G},y=function(V){return V[0]._private.nodeKey},g=function(V){return V[0]._private.labelStyleKey},m=function(V){return V[0]._private.sourceLabelStyleKey},b=function(V){return V[0]._private.targetLabelStyleKey},w=function(V,W,G,X,se){return e.drawElement(V,W,G,!1,!1,se)},S=function(V,W,G,X,se){return e.drawElementText(V,W,G,X,"main",se)},T=function(V,W,G,X,se){return e.drawElementText(V,W,G,X,"source",se)},_=function(V,W,G,X,se){return e.drawElementText(V,W,G,X,"target",se)},E=function(V){return V.boundingBox(),V[0]._private.bodyBounds},x=function(V){return V.boundingBox(),V[0]._private.labelBounds.main||h},P=function(V){return V.boundingBox(),V[0]._private.labelBounds.source||h},C=function(V){return V.boundingBox(),V[0]._private.labelBounds.target||h},I=function(V,W){return W},O=function(V){return f(E(V))},$=function(V,W,G){var X=V?V+"-":"";return{x:W.x+G.pstyle(X+"text-margin-x").pfValue,y:W.y+G.pstyle(X+"text-margin-y").pfValue}},D=function(V,W,G){var X=V[0]._private.rscratch;return{x:X[W],y:X[G]}},q=function(V){return $("",D(V,"labelX","labelY"),V)},A=function(V){return $("source",D(V,"sourceLabelX","sourceLabelY"),V)},k=function(V){return $("target",D(V,"targetLabelX","targetLabelY"),V)},F=function(V){return v(E(V))},j=function(V){return v(P(V))},M=function(V){return v(C(V))},L=function(V){var W=x(V),G=v(x(V));if(V.isNode()){switch(V.pstyle("text-halign").value){case"left":G.x=-W.w-(W.leftPad||0);break;case"right":G.x=-(W.rightPad||0);break}switch(V.pstyle("text-valign").value){case"top":G.y=-W.h-(W.topPad||0);break;case"bottom":G.y=-(W.botPad||0);break}}return G},U=e.data.eleTxrCache=new Ms(e,{getKey:y,doesEleInvalidateKey:p,drawElement:w,getBoundingBox:E,getRotationPoint:O,getRotationOffset:F,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),K=e.data.lblTxrCache=new Ms(e,{getKey:g,drawElement:S,getBoundingBox:x,getRotationPoint:q,getRotationOffset:L,isVisible:I}),Z=e.data.slbTxrCache=new Ms(e,{getKey:m,drawElement:T,getBoundingBox:P,getRotationPoint:A,getRotationOffset:j,isVisible:I}),Q=e.data.tlbTxrCache=new Ms(e,{getKey:b,drawElement:_,getBoundingBox:C,getRotationPoint:k,getRotationOffset:M,isVisible:I}),te=e.data.lyrTxrCache=new tU(e);e.onUpdateEleCalcs(function(V,W){U.invalidateElements(W),K.invalidateElements(W),Z.invalidateElements(W),Q.invalidateElements(W),te.invalidateElements(W);for(var G=0;G<W.length;G++){var X=W[G]._private;X.oldBackgroundTimestamp=X.backgroundTimestamp}});var oe=function(V){for(var W=0;W<V.length;W++)te.enqueueElementRefinement(V[W].ele)};U.onDequeue(oe),K.onDequeue(oe),Z.onDequeue(oe),Q.onDequeue(oe),r.webgl&&e.initWebgl(r,{getStyleKey:y,getLabelKey:g,getSourceLabelKey:m,getTargetLabelKey:b,drawElement:w,drawLabel:S,drawSourceLabel:T,drawTargetLabel:_,getElementBox:E,getLabelBox:x,getSourceLabelBox:P,getTargetLabelBox:C,getElementRotationPoint:O,getElementRotationOffset:F,getLabelRotationPoint:q,getSourceLabelRotationPoint:A,getTargetLabelRotationPoint:k,getLabelRotationOffset:L,getSourceLabelRotationOffset:j,getTargetLabelRotationOffset:M})}Fe.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Fe.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Fe.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Fe.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var nfe=typeof Path2D<"u";Fe.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Fe.usePaths=function(){return nfe&&this.pathsEnabled};Fe.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Fe.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Fe.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Vt(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[rU,qn,oi,XT,Ya,Ui,Pr,sU,Ki,ll,fU].forEach(function(r){Re(Fe,r)});var ife=[{name:"null",impl:jG},{name:"base",impl:QG},{name:"canvas",impl:rfe}],afe=[{type:"layout",extensions:Rde},{type:"renderer",extensions:ife}],pU={},gU={};function yU(r,e,t){var n=t,i=function(E){et("Can not register `"+e+"` for `"+r+"` since `"+E+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(wc.prototype[e])return i(e);wc.prototype[e]=t}else if(r==="collection"){if(sr.prototype[e])return i(e);sr.prototype[e]=t}else if(r==="layout"){for(var a=function(E){this.options=E,t.call(this,E),Qe(this._private)||(this._private={}),this._private.cy=E.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=t.prototype.stop;o.stop=function(){var _=this.options;if(_&&_.animate){var E=this.animations;if(E)for(var x=0;x<E.length;x++)E[x].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var d=function(E){return E._private.cy},h={addEventFields:function(E,x){x.layout=E,x.cy=d(E),x.target=E},bubble:function(){return!0},parent:function(E){return d(E)}};Re(o,{createEmitter:function(){return this._private.emitter=new yd(h,this),this},emitter:function(){return this._private.emitter},on:function(E,x){return this.emitter().on(E,x),this},one:function(E,x){return this.emitter().one(E,x),this},once:function(E,x){return this.emitter().one(E,x),this},removeListener:function(E,x){return this.emitter().removeListener(E,x),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(E,x){return this.emitter().emit(E,x),this}}),Je.eventAliasesOn(o),n=a}else if(r==="renderer"&&e!=="null"&&e!=="base"){var f=mU("renderer","base"),v=f.prototype,p=t,y=t.prototype,g=function(){f.apply(this,arguments),p.apply(this,arguments)},m=g.prototype;for(var b in v){var w=v[b],S=y[b]!=null;if(S)return i(b);m[b]=w}for(var T in y)m[T]=y[T];v.clientFunctions.forEach(function(_){m[_]=m[_]||function(){gt("Renderer does not implement `renderer."+_+"()` on its prototype")}}),n=g}else if(r==="__proto__"||r==="constructor"||r==="prototype")return gt(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return B4({map:pU,keys:[r,e],value:n})}function mU(r,e){return F4({map:pU,keys:[r,e]})}function ofe(r,e,t,n,i){return B4({map:gU,keys:[r,e,t,n],value:i})}function sfe(r,e,t,n){return F4({map:gU,keys:[r,e,t,n]})}var ufe=function(){if(arguments.length===2)return mU.apply(null,arguments);if(arguments.length===3)return yU.apply(null,arguments);if(arguments.length===4)return sfe.apply(null,arguments);if(arguments.length===5)return ofe.apply(null,arguments);gt("Invalid extension access syntax")};wc.prototype.extension=ufe;afe.forEach(function(r){r.extensions.forEach(function(e){yU(r.type,e.name,e.impl)})});var v_=function(){if(!(this instanceof v_))return new v_;this.length=0},Ia=v_.prototype;Ia.instanceString=function(){return"stylesheet"};Ia.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Ia.css=function(r,e){var t=this.length-1;if(Pe(r))this[t].properties.push({name:r,value:e});else if(Qe(r))for(var n=r,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(s!=null){var u=Yt.properties[o]||Yt.properties[sd(o)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};Ia.style=Ia.css;Ia.generateStyle=function(r){var e=new Yt(r);return this.appendToStyle(e)};Ia.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var a=0;a<i.length;a++){var o=i[a];r.css(o.name,o.value)}}return r};const lfe=r=>{const e=document.getElementById("topicContainer"),t=document.getElementById("subtopicContainer"),n=document.getElementsByClassName("topicText")[0],i=document.getElementById("stps"),a=document.getElementById("stepsAway"),o=document.getElementById("order"),s=document.getElementById("explorationGraph");r.currTopic!==void 0&&(e.style.visibility="visible",i.style.visibility="visible",o.style.visibility="visible"),a.textContent=`${r.currTopic}`,n.textContent=r.topics[r.currTopic].title,n.id=`${r.currTopic}`;{t.innerHTML="";const l=r.topics[r.currTopic];(r.pref==="random"?TK(l.subtopics):l.subtopics).slice(0,r.limit).map(f=>{const v=document.createElement("p");return v.id=f,v.textContent=f,v}).forEach(f=>{t.appendChild(f)})}const u=new we(s,{nodes:r.graph.nodes,edges:r.graph.edges},{nodes:{shape:"dot",size:16},physics:{enabled:!0,barnesHut:{gravitationalConstant:-2e3,centralGravity:.3,springLength:95}},interaction:{hover:!0}});u.on("beforeDrawing",l=>{const c=l.canvas.width,d=l.canvas.height;l.fillStyle="#ffffff",l.fillRect(0,0,c,d)}),u.on("stabilizationIterationsDone",function(){u.fit()})},cfe=document.getElementById("inputTopic");document.getElementsByClassName("topicText")[0];const dfe=document.getElementById("btnExploreTopic"),hfe=bK(NK,FK,MK,BK,kK,qK),ffe=hfe.pipe(SK((r,e)=>e.apply(r),xK));ffe.subscribe(r=>lfe(r));Xn(dfe,"click").subscribe(r=>{cfe.value=""});const vfe=()=>{const e=document.getElementById("explorationGraph")?.getElementsByTagName("canvas")[0];if(e){const t=e.toDataURL("image/png"),n=document.createElement("a");n.href=t,n.download="wiki-exploration-graph.png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else console.error("Canvas not found.")};document.getElementById("btnDownload")?.addEventListener("click",vfe);
